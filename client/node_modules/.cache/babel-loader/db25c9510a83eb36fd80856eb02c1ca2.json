{"ast":null,"code":"var _assertThisInitialized = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/assertThisInitialized\");\nvar _construct = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/construct\");\nvar _get = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/get\");\nvar _toArray = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/toArray\");\nvar _toConsumableArray = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/toConsumableArray\");\nvar _possibleConstructorReturn = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/possibleConstructorReturn\");\nvar _getPrototypeOf = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/getPrototypeOf\");\nvar _inherits = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\nvar _wrapNativeSuper = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/wrapNativeSuper\");\nvar _slicedToArray = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/slicedToArray\");\nvar _classCallCheck = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\nvar _createClass = require(\"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e256) { throw _e256; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e257) { didErr = true; err = _e257; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nvar mapboxgl = function () {\n  \"use strict\";\n\n  var t = e;\n  function e(t, e, r, n) {\n    this.cx = 3 * t, this.bx = 3 * (r - t) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e, this.by = 3 * (n - e) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t, this.p1y = e, this.p2x = r, this.p2y = n;\n  }\n  e.prototype = {\n    sampleCurveX: function sampleCurveX(t) {\n      return ((this.ax * t + this.bx) * t + this.cx) * t;\n    },\n    sampleCurveY: function sampleCurveY(t) {\n      return ((this.ay * t + this.by) * t + this.cy) * t;\n    },\n    sampleCurveDerivativeX: function sampleCurveDerivativeX(t) {\n      return (3 * this.ax * t + 2 * this.bx) * t + this.cx;\n    },\n    solveCurveX: function solveCurveX(t, e) {\n      if (void 0 === e && (e = 1e-6), t < 0) return 0;\n      if (t > 1) return 1;\n      for (var r = t, n = 0; n < 8; n++) {\n        var i = this.sampleCurveX(r) - t;\n        if (Math.abs(i) < e) return r;\n        var s = this.sampleCurveDerivativeX(r);\n        if (Math.abs(s) < 1e-6) break;\n        r -= i / s;\n      }\n      var a = 0,\n        o = 1;\n      for (r = t, n = 0; n < 20 && (i = this.sampleCurveX(r), !(Math.abs(i - t) < e)); n++) t > i ? a = r : o = r, r = .5 * (o - a) + a;\n      return r;\n    },\n    solve: function solve(t, e) {\n      return this.sampleCurveY(this.solveCurveX(t, e));\n    }\n  };\n  var r = n;\n  function n(t, e) {\n    this.x = t, this.y = e;\n  }\n  n.prototype = {\n    clone: function clone() {\n      return new n(this.x, this.y);\n    },\n    add: function add(t) {\n      return this.clone()._add(t);\n    },\n    sub: function sub(t) {\n      return this.clone()._sub(t);\n    },\n    multByPoint: function multByPoint(t) {\n      return this.clone()._multByPoint(t);\n    },\n    divByPoint: function divByPoint(t) {\n      return this.clone()._divByPoint(t);\n    },\n    mult: function mult(t) {\n      return this.clone()._mult(t);\n    },\n    div: function div(t) {\n      return this.clone()._div(t);\n    },\n    rotate: function rotate(t) {\n      return this.clone()._rotate(t);\n    },\n    rotateAround: function rotateAround(t, e) {\n      return this.clone()._rotateAround(t, e);\n    },\n    matMult: function matMult(t) {\n      return this.clone()._matMult(t);\n    },\n    unit: function unit() {\n      return this.clone()._unit();\n    },\n    perp: function perp() {\n      return this.clone()._perp();\n    },\n    round: function round() {\n      return this.clone()._round();\n    },\n    mag: function mag() {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    equals: function equals(t) {\n      return this.x === t.x && this.y === t.y;\n    },\n    dist: function dist(t) {\n      return Math.sqrt(this.distSqr(t));\n    },\n    distSqr: function distSqr(t) {\n      var e = t.x - this.x,\n        r = t.y - this.y;\n      return e * e + r * r;\n    },\n    angle: function angle() {\n      return Math.atan2(this.y, this.x);\n    },\n    angleTo: function angleTo(t) {\n      return Math.atan2(this.y - t.y, this.x - t.x);\n    },\n    angleWith: function angleWith(t) {\n      return this.angleWithSep(t.x, t.y);\n    },\n    angleWithSep: function angleWithSep(t, e) {\n      return Math.atan2(this.x * e - this.y * t, this.x * t + this.y * e);\n    },\n    _matMult: function _matMult(t) {\n      var e = t[2] * this.x + t[3] * this.y;\n      return this.x = t[0] * this.x + t[1] * this.y, this.y = e, this;\n    },\n    _add: function _add(t) {\n      return this.x += t.x, this.y += t.y, this;\n    },\n    _sub: function _sub(t) {\n      return this.x -= t.x, this.y -= t.y, this;\n    },\n    _mult: function _mult(t) {\n      return this.x *= t, this.y *= t, this;\n    },\n    _div: function _div(t) {\n      return this.x /= t, this.y /= t, this;\n    },\n    _multByPoint: function _multByPoint(t) {\n      return this.x *= t.x, this.y *= t.y, this;\n    },\n    _divByPoint: function _divByPoint(t) {\n      return this.x /= t.x, this.y /= t.y, this;\n    },\n    _unit: function _unit() {\n      return this._div(this.mag()), this;\n    },\n    _perp: function _perp() {\n      var t = this.y;\n      return this.y = this.x, this.x = -t, this;\n    },\n    _rotate: function _rotate(t) {\n      var e = Math.cos(t),\n        r = Math.sin(t),\n        n = r * this.x + e * this.y;\n      return this.x = e * this.x - r * this.y, this.y = n, this;\n    },\n    _rotateAround: function _rotateAround(t, e) {\n      var r = Math.cos(t),\n        n = Math.sin(t),\n        i = e.y + n * (this.x - e.x) + r * (this.y - e.y);\n      return this.x = e.x + r * (this.x - e.x) - n * (this.y - e.y), this.y = i, this;\n    },\n    _round: function _round() {\n      return this.x = Math.round(this.x), this.y = Math.round(this.y), this;\n    }\n  }, n.convert = function (t) {\n    return t instanceof n ? t : Array.isArray(t) ? new n(t[0], t[1]) : t;\n  };\n  var i = \"undefined\" != typeof self ? self : {};\n  var s = Math.PI / 180,\n    a = 180 / Math.PI;\n  function o(t) {\n    return t * s;\n  }\n  function l(t) {\n    return t * a;\n  }\n  function u(t, e, r) {\n    return Math.min(r, Math.max(e, t));\n  }\n  function c(t, e, r) {\n    var n = r - e,\n      i = ((t - e) % n + n) % n + e;\n    return i === e ? r : i;\n  }\n  function h(t) {\n    var e = [];\n    for (var _r2 in t) e.push(t[_r2]);\n    return e;\n  }\n  function p(t) {\n    for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      e[_key - 1] = arguments[_key];\n    }\n    for (var _i2 = 0, _e2 = e; _i2 < _e2.length; _i2++) {\n      var _r3 = _e2[_i2];\n      for (var _e3 in _r3) t[_e3] = _r3[_e3];\n    }\n    return t;\n  }\n  new t(.25, .1, .25, 1);\n  var d = 1;\n  function f() {\n    return function t(e) {\n      return e ? (e ^ Math.random() * (16 >> e / 4)).toString(16) : ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, t);\n    }();\n  }\n  function y(t) {\n    return !!t && /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);\n  }\n  function m(t, e) {\n    t.forEach(function (t) {\n      e[t] && (e[t] = e[t].bind(e));\n    });\n  }\n  function g(t, e) {\n    return -1 !== t.indexOf(e, t.length - e.length);\n  }\n  function x(t, e, r) {\n    var n = {};\n    for (var _i3 in t) n[_i3] = e.call(r || this, t[_i3], _i3, t);\n    return n;\n  }\n  function v(t) {\n    return Array.isArray(t) ? t.map(v) : \"object\" == typeof t && t ? x(t, v) : t;\n  }\n  var b = {};\n  function w(t) {\n    b[t] || (\"undefined\" != typeof console && console.warn(t), b[t] = !0);\n  }\n  function _(t, e, r) {\n    return (r.y - t.y) * (e.x - t.x) > (e.y - t.y) * (r.x - t.x);\n  }\n  function S(t) {\n    var e = 0;\n    for (var _r4, _n2, _i4 = 0, _s2 = t.length, _a2 = _s2 - 1; _i4 < _s2; _a2 = _i4++) _r4 = t[_i4], _n2 = t[_a2], e += (_n2.x - _r4.x) * (_r4.y + _n2.y);\n    return e;\n  }\n  function A() {\n    return \"undefined\" != typeof WorkerGlobalScope && \"undefined\" != typeof self && self instanceof WorkerGlobalScope;\n  }\n  function k(t) {\n    var e = {};\n    if (t.replace(/(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g, function (t, r, n, i) {\n      var s = n || i;\n      return e[r] = !s || s.toLowerCase(), \"\";\n    }), e[\"max-age\"]) {\n      var _t2 = parseInt(e[\"max-age\"], 10);\n      isNaN(_t2) ? delete e[\"max-age\"] : e[\"max-age\"] = _t2;\n    }\n    return e;\n  }\n  var I = null;\n  function M(t) {\n    if (null == I) {\n      var _e4 = t.navigator ? t.navigator.userAgent : null;\n      I = !!t.safari || !(!_e4 || !(/\\b(iPad|iPhone|iPod)\\b/.test(_e4) || _e4.match(\"Safari\") && !_e4.match(\"Chrome\")));\n    }\n    return I;\n  }\n  function P(t) {\n    try {\n      var _e5 = i[t];\n      return _e5.setItem(\"_mapbox_test_\", 1), _e5.removeItem(\"_mapbox_test_\"), !0;\n    } catch (t) {\n      return !1;\n    }\n  }\n  function T(t, e) {\n    return [t[4 * e], t[4 * e + 1], t[4 * e + 2], t[4 * e + 3]];\n  }\n  var C = E;\n  function E(t, e, r) {\n    var n = this.cells = [];\n    if (t instanceof ArrayBuffer) {\n      this.arrayBuffer = t;\n      var i = new Int32Array(this.arrayBuffer);\n      t = i[0], this.d = (e = i[1]) + 2 * (r = i[2]);\n      for (var s = 0; s < this.d * this.d; s++) {\n        var a = i[3 + s],\n          o = i[3 + s + 1];\n        n.push(a === o ? null : i.subarray(a, o));\n      }\n      var l = i[3 + n.length + 1];\n      this.keys = i.subarray(i[3 + n.length], l), this.bboxes = i.subarray(l), this.insert = this._insertReadonly;\n    } else {\n      this.d = e + 2 * r;\n      for (var u = 0; u < this.d * this.d; u++) n.push([]);\n      this.keys = [], this.bboxes = [];\n    }\n    this.n = e, this.extent = t, this.padding = r, this.scale = e / t, this.uid = 0;\n    var c = r / e * t;\n    this.min = -c, this.max = t + c;\n  }\n  E.prototype.insert = function (t, e, r, n, i) {\n    this._forEachCell(e, r, n, i, this._insertCell, this.uid++), this.keys.push(t), this.bboxes.push(e), this.bboxes.push(r), this.bboxes.push(n), this.bboxes.push(i);\n  }, E.prototype._insertReadonly = function () {\n    throw \"Cannot insert into a GridIndex created from an ArrayBuffer.\";\n  }, E.prototype._insertCell = function (t, e, r, n, i, s) {\n    this.cells[i].push(s);\n  }, E.prototype.query = function (t, e, r, n, i) {\n    var s = this.min,\n      a = this.max;\n    if (t <= s && e <= s && a <= r && a <= n && !i) return Array.prototype.slice.call(this.keys);\n    var o = [];\n    return this._forEachCell(t, e, r, n, this._queryCell, o, {}, i), o;\n  }, E.prototype._queryCell = function (t, e, r, n, i, s, a, o) {\n    var l = this.cells[i];\n    if (null !== l) for (var u = this.keys, c = this.bboxes, h = 0; h < l.length; h++) {\n      var p = l[h];\n      if (void 0 === a[p]) {\n        var d = 4 * p;\n        (o ? o(c[d + 0], c[d + 1], c[d + 2], c[d + 3]) : t <= c[d + 2] && e <= c[d + 3] && r >= c[d + 0] && n >= c[d + 1]) ? (a[p] = !0, s.push(u[p])) : a[p] = !1;\n      }\n    }\n  }, E.prototype._forEachCell = function (t, e, r, n, i, s, a, o) {\n    for (var l = this._convertToCellCoord(t), u = this._convertToCellCoord(e), c = this._convertToCellCoord(r), h = this._convertToCellCoord(n), p = l; p <= c; p++) for (var d = u; d <= h; d++) {\n      var f = this.d * d + p;\n      if ((!o || o(this._convertFromCellCoord(p), this._convertFromCellCoord(d), this._convertFromCellCoord(p + 1), this._convertFromCellCoord(d + 1))) && i.call(this, t, e, r, n, f, s, a, o)) return;\n    }\n  }, E.prototype._convertFromCellCoord = function (t) {\n    return (t - this.padding) / this.scale;\n  }, E.prototype._convertToCellCoord = function (t) {\n    return Math.max(0, Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding));\n  }, E.prototype.toArrayBuffer = function () {\n    if (this.arrayBuffer) return this.arrayBuffer;\n    for (var t = this.cells, e = 3 + this.cells.length + 1 + 1, r = 0, n = 0; n < this.cells.length; n++) r += this.cells[n].length;\n    var i = new Int32Array(e + r + this.keys.length + this.bboxes.length);\n    i[0] = this.extent, i[1] = this.n, i[2] = this.padding;\n    for (var s = e, a = 0; a < t.length; a++) {\n      var o = t[a];\n      i[3 + a] = s, i.set(o, s), s += o.length;\n    }\n    return i[3 + t.length] = s, i.set(this.keys, s), i[3 + t.length + 1] = s += this.keys.length, i.set(this.bboxes, s), s += this.bboxes.length, i.buffer;\n  };\n  var D,\n    z = {\n      transparent: [0, 0, 0, 0],\n      aliceblue: [240, 248, 255, 1],\n      antiquewhite: [250, 235, 215, 1],\n      aqua: [0, 255, 255, 1],\n      aquamarine: [127, 255, 212, 1],\n      azure: [240, 255, 255, 1],\n      beige: [245, 245, 220, 1],\n      bisque: [255, 228, 196, 1],\n      black: [0, 0, 0, 1],\n      blanchedalmond: [255, 235, 205, 1],\n      blue: [0, 0, 255, 1],\n      blueviolet: [138, 43, 226, 1],\n      brown: [165, 42, 42, 1],\n      burlywood: [222, 184, 135, 1],\n      cadetblue: [95, 158, 160, 1],\n      chartreuse: [127, 255, 0, 1],\n      chocolate: [210, 105, 30, 1],\n      coral: [255, 127, 80, 1],\n      cornflowerblue: [100, 149, 237, 1],\n      cornsilk: [255, 248, 220, 1],\n      crimson: [220, 20, 60, 1],\n      cyan: [0, 255, 255, 1],\n      darkblue: [0, 0, 139, 1],\n      darkcyan: [0, 139, 139, 1],\n      darkgoldenrod: [184, 134, 11, 1],\n      darkgray: [169, 169, 169, 1],\n      darkgreen: [0, 100, 0, 1],\n      darkgrey: [169, 169, 169, 1],\n      darkkhaki: [189, 183, 107, 1],\n      darkmagenta: [139, 0, 139, 1],\n      darkolivegreen: [85, 107, 47, 1],\n      darkorange: [255, 140, 0, 1],\n      darkorchid: [153, 50, 204, 1],\n      darkred: [139, 0, 0, 1],\n      darksalmon: [233, 150, 122, 1],\n      darkseagreen: [143, 188, 143, 1],\n      darkslateblue: [72, 61, 139, 1],\n      darkslategray: [47, 79, 79, 1],\n      darkslategrey: [47, 79, 79, 1],\n      darkturquoise: [0, 206, 209, 1],\n      darkviolet: [148, 0, 211, 1],\n      deeppink: [255, 20, 147, 1],\n      deepskyblue: [0, 191, 255, 1],\n      dimgray: [105, 105, 105, 1],\n      dimgrey: [105, 105, 105, 1],\n      dodgerblue: [30, 144, 255, 1],\n      firebrick: [178, 34, 34, 1],\n      floralwhite: [255, 250, 240, 1],\n      forestgreen: [34, 139, 34, 1],\n      fuchsia: [255, 0, 255, 1],\n      gainsboro: [220, 220, 220, 1],\n      ghostwhite: [248, 248, 255, 1],\n      gold: [255, 215, 0, 1],\n      goldenrod: [218, 165, 32, 1],\n      gray: [128, 128, 128, 1],\n      green: [0, 128, 0, 1],\n      greenyellow: [173, 255, 47, 1],\n      grey: [128, 128, 128, 1],\n      honeydew: [240, 255, 240, 1],\n      hotpink: [255, 105, 180, 1],\n      indianred: [205, 92, 92, 1],\n      indigo: [75, 0, 130, 1],\n      ivory: [255, 255, 240, 1],\n      khaki: [240, 230, 140, 1],\n      lavender: [230, 230, 250, 1],\n      lavenderblush: [255, 240, 245, 1],\n      lawngreen: [124, 252, 0, 1],\n      lemonchiffon: [255, 250, 205, 1],\n      lightblue: [173, 216, 230, 1],\n      lightcoral: [240, 128, 128, 1],\n      lightcyan: [224, 255, 255, 1],\n      lightgoldenrodyellow: [250, 250, 210, 1],\n      lightgray: [211, 211, 211, 1],\n      lightgreen: [144, 238, 144, 1],\n      lightgrey: [211, 211, 211, 1],\n      lightpink: [255, 182, 193, 1],\n      lightsalmon: [255, 160, 122, 1],\n      lightseagreen: [32, 178, 170, 1],\n      lightskyblue: [135, 206, 250, 1],\n      lightslategray: [119, 136, 153, 1],\n      lightslategrey: [119, 136, 153, 1],\n      lightsteelblue: [176, 196, 222, 1],\n      lightyellow: [255, 255, 224, 1],\n      lime: [0, 255, 0, 1],\n      limegreen: [50, 205, 50, 1],\n      linen: [250, 240, 230, 1],\n      magenta: [255, 0, 255, 1],\n      maroon: [128, 0, 0, 1],\n      mediumaquamarine: [102, 205, 170, 1],\n      mediumblue: [0, 0, 205, 1],\n      mediumorchid: [186, 85, 211, 1],\n      mediumpurple: [147, 112, 219, 1],\n      mediumseagreen: [60, 179, 113, 1],\n      mediumslateblue: [123, 104, 238, 1],\n      mediumspringgreen: [0, 250, 154, 1],\n      mediumturquoise: [72, 209, 204, 1],\n      mediumvioletred: [199, 21, 133, 1],\n      midnightblue: [25, 25, 112, 1],\n      mintcream: [245, 255, 250, 1],\n      mistyrose: [255, 228, 225, 1],\n      moccasin: [255, 228, 181, 1],\n      navajowhite: [255, 222, 173, 1],\n      navy: [0, 0, 128, 1],\n      oldlace: [253, 245, 230, 1],\n      olive: [128, 128, 0, 1],\n      olivedrab: [107, 142, 35, 1],\n      orange: [255, 165, 0, 1],\n      orangered: [255, 69, 0, 1],\n      orchid: [218, 112, 214, 1],\n      palegoldenrod: [238, 232, 170, 1],\n      palegreen: [152, 251, 152, 1],\n      paleturquoise: [175, 238, 238, 1],\n      palevioletred: [219, 112, 147, 1],\n      papayawhip: [255, 239, 213, 1],\n      peachpuff: [255, 218, 185, 1],\n      peru: [205, 133, 63, 1],\n      pink: [255, 192, 203, 1],\n      plum: [221, 160, 221, 1],\n      powderblue: [176, 224, 230, 1],\n      purple: [128, 0, 128, 1],\n      rebeccapurple: [102, 51, 153, 1],\n      red: [255, 0, 0, 1],\n      rosybrown: [188, 143, 143, 1],\n      royalblue: [65, 105, 225, 1],\n      saddlebrown: [139, 69, 19, 1],\n      salmon: [250, 128, 114, 1],\n      sandybrown: [244, 164, 96, 1],\n      seagreen: [46, 139, 87, 1],\n      seashell: [255, 245, 238, 1],\n      sienna: [160, 82, 45, 1],\n      silver: [192, 192, 192, 1],\n      skyblue: [135, 206, 235, 1],\n      slateblue: [106, 90, 205, 1],\n      slategray: [112, 128, 144, 1],\n      slategrey: [112, 128, 144, 1],\n      snow: [255, 250, 250, 1],\n      springgreen: [0, 255, 127, 1],\n      steelblue: [70, 130, 180, 1],\n      tan: [210, 180, 140, 1],\n      teal: [0, 128, 128, 1],\n      thistle: [216, 191, 216, 1],\n      tomato: [255, 99, 71, 1],\n      turquoise: [64, 224, 208, 1],\n      violet: [238, 130, 238, 1],\n      wheat: [245, 222, 179, 1],\n      white: [255, 255, 255, 1],\n      whitesmoke: [245, 245, 245, 1],\n      yellow: [255, 255, 0, 1],\n      yellowgreen: [154, 205, 50, 1]\n    };\n  function B(t) {\n    return (t = Math.round(t)) < 0 ? 0 : t > 255 ? 255 : t;\n  }\n  function L(t) {\n    return B(\"%\" === t[t.length - 1] ? parseFloat(t) / 100 * 255 : parseInt(t));\n  }\n  function V(t) {\n    return (e = \"%\" === t[t.length - 1] ? parseFloat(t) / 100 : parseFloat(t)) < 0 ? 0 : e > 1 ? 1 : e;\n    var e;\n  }\n  function F(t, e, r) {\n    return r < 0 ? r += 1 : r > 1 && (r -= 1), 6 * r < 1 ? t + (e - t) * r * 6 : 2 * r < 1 ? e : 3 * r < 2 ? t + (e - t) * (2 / 3 - r) * 6 : t;\n  }\n  try {\n    D = {}.parseCSSColor = function (t) {\n      var e,\n        r = t.replace(/ /g, \"\").toLowerCase();\n      if (r in z) return z[r].slice();\n      if (\"#\" === r[0]) return 4 === r.length ? (e = parseInt(r.substr(1), 16)) >= 0 && e <= 4095 ? [(3840 & e) >> 4 | (3840 & e) >> 8, 240 & e | (240 & e) >> 4, 15 & e | (15 & e) << 4, 1] : null : 7 === r.length && (e = parseInt(r.substr(1), 16)) >= 0 && e <= 16777215 ? [(16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 1] : null;\n      var n = r.indexOf(\"(\"),\n        i = r.indexOf(\")\");\n      if (-1 !== n && i + 1 === r.length) {\n        var s = r.substr(0, n),\n          a = r.substr(n + 1, i - (n + 1)).split(\",\"),\n          o = 1;\n        switch (s) {\n          case \"rgba\":\n            if (4 !== a.length) return null;\n            o = V(a.pop());\n          case \"rgb\":\n            return 3 !== a.length ? null : [L(a[0]), L(a[1]), L(a[2]), o];\n          case \"hsla\":\n            if (4 !== a.length) return null;\n            o = V(a.pop());\n          case \"hsl\":\n            if (3 !== a.length) return null;\n            var l = (parseFloat(a[0]) % 360 + 360) % 360 / 360,\n              u = V(a[1]),\n              c = V(a[2]),\n              h = c <= .5 ? c * (u + 1) : c + u - c * u,\n              p = 2 * c - h;\n            return [B(255 * F(p, h, l + 1 / 3)), B(255 * F(p, h, l)), B(255 * F(p, h, l - 1 / 3)), o];\n          default:\n            return null;\n        }\n      }\n      return null;\n    };\n  } catch (t) {}\n  var Color = /*#__PURE__*/function () {\n    function Color(t, e, r) {\n      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n      _classCallCheck(this, Color);\n      this.r = t, this.g = e, this.b = r, this.a = n;\n    }\n    _createClass(Color, [{\n      key: \"toString\",\n      value: function toString() {\n        var _this$toArray = this.toArray(),\n          _this$toArray2 = _slicedToArray(_this$toArray, 4),\n          t = _this$toArray2[0],\n          e = _this$toArray2[1],\n          r = _this$toArray2[2],\n          n = _this$toArray2[3];\n        return \"rgba(\".concat(Math.round(t), \",\").concat(Math.round(e), \",\").concat(Math.round(r), \",\").concat(n, \")\");\n      }\n    }, {\n      key: \"toArray\",\n      value: function toArray() {\n        var t = this.r,\n          e = this.g,\n          r = this.b,\n          n = this.a;\n        return 0 === n ? [0, 0, 0, 0] : [255 * t / n, 255 * e / n, 255 * r / n, n];\n      }\n    }, {\n      key: \"toArray01\",\n      value: function toArray01() {\n        var t = this.r,\n          e = this.g,\n          r = this.b,\n          n = this.a;\n        return 0 === n ? [0, 0, 0, 0] : [t / n, e / n, r / n, n];\n      }\n    }, {\n      key: \"toArray01PremultipliedAlpha\",\n      value: function toArray01PremultipliedAlpha() {\n        var t = this.r,\n          e = this.g,\n          r = this.b,\n          n = this.a;\n        return [t, e, r, n];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t) {\n        if (!t) return;\n        if (t instanceof Color) return t;\n        if (\"string\" != typeof t) return;\n        var e = D(t);\n        return e ? new Color(e[0] / 255 * e[3], e[1] / 255 * e[3], e[2] / 255 * e[3], e[3]) : void 0;\n      }\n    }]);\n    return Color;\n  }();\n  Color.black = new Color(0, 0, 0, 1), Color.white = new Color(1, 1, 1, 1), Color.transparent = new Color(0, 0, 0, 0), Color.red = new Color(1, 0, 0, 1), Color.blue = new Color(0, 0, 1, 1);\n  var R = Color;\n  function j(t) {\n    for (var _len2 = arguments.length, e = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      e[_key2 - 1] = arguments[_key2];\n    }\n    for (var _i5 = 0, _e6 = e; _i5 < _e6.length; _i5++) {\n      var _r5 = _e6[_i5];\n      for (var _e7 in _r5) t[_e7] = _r5[_e7];\n    }\n    return t;\n  }\n  var ParsingError = /*#__PURE__*/function (_Error) {\n    _inherits(ParsingError, _Error);\n    function ParsingError(t, e) {\n      var _this;\n      _classCallCheck(this, ParsingError);\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(ParsingError).call(this, e)), _this.message = e, _this.key = t;\n      return _this;\n    }\n    return ParsingError;\n  }(_wrapNativeSuper(Error));\n  var O = ParsingError;\n  var Scope = /*#__PURE__*/function () {\n    function Scope(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      _classCallCheck(this, Scope);\n      this.parent = t, this.bindings = {};\n      var _iterator = _createForOfIteratorHelper(e),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n            _t3 = _step$value[0],\n            _r6 = _step$value[1];\n          this.bindings[_t3] = _r6;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    _createClass(Scope, [{\n      key: \"concat\",\n      value: function concat(t) {\n        return new Scope(this, t);\n      }\n    }, {\n      key: \"get\",\n      value: function get(t) {\n        if (this.bindings[t]) return this.bindings[t];\n        if (this.parent) return this.parent.get(t);\n        throw new Error(\"\".concat(t, \" not found in scope.\"));\n      }\n    }, {\n      key: \"has\",\n      value: function has(t) {\n        return !!this.bindings[t] || !!this.parent && this.parent.has(t);\n      }\n    }]);\n    return Scope;\n  }();\n  var $ = Scope;\n  var U = {\n      kind: \"null\"\n    },\n    q = {\n      kind: \"number\"\n    },\n    N = {\n      kind: \"string\"\n    },\n    G = {\n      kind: \"boolean\"\n    },\n    Z = {\n      kind: \"color\"\n    },\n    X = {\n      kind: \"object\"\n    },\n    Y = {\n      kind: \"value\"\n    },\n    W = {\n      kind: \"collator\"\n    },\n    J = {\n      kind: \"formatted\"\n    },\n    K = {\n      kind: \"resolvedImage\"\n    };\n  function H(t, e) {\n    return {\n      kind: \"array\",\n      itemType: t,\n      N: e\n    };\n  }\n  function Q(t) {\n    if (\"array\" === t.kind) {\n      var _e8 = Q(t.itemType);\n      return \"number\" == typeof t.N ? \"array<\".concat(_e8, \", \").concat(t.N, \">\") : \"value\" === t.itemType.kind ? \"array\" : \"array<\".concat(_e8, \">\");\n    }\n    return t.kind;\n  }\n  var tt = [U, q, N, G, Z, J, X, H(Y), K];\n  function et(t, e) {\n    if (\"error\" === e.kind) return null;\n    if (\"array\" === t.kind) {\n      if (\"array\" === e.kind && (0 === e.N && \"value\" === e.itemType.kind || !et(t.itemType, e.itemType)) && (\"number\" != typeof t.N || t.N === e.N)) return null;\n    } else {\n      if (t.kind === e.kind) return null;\n      if (\"value\" === t.kind) for (var _i6 = 0, _tt = tt; _i6 < _tt.length; _i6++) {\n        var _t4 = _tt[_i6];\n        if (!et(_t4, e)) return null;\n      }\n    }\n    return \"Expected \".concat(Q(t), \" but found \").concat(Q(e), \" instead.\");\n  }\n  function rt(t, e) {\n    return e.some(function (e) {\n      return e.kind === t.kind;\n    });\n  }\n  function nt(t, e) {\n    return e.some(function (e) {\n      return \"null\" === e ? null === t : \"array\" === e ? Array.isArray(t) : \"object\" === e ? t && !Array.isArray(t) && \"object\" == typeof t : e === typeof t;\n    });\n  }\n  var Collator = /*#__PURE__*/function () {\n    function Collator(t, e, r) {\n      _classCallCheck(this, Collator);\n      this.sensitivity = t ? e ? \"variant\" : \"case\" : e ? \"accent\" : \"base\", this.locale = r, this.collator = new Intl.Collator(this.locale ? this.locale : [], {\n        sensitivity: this.sensitivity,\n        usage: \"search\"\n      });\n    }\n    _createClass(Collator, [{\n      key: \"compare\",\n      value: function compare(t, e) {\n        return this.collator.compare(t, e);\n      }\n    }, {\n      key: \"resolvedLocale\",\n      value: function resolvedLocale() {\n        return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale;\n      }\n    }]);\n    return Collator;\n  }();\n  var FormattedSection = function FormattedSection(t, e, r, n, i) {\n    _classCallCheck(this, FormattedSection);\n    this.text = t.normalize ? t.normalize() : t, this.image = e, this.scale = r, this.fontStack = n, this.textColor = i;\n  };\n  var Formatted = /*#__PURE__*/function () {\n    function Formatted(t) {\n      _classCallCheck(this, Formatted);\n      this.sections = t;\n    }\n    _createClass(Formatted, [{\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return 0 === this.sections.length || !this.sections.some(function (t) {\n          return 0 !== t.text.length || t.image && 0 !== t.image.name.length;\n        });\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return 0 === this.sections.length ? \"\" : this.sections.map(function (t) {\n          return t.text;\n        }).join(\"\");\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = [\"format\"];\n        var _iterator2 = _createForOfIteratorHelper(this.sections),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _e9 = _step2.value;\n            if (_e9.image) {\n              t.push([\"image\", _e9.image.name]);\n              continue;\n            }\n            t.push(_e9.text);\n            var _r7 = {};\n            _e9.fontStack && (_r7[\"text-font\"] = [\"literal\", _e9.fontStack.split(\",\")]), _e9.scale && (_r7[\"font-scale\"] = _e9.scale), _e9.textColor && (_r7[\"text-color\"] = [\"rgba\"].concat(_e9.textColor.toArray())), t.push(_r7);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        return t;\n      }\n    }], [{\n      key: \"fromString\",\n      value: function fromString(t) {\n        return new Formatted([new FormattedSection(t, null, null, null, null)]);\n      }\n    }, {\n      key: \"factory\",\n      value: function factory(t) {\n        return t instanceof Formatted ? t : Formatted.fromString(t);\n      }\n    }]);\n    return Formatted;\n  }();\n  var ResolvedImage = /*#__PURE__*/function () {\n    function ResolvedImage(t) {\n      _classCallCheck(this, ResolvedImage);\n      this.name = t.name, this.available = t.available;\n    }\n    _createClass(ResolvedImage, [{\n      key: \"toString\",\n      value: function toString() {\n        return this.name;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return [\"image\", this.name];\n      }\n    }], [{\n      key: \"fromString\",\n      value: function fromString(t) {\n        return t ? new ResolvedImage({\n          name: t,\n          available: !1\n        }) : null;\n      }\n    }]);\n    return ResolvedImage;\n  }();\n  function it(t, e, r, n) {\n    return \"number\" == typeof t && t >= 0 && t <= 255 && \"number\" == typeof e && e >= 0 && e <= 255 && \"number\" == typeof r && r >= 0 && r <= 255 ? void 0 === n || \"number\" == typeof n && n >= 0 && n <= 1 ? null : \"Invalid rgba value [\".concat([t, e, r, n].join(\", \"), \"]: 'a' must be between 0 and 1.\") : \"Invalid rgba value [\".concat((\"number\" == typeof n ? [t, e, r, n] : [t, e, r]).join(\", \"), \"]: 'r', 'g', and 'b' must be between 0 and 255.\");\n  }\n  function st(t) {\n    if (null === t) return !0;\n    if (\"string\" == typeof t) return !0;\n    if (\"boolean\" == typeof t) return !0;\n    if (\"number\" == typeof t) return !0;\n    if (t instanceof R) return !0;\n    if (t instanceof Collator) return !0;\n    if (t instanceof Formatted) return !0;\n    if (t instanceof ResolvedImage) return !0;\n    if (Array.isArray(t)) {\n      var _iterator3 = _createForOfIteratorHelper(t),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _e10 = _step3.value;\n          if (!st(_e10)) return !1;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return !0;\n    }\n    if (\"object\" == typeof t) {\n      for (var _e11 in t) if (!st(t[_e11])) return !1;\n      return !0;\n    }\n    return !1;\n  }\n  function at(t) {\n    if (null === t) return U;\n    if (\"string\" == typeof t) return N;\n    if (\"boolean\" == typeof t) return G;\n    if (\"number\" == typeof t) return q;\n    if (t instanceof R) return Z;\n    if (t instanceof Collator) return W;\n    if (t instanceof Formatted) return J;\n    if (t instanceof ResolvedImage) return K;\n    if (Array.isArray(t)) {\n      var _e12 = t.length;\n      var _r8;\n      var _iterator4 = _createForOfIteratorHelper(t),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _e13 = _step4.value;\n          var _t5 = at(_e13);\n          if (_r8) {\n            if (_r8 === _t5) continue;\n            _r8 = Y;\n            break;\n          }\n          _r8 = _t5;\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      return H(_r8 || Y, _e12);\n    }\n    return X;\n  }\n  function ot(t) {\n    var e = typeof t;\n    return null === t ? \"\" : \"string\" === e || \"number\" === e || \"boolean\" === e ? String(t) : t instanceof R || t instanceof Formatted || t instanceof ResolvedImage ? t.toString() : JSON.stringify(t);\n  }\n  var Literal = /*#__PURE__*/function () {\n    function Literal(t, e) {\n      _classCallCheck(this, Literal);\n      this.type = t, this.value = e;\n    }\n    _createClass(Literal, [{\n      key: \"evaluate\",\n      value: function evaluate() {\n        return this.value;\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild() {}\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !0;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return \"array\" === this.type.kind || \"object\" === this.type.kind ? [\"literal\", this.value] : this.value instanceof R ? [\"rgba\"].concat(this.value.toArray()) : this.value instanceof Formatted ? this.value.serialize() : this.value;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (2 !== t.length) return e.error(\"'literal' expression requires exactly one argument, but found \".concat(t.length - 1, \" instead.\"));\n        if (!st(t[1])) return e.error(\"invalid value\");\n        var r = t[1];\n        var n = at(r);\n        var i = e.expectedType;\n        return \"array\" !== n.kind || 0 !== n.N || !i || \"array\" !== i.kind || \"number\" == typeof i.N && 0 !== i.N || (n = i), new Literal(n, r);\n      }\n    }]);\n    return Literal;\n  }();\n  var lt = Literal,\n    ut = /*#__PURE__*/function () {\n      function RuntimeError(t) {\n        _classCallCheck(this, RuntimeError);\n        this.name = \"ExpressionEvaluationError\", this.message = t;\n      }\n      _createClass(RuntimeError, [{\n        key: \"toJSON\",\n        value: function toJSON() {\n          return this.message;\n        }\n      }]);\n      return RuntimeError;\n    }();\n  var ct = {\n    string: N,\n    number: q,\n    boolean: G,\n    object: X\n  };\n  var Assertion = /*#__PURE__*/function () {\n    function Assertion(t, e) {\n      _classCallCheck(this, Assertion);\n      this.type = t, this.args = e;\n    }\n    _createClass(Assertion, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        for (var _e14 = 0; _e14 < this.args.length; _e14++) {\n          var _r9 = this.args[_e14].evaluate(t);\n          if (!et(this.type, at(_r9))) return _r9;\n          if (_e14 === this.args.length - 1) throw new ut(\"Expected value to be of type \".concat(Q(this.type), \", but found \").concat(Q(at(_r9)), \" instead.\"));\n        }\n        return null;\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        this.args.forEach(t);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return this.args.every(function (t) {\n          return t.outputDefined();\n        });\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = this.type,\n          e = [t.kind];\n        if (\"array\" === t.kind) {\n          var _r10 = t.itemType;\n          if (\"string\" === _r10.kind || \"number\" === _r10.kind || \"boolean\" === _r10.kind) {\n            e.push(_r10.kind);\n            var _n3 = t.N;\n            (\"number\" == typeof _n3 || this.args.length > 1) && e.push(_n3);\n          }\n        }\n        return e.concat(this.args.map(function (t) {\n          return t.serialize();\n        }));\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length < 2) return e.error(\"Expected at least one argument.\");\n        var r,\n          n = 1;\n        var i = t[0];\n        if (\"array\" === i) {\n          var _i7, _s3;\n          if (t.length > 2) {\n            var _r11 = t[1];\n            if (\"string\" != typeof _r11 || !(_r11 in ct) || \"object\" === _r11) return e.error('The item type argument of \"array\" must be one of string, number, boolean', 1);\n            _i7 = ct[_r11], n++;\n          } else _i7 = Y;\n          if (t.length > 3) {\n            if (null !== t[2] && (\"number\" != typeof t[2] || t[2] < 0 || t[2] !== Math.floor(t[2]))) return e.error('The length argument to \"array\" must be a positive integer literal', 2);\n            _s3 = t[2], n++;\n          }\n          r = H(_i7, _s3);\n        } else r = ct[i];\n        var s = [];\n        for (; n < t.length; n++) {\n          var _r12 = e.parse(t[n], n, Y);\n          if (!_r12) return null;\n          s.push(_r12);\n        }\n        return new Assertion(r, s);\n      }\n    }]);\n    return Assertion;\n  }();\n  var ht = Assertion;\n  var FormatExpression = /*#__PURE__*/function () {\n    function FormatExpression(t) {\n      _classCallCheck(this, FormatExpression);\n      this.type = J, this.sections = t;\n    }\n    _createClass(FormatExpression, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        return new Formatted(this.sections.map(function (e) {\n          var r = e.content.evaluate(t);\n          return at(r) === K ? new FormattedSection(\"\", r, null, null, null) : new FormattedSection(ot(r), null, e.scale ? e.scale.evaluate(t) : null, e.font ? e.font.evaluate(t).join(\",\") : null, e.textColor ? e.textColor.evaluate(t) : null);\n        }));\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        var _iterator5 = _createForOfIteratorHelper(this.sections),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _e15 = _step5.value;\n            t(_e15.content), _e15.scale && t(_e15.scale), _e15.font && t(_e15.font), _e15.textColor && t(_e15.textColor);\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = [\"format\"];\n        var _iterator6 = _createForOfIteratorHelper(this.sections),\n          _step6;\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var _e16 = _step6.value;\n            t.push(_e16.content.serialize());\n            var _r13 = {};\n            _e16.scale && (_r13[\"font-scale\"] = _e16.scale.serialize()), _e16.font && (_r13[\"text-font\"] = _e16.font.serialize()), _e16.textColor && (_r13[\"text-color\"] = _e16.textColor.serialize()), t.push(_r13);\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n        return t;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length < 2) return e.error(\"Expected at least one argument.\");\n        var r = t[1];\n        if (!Array.isArray(r) && \"object\" == typeof r) return e.error(\"First argument must be an image or text section.\");\n        var n = [];\n        var i = !1;\n        for (var _r14 = 1; _r14 <= t.length - 1; ++_r14) {\n          var _s4 = t[_r14];\n          if (i && \"object\" == typeof _s4 && !Array.isArray(_s4)) {\n            i = !1;\n            var _t6 = null;\n            if (_s4[\"font-scale\"] && (_t6 = e.parse(_s4[\"font-scale\"], 1, q), !_t6)) return null;\n            var _r15 = null;\n            if (_s4[\"text-font\"] && (_r15 = e.parse(_s4[\"text-font\"], 1, H(N)), !_r15)) return null;\n            var _a3 = null;\n            if (_s4[\"text-color\"] && (_a3 = e.parse(_s4[\"text-color\"], 1, Z), !_a3)) return null;\n            var _o2 = n[n.length - 1];\n            _o2.scale = _t6, _o2.font = _r15, _o2.textColor = _a3;\n          } else {\n            var _s5 = e.parse(t[_r14], 1, Y);\n            if (!_s5) return null;\n            var _a4 = _s5.type.kind;\n            if (\"string\" !== _a4 && \"value\" !== _a4 && \"null\" !== _a4 && \"resolvedImage\" !== _a4) return e.error(\"Formatted text type must be 'string', 'value', 'image' or 'null'.\");\n            i = !0, n.push({\n              content: _s5,\n              scale: null,\n              font: null,\n              textColor: null\n            });\n          }\n        }\n        return new FormatExpression(n);\n      }\n    }]);\n    return FormatExpression;\n  }();\n  var ImageExpression = /*#__PURE__*/function () {\n    function ImageExpression(t) {\n      _classCallCheck(this, ImageExpression);\n      this.type = K, this.input = t;\n    }\n    _createClass(ImageExpression, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.input.evaluate(t),\n          r = ResolvedImage.fromString(e);\n        return r && t.availableImages && (r.available = t.availableImages.indexOf(e) > -1), r;\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.input);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return [\"image\", this.input.serialize()];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (2 !== t.length) return e.error(\"Expected two arguments.\");\n        var r = e.parse(t[1], 1, N);\n        return r ? new ImageExpression(r) : e.error(\"No image name provided.\");\n      }\n    }]);\n    return ImageExpression;\n  }();\n  var pt = {\n    \"to-boolean\": G,\n    \"to-color\": Z,\n    \"to-number\": q,\n    \"to-string\": N\n  };\n  var Coercion = /*#__PURE__*/function () {\n    function Coercion(t, e) {\n      _classCallCheck(this, Coercion);\n      this.type = t, this.args = e;\n    }\n    _createClass(Coercion, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        if (\"boolean\" === this.type.kind) return Boolean(this.args[0].evaluate(t));\n        if (\"color\" === this.type.kind) {\n          var _e17, _r16;\n          var _iterator7 = _createForOfIteratorHelper(this.args),\n            _step7;\n          try {\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n              var _n4 = _step7.value;\n              if (_e17 = _n4.evaluate(t), _r16 = null, _e17 instanceof R) return _e17;\n              if (\"string\" == typeof _e17) {\n                var _r17 = t.parseColor(_e17);\n                if (_r17) return _r17;\n              } else if (Array.isArray(_e17) && (_r16 = _e17.length < 3 || _e17.length > 4 ? \"Invalid rbga value \".concat(JSON.stringify(_e17), \": expected an array containing either three or four numeric values.\") : it(_e17[0], _e17[1], _e17[2], _e17[3]), !_r16)) return new R(_e17[0] / 255, _e17[1] / 255, _e17[2] / 255, _e17[3]);\n            }\n          } catch (err) {\n            _iterator7.e(err);\n          } finally {\n            _iterator7.f();\n          }\n          throw new ut(_r16 || \"Could not parse color from value '\".concat(\"string\" == typeof _e17 ? _e17 : String(JSON.stringify(_e17)), \"'\"));\n        }\n        if (\"number\" === this.type.kind) {\n          var _e18 = null;\n          var _iterator8 = _createForOfIteratorHelper(this.args),\n            _step8;\n          try {\n            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n              var _r18 = _step8.value;\n              if (_e18 = _r18.evaluate(t), null === _e18) return 0;\n              var _n5 = Number(_e18);\n              if (!isNaN(_n5)) return _n5;\n            }\n          } catch (err) {\n            _iterator8.e(err);\n          } finally {\n            _iterator8.f();\n          }\n          throw new ut(\"Could not convert \".concat(JSON.stringify(_e18), \" to number.\"));\n        }\n        return \"formatted\" === this.type.kind ? Formatted.fromString(ot(this.args[0].evaluate(t))) : \"resolvedImage\" === this.type.kind ? ResolvedImage.fromString(ot(this.args[0].evaluate(t))) : ot(this.args[0].evaluate(t));\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        this.args.forEach(t);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return this.args.every(function (t) {\n          return t.outputDefined();\n        });\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        if (\"formatted\" === this.type.kind) return new FormatExpression([{\n          content: this.args[0],\n          scale: null,\n          font: null,\n          textColor: null\n        }]).serialize();\n        if (\"resolvedImage\" === this.type.kind) return new ImageExpression(this.args[0]).serialize();\n        var t = [\"to-\".concat(this.type.kind)];\n        return this.eachChild(function (e) {\n          t.push(e.serialize());\n        }), t;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length < 2) return e.error(\"Expected at least one argument.\");\n        var r = t[0];\n        if ((\"to-boolean\" === r || \"to-string\" === r) && 2 !== t.length) return e.error(\"Expected one argument.\");\n        var n = pt[r],\n          i = [];\n        for (var _r19 = 1; _r19 < t.length; _r19++) {\n          var _n6 = e.parse(t[_r19], _r19, Y);\n          if (!_n6) return null;\n          i.push(_n6);\n        }\n        return new Coercion(n, i);\n      }\n    }]);\n    return Coercion;\n  }();\n  var dt = Coercion;\n  var ft = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"];\n  var yt = /*#__PURE__*/function () {\n    function EvaluationContext() {\n      _classCallCheck(this, EvaluationContext);\n      this.globals = null, this.feature = null, this.featureState = null, this.formattedSection = null, this._parseColorCache = {}, this.availableImages = null, this.canonical = null, this.featureTileCoord = null, this.featureDistanceData = null;\n    }\n    _createClass(EvaluationContext, [{\n      key: \"id\",\n      value: function id() {\n        return this.feature && void 0 !== this.feature.id ? this.feature.id : null;\n      }\n    }, {\n      key: \"geometryType\",\n      value: function geometryType() {\n        return this.feature ? \"number\" == typeof this.feature.type ? ft[this.feature.type] : this.feature.type : null;\n      }\n    }, {\n      key: \"geometry\",\n      value: function geometry() {\n        return this.feature && \"geometry\" in this.feature ? this.feature.geometry : null;\n      }\n    }, {\n      key: \"canonicalID\",\n      value: function canonicalID() {\n        return this.canonical;\n      }\n    }, {\n      key: \"properties\",\n      value: function properties() {\n        return this.feature && this.feature.properties || {};\n      }\n    }, {\n      key: \"distanceFromCenter\",\n      value: function distanceFromCenter() {\n        if (this.featureTileCoord && this.featureDistanceData) {\n          var _t7 = this.featureDistanceData.center,\n            _e19 = this.featureDistanceData.scale,\n            _this$featureTileCoor = this.featureTileCoord,\n            _r20 = _this$featureTileCoor.x,\n            _n7 = _this$featureTileCoor.y;\n          return this.featureDistanceData.bearing[0] * (_r20 * _e19 - _t7[0]) + this.featureDistanceData.bearing[1] * (_n7 * _e19 - _t7[1]);\n        }\n        return 0;\n      }\n    }, {\n      key: \"parseColor\",\n      value: function parseColor(t) {\n        var e = this._parseColorCache[t];\n        return e || (e = this._parseColorCache[t] = R.parse(t)), e;\n      }\n    }]);\n    return EvaluationContext;\n  }();\n  var CompoundExpression = /*#__PURE__*/function () {\n    function CompoundExpression(t, e, r, n) {\n      _classCallCheck(this, CompoundExpression);\n      this.name = t, this.type = e, this._evaluate = r, this.args = n;\n    }\n    _createClass(CompoundExpression, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        return this._evaluate(t, this.args);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        this.args.forEach(t);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return [this.name].concat(this.args.map(function (t) {\n          return t.serialize();\n        }));\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        var _e$errors;\n        var r = t[0],\n          n = CompoundExpression.definitions[r];\n        if (!n) return e.error(\"Unknown expression \\\"\".concat(r, \"\\\". If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0);\n        var i = Array.isArray(n) ? n[0] : n.type,\n          s = Array.isArray(n) ? [[n[1], n[2]]] : n.overloads,\n          a = s.filter(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 1),\n              e = _ref2[0];\n            return !Array.isArray(e) || e.length === t.length - 1;\n          });\n        var o = null;\n        var _iterator9 = _createForOfIteratorHelper(a),\n          _step9;\n        try {\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var _step9$value = _slicedToArray(_step9.value, 2),\n              _n9 = _step9$value[0],\n              _s6 = _step9$value[1];\n            o = new jt(e.registry, e.path, null, e.scope);\n            var _a5 = [];\n            var _l2 = !1;\n            for (var _e20 = 1; _e20 < t.length; _e20++) {\n              var _r23 = t[_e20],\n                _i9 = Array.isArray(_n9) ? _n9[_e20 - 1] : _n9.type,\n                _s7 = o.parse(_r23, 1 + _a5.length, _i9);\n              if (!_s7) {\n                _l2 = !0;\n                break;\n              }\n              _a5.push(_s7);\n            }\n            if (!_l2) if (Array.isArray(_n9) && _n9.length !== _a5.length) o.error(\"Expected \".concat(_n9.length, \" arguments, but found \").concat(_a5.length, \" instead.\"));else {\n              for (var _t8 = 0; _t8 < _a5.length; _t8++) {\n                var _e21 = Array.isArray(_n9) ? _n9[_t8] : _n9.type,\n                  _r24 = _a5[_t8];\n                o.concat(_t8 + 1).checkSubtype(_e21, _r24.type);\n              }\n              if (0 === o.errors.length) return new CompoundExpression(r, i, _s6, _a5);\n            }\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n        if (1 === a.length) (_e$errors = e.errors).push.apply(_e$errors, _toConsumableArray(o.errors));else {\n          var _r21 = (a.length ? a : s).map(function (_ref3) {\n              var _ref4 = _slicedToArray(_ref3, 1),\n                t = _ref4[0];\n              return e = t, Array.isArray(e) ? \"(\".concat(e.map(Q).join(\", \"), \")\") : \"(\".concat(Q(e.type), \"...)\");\n              var e;\n            }).join(\" | \"),\n            _n8 = [];\n          for (var _r22 = 1; _r22 < t.length; _r22++) {\n            var _i8 = e.parse(t[_r22], 1 + _n8.length);\n            if (!_i8) return null;\n            _n8.push(Q(_i8.type));\n          }\n          e.error(\"Expected arguments of type \".concat(_r21, \", but found (\").concat(_n8.join(\", \"), \") instead.\"));\n        }\n        return null;\n      }\n    }, {\n      key: \"register\",\n      value: function register(t, e) {\n        CompoundExpression.definitions = e;\n        for (var _r25 in e) t[_r25] = CompoundExpression;\n      }\n    }]);\n    return CompoundExpression;\n  }();\n  var mt = CompoundExpression;\n  var CollatorExpression = /*#__PURE__*/function () {\n    function CollatorExpression(t, e, r) {\n      _classCallCheck(this, CollatorExpression);\n      this.type = W, this.locale = r, this.caseSensitive = t, this.diacriticSensitive = e;\n    }\n    _createClass(CollatorExpression, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        return new Collator(this.caseSensitive.evaluate(t), this.diacriticSensitive.evaluate(t), this.locale ? this.locale.evaluate(t) : null);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.caseSensitive), t(this.diacriticSensitive), this.locale && t(this.locale);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = {};\n        return t[\"case-sensitive\"] = this.caseSensitive.serialize(), t[\"diacritic-sensitive\"] = this.diacriticSensitive.serialize(), this.locale && (t.locale = this.locale.serialize()), [\"collator\", t];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (2 !== t.length) return e.error(\"Expected one argument.\");\n        var r = t[1];\n        if (\"object\" != typeof r || Array.isArray(r)) return e.error(\"Collator options argument must be an object.\");\n        var n = e.parse(void 0 !== r[\"case-sensitive\"] && r[\"case-sensitive\"], 1, G);\n        if (!n) return null;\n        var i = e.parse(void 0 !== r[\"diacritic-sensitive\"] && r[\"diacritic-sensitive\"], 1, G);\n        if (!i) return null;\n        var s = null;\n        return r.locale && (s = e.parse(r.locale, 1, N), !s) ? null : new CollatorExpression(n, i, s);\n      }\n    }]);\n    return CollatorExpression;\n  }();\n  var gt = 8192;\n  function xt(t, e) {\n    t[0] = Math.min(t[0], e[0]), t[1] = Math.min(t[1], e[1]), t[2] = Math.max(t[2], e[0]), t[3] = Math.max(t[3], e[1]);\n  }\n  function vt(t, e) {\n    return !(t[0] <= e[0] || t[2] >= e[2] || t[1] <= e[1] || t[3] >= e[3]);\n  }\n  function bt(t, e) {\n    var r = (180 + t[0]) / 360,\n      n = (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t[1] * Math.PI / 360))) / 360,\n      i = Math.pow(2, e.z);\n    return [Math.round(r * i * gt), Math.round(n * i * gt)];\n  }\n  function wt(t, e, r) {\n    var n = t[0] - e[0],\n      i = t[1] - e[1],\n      s = t[0] - r[0],\n      a = t[1] - r[1];\n    return n * a - s * i == 0 && n * s <= 0 && i * a <= 0;\n  }\n  function _t(t, e) {\n    var r = !1;\n    for (var _a6 = 0, _o3 = e.length; _a6 < _o3; _a6++) {\n      var _o4 = e[_a6];\n      for (var _e22 = 0, _a7 = _o4.length; _e22 < _a7 - 1; _e22++) {\n        if (wt(t, _o4[_e22], _o4[_e22 + 1])) return !1;\n        (i = _o4[_e22])[1] > (n = t)[1] != (s = _o4[_e22 + 1])[1] > n[1] && n[0] < (s[0] - i[0]) * (n[1] - i[1]) / (s[1] - i[1]) + i[0] && (r = !r);\n      }\n    }\n    var n, i, s;\n    return r;\n  }\n  function St(t, e) {\n    for (var _r26 = 0; _r26 < e.length; _r26++) if (_t(t, e[_r26])) return !0;\n    return !1;\n  }\n  function kt(t, e, r, n) {\n    var i = n[0] - r[0],\n      s = n[1] - r[1],\n      a = (t[0] - r[0]) * s - i * (t[1] - r[1]),\n      o = (e[0] - r[0]) * s - i * (e[1] - r[1]);\n    return a > 0 && o < 0 || a < 0 && o > 0;\n  }\n  function It(t, e, r) {\n    var _iterator10 = _createForOfIteratorHelper(r),\n      _step10;\n    try {\n      for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n        var _u2 = _step10.value;\n        for (var _r27 = 0; _r27 < _u2.length - 1; ++_r27) if (0 != (o = [(a = _u2[_r27 + 1])[0] - (s = _u2[_r27])[0], a[1] - s[1]])[0] * (l = [(i = e)[0] - (n = t)[0], i[1] - n[1]])[1] - o[1] * l[0] && kt(n, i, s, a) && kt(s, a, n, i)) return !0;\n      }\n    } catch (err) {\n      _iterator10.e(err);\n    } finally {\n      _iterator10.f();\n    }\n    var n, i, s, a, o, l;\n    return !1;\n  }\n  function Mt(t, e) {\n    for (var _r28 = 0; _r28 < t.length; ++_r28) if (!_t(t[_r28], e)) return !1;\n    for (var _r29 = 0; _r29 < t.length - 1; ++_r29) if (It(t[_r29], t[_r29 + 1], e)) return !1;\n    return !0;\n  }\n  function Pt(t, e) {\n    for (var _r30 = 0; _r30 < e.length; _r30++) if (Mt(t, e[_r30])) return !0;\n    return !1;\n  }\n  function Tt(t, e, r) {\n    var n = [];\n    for (var _i10 = 0; _i10 < t.length; _i10++) {\n      var _s8 = [];\n      for (var _n10 = 0; _n10 < t[_i10].length; _n10++) {\n        var _a8 = bt(t[_i10][_n10], r);\n        xt(e, _a8), _s8.push(_a8);\n      }\n      n.push(_s8);\n    }\n    return n;\n  }\n  function Ct(t, e, r) {\n    var n = [];\n    for (var _i11 = 0; _i11 < t.length; _i11++) {\n      var _s9 = Tt(t[_i11], e, r);\n      n.push(_s9);\n    }\n    return n;\n  }\n  function Et(t, e, r, n) {\n    if (t[0] < r[0] || t[0] > r[2]) {\n      var _e23 = .5 * n;\n      var _i12 = t[0] - r[0] > _e23 ? -n : r[0] - t[0] > _e23 ? n : 0;\n      0 === _i12 && (_i12 = t[0] - r[2] > _e23 ? -n : r[2] - t[0] > _e23 ? n : 0), t[0] += _i12;\n    }\n    xt(e, t);\n  }\n  function Dt(t, e, r, n) {\n    var i = Math.pow(2, n.z) * gt,\n      s = [n.x * gt, n.y * gt],\n      a = [];\n    if (!t) return a;\n    var _iterator11 = _createForOfIteratorHelper(t),\n      _step11;\n    try {\n      for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n        var _n11 = _step11.value;\n        var _iterator12 = _createForOfIteratorHelper(_n11),\n          _step12;\n        try {\n          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n            var _t9 = _step12.value;\n            var _n12 = [_t9.x + s[0], _t9.y + s[1]];\n            Et(_n12, e, r, i), a.push(_n12);\n          }\n        } catch (err) {\n          _iterator12.e(err);\n        } finally {\n          _iterator12.f();\n        }\n      }\n    } catch (err) {\n      _iterator11.e(err);\n    } finally {\n      _iterator11.f();\n    }\n    return a;\n  }\n  function zt(t, e, r, n) {\n    var i = Math.pow(2, n.z) * gt,\n      s = [n.x * gt, n.y * gt],\n      a = [];\n    if (!t) return a;\n    var _iterator13 = _createForOfIteratorHelper(t),\n      _step13;\n    try {\n      for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n        var _r31 = _step13.value;\n        var _t11 = [];\n        var _iterator16 = _createForOfIteratorHelper(_r31),\n          _step16;\n        try {\n          for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n            var _n14 = _step16.value;\n            var _r32 = [_n14.x + s[0], _n14.y + s[1]];\n            xt(e, _r32), _t11.push(_r32);\n          }\n        } catch (err) {\n          _iterator16.e(err);\n        } finally {\n          _iterator16.f();\n        }\n        a.push(_t11);\n      }\n    } catch (err) {\n      _iterator13.e(err);\n    } finally {\n      _iterator13.f();\n    }\n    if (e[2] - e[0] <= i / 2) {\n      (o = e)[0] = o[1] = 1 / 0, o[2] = o[3] = -1 / 0;\n      var _iterator14 = _createForOfIteratorHelper(a),\n        _step14;\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var _t10 = _step14.value;\n          var _iterator15 = _createForOfIteratorHelper(_t10),\n            _step15;\n          try {\n            for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n              var _n13 = _step15.value;\n              Et(_n13, e, r, i);\n            }\n          } catch (err) {\n            _iterator15.e(err);\n          } finally {\n            _iterator15.f();\n          }\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n    }\n    var o;\n    return a;\n  }\n  var Within = /*#__PURE__*/function () {\n    function Within(t, e) {\n      _classCallCheck(this, Within);\n      this.type = G, this.geojson = t, this.geometries = e;\n    }\n    _createClass(Within, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        if (null != t.geometry() && null != t.canonicalID()) {\n          if (\"Point\" === t.geometryType()) return function (t, e) {\n            var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n              n = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n              i = t.canonicalID();\n            if (!i) return !1;\n            if (\"Polygon\" === e.type) {\n              var _s10 = Tt(e.coordinates, n, i),\n                _a9 = Dt(t.geometry(), r, n, i);\n              if (!vt(r, n)) return !1;\n              var _iterator17 = _createForOfIteratorHelper(_a9),\n                _step17;\n              try {\n                for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n                  var _t12 = _step17.value;\n                  if (!_t(_t12, _s10)) return !1;\n                }\n              } catch (err) {\n                _iterator17.e(err);\n              } finally {\n                _iterator17.f();\n              }\n            }\n            if (\"MultiPolygon\" === e.type) {\n              var _s11 = Ct(e.coordinates, n, i),\n                _a10 = Dt(t.geometry(), r, n, i);\n              if (!vt(r, n)) return !1;\n              var _iterator18 = _createForOfIteratorHelper(_a10),\n                _step18;\n              try {\n                for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n                  var _t13 = _step18.value;\n                  if (!St(_t13, _s11)) return !1;\n                }\n              } catch (err) {\n                _iterator18.e(err);\n              } finally {\n                _iterator18.f();\n              }\n            }\n            return !0;\n          }(t, this.geometries);\n          if (\"LineString\" === t.geometryType()) return function (t, e) {\n            var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n              n = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n              i = t.canonicalID();\n            if (!i) return !1;\n            if (\"Polygon\" === e.type) {\n              var _s12 = Tt(e.coordinates, n, i),\n                _a11 = zt(t.geometry(), r, n, i);\n              if (!vt(r, n)) return !1;\n              var _iterator19 = _createForOfIteratorHelper(_a11),\n                _step19;\n              try {\n                for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n                  var _t14 = _step19.value;\n                  if (!Mt(_t14, _s12)) return !1;\n                }\n              } catch (err) {\n                _iterator19.e(err);\n              } finally {\n                _iterator19.f();\n              }\n            }\n            if (\"MultiPolygon\" === e.type) {\n              var _s13 = Ct(e.coordinates, n, i),\n                _a12 = zt(t.geometry(), r, n, i);\n              if (!vt(r, n)) return !1;\n              var _iterator20 = _createForOfIteratorHelper(_a12),\n                _step20;\n              try {\n                for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n                  var _t15 = _step20.value;\n                  if (!Pt(_t15, _s13)) return !1;\n                }\n              } catch (err) {\n                _iterator20.e(err);\n              } finally {\n                _iterator20.f();\n              }\n            }\n            return !0;\n          }(t, this.geometries);\n        }\n        return !1;\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild() {}\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !0;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return [\"within\", this.geojson];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (2 !== t.length) return e.error(\"'within' expression requires exactly one argument, but found \".concat(t.length - 1, \" instead.\"));\n        if (st(t[1])) {\n          var _e24 = t[1];\n          if (\"FeatureCollection\" === _e24.type) for (var _t16 = 0; _t16 < _e24.features.length; ++_t16) {\n            var _r33 = _e24.features[_t16].geometry.type;\n            if (\"Polygon\" === _r33 || \"MultiPolygon\" === _r33) return new Within(_e24, _e24.features[_t16].geometry);\n          } else if (\"Feature\" === _e24.type) {\n            var _t17 = _e24.geometry.type;\n            if (\"Polygon\" === _t17 || \"MultiPolygon\" === _t17) return new Within(_e24, _e24.geometry);\n          } else if (\"Polygon\" === _e24.type || \"MultiPolygon\" === _e24.type) return new Within(_e24, _e24);\n        }\n        return e.error(\"'within' expression requires valid geojson object that contains polygon geometry type.\");\n      }\n    }]);\n    return Within;\n  }();\n  var Bt = Within;\n  function Lt(t) {\n    if (t instanceof mt) {\n      if (\"get\" === t.name && 1 === t.args.length) return !1;\n      if (\"feature-state\" === t.name) return !1;\n      if (\"has\" === t.name && 1 === t.args.length) return !1;\n      if (\"properties\" === t.name || \"geometry-type\" === t.name || \"id\" === t.name) return !1;\n      if (/^filter-/.test(t.name)) return !1;\n    }\n    if (t instanceof Bt) return !1;\n    var e = !0;\n    return t.eachChild(function (t) {\n      e && !Lt(t) && (e = !1);\n    }), e;\n  }\n  function Vt(t) {\n    if (t instanceof mt && \"feature-state\" === t.name) return !1;\n    var e = !0;\n    return t.eachChild(function (t) {\n      e && !Vt(t) && (e = !1);\n    }), e;\n  }\n  function Ft(t, e) {\n    if (t instanceof mt && e.indexOf(t.name) >= 0) return !1;\n    var r = !0;\n    return t.eachChild(function (t) {\n      r && !Ft(t, e) && (r = !1);\n    }), r;\n  }\n  var Var = /*#__PURE__*/function () {\n    function Var(t, e) {\n      _classCallCheck(this, Var);\n      this.type = e.type, this.name = t, this.boundExpression = e;\n    }\n    _createClass(Var, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        return this.boundExpression.evaluate(t);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild() {}\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return [\"var\", this.name];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (2 !== t.length || \"string\" != typeof t[1]) return e.error(\"'var' expression requires exactly one string literal argument.\");\n        var r = t[1];\n        return e.scope.has(r) ? new Var(r, e.scope.get(r)) : e.error(\"Unknown variable \\\"\".concat(r, \"\\\". Make sure \\\"\").concat(r, \"\\\" has been bound in an enclosing \\\"let\\\" expression before using it.\"), 1);\n      }\n    }]);\n    return Var;\n  }();\n  var Rt = Var;\n  var ParsingContext = /*#__PURE__*/function () {\n    function ParsingContext(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var r = arguments.length > 2 ? arguments[2] : undefined;\n      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new $();\n      var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n      _classCallCheck(this, ParsingContext);\n      this.registry = t, this.path = e, this.key = e.map(function (t) {\n        return \"[\".concat(t, \"]\");\n      }).join(\"\"), this.scope = n, this.errors = i, this.expectedType = r;\n    }\n    _createClass(ParsingContext, [{\n      key: \"parse\",\n      value: function parse(t, e, r, n) {\n        var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n        return e ? this.concat(e, r, n)._parse(t, i) : this._parse(t, i);\n      }\n    }, {\n      key: \"_parse\",\n      value: function _parse(t, e) {\n        function r(t, e, r) {\n          return \"assert\" === r ? new ht(e, [t]) : \"coerce\" === r ? new dt(e, [t]) : t;\n        }\n        if (null !== t && \"string\" != typeof t && \"boolean\" != typeof t && \"number\" != typeof t || (t = [\"literal\", t]), Array.isArray(t)) {\n          if (0 === t.length) return this.error('Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].');\n          var _n15 = t[0];\n          if (\"string\" != typeof _n15) return this.error(\"Expression name must be a string, but found \".concat(typeof _n15, \" instead. If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0), null;\n          var _i13 = this.registry[_n15];\n          if (_i13) {\n            var _n16 = _i13.parse(t, this);\n            if (!_n16) return null;\n            if (this.expectedType) {\n              var _t18 = this.expectedType,\n                _i14 = _n16.type;\n              if (\"string\" !== _t18.kind && \"number\" !== _t18.kind && \"boolean\" !== _t18.kind && \"object\" !== _t18.kind && \"array\" !== _t18.kind || \"value\" !== _i14.kind) {\n                if (\"color\" !== _t18.kind && \"formatted\" !== _t18.kind && \"resolvedImage\" !== _t18.kind || \"value\" !== _i14.kind && \"string\" !== _i14.kind) {\n                  if (this.checkSubtype(_t18, _i14)) return null;\n                } else _n16 = r(_n16, _t18, e.typeAnnotation || \"coerce\");\n              } else _n16 = r(_n16, _t18, e.typeAnnotation || \"assert\");\n            }\n            if (!(_n16 instanceof lt) && \"resolvedImage\" !== _n16.type.kind && Ot(_n16)) {\n              var _t19 = new yt();\n              try {\n                _n16 = new lt(_n16.type, _n16.evaluate(_t19));\n              } catch (t) {\n                return this.error(t.message), null;\n              }\n            }\n            return _n16;\n          }\n          return this.error(\"Unknown expression \\\"\".concat(_n15, \"\\\". If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0);\n        }\n        return this.error(void 0 === t ? \"'undefined' value invalid. Use null instead.\" : \"object\" == typeof t ? 'Bare objects invalid. Use [\"literal\", {...}] instead.' : \"Expected an array, but found \".concat(typeof t, \" instead.\"));\n      }\n    }, {\n      key: \"concat\",\n      value: function concat(t, e, r) {\n        var n = \"number\" == typeof t ? this.path.concat(t) : this.path,\n          i = r ? this.scope.concat(r) : this.scope;\n        return new ParsingContext(this.registry, n, e || null, i, this.errors);\n      }\n    }, {\n      key: \"error\",\n      value: function error(t) {\n        for (var _len3 = arguments.length, e = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n          e[_key3 - 1] = arguments[_key3];\n        }\n        var r = \"\".concat(this.key).concat(e.map(function (t) {\n          return \"[\".concat(t, \"]\");\n        }).join(\"\"));\n        this.errors.push(new O(r, t));\n      }\n    }, {\n      key: \"checkSubtype\",\n      value: function checkSubtype(t, e) {\n        var r = et(t, e);\n        return r && this.error(r), r;\n      }\n    }]);\n    return ParsingContext;\n  }();\n  var jt = ParsingContext;\n  function Ot(t) {\n    if (t instanceof Rt) return Ot(t.boundExpression);\n    if (t instanceof mt && \"error\" === t.name) return !1;\n    if (t instanceof CollatorExpression) return !1;\n    if (t instanceof Bt) return !1;\n    var e = t instanceof dt || t instanceof ht;\n    var r = !0;\n    return t.eachChild(function (t) {\n      r = e ? r && Ot(t) : r && t instanceof lt;\n    }), !!r && Lt(t) && Ft(t, [\"zoom\", \"heatmap-density\", \"line-progress\", \"sky-radial-progress\", \"accumulated\", \"is-supported-script\", \"pitch\", \"distance-from-center\"]);\n  }\n  function $t(t, e) {\n    var r = t.length - 1;\n    var n,\n      i,\n      s = 0,\n      a = r,\n      o = 0;\n    for (; s <= a;) if (o = Math.floor((s + a) / 2), n = t[o], i = t[o + 1], n <= e) {\n      if (o === r || e < i) return o;\n      s = o + 1;\n    } else {\n      if (!(n > e)) throw new ut(\"Input is not a number.\");\n      a = o - 1;\n    }\n    return 0;\n  }\n  var Step = /*#__PURE__*/function () {\n    function Step(t, e, r) {\n      _classCallCheck(this, Step);\n      this.type = t, this.input = e, this.labels = [], this.outputs = [];\n      var _iterator21 = _createForOfIteratorHelper(r),\n        _step21;\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var _step21$value = _slicedToArray(_step21.value, 2),\n            _t20 = _step21$value[0],\n            _e25 = _step21$value[1];\n          this.labels.push(_t20), this.outputs.push(_e25);\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n    }\n    _createClass(Step, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.labels,\n          r = this.outputs;\n        if (1 === e.length) return r[0].evaluate(t);\n        var n = this.input.evaluate(t);\n        if (n <= e[0]) return r[0].evaluate(t);\n        var i = e.length;\n        return n >= e[i - 1] ? r[i - 1].evaluate(t) : r[$t(e, n)].evaluate(t);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.input);\n        var _iterator22 = _createForOfIteratorHelper(this.outputs),\n          _step22;\n        try {\n          for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n            var _e26 = _step22.value;\n            t(_e26);\n          }\n        } catch (err) {\n          _iterator22.e(err);\n        } finally {\n          _iterator22.f();\n        }\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return this.outputs.every(function (t) {\n          return t.outputDefined();\n        });\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = [\"step\", this.input.serialize()];\n        for (var _e27 = 0; _e27 < this.labels.length; _e27++) _e27 > 0 && t.push(this.labels[_e27]), t.push(this.outputs[_e27].serialize());\n        return t;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length - 1 < 4) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n        if ((t.length - 1) % 2 != 0) return e.error(\"Expected an even number of arguments.\");\n        var r = e.parse(t[1], 1, q);\n        if (!r) return null;\n        var n = [];\n        var i = null;\n        e.expectedType && \"value\" !== e.expectedType.kind && (i = e.expectedType);\n        for (var _r34 = 1; _r34 < t.length; _r34 += 2) {\n          var _s14 = 1 === _r34 ? -1 / 0 : t[_r34],\n            _a13 = t[_r34 + 1],\n            _o5 = _r34,\n            _l3 = _r34 + 1;\n          if (\"number\" != typeof _s14) return e.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', _o5);\n          if (n.length && n[n.length - 1][0] >= _s14) return e.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.', _o5);\n          var _u3 = e.parse(_a13, _l3, i);\n          if (!_u3) return null;\n          i = i || _u3.type, n.push([_s14, _u3]);\n        }\n        return new Step(i, r, n);\n      }\n    }]);\n    return Step;\n  }();\n  var Ut = Step;\n  function qt(t, e, r) {\n    return t * (1 - r) + e * r;\n  }\n  var Nt = Object.freeze({\n    __proto__: null,\n    number: qt,\n    color: function color(t, e, r) {\n      return new R(qt(t.r, e.r, r), qt(t.g, e.g, r), qt(t.b, e.b, r), qt(t.a, e.a, r));\n    },\n    array: function array(t, e, r) {\n      return t.map(function (t, n) {\n        return qt(t, e[n], r);\n      });\n    }\n  });\n  var Gt = .95047,\n    Zt = 1.08883,\n    Xt = 4 / 29,\n    Yt = 6 / 29,\n    Wt = 3 * Yt * Yt,\n    Jt = Math.PI / 180,\n    Kt = 180 / Math.PI;\n  function Ht(t) {\n    return t > .008856451679035631 ? Math.pow(t, 1 / 3) : t / Wt + Xt;\n  }\n  function Qt(t) {\n    return t > Yt ? t * t * t : Wt * (t - Xt);\n  }\n  function te(t) {\n    return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055);\n  }\n  function ee(t) {\n    return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4);\n  }\n  function re(t) {\n    var e = ee(t.r),\n      r = ee(t.g),\n      n = ee(t.b),\n      i = Ht((.4124564 * e + .3575761 * r + .1804375 * n) / Gt),\n      s = Ht((.2126729 * e + .7151522 * r + .072175 * n) / 1);\n    return {\n      l: 116 * s - 16,\n      a: 500 * (i - s),\n      b: 200 * (s - Ht((.0193339 * e + .119192 * r + .9503041 * n) / Zt)),\n      alpha: t.a\n    };\n  }\n  function ne(t) {\n    var e = (t.l + 16) / 116,\n      r = isNaN(t.a) ? e : e + t.a / 500,\n      n = isNaN(t.b) ? e : e - t.b / 200;\n    return e = 1 * Qt(e), r = Gt * Qt(r), n = Zt * Qt(n), new R(te(3.2404542 * r - 1.5371385 * e - .4985314 * n), te(-.969266 * r + 1.8760108 * e + .041556 * n), te(.0556434 * r - .2040259 * e + 1.0572252 * n), t.alpha);\n  }\n  function ie(t, e, r) {\n    var n = e - t;\n    return t + r * (n > 180 || n < -180 ? n - 360 * Math.round(n / 360) : n);\n  }\n  var se = {\n      forward: re,\n      reverse: ne,\n      interpolate: function interpolate(t, e, r) {\n        return {\n          l: qt(t.l, e.l, r),\n          a: qt(t.a, e.a, r),\n          b: qt(t.b, e.b, r),\n          alpha: qt(t.alpha, e.alpha, r)\n        };\n      }\n    },\n    ae = {\n      forward: function forward(t) {\n        var _re = re(t),\n          e = _re.l,\n          r = _re.a,\n          n = _re.b,\n          i = Math.atan2(n, r) * Kt;\n        return {\n          h: i < 0 ? i + 360 : i,\n          c: Math.sqrt(r * r + n * n),\n          l: e,\n          alpha: t.a\n        };\n      },\n      reverse: function reverse(t) {\n        var e = t.h * Jt,\n          r = t.c;\n        return ne({\n          l: t.l,\n          a: Math.cos(e) * r,\n          b: Math.sin(e) * r,\n          alpha: t.alpha\n        });\n      },\n      interpolate: function interpolate(t, e, r) {\n        return {\n          h: ie(t.h, e.h, r),\n          c: qt(t.c, e.c, r),\n          l: qt(t.l, e.l, r),\n          alpha: qt(t.alpha, e.alpha, r)\n        };\n      }\n    };\n  var oe = Object.freeze({\n    __proto__: null,\n    lab: se,\n    hcl: ae\n  });\n  var Interpolate = /*#__PURE__*/function () {\n    function Interpolate(t, e, r, n, i) {\n      _classCallCheck(this, Interpolate);\n      this.type = t, this.operator = e, this.interpolation = r, this.input = n, this.labels = [], this.outputs = [];\n      var _iterator23 = _createForOfIteratorHelper(i),\n        _step23;\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var _step23$value = _slicedToArray(_step23.value, 2),\n            _t21 = _step23$value[0],\n            _e28 = _step23$value[1];\n          this.labels.push(_t21), this.outputs.push(_e28);\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n    }\n    _createClass(Interpolate, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.labels,\n          r = this.outputs;\n        if (1 === e.length) return r[0].evaluate(t);\n        var n = this.input.evaluate(t);\n        if (n <= e[0]) return r[0].evaluate(t);\n        var i = e.length;\n        if (n >= e[i - 1]) return r[i - 1].evaluate(t);\n        var s = $t(e, n),\n          a = Interpolate.interpolationFactor(this.interpolation, n, e[s], e[s + 1]),\n          o = r[s].evaluate(t),\n          l = r[s + 1].evaluate(t);\n        return \"interpolate\" === this.operator ? Nt[this.type.kind.toLowerCase()](o, l, a) : \"interpolate-hcl\" === this.operator ? ae.reverse(ae.interpolate(ae.forward(o), ae.forward(l), a)) : se.reverse(se.interpolate(se.forward(o), se.forward(l), a));\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.input);\n        var _iterator24 = _createForOfIteratorHelper(this.outputs),\n          _step24;\n        try {\n          for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n            var _e29 = _step24.value;\n            t(_e29);\n          }\n        } catch (err) {\n          _iterator24.e(err);\n        } finally {\n          _iterator24.f();\n        }\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return this.outputs.every(function (t) {\n          return t.outputDefined();\n        });\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t;\n        t = \"linear\" === this.interpolation.name ? [\"linear\"] : \"exponential\" === this.interpolation.name ? 1 === this.interpolation.base ? [\"linear\"] : [\"exponential\", this.interpolation.base] : [\"cubic-bezier\"].concat(this.interpolation.controlPoints);\n        var e = [this.operator, t, this.input.serialize()];\n        for (var _t22 = 0; _t22 < this.labels.length; _t22++) e.push(this.labels[_t22], this.outputs[_t22].serialize());\n        return e;\n      }\n    }], [{\n      key: \"interpolationFactor\",\n      value: function interpolationFactor(e, r, n, i) {\n        var s = 0;\n        if (\"exponential\" === e.name) s = le(r, e.base, n, i);else if (\"linear\" === e.name) s = le(r, 1, n, i);else if (\"cubic-bezier\" === e.name) {\n          var _a14 = e.controlPoints;\n          s = new t(_a14[0], _a14[1], _a14[2], _a14[3]).solve(le(r, 1, n, i));\n        }\n        return s;\n      }\n    }, {\n      key: \"parse\",\n      value: function parse(t, e) {\n        var _t23 = _toArray(t),\n          r = _t23[0],\n          n = _t23[1],\n          i = _t23[2],\n          s = _t23.slice(3);\n        if (!Array.isArray(n) || 0 === n.length) return e.error(\"Expected an interpolation type expression.\", 1);\n        if (\"linear\" === n[0]) n = {\n          name: \"linear\"\n        };else if (\"exponential\" === n[0]) {\n          var _t24 = n[1];\n          if (\"number\" != typeof _t24) return e.error(\"Exponential interpolation requires a numeric base.\", 1, 1);\n          n = {\n            name: \"exponential\",\n            base: _t24\n          };\n        } else {\n          if (\"cubic-bezier\" !== n[0]) return e.error(\"Unknown interpolation type \".concat(String(n[0])), 1, 0);\n          {\n            var _t25 = n.slice(1);\n            if (4 !== _t25.length || _t25.some(function (t) {\n              return \"number\" != typeof t || t < 0 || t > 1;\n            })) return e.error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.\", 1);\n            n = {\n              name: \"cubic-bezier\",\n              controlPoints: _t25\n            };\n          }\n        }\n        if (t.length - 1 < 4) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n        if ((t.length - 1) % 2 != 0) return e.error(\"Expected an even number of arguments.\");\n        if (i = e.parse(i, 2, q), !i) return null;\n        var a = [];\n        var o = null;\n        \"interpolate-hcl\" === r || \"interpolate-lab\" === r ? o = Z : e.expectedType && \"value\" !== e.expectedType.kind && (o = e.expectedType);\n        for (var _t26 = 0; _t26 < s.length; _t26 += 2) {\n          var _r35 = s[_t26],\n            _n17 = s[_t26 + 1],\n            _i15 = _t26 + 3,\n            _l4 = _t26 + 4;\n          if (\"number\" != typeof _r35) return e.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', _i15);\n          if (a.length && a[a.length - 1][0] >= _r35) return e.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.', _i15);\n          var _u4 = e.parse(_n17, _l4, o);\n          if (!_u4) return null;\n          o = o || _u4.type, a.push([_r35, _u4]);\n        }\n        return \"number\" === o.kind || \"color\" === o.kind || \"array\" === o.kind && \"number\" === o.itemType.kind && \"number\" == typeof o.N ? new Interpolate(o, r, n, i, a) : e.error(\"Type \".concat(Q(o), \" is not interpolatable.\"));\n      }\n    }]);\n    return Interpolate;\n  }();\n  function le(t, e, r, n) {\n    var i = n - r,\n      s = t - r;\n    return 0 === i ? 0 : 1 === e ? s / i : (Math.pow(e, s) - 1) / (Math.pow(e, i) - 1);\n  }\n  var ue = Interpolate;\n  var Coalesce = /*#__PURE__*/function () {\n    function Coalesce(t, e) {\n      _classCallCheck(this, Coalesce);\n      this.type = t, this.args = e;\n    }\n    _createClass(Coalesce, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e,\n          r = null,\n          n = 0;\n        var _iterator25 = _createForOfIteratorHelper(this.args),\n          _step25;\n        try {\n          for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n            var _i16 = _step25.value;\n            if (n++, r = _i16.evaluate(t), r && r instanceof ResolvedImage && !r.available && (e || (e = r), r = null, n === this.args.length)) return e;\n            if (null !== r) break;\n          }\n        } catch (err) {\n          _iterator25.e(err);\n        } finally {\n          _iterator25.f();\n        }\n        return r;\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        this.args.forEach(t);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return this.args.every(function (t) {\n          return t.outputDefined();\n        });\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = [\"coalesce\"];\n        return this.eachChild(function (e) {\n          t.push(e.serialize());\n        }), t;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length < 2) return e.error(\"Expectected at least one argument.\");\n        var r = null;\n        var n = e.expectedType;\n        n && \"value\" !== n.kind && (r = n);\n        var i = [];\n        var _iterator26 = _createForOfIteratorHelper(t.slice(1)),\n          _step26;\n        try {\n          for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n            var _n18 = _step26.value;\n            var _t27 = e.parse(_n18, 1 + i.length, r, void 0, {\n              typeAnnotation: \"omit\"\n            });\n            if (!_t27) return null;\n            r = r || _t27.type, i.push(_t27);\n          }\n        } catch (err) {\n          _iterator26.e(err);\n        } finally {\n          _iterator26.f();\n        }\n        var s = n && i.some(function (t) {\n          return et(n, t.type);\n        });\n        return new Coalesce(s ? Y : r, i);\n      }\n    }]);\n    return Coalesce;\n  }();\n  var ce = Coalesce;\n  var Let = /*#__PURE__*/function () {\n    function Let(t, e) {\n      _classCallCheck(this, Let);\n      this.type = e.type, this.bindings = [].concat(t), this.result = e;\n    }\n    _createClass(Let, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        return this.result.evaluate(t);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        var _iterator27 = _createForOfIteratorHelper(this.bindings),\n          _step27;\n        try {\n          for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n            var _e30 = _step27.value;\n            t(_e30[1]);\n          }\n        } catch (err) {\n          _iterator27.e(err);\n        } finally {\n          _iterator27.f();\n        }\n        t(this.result);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return this.result.outputDefined();\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = [\"let\"];\n        var _iterator28 = _createForOfIteratorHelper(this.bindings),\n          _step28;\n        try {\n          for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n            var _step28$value = _slicedToArray(_step28.value, 2),\n              _e31 = _step28$value[0],\n              _r36 = _step28$value[1];\n            t.push(_e31, _r36.serialize());\n          }\n        } catch (err) {\n          _iterator28.e(err);\n        } finally {\n          _iterator28.f();\n        }\n        return t.push(this.result.serialize()), t;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length < 4) return e.error(\"Expected at least 3 arguments, but found \".concat(t.length - 1, \" instead.\"));\n        var r = [];\n        for (var _n19 = 1; _n19 < t.length - 1; _n19 += 2) {\n          var _i17 = t[_n19];\n          if (\"string\" != typeof _i17) return e.error(\"Expected string, but found \".concat(typeof _i17, \" instead.\"), _n19);\n          if (/[^a-zA-Z0-9_]/.test(_i17)) return e.error(\"Variable names must contain only alphanumeric characters or '_'.\", _n19);\n          var _s15 = e.parse(t[_n19 + 1], _n19 + 1);\n          if (!_s15) return null;\n          r.push([_i17, _s15]);\n        }\n        var n = e.parse(t[t.length - 1], t.length - 1, e.expectedType, r);\n        return n ? new Let(r, n) : null;\n      }\n    }]);\n    return Let;\n  }();\n  var he = Let;\n  var At = /*#__PURE__*/function () {\n    function At(t, e, r) {\n      _classCallCheck(this, At);\n      this.type = t, this.index = e, this.input = r;\n    }\n    _createClass(At, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.index.evaluate(t),\n          r = this.input.evaluate(t);\n        if (e < 0) throw new ut(\"Array index out of bounds: \".concat(e, \" < 0.\"));\n        if (e >= r.length) throw new ut(\"Array index out of bounds: \".concat(e, \" > \").concat(r.length - 1, \".\"));\n        if (e !== Math.floor(e)) throw new ut(\"Array index must be an integer, but found \".concat(e, \" instead.\"));\n        return r[e];\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.index), t(this.input);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return [\"at\", this.index.serialize(), this.input.serialize()];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (3 !== t.length) return e.error(\"Expected 2 arguments, but found \".concat(t.length - 1, \" instead.\"));\n        var r = e.parse(t[1], 1, q),\n          n = e.parse(t[2], 2, H(e.expectedType || Y));\n        return r && n ? new At(n.type.itemType, r, n) : null;\n      }\n    }]);\n    return At;\n  }();\n  var pe = At;\n  var In = /*#__PURE__*/function () {\n    function In(t, e) {\n      _classCallCheck(this, In);\n      this.type = G, this.needle = t, this.haystack = e;\n    }\n    _createClass(In, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.needle.evaluate(t),\n          r = this.haystack.evaluate(t);\n        if (null == r) return !1;\n        if (!nt(e, [\"boolean\", \"string\", \"number\", \"null\"])) throw new ut(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(Q(at(e)), \" instead.\"));\n        if (!nt(r, [\"string\", \"array\"])) throw new ut(\"Expected second argument to be of type array or string, but found \".concat(Q(at(r)), \" instead.\"));\n        return r.indexOf(e) >= 0;\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.needle), t(this.haystack);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !0;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return [\"in\", this.needle.serialize(), this.haystack.serialize()];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (3 !== t.length) return e.error(\"Expected 2 arguments, but found \".concat(t.length - 1, \" instead.\"));\n        var r = e.parse(t[1], 1, Y),\n          n = e.parse(t[2], 2, Y);\n        return r && n ? rt(r.type, [G, N, q, U, Y]) ? new In(r, n) : e.error(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(Q(r.type), \" instead\")) : null;\n      }\n    }]);\n    return In;\n  }();\n  var de = In;\n  var IndexOf = /*#__PURE__*/function () {\n    function IndexOf(t, e, r) {\n      _classCallCheck(this, IndexOf);\n      this.type = q, this.needle = t, this.haystack = e, this.fromIndex = r;\n    }\n    _createClass(IndexOf, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.needle.evaluate(t),\n          r = this.haystack.evaluate(t);\n        if (!nt(e, [\"boolean\", \"string\", \"number\", \"null\"])) throw new ut(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(Q(at(e)), \" instead.\"));\n        if (!nt(r, [\"string\", \"array\"])) throw new ut(\"Expected second argument to be of type array or string, but found \".concat(Q(at(r)), \" instead.\"));\n        if (this.fromIndex) {\n          var _n20 = this.fromIndex.evaluate(t);\n          return r.indexOf(e, _n20);\n        }\n        return r.indexOf(e);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.needle), t(this.haystack), this.fromIndex && t(this.fromIndex);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        if (null != this.fromIndex && void 0 !== this.fromIndex) {\n          var _t28 = this.fromIndex.serialize();\n          return [\"index-of\", this.needle.serialize(), this.haystack.serialize(), _t28];\n        }\n        return [\"index-of\", this.needle.serialize(), this.haystack.serialize()];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length <= 2 || t.length >= 5) return e.error(\"Expected 3 or 4 arguments, but found \".concat(t.length - 1, \" instead.\"));\n        var r = e.parse(t[1], 1, Y),\n          n = e.parse(t[2], 2, Y);\n        if (!r || !n) return null;\n        if (!rt(r.type, [G, N, q, U, Y])) return e.error(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(Q(r.type), \" instead\"));\n        if (4 === t.length) {\n          var _i18 = e.parse(t[3], 3, q);\n          return _i18 ? new IndexOf(r, n, _i18) : null;\n        }\n        return new IndexOf(r, n);\n      }\n    }]);\n    return IndexOf;\n  }();\n  var fe = IndexOf;\n  var Match = /*#__PURE__*/function () {\n    function Match(t, e, r, n, i, s) {\n      _classCallCheck(this, Match);\n      this.inputType = t, this.type = e, this.input = r, this.cases = n, this.outputs = i, this.otherwise = s;\n    }\n    _createClass(Match, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.input.evaluate(t);\n        return (at(e) === this.inputType && this.outputs[this.cases[e]] || this.otherwise).evaluate(t);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.input), this.outputs.forEach(t), t(this.otherwise);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return this.outputs.every(function (t) {\n          return t.outputDefined();\n        }) && this.otherwise.outputDefined();\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var _this2 = this;\n        var t = [\"match\", this.input.serialize()],\n          e = Object.keys(this.cases).sort(),\n          r = [],\n          n = {};\n        var _iterator29 = _createForOfIteratorHelper(e),\n          _step29;\n        try {\n          for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {\n            var _t29 = _step29.value;\n            var _e33 = n[this.cases[_t29]];\n            void 0 === _e33 ? (n[this.cases[_t29]] = r.length, r.push([this.cases[_t29], [_t29]])) : r[_e33][1].push(_t29);\n          }\n        } catch (err) {\n          _iterator29.e(err);\n        } finally {\n          _iterator29.f();\n        }\n        var i = function i(t) {\n          return \"number\" === _this2.inputType.kind ? Number(t) : t;\n        };\n        for (var _i19 = 0, _r37 = r; _i19 < _r37.length; _i19++) {\n          var _r37$_i = _slicedToArray(_r37[_i19], 2),\n            _e32 = _r37$_i[0],\n            _n21 = _r37$_i[1];\n          t.push(1 === _n21.length ? i(_n21[0]) : _n21.map(i)), t.push(this.outputs[_e32].serialize());\n        }\n        return t.push(this.otherwise.serialize()), t;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length < 5) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n        if (t.length % 2 != 1) return e.error(\"Expected an even number of arguments.\");\n        var r, n;\n        e.expectedType && \"value\" !== e.expectedType.kind && (n = e.expectedType);\n        var i = {},\n          s = [];\n        for (var _a15 = 2; _a15 < t.length - 1; _a15 += 2) {\n          var _o6 = t[_a15];\n          var _l5 = t[_a15 + 1];\n          Array.isArray(_o6) || (_o6 = [_o6]);\n          var _u5 = e.concat(_a15);\n          if (0 === _o6.length) return _u5.error(\"Expected at least one branch label.\");\n          var _iterator30 = _createForOfIteratorHelper(_o6),\n            _step30;\n          try {\n            for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n              var _t30 = _step30.value;\n              if (\"number\" != typeof _t30 && \"string\" != typeof _t30) return _u5.error(\"Branch labels must be numbers or strings.\");\n              if (\"number\" == typeof _t30 && Math.abs(_t30) > Number.MAX_SAFE_INTEGER) return _u5.error(\"Branch labels must be integers no larger than \".concat(Number.MAX_SAFE_INTEGER, \".\"));\n              if (\"number\" == typeof _t30 && Math.floor(_t30) !== _t30) return _u5.error(\"Numeric branch labels must be integer values.\");\n              if (r) {\n                if (_u5.checkSubtype(r, at(_t30))) return null;\n              } else r = at(_t30);\n              if (void 0 !== i[String(_t30)]) return _u5.error(\"Branch labels must be unique.\");\n              i[String(_t30)] = s.length;\n            }\n          } catch (err) {\n            _iterator30.e(err);\n          } finally {\n            _iterator30.f();\n          }\n          var _c2 = e.parse(_l5, _a15, n);\n          if (!_c2) return null;\n          n = n || _c2.type, s.push(_c2);\n        }\n        var a = e.parse(t[1], 1, Y);\n        if (!a) return null;\n        var o = e.parse(t[t.length - 1], t.length - 1, n);\n        return o ? \"value\" !== a.type.kind && e.concat(1).checkSubtype(r, a.type) ? null : new Match(r, n, a, i, s, o) : null;\n      }\n    }]);\n    return Match;\n  }();\n  var ye = Match;\n  var Case = /*#__PURE__*/function () {\n    function Case(t, e, r) {\n      _classCallCheck(this, Case);\n      this.type = t, this.branches = e, this.otherwise = r;\n    }\n    _createClass(Case, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var _iterator31 = _createForOfIteratorHelper(this.branches),\n          _step31;\n        try {\n          for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n            var _step31$value = _slicedToArray(_step31.value, 2),\n              _e34 = _step31$value[0],\n              _r38 = _step31$value[1];\n            if (_e34.evaluate(t)) return _r38.evaluate(t);\n          }\n        } catch (err) {\n          _iterator31.e(err);\n        } finally {\n          _iterator31.f();\n        }\n        return this.otherwise.evaluate(t);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        var _iterator32 = _createForOfIteratorHelper(this.branches),\n          _step32;\n        try {\n          for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {\n            var _step32$value = _slicedToArray(_step32.value, 2),\n              _e35 = _step32$value[0],\n              _r39 = _step32$value[1];\n            t(_e35), t(_r39);\n          }\n        } catch (err) {\n          _iterator32.e(err);\n        } finally {\n          _iterator32.f();\n        }\n        t(this.otherwise);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return this.branches.every(function (_ref5) {\n          var _ref6 = _slicedToArray(_ref5, 2),\n            t = _ref6[0],\n            e = _ref6[1];\n          return e.outputDefined();\n        }) && this.otherwise.outputDefined();\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = [\"case\"];\n        return this.eachChild(function (e) {\n          t.push(e.serialize());\n        }), t;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length < 4) return e.error(\"Expected at least 3 arguments, but found only \".concat(t.length - 1, \".\"));\n        if (t.length % 2 != 0) return e.error(\"Expected an odd number of arguments.\");\n        var r;\n        e.expectedType && \"value\" !== e.expectedType.kind && (r = e.expectedType);\n        var n = [];\n        for (var _i20 = 1; _i20 < t.length - 1; _i20 += 2) {\n          var _s16 = e.parse(t[_i20], _i20, G);\n          if (!_s16) return null;\n          var _a16 = e.parse(t[_i20 + 1], _i20 + 1, r);\n          if (!_a16) return null;\n          n.push([_s16, _a16]), r = r || _a16.type;\n        }\n        var i = e.parse(t[t.length - 1], t.length - 1, r);\n        return i ? new Case(r, n, i) : null;\n      }\n    }]);\n    return Case;\n  }();\n  var me = Case;\n  var Slice = /*#__PURE__*/function () {\n    function Slice(t, e, r, n) {\n      _classCallCheck(this, Slice);\n      this.type = t, this.input = e, this.beginIndex = r, this.endIndex = n;\n    }\n    _createClass(Slice, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.input.evaluate(t),\n          r = this.beginIndex.evaluate(t);\n        if (!nt(e, [\"string\", \"array\"])) throw new ut(\"Expected first argument to be of type array or string, but found \".concat(Q(at(e)), \" instead.\"));\n        if (this.endIndex) {\n          var _n22 = this.endIndex.evaluate(t);\n          return e.slice(r, _n22);\n        }\n        return e.slice(r);\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.input), t(this.beginIndex), this.endIndex && t(this.endIndex);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        if (null != this.endIndex && void 0 !== this.endIndex) {\n          var _t31 = this.endIndex.serialize();\n          return [\"slice\", this.input.serialize(), this.beginIndex.serialize(), _t31];\n        }\n        return [\"slice\", this.input.serialize(), this.beginIndex.serialize()];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (t.length <= 2 || t.length >= 5) return e.error(\"Expected 3 or 4 arguments, but found \".concat(t.length - 1, \" instead.\"));\n        var r = e.parse(t[1], 1, Y),\n          n = e.parse(t[2], 2, q);\n        if (!r || !n) return null;\n        if (!rt(r.type, [H(Y), N, Y])) return e.error(\"Expected first argument to be of type array or string, but found \".concat(Q(r.type), \" instead\"));\n        if (4 === t.length) {\n          var _i21 = e.parse(t[3], 3, q);\n          return _i21 ? new Slice(r.type, r, n, _i21) : null;\n        }\n        return new Slice(r.type, r, n);\n      }\n    }]);\n    return Slice;\n  }();\n  var ge = Slice;\n  function xe(t, e) {\n    return \"==\" === t || \"!=\" === t ? \"boolean\" === e.kind || \"string\" === e.kind || \"number\" === e.kind || \"null\" === e.kind || \"value\" === e.kind : \"string\" === e.kind || \"number\" === e.kind || \"value\" === e.kind;\n  }\n  function ve(t, e, r, n) {\n    return 0 === n.compare(e, r);\n  }\n  function be(t, e, r) {\n    var n = \"==\" !== t && \"!=\" !== t;\n    return /*#__PURE__*/function () {\n      function Comparison(t, e, r) {\n        _classCallCheck(this, Comparison);\n        this.type = G, this.lhs = t, this.rhs = e, this.collator = r, this.hasUntypedArgument = \"value\" === t.type.kind || \"value\" === e.type.kind;\n      }\n      _createClass(Comparison, [{\n        key: \"evaluate\",\n        value: function evaluate(i) {\n          var s = this.lhs.evaluate(i),\n            a = this.rhs.evaluate(i);\n          if (n && this.hasUntypedArgument) {\n            var _e36 = at(s),\n              _r40 = at(a);\n            if (_e36.kind !== _r40.kind || \"string\" !== _e36.kind && \"number\" !== _e36.kind) throw new ut(\"Expected arguments for \\\"\".concat(t, \"\\\" to be (string, string) or (number, number), but found (\").concat(_e36.kind, \", \").concat(_r40.kind, \") instead.\"));\n          }\n          if (this.collator && !n && this.hasUntypedArgument) {\n            var _t32 = at(s),\n              _r41 = at(a);\n            if (\"string\" !== _t32.kind || \"string\" !== _r41.kind) return e(i, s, a);\n          }\n          return this.collator ? r(i, s, a, this.collator.evaluate(i)) : e(i, s, a);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.lhs), t(this.rhs), this.collator && t(this.collator);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var e = [t];\n          return this.eachChild(function (t) {\n            e.push(t.serialize());\n          }), e;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length && 4 !== t.length) return e.error(\"Expected two or three arguments.\");\n          var r = t[0];\n          var i = e.parse(t[1], 1, Y);\n          if (!i) return null;\n          if (!xe(r, i.type)) return e.concat(1).error(\"\\\"\".concat(r, \"\\\" comparisons are not supported for type '\").concat(Q(i.type), \"'.\"));\n          var s = e.parse(t[2], 2, Y);\n          if (!s) return null;\n          if (!xe(r, s.type)) return e.concat(2).error(\"\\\"\".concat(r, \"\\\" comparisons are not supported for type '\").concat(Q(s.type), \"'.\"));\n          if (i.type.kind !== s.type.kind && \"value\" !== i.type.kind && \"value\" !== s.type.kind) return e.error(\"Cannot compare types '\".concat(Q(i.type), \"' and '\").concat(Q(s.type), \"'.\"));\n          n && (\"value\" === i.type.kind && \"value\" !== s.type.kind ? i = new ht(s.type, [i]) : \"value\" !== i.type.kind && \"value\" === s.type.kind && (s = new ht(i.type, [s])));\n          var a = null;\n          if (4 === t.length) {\n            if (\"string\" !== i.type.kind && \"string\" !== s.type.kind && \"value\" !== i.type.kind && \"value\" !== s.type.kind) return e.error(\"Cannot use collator to compare non-string types.\");\n            if (a = e.parse(t[3], 3, W), !a) return null;\n          }\n          return new Comparison(i, s, a);\n        }\n      }]);\n      return Comparison;\n    }();\n  }\n  var we = be(\"==\", function (t, e, r) {\n      return e === r;\n    }, ve),\n    _e = be(\"!=\", function (t, e, r) {\n      return e !== r;\n    }, function (t, e, r, n) {\n      return !ve(0, e, r, n);\n    }),\n    Se = be(\"<\", function (t, e, r) {\n      return e < r;\n    }, function (t, e, r, n) {\n      return n.compare(e, r) < 0;\n    }),\n    Ae = be(\">\", function (t, e, r) {\n      return e > r;\n    }, function (t, e, r, n) {\n      return n.compare(e, r) > 0;\n    }),\n    ke = be(\"<=\", function (t, e, r) {\n      return e <= r;\n    }, function (t, e, r, n) {\n      return n.compare(e, r) <= 0;\n    }),\n    Ie = be(\">=\", function (t, e, r) {\n      return e >= r;\n    }, function (t, e, r, n) {\n      return n.compare(e, r) >= 0;\n    });\n  var NumberFormat = /*#__PURE__*/function () {\n    function NumberFormat(t, e, r, n, i, s) {\n      _classCallCheck(this, NumberFormat);\n      this.type = N, this.number = t, this.locale = e, this.currency = r, this.unit = n, this.minFractionDigits = i, this.maxFractionDigits = s;\n    }\n    _createClass(NumberFormat, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        return new Intl.NumberFormat(this.locale ? this.locale.evaluate(t) : [], {\n          style: (this.currency ? \"currency\" : this.unit && \"unit\") || \"decimal\",\n          currency: this.currency ? this.currency.evaluate(t) : void 0,\n          unit: this.unit ? this.unit.evaluate(t) : void 0,\n          minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(t) : void 0,\n          maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(t) : void 0\n        }).format(this.number.evaluate(t));\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.number), this.locale && t(this.locale), this.currency && t(this.currency), this.unit && t(this.unit), this.minFractionDigits && t(this.minFractionDigits), this.maxFractionDigits && t(this.maxFractionDigits);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = {};\n        return this.locale && (t.locale = this.locale.serialize()), this.currency && (t.currency = this.currency.serialize()), this.unit && (t.unit = this.unit.serialize()), this.minFractionDigits && (t[\"min-fraction-digits\"] = this.minFractionDigits.serialize()), this.maxFractionDigits && (t[\"max-fraction-digits\"] = this.maxFractionDigits.serialize()), [\"number-format\", this.number.serialize(), t];\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (3 !== t.length) return e.error(\"Expected two arguments.\");\n        var r = e.parse(t[1], 1, q);\n        if (!r) return null;\n        var n = t[2];\n        if (\"object\" != typeof n || Array.isArray(n)) return e.error(\"NumberFormat options argument must be an object.\");\n        var i = null;\n        if (n.locale && (i = e.parse(n.locale, 1, N), !i)) return null;\n        var s = null;\n        if (n.currency && (s = e.parse(n.currency, 1, N), !s)) return null;\n        var a = null;\n        if (n.unit && (a = e.parse(n.unit, 1, N), !a)) return null;\n        var o = null;\n        if (n[\"min-fraction-digits\"] && (o = e.parse(n[\"min-fraction-digits\"], 1, q), !o)) return null;\n        var l = null;\n        return n[\"max-fraction-digits\"] && (l = e.parse(n[\"max-fraction-digits\"], 1, q), !l) ? null : new NumberFormat(r, i, s, a, o, l);\n      }\n    }]);\n    return NumberFormat;\n  }();\n  var Length = /*#__PURE__*/function () {\n    function Length(t) {\n      _classCallCheck(this, Length);\n      this.type = q, this.input = t;\n    }\n    _createClass(Length, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        var e = this.input.evaluate(t);\n        if (\"string\" == typeof e) return e.length;\n        if (Array.isArray(e)) return e.length;\n        throw new ut(\"Expected value to be of type string or array, but found \".concat(Q(at(e)), \" instead.\"));\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        t(this.input);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = [\"length\"];\n        return this.eachChild(function (e) {\n          t.push(e.serialize());\n        }), t;\n      }\n    }], [{\n      key: \"parse\",\n      value: function parse(t, e) {\n        if (2 !== t.length) return e.error(\"Expected 1 argument, but found \".concat(t.length - 1, \" instead.\"));\n        var r = e.parse(t[1], 1);\n        return r ? \"array\" !== r.type.kind && \"string\" !== r.type.kind && \"value\" !== r.type.kind ? e.error(\"Expected argument of type string or array, but found \".concat(Q(r.type), \" instead.\")) : new Length(r) : null;\n      }\n    }]);\n    return Length;\n  }();\n  var Me = {\n    \"==\": we,\n    \"!=\": _e,\n    \">\": Ae,\n    \"<\": Se,\n    \">=\": Ie,\n    \"<=\": ke,\n    array: ht,\n    at: pe,\n    boolean: ht,\n    case: me,\n    coalesce: ce,\n    collator: CollatorExpression,\n    format: FormatExpression,\n    image: ImageExpression,\n    in: de,\n    \"index-of\": fe,\n    interpolate: ue,\n    \"interpolate-hcl\": ue,\n    \"interpolate-lab\": ue,\n    length: Length,\n    let: he,\n    literal: lt,\n    match: ye,\n    number: ht,\n    \"number-format\": NumberFormat,\n    object: ht,\n    slice: ge,\n    step: Ut,\n    string: ht,\n    \"to-boolean\": dt,\n    \"to-color\": dt,\n    \"to-number\": dt,\n    \"to-string\": dt,\n    var: Rt,\n    within: Bt\n  };\n  function Pe(t, _ref7) {\n    var _ref8 = _slicedToArray(_ref7, 4),\n      e = _ref8[0],\n      r = _ref8[1],\n      n = _ref8[2],\n      i = _ref8[3];\n    e = e.evaluate(t), r = r.evaluate(t), n = n.evaluate(t);\n    var s = i ? i.evaluate(t) : 1,\n      a = it(e, r, n, s);\n    if (a) throw new ut(a);\n    return new R(e / 255 * s, r / 255 * s, n / 255 * s, s);\n  }\n  function Te(t, e) {\n    return t in e;\n  }\n  function Ce(t, e) {\n    var r = e[t];\n    return void 0 === r ? null : r;\n  }\n  function Ee(t) {\n    return {\n      type: t\n    };\n  }\n  mt.register(Me, {\n    error: [{\n      kind: \"error\"\n    }, [N], function (t, _ref9) {\n      var _ref10 = _slicedToArray(_ref9, 1),\n        e = _ref10[0];\n      throw new ut(e.evaluate(t));\n    }],\n    typeof: [N, [Y], function (t, _ref11) {\n      var _ref12 = _slicedToArray(_ref11, 1),\n        e = _ref12[0];\n      return Q(at(e.evaluate(t)));\n    }],\n    \"to-rgba\": [H(q, 4), [Z], function (t, _ref13) {\n      var _ref14 = _slicedToArray(_ref13, 1),\n        e = _ref14[0];\n      return e.evaluate(t).toArray();\n    }],\n    rgb: [Z, [q, q, q], Pe],\n    rgba: [Z, [q, q, q, q], Pe],\n    has: {\n      type: G,\n      overloads: [[[N], function (t, _ref15) {\n        var _ref16 = _slicedToArray(_ref15, 1),\n          e = _ref16[0];\n        return Te(e.evaluate(t), t.properties());\n      }], [[N, X], function (t, _ref17) {\n        var _ref18 = _slicedToArray(_ref17, 2),\n          e = _ref18[0],\n          r = _ref18[1];\n        return Te(e.evaluate(t), r.evaluate(t));\n      }]]\n    },\n    get: {\n      type: Y,\n      overloads: [[[N], function (t, _ref19) {\n        var _ref20 = _slicedToArray(_ref19, 1),\n          e = _ref20[0];\n        return Ce(e.evaluate(t), t.properties());\n      }], [[N, X], function (t, _ref21) {\n        var _ref22 = _slicedToArray(_ref21, 2),\n          e = _ref22[0],\n          r = _ref22[1];\n        return Ce(e.evaluate(t), r.evaluate(t));\n      }]]\n    },\n    \"feature-state\": [Y, [N], function (t, _ref23) {\n      var _ref24 = _slicedToArray(_ref23, 1),\n        e = _ref24[0];\n      return Ce(e.evaluate(t), t.featureState || {});\n    }],\n    properties: [X, [], function (t) {\n      return t.properties();\n    }],\n    \"geometry-type\": [N, [], function (t) {\n      return t.geometryType();\n    }],\n    id: [Y, [], function (t) {\n      return t.id();\n    }],\n    zoom: [q, [], function (t) {\n      return t.globals.zoom;\n    }],\n    pitch: [q, [], function (t) {\n      return t.globals.pitch || 0;\n    }],\n    \"distance-from-center\": [q, [], function (t) {\n      return t.distanceFromCenter();\n    }],\n    \"heatmap-density\": [q, [], function (t) {\n      return t.globals.heatmapDensity || 0;\n    }],\n    \"line-progress\": [q, [], function (t) {\n      return t.globals.lineProgress || 0;\n    }],\n    \"sky-radial-progress\": [q, [], function (t) {\n      return t.globals.skyRadialProgress || 0;\n    }],\n    accumulated: [Y, [], function (t) {\n      return void 0 === t.globals.accumulated ? null : t.globals.accumulated;\n    }],\n    \"+\": [q, Ee(q), function (t, e) {\n      var r = 0;\n      var _iterator33 = _createForOfIteratorHelper(e),\n        _step33;\n      try {\n        for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n          var _n23 = _step33.value;\n          r += _n23.evaluate(t);\n        }\n      } catch (err) {\n        _iterator33.e(err);\n      } finally {\n        _iterator33.f();\n      }\n      return r;\n    }],\n    \"*\": [q, Ee(q), function (t, e) {\n      var r = 1;\n      var _iterator34 = _createForOfIteratorHelper(e),\n        _step34;\n      try {\n        for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n          var _n24 = _step34.value;\n          r *= _n24.evaluate(t);\n        }\n      } catch (err) {\n        _iterator34.e(err);\n      } finally {\n        _iterator34.f();\n      }\n      return r;\n    }],\n    \"-\": {\n      type: q,\n      overloads: [[[q, q], function (t, _ref25) {\n        var _ref26 = _slicedToArray(_ref25, 2),\n          e = _ref26[0],\n          r = _ref26[1];\n        return e.evaluate(t) - r.evaluate(t);\n      }], [[q], function (t, _ref27) {\n        var _ref28 = _slicedToArray(_ref27, 1),\n          e = _ref28[0];\n        return -e.evaluate(t);\n      }]]\n    },\n    \"/\": [q, [q, q], function (t, _ref29) {\n      var _ref30 = _slicedToArray(_ref29, 2),\n        e = _ref30[0],\n        r = _ref30[1];\n      return e.evaluate(t) / r.evaluate(t);\n    }],\n    \"%\": [q, [q, q], function (t, _ref31) {\n      var _ref32 = _slicedToArray(_ref31, 2),\n        e = _ref32[0],\n        r = _ref32[1];\n      return e.evaluate(t) % r.evaluate(t);\n    }],\n    ln2: [q, [], function () {\n      return Math.LN2;\n    }],\n    pi: [q, [], function () {\n      return Math.PI;\n    }],\n    e: [q, [], function () {\n      return Math.E;\n    }],\n    \"^\": [q, [q, q], function (t, _ref33) {\n      var _ref34 = _slicedToArray(_ref33, 2),\n        e = _ref34[0],\n        r = _ref34[1];\n      return Math.pow(e.evaluate(t), r.evaluate(t));\n    }],\n    sqrt: [q, [q], function (t, _ref35) {\n      var _ref36 = _slicedToArray(_ref35, 1),\n        e = _ref36[0];\n      return Math.sqrt(e.evaluate(t));\n    }],\n    log10: [q, [q], function (t, _ref37) {\n      var _ref38 = _slicedToArray(_ref37, 1),\n        e = _ref38[0];\n      return Math.log(e.evaluate(t)) / Math.LN10;\n    }],\n    ln: [q, [q], function (t, _ref39) {\n      var _ref40 = _slicedToArray(_ref39, 1),\n        e = _ref40[0];\n      return Math.log(e.evaluate(t));\n    }],\n    log2: [q, [q], function (t, _ref41) {\n      var _ref42 = _slicedToArray(_ref41, 1),\n        e = _ref42[0];\n      return Math.log(e.evaluate(t)) / Math.LN2;\n    }],\n    sin: [q, [q], function (t, _ref43) {\n      var _ref44 = _slicedToArray(_ref43, 1),\n        e = _ref44[0];\n      return Math.sin(e.evaluate(t));\n    }],\n    cos: [q, [q], function (t, _ref45) {\n      var _ref46 = _slicedToArray(_ref45, 1),\n        e = _ref46[0];\n      return Math.cos(e.evaluate(t));\n    }],\n    tan: [q, [q], function (t, _ref47) {\n      var _ref48 = _slicedToArray(_ref47, 1),\n        e = _ref48[0];\n      return Math.tan(e.evaluate(t));\n    }],\n    asin: [q, [q], function (t, _ref49) {\n      var _ref50 = _slicedToArray(_ref49, 1),\n        e = _ref50[0];\n      return Math.asin(e.evaluate(t));\n    }],\n    acos: [q, [q], function (t, _ref51) {\n      var _ref52 = _slicedToArray(_ref51, 1),\n        e = _ref52[0];\n      return Math.acos(e.evaluate(t));\n    }],\n    atan: [q, [q], function (t, _ref53) {\n      var _ref54 = _slicedToArray(_ref53, 1),\n        e = _ref54[0];\n      return Math.atan(e.evaluate(t));\n    }],\n    min: [q, Ee(q), function (t, e) {\n      return Math.min.apply(Math, _toConsumableArray(e.map(function (e) {\n        return e.evaluate(t);\n      })));\n    }],\n    max: [q, Ee(q), function (t, e) {\n      return Math.max.apply(Math, _toConsumableArray(e.map(function (e) {\n        return e.evaluate(t);\n      })));\n    }],\n    abs: [q, [q], function (t, _ref55) {\n      var _ref56 = _slicedToArray(_ref55, 1),\n        e = _ref56[0];\n      return Math.abs(e.evaluate(t));\n    }],\n    round: [q, [q], function (t, _ref57) {\n      var _ref58 = _slicedToArray(_ref57, 1),\n        e = _ref58[0];\n      var r = e.evaluate(t);\n      return r < 0 ? -Math.round(-r) : Math.round(r);\n    }],\n    floor: [q, [q], function (t, _ref59) {\n      var _ref60 = _slicedToArray(_ref59, 1),\n        e = _ref60[0];\n      return Math.floor(e.evaluate(t));\n    }],\n    ceil: [q, [q], function (t, _ref61) {\n      var _ref62 = _slicedToArray(_ref61, 1),\n        e = _ref62[0];\n      return Math.ceil(e.evaluate(t));\n    }],\n    \"filter-==\": [G, [N, Y], function (t, _ref63) {\n      var _ref64 = _slicedToArray(_ref63, 2),\n        e = _ref64[0],\n        r = _ref64[1];\n      return t.properties()[e.value] === r.value;\n    }],\n    \"filter-id-==\": [G, [Y], function (t, _ref65) {\n      var _ref66 = _slicedToArray(_ref65, 1),\n        e = _ref66[0];\n      return t.id() === e.value;\n    }],\n    \"filter-type-==\": [G, [N], function (t, _ref67) {\n      var _ref68 = _slicedToArray(_ref67, 1),\n        e = _ref68[0];\n      return t.geometryType() === e.value;\n    }],\n    \"filter-<\": [G, [N, Y], function (t, _ref69) {\n      var _ref70 = _slicedToArray(_ref69, 2),\n        e = _ref70[0],\n        r = _ref70[1];\n      var n = t.properties()[e.value],\n        i = r.value;\n      return typeof n == typeof i && n < i;\n    }],\n    \"filter-id-<\": [G, [Y], function (t, _ref71) {\n      var _ref72 = _slicedToArray(_ref71, 1),\n        e = _ref72[0];\n      var r = t.id(),\n        n = e.value;\n      return typeof r == typeof n && r < n;\n    }],\n    \"filter->\": [G, [N, Y], function (t, _ref73) {\n      var _ref74 = _slicedToArray(_ref73, 2),\n        e = _ref74[0],\n        r = _ref74[1];\n      var n = t.properties()[e.value],\n        i = r.value;\n      return typeof n == typeof i && n > i;\n    }],\n    \"filter-id->\": [G, [Y], function (t, _ref75) {\n      var _ref76 = _slicedToArray(_ref75, 1),\n        e = _ref76[0];\n      var r = t.id(),\n        n = e.value;\n      return typeof r == typeof n && r > n;\n    }],\n    \"filter-<=\": [G, [N, Y], function (t, _ref77) {\n      var _ref78 = _slicedToArray(_ref77, 2),\n        e = _ref78[0],\n        r = _ref78[1];\n      var n = t.properties()[e.value],\n        i = r.value;\n      return typeof n == typeof i && n <= i;\n    }],\n    \"filter-id-<=\": [G, [Y], function (t, _ref79) {\n      var _ref80 = _slicedToArray(_ref79, 1),\n        e = _ref80[0];\n      var r = t.id(),\n        n = e.value;\n      return typeof r == typeof n && r <= n;\n    }],\n    \"filter->=\": [G, [N, Y], function (t, _ref81) {\n      var _ref82 = _slicedToArray(_ref81, 2),\n        e = _ref82[0],\n        r = _ref82[1];\n      var n = t.properties()[e.value],\n        i = r.value;\n      return typeof n == typeof i && n >= i;\n    }],\n    \"filter-id->=\": [G, [Y], function (t, _ref83) {\n      var _ref84 = _slicedToArray(_ref83, 1),\n        e = _ref84[0];\n      var r = t.id(),\n        n = e.value;\n      return typeof r == typeof n && r >= n;\n    }],\n    \"filter-has\": [G, [Y], function (t, _ref85) {\n      var _ref86 = _slicedToArray(_ref85, 1),\n        e = _ref86[0];\n      return e.value in t.properties();\n    }],\n    \"filter-has-id\": [G, [], function (t) {\n      return null !== t.id() && void 0 !== t.id();\n    }],\n    \"filter-type-in\": [G, [H(N)], function (t, _ref87) {\n      var _ref88 = _slicedToArray(_ref87, 1),\n        e = _ref88[0];\n      return e.value.indexOf(t.geometryType()) >= 0;\n    }],\n    \"filter-id-in\": [G, [H(Y)], function (t, _ref89) {\n      var _ref90 = _slicedToArray(_ref89, 1),\n        e = _ref90[0];\n      return e.value.indexOf(t.id()) >= 0;\n    }],\n    \"filter-in-small\": [G, [N, H(Y)], function (t, _ref91) {\n      var _ref92 = _slicedToArray(_ref91, 2),\n        e = _ref92[0],\n        r = _ref92[1];\n      return r.value.indexOf(t.properties()[e.value]) >= 0;\n    }],\n    \"filter-in-large\": [G, [N, H(Y)], function (t, _ref93) {\n      var _ref94 = _slicedToArray(_ref93, 2),\n        e = _ref94[0],\n        r = _ref94[1];\n      return function (t, e, r, n) {\n        for (; r <= n;) {\n          var _i22 = r + n >> 1;\n          if (e[_i22] === t) return !0;\n          e[_i22] > t ? n = _i22 - 1 : r = _i22 + 1;\n        }\n        return !1;\n      }(t.properties()[e.value], r.value, 0, r.value.length - 1);\n    }],\n    all: {\n      type: G,\n      overloads: [[[G, G], function (t, _ref95) {\n        var _ref96 = _slicedToArray(_ref95, 2),\n          e = _ref96[0],\n          r = _ref96[1];\n        return e.evaluate(t) && r.evaluate(t);\n      }], [Ee(G), function (t, e) {\n        var _iterator35 = _createForOfIteratorHelper(e),\n          _step35;\n        try {\n          for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n            var _r42 = _step35.value;\n            if (!_r42.evaluate(t)) return !1;\n          }\n        } catch (err) {\n          _iterator35.e(err);\n        } finally {\n          _iterator35.f();\n        }\n        return !0;\n      }]]\n    },\n    any: {\n      type: G,\n      overloads: [[[G, G], function (t, _ref97) {\n        var _ref98 = _slicedToArray(_ref97, 2),\n          e = _ref98[0],\n          r = _ref98[1];\n        return e.evaluate(t) || r.evaluate(t);\n      }], [Ee(G), function (t, e) {\n        var _iterator36 = _createForOfIteratorHelper(e),\n          _step36;\n        try {\n          for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n            var _r43 = _step36.value;\n            if (_r43.evaluate(t)) return !0;\n          }\n        } catch (err) {\n          _iterator36.e(err);\n        } finally {\n          _iterator36.f();\n        }\n        return !1;\n      }]]\n    },\n    \"!\": [G, [G], function (t, _ref99) {\n      var _ref100 = _slicedToArray(_ref99, 1),\n        e = _ref100[0];\n      return !e.evaluate(t);\n    }],\n    \"is-supported-script\": [G, [N], function (t, _ref101) {\n      var _ref102 = _slicedToArray(_ref101, 1),\n        e = _ref102[0];\n      var r = t.globals && t.globals.isSupportedScript;\n      return !r || r(e.evaluate(t));\n    }],\n    upcase: [N, [N], function (t, _ref103) {\n      var _ref104 = _slicedToArray(_ref103, 1),\n        e = _ref104[0];\n      return e.evaluate(t).toUpperCase();\n    }],\n    downcase: [N, [N], function (t, _ref105) {\n      var _ref106 = _slicedToArray(_ref105, 1),\n        e = _ref106[0];\n      return e.evaluate(t).toLowerCase();\n    }],\n    concat: [N, Ee(Y), function (t, e) {\n      return e.map(function (e) {\n        return ot(e.evaluate(t));\n      }).join(\"\");\n    }],\n    \"resolved-locale\": [N, [W], function (t, _ref107) {\n      var _ref108 = _slicedToArray(_ref107, 1),\n        e = _ref108[0];\n      return e.evaluate(t).resolvedLocale();\n    }]\n  });\n  var De = Me;\n  function ze(t) {\n    return {\n      result: \"success\",\n      value: t\n    };\n  }\n  function Be(t) {\n    return {\n      result: \"error\",\n      value: t\n    };\n  }\n  function Le(t) {\n    return \"data-driven\" === t[\"property-type\"];\n  }\n  function Ve(t) {\n    return !!t.expression && t.expression.parameters.indexOf(\"zoom\") > -1;\n  }\n  function Fe(t) {\n    return !!t.expression && t.expression.interpolated;\n  }\n  function Re(t) {\n    return t instanceof Number ? \"number\" : t instanceof String ? \"string\" : t instanceof Boolean ? \"boolean\" : Array.isArray(t) ? \"array\" : null === t ? \"null\" : typeof t;\n  }\n  function je(t) {\n    return \"object\" == typeof t && null !== t && !Array.isArray(t);\n  }\n  function Oe(t) {\n    return t;\n  }\n  function $e(t, e) {\n    var r = \"color\" === e.type,\n      n = t.stops && \"object\" == typeof t.stops[0][0],\n      i = n || !(n || void 0 !== t.property),\n      s = t.type || (Fe(e) ? \"exponential\" : \"interval\");\n    if (r && ((t = j({}, t)).stops && (t.stops = t.stops.map(function (t) {\n      return [t[0], R.parse(t[1])];\n    })), t.default = R.parse(t.default ? t.default : e.default)), t.colorSpace && \"rgb\" !== t.colorSpace && !oe[t.colorSpace]) throw new Error(\"Unknown color space: \".concat(t.colorSpace));\n    var a, o, l;\n    if (\"exponential\" === s) a = Ge;else if (\"interval\" === s) a = Ne;else if (\"categorical\" === s) {\n      a = qe, o = Object.create(null);\n      var _iterator37 = _createForOfIteratorHelper(t.stops),\n        _step37;\n      try {\n        for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {\n          var _e37 = _step37.value;\n          o[_e37[0]] = _e37[1];\n        }\n      } catch (err) {\n        _iterator37.e(err);\n      } finally {\n        _iterator37.f();\n      }\n      l = typeof t.stops[0][0];\n    } else {\n      if (\"identity\" !== s) throw new Error(\"Unknown function type \\\"\".concat(s, \"\\\"\"));\n      a = Ze;\n    }\n    if (n) {\n      var _r44 = {},\n        _n25 = [];\n      for (var _e38 = 0; _e38 < t.stops.length; _e38++) {\n        var _i23 = t.stops[_e38],\n          _s17 = _i23[0].zoom;\n        void 0 === _r44[_s17] && (_r44[_s17] = {\n          zoom: _s17,\n          type: t.type,\n          property: t.property,\n          default: t.default,\n          stops: []\n        }, _n25.push(_s17)), _r44[_s17].stops.push([_i23[0].value, _i23[1]]);\n      }\n      var _i24 = [];\n      for (var _i25 = 0, _n26 = _n25; _i25 < _n26.length; _i25++) {\n        var _t33 = _n26[_i25];\n        _i24.push([_r44[_t33].zoom, $e(_r44[_t33], e)]);\n      }\n      var _s18 = {\n        name: \"linear\"\n      };\n      return {\n        kind: \"composite\",\n        interpolationType: _s18,\n        interpolationFactor: ue.interpolationFactor.bind(void 0, _s18),\n        zoomStops: _i24.map(function (t) {\n          return t[0];\n        }),\n        evaluate: function evaluate(_ref109, n) {\n          var r = _ref109.zoom;\n          return Ge({\n            stops: _i24,\n            base: t.base\n          }, e, r).evaluate(r, n);\n        }\n      };\n    }\n    if (i) {\n      var _r45 = \"exponential\" === s ? {\n        name: \"exponential\",\n        base: void 0 !== t.base ? t.base : 1\n      } : null;\n      return {\n        kind: \"camera\",\n        interpolationType: _r45,\n        interpolationFactor: ue.interpolationFactor.bind(void 0, _r45),\n        zoomStops: t.stops.map(function (t) {\n          return t[0];\n        }),\n        evaluate: function evaluate(_ref110) {\n          var r = _ref110.zoom;\n          return a(t, e, r, o, l);\n        }\n      };\n    }\n    return {\n      kind: \"source\",\n      evaluate: function evaluate(r, n) {\n        var i = n && n.properties ? n.properties[t.property] : void 0;\n        return void 0 === i ? Ue(t.default, e.default) : a(t, e, i, o, l);\n      }\n    };\n  }\n  function Ue(t, e, r) {\n    return void 0 !== t ? t : void 0 !== e ? e : void 0 !== r ? r : void 0;\n  }\n  function qe(t, e, r, n, i) {\n    return Ue(typeof r === i ? n[r] : void 0, t.default, e.default);\n  }\n  function Ne(t, e, r) {\n    if (\"number\" !== Re(r)) return Ue(t.default, e.default);\n    var n = t.stops.length;\n    if (1 === n) return t.stops[0][1];\n    if (r <= t.stops[0][0]) return t.stops[0][1];\n    if (r >= t.stops[n - 1][0]) return t.stops[n - 1][1];\n    var i = $t(t.stops.map(function (t) {\n      return t[0];\n    }), r);\n    return t.stops[i][1];\n  }\n  function Ge(t, e, r) {\n    var n = void 0 !== t.base ? t.base : 1;\n    if (\"number\" !== Re(r)) return Ue(t.default, e.default);\n    var i = t.stops.length;\n    if (1 === i) return t.stops[0][1];\n    if (r <= t.stops[0][0]) return t.stops[0][1];\n    if (r >= t.stops[i - 1][0]) return t.stops[i - 1][1];\n    var s = $t(t.stops.map(function (t) {\n        return t[0];\n      }), r),\n      a = function (t, e, r, n) {\n        var i = n - r,\n          s = t - r;\n        return 0 === i ? 0 : 1 === e ? s / i : (Math.pow(e, s) - 1) / (Math.pow(e, i) - 1);\n      }(r, n, t.stops[s][0], t.stops[s + 1][0]),\n      o = t.stops[s][1],\n      l = t.stops[s + 1][1];\n    var u = Nt[e.type] || Oe;\n    if (t.colorSpace && \"rgb\" !== t.colorSpace) {\n      var _e39 = oe[t.colorSpace];\n      u = function u(t, r) {\n        return _e39.reverse(_e39.interpolate(_e39.forward(t), _e39.forward(r), a));\n      };\n    }\n    return \"function\" == typeof o.evaluate ? {\n      evaluate: function evaluate() {\n        for (var _len4 = arguments.length, t = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          t[_key4] = arguments[_key4];\n        }\n        var e = o.evaluate.apply(void 0, t),\n          r = l.evaluate.apply(void 0, t);\n        if (void 0 !== e && void 0 !== r) return u(e, r, a);\n      }\n    } : u(o, l, a);\n  }\n  function Ze(t, e, r) {\n    return \"color\" === e.type ? r = R.parse(r) : \"formatted\" === e.type ? r = Formatted.fromString(r.toString()) : \"resolvedImage\" === e.type ? r = ResolvedImage.fromString(r.toString()) : Re(r) === e.type || \"enum\" === e.type && e.values[r] || (r = void 0), Ue(r, t.default, e.default);\n  }\n  var StyleExpression = /*#__PURE__*/function () {\n    function StyleExpression(t, e) {\n      _classCallCheck(this, StyleExpression);\n      this.expression = t, this._warningHistory = {}, this._evaluator = new yt(), this._defaultValue = e ? function (t) {\n        return \"color\" === t.type && (je(t.default) || Array.isArray(t.default)) ? new R(0, 0, 0, 0) : \"color\" === t.type ? R.parse(t.default) || null : void 0 === t.default ? null : t.default;\n      }(e) : null, this._enumValues = e && \"enum\" === e.type ? e.values : null;\n    }\n    _createClass(StyleExpression, [{\n      key: \"evaluateWithoutErrorHandling\",\n      value: function evaluateWithoutErrorHandling(t, e, r, n, i, s, a, o) {\n        return this._evaluator.globals = t, this._evaluator.feature = e, this._evaluator.featureState = r, this._evaluator.canonical = n || null, this._evaluator.availableImages = i || null, this._evaluator.formattedSection = s, this._evaluator.featureTileCoord = a || null, this._evaluator.featureDistanceData = o || null, this.expression.evaluate(this._evaluator);\n      }\n    }, {\n      key: \"evaluate\",\n      value: function evaluate(t, e, r, n, i, s, a, o) {\n        this._evaluator.globals = t, this._evaluator.feature = e || null, this._evaluator.featureState = r || null, this._evaluator.canonical = n || null, this._evaluator.availableImages = i || null, this._evaluator.formattedSection = s || null, this._evaluator.featureTileCoord = a || null, this._evaluator.featureDistanceData = o || null;\n        try {\n          var _t34 = this.expression.evaluate(this._evaluator);\n          if (null == _t34 || \"number\" == typeof _t34 && _t34 != _t34) return this._defaultValue;\n          if (this._enumValues && !(_t34 in this._enumValues)) throw new ut(\"Expected value to be one of \".concat(Object.keys(this._enumValues).map(function (t) {\n            return JSON.stringify(t);\n          }).join(\", \"), \", but found \").concat(JSON.stringify(_t34), \" instead.\"));\n          return _t34;\n        } catch (t) {\n          return this._warningHistory[t.message] || (this._warningHistory[t.message] = !0, \"undefined\" != typeof console && console.warn(t.message)), this._defaultValue;\n        }\n      }\n    }]);\n    return StyleExpression;\n  }();\n  function Xe(t) {\n    return Array.isArray(t) && t.length > 0 && \"string\" == typeof t[0] && t[0] in De;\n  }\n  function Ye(t, e) {\n    var r = new jt(De, [], e ? function (t) {\n        var e = {\n          color: Z,\n          string: N,\n          number: q,\n          enum: N,\n          boolean: G,\n          formatted: J,\n          resolvedImage: K\n        };\n        return \"array\" === t.type ? H(e[t.value] || Y, t.length) : e[t.type];\n      }(e) : void 0),\n      n = r.parse(t, void 0, void 0, void 0, e && \"string\" === e.type ? {\n        typeAnnotation: \"coerce\"\n      } : void 0);\n    return n ? ze(new StyleExpression(n, e)) : Be(r.errors);\n  }\n  var ZoomConstantExpression = /*#__PURE__*/function () {\n    function ZoomConstantExpression(t, e) {\n      _classCallCheck(this, ZoomConstantExpression);\n      this.kind = t, this._styleExpression = e, this.isStateDependent = \"constant\" !== t && !Vt(e.expression);\n    }\n    _createClass(ZoomConstantExpression, [{\n      key: \"evaluateWithoutErrorHandling\",\n      value: function evaluateWithoutErrorHandling(t, e, r, n, i, s) {\n        return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, n, i, s);\n      }\n    }, {\n      key: \"evaluate\",\n      value: function evaluate(t, e, r, n, i, s) {\n        return this._styleExpression.evaluate(t, e, r, n, i, s);\n      }\n    }]);\n    return ZoomConstantExpression;\n  }();\n  var ZoomDependentExpression = /*#__PURE__*/function () {\n    function ZoomDependentExpression(t, e, r, n) {\n      _classCallCheck(this, ZoomDependentExpression);\n      this.kind = t, this.zoomStops = r, this._styleExpression = e, this.isStateDependent = \"camera\" !== t && !Vt(e.expression), this.interpolationType = n;\n    }\n    _createClass(ZoomDependentExpression, [{\n      key: \"evaluateWithoutErrorHandling\",\n      value: function evaluateWithoutErrorHandling(t, e, r, n, i, s) {\n        return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, n, i, s);\n      }\n    }, {\n      key: \"evaluate\",\n      value: function evaluate(t, e, r, n, i, s) {\n        return this._styleExpression.evaluate(t, e, r, n, i, s);\n      }\n    }, {\n      key: \"interpolationFactor\",\n      value: function interpolationFactor(t, e, r) {\n        return this.interpolationType ? ue.interpolationFactor(this.interpolationType, t, e, r) : 0;\n      }\n    }]);\n    return ZoomDependentExpression;\n  }();\n  function We(t, e) {\n    if (\"error\" === (t = Ye(t, e)).result) return t;\n    var r = t.value.expression,\n      n = Lt(r);\n    if (!n && !Le(e)) return Be([new O(\"\", \"data expressions not supported\")]);\n    var i = Ft(r, [\"zoom\", \"pitch\", \"distance-from-center\"]);\n    if (!i && !Ve(e)) return Be([new O(\"\", \"zoom expressions not supported\")]);\n    var s = Je(r);\n    return s || i ? s instanceof O ? Be([s]) : s instanceof ue && !Fe(e) ? Be([new O(\"\", '\"interpolate\" expressions cannot be used with this property')]) : ze(s ? new ZoomDependentExpression(n ? \"camera\" : \"composite\", t.value, s.labels, s instanceof ue ? s.interpolation : void 0) : new ZoomConstantExpression(n ? \"constant\" : \"source\", t.value)) : Be([new O(\"\", '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')]);\n  }\n  var StylePropertyFunction = /*#__PURE__*/function () {\n    function StylePropertyFunction(t, e) {\n      _classCallCheck(this, StylePropertyFunction);\n      this._parameters = t, this._specification = e, j(this, $e(this._parameters, this._specification));\n    }\n    _createClass(StylePropertyFunction, null, [{\n      key: \"deserialize\",\n      value: function deserialize(t) {\n        return new StylePropertyFunction(t._parameters, t._specification);\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize(t) {\n        return {\n          _parameters: t._parameters,\n          _specification: t._specification\n        };\n      }\n    }]);\n    return StylePropertyFunction;\n  }();\n  function Je(t) {\n    var e = null;\n    if (t instanceof he) e = Je(t.result);else if (t instanceof ce) {\n      var _iterator38 = _createForOfIteratorHelper(t.args),\n        _step38;\n      try {\n        for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n          var _r46 = _step38.value;\n          if (e = Je(_r46), e) break;\n        }\n      } catch (err) {\n        _iterator38.e(err);\n      } finally {\n        _iterator38.f();\n      }\n    } else (t instanceof Ut || t instanceof ue) && t.input instanceof mt && \"zoom\" === t.input.name && (e = t);\n    return e instanceof O || t.eachChild(function (t) {\n      var r = Je(t);\n      r instanceof O ? e = r : !e && r ? e = new O(\"\", '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.') : e && r && e !== r && (e = new O(\"\", 'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.'));\n    }), e;\n  }\n  var Ke;\n  var He = {\n      API_URL: \"https://api.mapbox.com\",\n      get API_URL_REGEX() {\n        if (null == Ke) {\n          var _t35 = /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/|\\?|$)/i;\n          try {\n            Ke = null != process.env.API_URL_REGEX ? new RegExp(process.env.API_URL_REGEX) : _t35;\n          } catch (e) {\n            Ke = _t35;\n          }\n        }\n        return Ke;\n      },\n      get API_TILEJSON_REGEX() {\n        return /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/v[0-9]*\\/.*\\.json.*$)/i;\n      },\n      get API_SPRITE_REGEX() {\n        return /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/styles\\/v[0-9]*\\/)(.*\\/sprite.*\\..*$)/i;\n      },\n      get API_FONTS_REGEX() {\n        return /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/fonts\\/v[0-9]*\\/)(.*\\.pbf.*$)/i;\n      },\n      get API_STYLE_REGEX() {\n        return /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/styles\\/v[0-9]*\\/)(.*$)/i;\n      },\n      get API_CDN_URL_REGEX() {\n        return /^((https?:)?\\/\\/)?api\\.mapbox\\.c(n|om)(\\/mapbox-gl-js\\/)(.*$)/i;\n      },\n      get EVENTS_URL() {\n        try {\n          var _t36 = new URL(He.API_URL);\n          return \"api.mapbox.cn\" === _t36.hostname ? \"https://events.mapbox.cn/events/v2\" : \"api.mapbox.com\" === _t36.hostname ? \"https://events.mapbox.com/events/v2\" : null;\n        } catch (t) {\n          return null;\n        }\n      },\n      SESSION_PATH: \"/map-sessions/v1\",\n      FEEDBACK_URL: \"https://apps.mapbox.com/feedback\",\n      TILE_URL_VERSION: \"v4\",\n      RASTER_URL_PREFIX: \"raster/v1\",\n      REQUIRE_ACCESS_TOKEN: !0,\n      ACCESS_TOKEN: null,\n      MAX_PARALLEL_IMAGE_REQUESTS: 16\n    },\n    Qe = {\n      supported: !1,\n      testSupport: function testSupport(t) {\n        !rr && er && (nr ? ir(t) : tr = t);\n      }\n    };\n  var tr,\n    er,\n    rr = !1,\n    nr = !1;\n  function ir(t) {\n    var e = t.createTexture();\n    t.bindTexture(t.TEXTURE_2D, e);\n    try {\n      if (t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, er), t.isContextLost()) return;\n      Qe.supported = !0;\n    } catch (t) {}\n    t.deleteTexture(e), rr = !0;\n  }\n  i.document && (er = i.document.createElement(\"img\"), er.onload = function () {\n    tr && ir(tr), tr = null, nr = !0;\n  }, er.onerror = function () {\n    rr = !0, tr = null;\n  }, er.src = \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\");\n  var sr = \"2.14.1\";\n  var ar = {\n    create: \"create\",\n    load: \"load\",\n    fullLoad: \"fullLoad\"\n  };\n  function or(t) {\n    var e = t.name.split(\"?\")[0];\n    return cr(e) && e.includes(\"mapbox-gl.js\") ? \"javascript\" : cr(e) && e.includes(\"mapbox-gl.css\") ? \"css\" : function (t) {\n      return He.API_FONTS_REGEX.test(t);\n    }(e) ? \"fontRange\" : pr(e) ? \"sprite\" : hr(e) ? \"style\" : function (t) {\n      return He.API_TILEJSON_REGEX.test(t);\n    }(e) ? \"tilejson\" : \"other\";\n  }\n  var lr = \"NO_ACCESS_TOKEN\";\n  function ur(t) {\n    return He.API_URL_REGEX.test(t);\n  }\n  function cr(t) {\n    return He.API_CDN_URL_REGEX.test(t);\n  }\n  function hr(t) {\n    return He.API_STYLE_REGEX.test(t) && !pr(t);\n  }\n  function pr(t) {\n    return He.API_SPRITE_REGEX.test(t);\n  }\n  var dr = /^(\\w+):\\/\\/([^/?]*)(\\/[^?]+)?\\??(.+)?/;\n  function fr(t) {\n    var e = t.match(dr);\n    if (!e) throw new Error(\"Unable to parse URL object\");\n    return {\n      protocol: e[1],\n      authority: e[2],\n      path: e[3] || \"/\",\n      params: e[4] ? e[4].split(\"&\") : []\n    };\n  }\n  function yr(t) {\n    var e = t.params.length ? \"?\".concat(t.params.join(\"&\")) : \"\";\n    return \"\".concat(t.protocol, \"://\").concat(t.authority).concat(t.path).concat(e);\n  }\n  function mr(t) {\n    if (!t) return null;\n    var e = t.split(\".\");\n    if (!e || 3 !== e.length) return null;\n    try {\n      return JSON.parse(decodeURIComponent(i.atob(e[1]).split(\"\").map(function (t) {\n        return \"%\" + (\"00\" + t.charCodeAt(0).toString(16)).slice(-2);\n      }).join(\"\")));\n    } catch (t) {\n      return null;\n    }\n  }\n  var TelemetryEvent = /*#__PURE__*/function () {\n    function TelemetryEvent(t) {\n      _classCallCheck(this, TelemetryEvent);\n      this.type = t, this.anonId = null, this.eventData = {}, this.queue = [], this.pendingRequest = null;\n    }\n    _createClass(TelemetryEvent, [{\n      key: \"getStorageKey\",\n      value: function getStorageKey(t) {\n        var e = mr(He.ACCESS_TOKEN);\n        var r = \"\";\n        return r = e && e.u ? i.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g, function (t, e) {\n          return String.fromCharCode(Number(\"0x\" + e));\n        })) : \"\", t ? \"mapbox.eventData.\".concat(t, \":\").concat(r) : \"mapbox.eventData:\".concat(r);\n      }\n    }, {\n      key: \"fetchEventData\",\n      value: function fetchEventData() {\n        var t = P(\"localStorage\"),\n          e = this.getStorageKey(),\n          r = this.getStorageKey(\"uuid\");\n        if (t) try {\n          var _t37 = i.localStorage.getItem(e);\n          _t37 && (this.eventData = JSON.parse(_t37));\n          var _n27 = i.localStorage.getItem(r);\n          _n27 && (this.anonId = _n27);\n        } catch (t) {\n          w(\"Unable to read from LocalStorage\");\n        }\n      }\n    }, {\n      key: \"saveEventData\",\n      value: function saveEventData() {\n        var t = P(\"localStorage\"),\n          e = this.getStorageKey(),\n          r = this.getStorageKey(\"uuid\");\n        if (t) try {\n          i.localStorage.setItem(r, this.anonId), Object.keys(this.eventData).length >= 1 && i.localStorage.setItem(e, JSON.stringify(this.eventData));\n        } catch (t) {\n          w(\"Unable to write to LocalStorage\");\n        }\n      }\n    }, {\n      key: \"processRequests\",\n      value: function processRequests(t) {}\n    }, {\n      key: \"postEvent\",\n      value: function postEvent(t, e, r, n) {\n        var _this3 = this;\n        if (!He.EVENTS_URL) return;\n        var i = fr(He.EVENTS_URL);\n        i.params.push(\"access_token=\".concat(n || He.ACCESS_TOKEN || \"\"));\n        var s = {\n            event: this.type,\n            created: new Date(t).toISOString()\n          },\n          a = e ? p(s, e) : s,\n          o = {\n            url: yr(i),\n            headers: {\n              \"Content-Type\": \"text/plain\"\n            },\n            body: JSON.stringify([a])\n          };\n        this.pendingRequest = Pr(o, function (t) {\n          _this3.pendingRequest = null, r(t), _this3.saveEventData(), _this3.processRequests(n);\n        });\n      }\n    }, {\n      key: \"queueRequest\",\n      value: function queueRequest(t, e) {\n        this.queue.push(t), this.processRequests(e);\n      }\n    }]);\n    return TelemetryEvent;\n  }();\n  var gr = new ( /*#__PURE__*/function (_TelemetryEvent) {\n    _inherits(TurnstileEvent, _TelemetryEvent);\n    function TurnstileEvent(t) {\n      var _this4;\n      _classCallCheck(this, TurnstileEvent);\n      _this4 = _possibleConstructorReturn(this, _getPrototypeOf(TurnstileEvent).call(this, \"appUserTurnstile\")), _this4._customAccessToken = t;\n      return _this4;\n    }\n    _createClass(TurnstileEvent, [{\n      key: \"postTurnstileEvent\",\n      value: function postTurnstileEvent(t, e) {\n        He.EVENTS_URL && He.ACCESS_TOKEN && Array.isArray(t) && t.some(function (t) {\n          return function (t) {\n            return 0 === t.indexOf(\"mapbox:\");\n          }(t) || ur(t);\n        }) && this.queueRequest(Date.now(), e);\n      }\n    }, {\n      key: \"processRequests\",\n      value: function processRequests(t) {\n        var _this5 = this;\n        if (this.pendingRequest || 0 === this.queue.length) return;\n        this.anonId && this.eventData.lastSuccess && this.eventData.tokenU || this.fetchEventData();\n        var e = mr(He.ACCESS_TOKEN),\n          r = e ? e.u : He.ACCESS_TOKEN;\n        var n = r !== this.eventData.tokenU;\n        y(this.anonId) || (this.anonId = f(), n = !0);\n        var i = this.queue.shift();\n        if (this.eventData.lastSuccess) {\n          var _t38 = new Date(this.eventData.lastSuccess),\n            _e40 = new Date(i),\n            _r47 = (i - this.eventData.lastSuccess) / 864e5;\n          n = n || _r47 >= 1 || _r47 < -1 || _t38.getDate() !== _e40.getDate();\n        } else n = !0;\n        n ? this.postEvent(i, {\n          sdkIdentifier: \"mapbox-gl-js\",\n          sdkVersion: sr,\n          skuId: \"01\",\n          \"enabled.telemetry\": !1,\n          userId: this.anonId\n        }, function (t) {\n          t || (_this5.eventData.lastSuccess = i, _this5.eventData.tokenU = r);\n        }, t) : this.processRequests();\n      }\n    }]);\n    return TurnstileEvent;\n  }(TelemetryEvent))();\n  gr.postTurnstileEvent.bind(gr);\n  var xr = new ( /*#__PURE__*/function (_TelemetryEvent2) {\n    _inherits(MapLoadEvent, _TelemetryEvent2);\n    function MapLoadEvent() {\n      var _this6;\n      _classCallCheck(this, MapLoadEvent);\n      _this6 = _possibleConstructorReturn(this, _getPrototypeOf(MapLoadEvent).call(this, \"map.load\")), _this6.success = {}, _this6.skuToken = \"\";\n      return _this6;\n    }\n    _createClass(MapLoadEvent, [{\n      key: \"postMapLoadEvent\",\n      value: function postMapLoadEvent(t, e, r, n) {\n        this.skuToken = e, this.errorCb = n, He.EVENTS_URL && (r || He.ACCESS_TOKEN ? this.queueRequest({\n          id: t,\n          timestamp: Date.now()\n        }, r) : this.errorCb(new Error(lr)));\n      }\n    }, {\n      key: \"processRequests\",\n      value: function processRequests(t) {\n        var _this7 = this;\n        if (this.pendingRequest || 0 === this.queue.length) return;\n        var _this$queue$shift = this.queue.shift(),\n          e = _this$queue$shift.id,\n          r = _this$queue$shift.timestamp;\n        e && this.success[e] || (this.anonId || this.fetchEventData(), y(this.anonId) || (this.anonId = f()), this.postEvent(r, {\n          sdkIdentifier: \"mapbox-gl-js\",\n          sdkVersion: sr,\n          skuId: \"01\",\n          skuToken: this.skuToken,\n          userId: this.anonId\n        }, function (t) {\n          t ? _this7.errorCb(t) : e && (_this7.success[e] = !0);\n        }, t));\n      }\n    }]);\n    return MapLoadEvent;\n  }(TelemetryEvent))();\n  xr.postMapLoadEvent.bind(xr);\n  var vr = new ( /*#__PURE__*/function (_TelemetryEvent3) {\n    _inherits(PerformanceEvent, _TelemetryEvent3);\n    function PerformanceEvent() {\n      _classCallCheck(this, PerformanceEvent);\n      return _possibleConstructorReturn(this, _getPrototypeOf(PerformanceEvent).call(this, \"gljs.performance\"));\n    }\n    _createClass(PerformanceEvent, [{\n      key: \"postPerformanceEvent\",\n      value: function postPerformanceEvent(t, e) {\n        He.EVENTS_URL && (t || He.ACCESS_TOKEN) && this.queueRequest({\n          timestamp: Date.now(),\n          performanceData: e\n        }, t);\n      }\n    }, {\n      key: \"processRequests\",\n      value: function processRequests(t) {\n        if (this.pendingRequest || 0 === this.queue.length) return;\n        var _this$queue$shift2 = this.queue.shift(),\n          e = _this$queue$shift2.timestamp,\n          r = _this$queue$shift2.performanceData,\n          n = function (t) {\n            var e = i.performance.getEntriesByType(\"resource\"),\n              r = i.performance.getEntriesByType(\"mark\"),\n              n = function (t) {\n                var e = {};\n                if (t) for (var _r48 in t) if (\"other\" !== _r48) {\n                  var _iterator39 = _createForOfIteratorHelper(t[_r48]),\n                    _step39;\n                  try {\n                    for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {\n                      var _n28 = _step39.value;\n                      var _t39 = \"\".concat(_r48, \"ResolveRangeMin\"),\n                        _i26 = \"\".concat(_r48, \"ResolveRangeMax\"),\n                        _s19 = \"\".concat(_r48, \"RequestCount\"),\n                        _a17 = \"\".concat(_r48, \"RequestCachedCount\");\n                      e[_t39] = Math.min(e[_t39] || 1 / 0, _n28.startTime), e[_i26] = Math.max(e[_i26] || -1 / 0, _n28.responseEnd);\n                      var _o7 = function _o7(t) {\n                        void 0 === e[t] && (e[t] = 0), ++e[t];\n                      };\n                      void 0 !== _n28.transferSize && 0 === _n28.transferSize && _o7(_a17), _o7(_s19);\n                    }\n                  } catch (err) {\n                    _iterator39.e(err);\n                  } finally {\n                    _iterator39.f();\n                  }\n                }\n                return e;\n              }(function (t, e) {\n                var r = {};\n                if (t) {\n                  var _iterator40 = _createForOfIteratorHelper(t),\n                    _step40;\n                  try {\n                    for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {\n                      var _n29 = _step40.value;\n                      var _t40 = e(_n29);\n                      void 0 === r[_t40] && (r[_t40] = []), r[_t40].push(_n29);\n                    }\n                  } catch (err) {\n                    _iterator40.e(err);\n                  } finally {\n                    _iterator40.f();\n                  }\n                }\n                return r;\n              }(e, or)),\n              s = i.devicePixelRatio,\n              a = i.navigator.connection || i.navigator.mozConnection || i.navigator.webkitConnection,\n              o = {\n                counters: [],\n                metadata: [],\n                attributes: []\n              },\n              l = function l(t, e, r) {\n                null != r && t.push({\n                  name: e,\n                  value: r.toString()\n                });\n              };\n            for (var _t41 in n) l(o.counters, _t41, n[_t41]);\n            if (t.interactionRange[0] !== 1 / 0 && t.interactionRange[1] !== -1 / 0 && (l(o.counters, \"interactionRangeMin\", t.interactionRange[0]), l(o.counters, \"interactionRangeMax\", t.interactionRange[1])), r) {\n              var _loop = function _loop() {\n                var t = _Object$keys[_i27];\n                var e = ar[t],\n                  n = r.find(function (t) {\n                    return t.name === e;\n                  });\n                n && l(o.counters, e, n.startTime);\n              };\n              for (var _i27 = 0, _Object$keys = Object.keys(ar); _i27 < _Object$keys.length; _i27++) {\n                _loop();\n              }\n            }\n            return l(o.counters, \"visibilityHidden\", t.visibilityHidden), l(o.attributes, \"style\", function (t) {\n              if (t) {\n                var _iterator41 = _createForOfIteratorHelper(t),\n                  _step41;\n                try {\n                  for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {\n                    var _e41 = _step41.value;\n                    var _t42 = _e41.name.split(\"?\")[0];\n                    if (hr(_t42)) {\n                      var _e42 = _t42.split(\"/\").slice(-2);\n                      if (2 === _e42.length) return \"mapbox://styles/\".concat(_e42[0], \"/\").concat(_e42[1]);\n                    }\n                  }\n                } catch (err) {\n                  _iterator41.e(err);\n                } finally {\n                  _iterator41.f();\n                }\n              }\n            }(e)), l(o.attributes, \"terrainEnabled\", t.terrainEnabled ? \"true\" : \"false\"), l(o.attributes, \"fogEnabled\", t.fogEnabled ? \"true\" : \"false\"), l(o.attributes, \"projection\", t.projection), l(o.attributes, \"zoom\", t.zoom), l(o.metadata, \"devicePixelRatio\", s), l(o.metadata, \"connectionEffectiveType\", a ? a.effectiveType : void 0), l(o.metadata, \"navigatorUserAgent\", i.navigator.userAgent), l(o.metadata, \"screenWidth\", i.screen.width), l(o.metadata, \"screenHeight\", i.screen.height), l(o.metadata, \"windowWidth\", i.innerWidth), l(o.metadata, \"windowHeight\", i.innerHeight), l(o.metadata, \"mapWidth\", t.width / s), l(o.metadata, \"mapHeight\", t.height / s), l(o.metadata, \"webglRenderer\", t.renderer), l(o.metadata, \"webglVendor\", t.vendor), l(o.metadata, \"sdkVersion\", sr), l(o.metadata, \"sdkIdentifier\", \"mapbox-gl-js\"), o;\n          }(r);\n        var _iterator42 = _createForOfIteratorHelper(n.metadata),\n          _step42;\n        try {\n          for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {\n            var _t43 = _step42.value;\n          }\n        } catch (err) {\n          _iterator42.e(err);\n        } finally {\n          _iterator42.f();\n        }\n        var _iterator43 = _createForOfIteratorHelper(n.counters),\n          _step43;\n        try {\n          for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {\n            var _t44 = _step43.value;\n          }\n        } catch (err) {\n          _iterator43.e(err);\n        } finally {\n          _iterator43.f();\n        }\n        var _iterator44 = _createForOfIteratorHelper(n.attributes),\n          _step44;\n        try {\n          for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {\n            var _t45 = _step44.value;\n          }\n        } catch (err) {\n          _iterator44.e(err);\n        } finally {\n          _iterator44.f();\n        }\n        this.postEvent(e, n, function () {}, t);\n      }\n    }]);\n    return PerformanceEvent;\n  }(TelemetryEvent))();\n  vr.postPerformanceEvent.bind(vr);\n  var br = new ( /*#__PURE__*/function (_TelemetryEvent4) {\n    _inherits(MapSessionAPI, _TelemetryEvent4);\n    function MapSessionAPI() {\n      var _this8;\n      _classCallCheck(this, MapSessionAPI);\n      _this8 = _possibleConstructorReturn(this, _getPrototypeOf(MapSessionAPI).call(this, \"map.auth\")), _this8.success = {}, _this8.skuToken = \"\";\n      return _this8;\n    }\n    _createClass(MapSessionAPI, [{\n      key: \"getSession\",\n      value: function getSession(t, e, r, n) {\n        var _this9 = this;\n        var i = fr(He.API_URL + He.SESSION_PATH);\n        i.params.push(\"sku=\".concat(e || \"\")), i.params.push(\"access_token=\".concat(n || He.ACCESS_TOKEN || \"\"));\n        var s = {\n          url: yr(i),\n          headers: {\n            \"Content-Type\": \"text/plain\"\n          }\n        };\n        this.pendingRequest = Tr(s, function (t) {\n          _this9.pendingRequest = null, r(t), _this9.saveEventData(), _this9.processRequests(n);\n        });\n      }\n    }, {\n      key: \"getSessionAPI\",\n      value: function getSessionAPI(t, e, r, n) {\n        this.skuToken = e, this.errorCb = n, r || He.ACCESS_TOKEN ? this.queueRequest({\n          id: t,\n          timestamp: Date.now()\n        }, r) : this.errorCb(new Error(lr));\n      }\n    }, {\n      key: \"processRequests\",\n      value: function processRequests(t) {\n        var _this10 = this;\n        if (this.pendingRequest || 0 === this.queue.length) return;\n        var _this$queue$shift3 = this.queue.shift(),\n          e = _this$queue$shift3.id,\n          r = _this$queue$shift3.timestamp;\n        e && this.success[e] || this.getSession(r, this.skuToken, function (t) {\n          t ? _this10.errorCb(t) : e && (_this10.success[e] = !0);\n        }, t);\n      }\n    }]);\n    return MapSessionAPI;\n  }(TelemetryEvent))();\n  var wr, _r;\n  function Sr() {\n    (function () {\n      try {\n        return i.caches;\n      } catch (t) {}\n    })() && !wr && (wr = i.caches.open(\"mapbox-tiles\"));\n  }\n  function Ar(t) {\n    var e = t.indexOf(\"?\");\n    if (e < 0) return t;\n    var r = function (t) {\n        var e = t.indexOf(\"?\");\n        return e > 0 ? t.slice(e + 1).split(\"&\") : [];\n      }(t),\n      n = r.filter(function (t) {\n        var e = t.split(\"=\");\n        return \"language\" === e[0] || \"worldview\" === e[0];\n      });\n    return n.length ? \"\".concat(t.slice(0, e), \"?\").concat(n.join(\"&\")) : t.slice(0, e);\n  }\n  br.getSessionAPI.bind(br), \"function\" == typeof Object.freeze && Object.freeze({\n    Unknown: \"Unknown\",\n    Style: \"Style\",\n    Source: \"Source\",\n    Tile: \"Tile\",\n    Glyphs: \"Glyphs\",\n    SpriteImage: \"SpriteImage\",\n    SpriteJSON: \"SpriteJSON\",\n    Image: \"Image\"\n  });\n  var AJAXError = /*#__PURE__*/function (_Error2) {\n    _inherits(AJAXError, _Error2);\n    function AJAXError(t, e, r) {\n      var _this11;\n      _classCallCheck(this, AJAXError);\n      401 === e && ur(r) && (t += \": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes\"), _this11 = _possibleConstructorReturn(this, _getPrototypeOf(AJAXError).call(this, t)), _this11.status = e, _this11.url = r;\n      return _this11;\n    }\n    _createClass(AJAXError, [{\n      key: \"toString\",\n      value: function toString() {\n        return \"\".concat(this.name, \": \").concat(this.message, \" (\").concat(this.status, \"): \").concat(this.url);\n      }\n    }]);\n    return AJAXError;\n  }(_wrapNativeSuper(Error));\n  var kr = A() ? function () {\n    return self.worker && self.worker.referrer;\n  } : function () {\n    return (\"blob:\" === i.location.protocol ? i.parent : i).location.href;\n  };\n  var Ir = function Ir(t, e) {\n      if (!(/^file:/.test(r = t.url) || /^file:/.test(kr()) && !/^\\w+:/.test(r))) {\n        if (i.fetch && i.Request && i.AbortController && i.Request.prototype.hasOwnProperty(\"signal\")) return function (t, e) {\n          var r = new i.AbortController(),\n            n = new i.Request(t.url, {\n              method: t.method || \"GET\",\n              body: t.body,\n              credentials: t.credentials,\n              headers: t.headers,\n              referrer: kr(),\n              referrerPolicy: t.referrerPolicy,\n              signal: r.signal\n            });\n          var s = !1,\n            a = !1;\n          var o = (l = n.url).indexOf(\"sku=\") > 0 && ur(l);\n          var l;\n          \"json\" === t.type && n.headers.set(\"Accept\", \"application/json\");\n          var u = function u(r, s, l) {\n              if (a) return;\n              if (r && \"SecurityError\" !== r.message && w(r), s && l) return c(s);\n              var u = Date.now();\n              i.fetch(n).then(function (r) {\n                if (r.ok) {\n                  var _t46 = o ? r.clone() : null;\n                  return c(r, _t46, u);\n                }\n                return e(new AJAXError(r.statusText, r.status, t.url));\n              }).catch(function (r) {\n                \"AbortError\" !== r.name && e(new Error(\"\".concat(r.message, \" \").concat(t.url)));\n              });\n            },\n            c = function c(r, o, l) {\n              (\"arrayBuffer\" === t.type ? r.arrayBuffer() : \"json\" === t.type ? r.json() : r.text()).then(function (t) {\n                a || (o && l && function (t, e, r) {\n                  if (Sr(), !wr) return;\n                  var n = {\n                    status: e.status,\n                    statusText: e.statusText,\n                    headers: new i.Headers()\n                  };\n                  e.headers.forEach(function (t, e) {\n                    return n.headers.set(e, t);\n                  });\n                  var s = k(e.headers.get(\"Cache-Control\") || \"\");\n                  if (s[\"no-store\"]) return;\n                  s[\"max-age\"] && n.headers.set(\"Expires\", new Date(r + 1e3 * s[\"max-age\"]).toUTCString());\n                  var a = n.headers.get(\"Expires\");\n                  a && (new Date(a).getTime() - r < 42e4 || function (t, e) {\n                    if (void 0 === _r) try {\n                      new Response(new ReadableStream()), _r = !0;\n                    } catch (t) {\n                      _r = !1;\n                    }\n                    _r ? e(t.body) : t.blob().then(e);\n                  }(e, function (e) {\n                    var r = new i.Response(e, n);\n                    Sr(), wr && wr.then(function (e) {\n                      return e.put(Ar(t.url), r);\n                    }).catch(function (t) {\n                      return w(t.message);\n                    });\n                  }));\n                }(n, o, l), s = !0, e(null, t, r.headers.get(\"Cache-Control\"), r.headers.get(\"Expires\")));\n              }).catch(function (t) {\n                a || e(new Error(t.message));\n              });\n            };\n          return o ? function (t, e) {\n            if (Sr(), !wr) return e(null);\n            var r = Ar(t.url);\n            wr.then(function (t) {\n              t.match(r).then(function (n) {\n                var i = function (t) {\n                  if (!t) return !1;\n                  var e = new Date(t.headers.get(\"Expires\") || 0),\n                    r = k(t.headers.get(\"Cache-Control\") || \"\");\n                  return e > Date.now() && !r[\"no-cache\"];\n                }(n);\n                t.delete(r), i && t.put(r, n.clone()), e(null, n, i);\n              }).catch(e);\n            }).catch(e);\n          }(n, u) : u(null, null), {\n            cancel: function cancel() {\n              a = !0, s || r.abort();\n            }\n          };\n        }(t, e);\n        if (A() && self.worker && self.worker.actor) return self.worker.actor.send(\"getResource\", t, e, void 0, !0);\n      }\n      var r;\n      return function (t, e) {\n        var r = new i.XMLHttpRequest();\n        r.open(t.method || \"GET\", t.url, !0), \"arrayBuffer\" === t.type && (r.responseType = \"arraybuffer\");\n        for (var _e43 in t.headers) r.setRequestHeader(_e43, t.headers[_e43]);\n        return \"json\" === t.type && (r.responseType = \"text\", r.setRequestHeader(\"Accept\", \"application/json\")), r.withCredentials = \"include\" === t.credentials, r.onerror = function () {\n          e(new Error(r.statusText));\n        }, r.onload = function () {\n          if ((r.status >= 200 && r.status < 300 || 0 === r.status) && null !== r.response) {\n            var _n30 = r.response;\n            if (\"json\" === t.type) try {\n              _n30 = JSON.parse(r.response);\n            } catch (t) {\n              return e(t);\n            }\n            e(null, _n30, r.getResponseHeader(\"Cache-Control\"), r.getResponseHeader(\"Expires\"));\n          } else e(new AJAXError(r.statusText, r.status, t.url));\n        }, r.send(t.body), {\n          cancel: function cancel() {\n            return r.abort();\n          }\n        };\n      }(t, e);\n    },\n    Mr = function Mr(t, e) {\n      return Ir(p(t, {\n        type: \"arrayBuffer\"\n      }), e);\n    },\n    Pr = function Pr(t, e) {\n      return Ir(p(t, {\n        method: \"POST\"\n      }), e);\n    },\n    Tr = function Tr(t, e) {\n      return Ir(p(t, {\n        method: \"GET\"\n      }), e);\n    },\n    Cr = {};\n  function Er(t, e) {\n    var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Object.defineProperty(t, \"_classRegistryKey\", {\n      value: e,\n      writeable: !1\n    }), Cr[e] = {\n      klass: t,\n      omit: r.omit || []\n    };\n  }\n  Er(Object, \"Object\"), C.serialize = function (t, e) {\n    var r = t.toArrayBuffer();\n    return e && e.push(r), {\n      buffer: r\n    };\n  }, C.deserialize = function (t) {\n    return new C(t.buffer);\n  }, Object.defineProperty(C, \"name\", {\n    value: \"Grid\"\n  }), Er(C, \"Grid\"), Er(R, \"Color\"), Er(Error, \"Error\"), Er(AJAXError, \"AJAXError\"), Er(ResolvedImage, \"ResolvedImage\"), Er(StylePropertyFunction, \"StylePropertyFunction\"), Er(StyleExpression, \"StyleExpression\", {\n    omit: [\"_evaluator\"]\n  }), Er(ZoomDependentExpression, \"ZoomDependentExpression\"), Er(ZoomConstantExpression, \"ZoomConstantExpression\"), Er(mt, \"CompoundExpression\", {\n    omit: [\"_evaluate\"]\n  });\n  for (var _t47 in De) Cr[De[_t47]._classRegistryKey] || Er(De[_t47], \"Expression\".concat(_t47));\n  function Dr(t) {\n    return t && \"undefined\" != typeof ArrayBuffer && (t instanceof ArrayBuffer || t.constructor && \"ArrayBuffer\" === t.constructor.name);\n  }\n  function zr(t) {\n    return i.ImageBitmap && t instanceof i.ImageBitmap;\n  }\n  function Br(t, e) {\n    if (null == t || \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp) return t;\n    if (Dr(t) || zr(t)) return e && e.push(t), t;\n    if (ArrayBuffer.isView(t)) {\n      var _r49 = t;\n      return e && e.push(_r49.buffer), _r49;\n    }\n    if (t instanceof i.ImageData) return e && e.push(t.data.buffer), t;\n    if (Array.isArray(t)) {\n      var _r50 = [];\n      var _iterator45 = _createForOfIteratorHelper(t),\n        _step45;\n      try {\n        for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {\n          var _n31 = _step45.value;\n          _r50.push(Br(_n31, e));\n        }\n      } catch (err) {\n        _iterator45.e(err);\n      } finally {\n        _iterator45.f();\n      }\n      return _r50;\n    }\n    if (\"object\" == typeof t) {\n      var _r51 = t.constructor,\n        _n32 = _r51._classRegistryKey;\n      if (!_n32) throw new Error(\"can't serialize object of unregistered class \".concat(_n32));\n      var _i28 = _r51.serialize ? _r51.serialize(t, e) : {};\n      if (!_r51.serialize) {\n        for (var _r52 in t) t.hasOwnProperty(_r52) && (Cr[_n32].omit.indexOf(_r52) >= 0 || (_i28[_r52] = Br(t[_r52], e)));\n        t instanceof Error && (_i28.message = t.message);\n      }\n      if (_i28.$name) throw new Error(\"$name property is reserved for worker serialization logic.\");\n      return \"Object\" !== _n32 && (_i28.$name = _n32), _i28;\n    }\n    throw new Error(\"can't serialize object of type \" + typeof t);\n  }\n  function Lr(t) {\n    if (null == t || \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || Dr(t) || zr(t) || ArrayBuffer.isView(t) || t instanceof i.ImageData) return t;\n    if (Array.isArray(t)) return t.map(Lr);\n    if (\"object\" == typeof t) {\n      var _e44 = t.$name || \"Object\",\n        _r53 = Cr[_e44].klass;\n      if (!_r53) throw new Error(\"can't deserialize unregistered class \".concat(_e44));\n      if (_r53.deserialize) return _r53.deserialize(t);\n      var _n33 = Object.create(_r53.prototype);\n      for (var _i29 = 0, _Object$keys2 = Object.keys(t); _i29 < _Object$keys2.length; _i29++) {\n        var _e45 = _Object$keys2[_i29];\n        \"$name\" !== _e45 && (_n33[_e45] = Lr(t[_e45]));\n      }\n      return _n33;\n    }\n    throw new Error(\"can't deserialize object of type \" + typeof t);\n  }\n  var ThrottledInvoker = /*#__PURE__*/function () {\n    function ThrottledInvoker(t) {\n      var _this12 = this;\n      _classCallCheck(this, ThrottledInvoker);\n      this._callback = t, this._triggered = !1, \"undefined\" != typeof MessageChannel && (this._channel = new MessageChannel(), this._channel.port2.onmessage = function () {\n        _this12._triggered = !1, _this12._callback();\n      });\n    }\n    _createClass(ThrottledInvoker, [{\n      key: \"trigger\",\n      value: function trigger() {\n        var _this13 = this;\n        this._triggered || (this._triggered = !0, this._channel ? this._channel.port1.postMessage(!0) : setTimeout(function () {\n          _this13._triggered = !1, _this13._callback();\n        }, 0));\n      }\n    }, {\n      key: \"remove\",\n      value: function remove() {\n        this._channel = void 0, this._callback = function () {};\n      }\n    }]);\n    return ThrottledInvoker;\n  }();\n  var Vr = i.performance;\n  function Fr(t) {\n    var e = t ? t.url.toString() : void 0;\n    return Vr.getEntriesByName(e);\n  }\n  var Scheduler = /*#__PURE__*/function () {\n    function Scheduler() {\n      _classCallCheck(this, Scheduler);\n      this.tasks = {}, this.taskQueue = [], m([\"process\"], this), this.invoker = new ThrottledInvoker(this.process), this.nextId = 0;\n    }\n    _createClass(Scheduler, [{\n      key: \"add\",\n      value: function add(t, e) {\n        var _this14 = this;\n        var r = this.nextId++,\n          n = function (_ref111) {\n            var t = _ref111.type,\n              e = _ref111.isSymbolTile,\n              r = _ref111.zoom;\n            return r = r || 0, \"message\" === t ? 0 : \"maybePrepare\" !== t || e ? \"parseTile\" !== t || e ? \"parseTile\" === t && e ? 300 - r : \"maybePrepare\" === t && e ? 400 - r : 500 : 200 - r : 100 - r;\n          }(e);\n        if (0 === n) {\n          A();\n          try {\n            t();\n          } finally {}\n          return {\n            cancel: function cancel() {}\n          };\n        }\n        return this.tasks[r] = {\n          fn: t,\n          metadata: e,\n          priority: n,\n          id: r\n        }, this.taskQueue.push(r), this.invoker.trigger(), {\n          cancel: function cancel() {\n            delete _this14.tasks[r];\n          }\n        };\n      }\n    }, {\n      key: \"process\",\n      value: function process() {\n        var _this15 = this;\n        A();\n        try {\n          if (this.taskQueue = this.taskQueue.filter(function (t) {\n            return !!_this15.tasks[t];\n          }), !this.taskQueue.length) return;\n          var _t48 = this.pick();\n          if (null === _t48) return;\n          var _e46 = this.tasks[_t48];\n          if (delete this.tasks[_t48], this.taskQueue.length && this.invoker.trigger(), !_e46) return;\n          _e46.fn();\n        } finally {}\n      }\n    }, {\n      key: \"pick\",\n      value: function pick() {\n        var t = null,\n          e = 1 / 0;\n        for (var _r54 = 0; _r54 < this.taskQueue.length; _r54++) {\n          var _n34 = this.tasks[this.taskQueue[_r54]];\n          _n34.priority < e && (e = _n34.priority, t = _r54);\n        }\n        if (null === t) return null;\n        var r = this.taskQueue[t];\n        return this.taskQueue.splice(t, 1), r;\n      }\n    }, {\n      key: \"remove\",\n      value: function remove() {\n        this.invoker.remove();\n      }\n    }]);\n    return Scheduler;\n  }();\n  var Actor = /*#__PURE__*/function () {\n    function Actor(t, e, r) {\n      _classCallCheck(this, Actor);\n      this.target = t, this.parent = e, this.mapId = r, this.callbacks = {}, this.cancelCallbacks = {}, m([\"receive\"], this), this.target.addEventListener(\"message\", this.receive, !1), this.globalScope = A() ? t : i, this.scheduler = new Scheduler();\n    }\n    _createClass(Actor, [{\n      key: \"send\",\n      value: function send(t, e, r, n) {\n        var _this16 = this;\n        var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n        var s = arguments.length > 5 ? arguments[5] : undefined;\n        var a = Math.round(1e18 * Math.random()).toString(36).substring(0, 10);\n        r && (r.metadata = s, this.callbacks[a] = r);\n        var o = M(this.globalScope) ? void 0 : [];\n        return this.target.postMessage({\n          id: a,\n          type: t,\n          hasCallback: !!r,\n          targetMapId: n,\n          mustQueue: i,\n          sourceMapId: this.mapId,\n          data: Br(e, o)\n        }, o), {\n          cancel: function cancel() {\n            r && delete _this16.callbacks[a], _this16.target.postMessage({\n              id: a,\n              type: \"<cancel>\",\n              targetMapId: n,\n              sourceMapId: _this16.mapId\n            });\n          }\n        };\n      }\n    }, {\n      key: \"receive\",\n      value: function receive(t) {\n        var _this17 = this;\n        var e = t.data,\n          r = e.id;\n        if (r && (!e.targetMapId || this.mapId === e.targetMapId)) if (\"<cancel>\" === e.type) {\n          var _t49 = this.cancelCallbacks[r];\n          delete this.cancelCallbacks[r], _t49 && _t49.cancel();\n        } else if (e.mustQueue || A()) {\n          var _t50 = this.callbacks[r];\n          this.cancelCallbacks[r] = this.scheduler.add(function () {\n            return _this17.processTask(r, e);\n          }, _t50 && _t50.metadata || {\n            type: \"message\"\n          });\n        } else this.processTask(r, e);\n      }\n    }, {\n      key: \"processTask\",\n      value: function processTask(t, e) {\n        var _this18 = this;\n        if (\"<response>\" === e.type) {\n          var _r55 = this.callbacks[t];\n          delete this.callbacks[t], _r55 && (e.error ? _r55(Lr(e.error)) : _r55(null, Lr(e.data)));\n        } else {\n          var _r56 = M(this.globalScope) ? void 0 : [],\n            _n35 = e.hasCallback ? function (e, n) {\n              delete _this18.cancelCallbacks[t], _this18.target.postMessage({\n                id: t,\n                type: \"<response>\",\n                sourceMapId: _this18.mapId,\n                error: e ? Br(e) : null,\n                data: Br(n, _r56)\n              }, _r56);\n            } : function (t) {},\n            _i30 = Lr(e.data);\n          if (this.parent[e.type]) this.parent[e.type](e.sourceMapId, _i30, _n35);else if (this.parent.getWorkerSource) {\n            var _t51 = e.type.split(\".\");\n            this.parent.getWorkerSource(e.sourceMapId, _t51[0], _i30.source)[_t51[1]](_i30, _n35);\n          } else _n35(new Error(\"Could not find function \".concat(e.type)));\n        }\n      }\n    }, {\n      key: \"remove\",\n      value: function remove() {\n        this.scheduler.remove(), this.target.removeEventListener(\"message\", this.receive, !1);\n      }\n    }]);\n    return Actor;\n  }();\n  var Rr = JSON.parse('{\"$version\":8,\"$root\":{\"version\":{\"required\":true,\"type\":\"enum\",\"values\":[8]},\"name\":{\"type\":\"string\"},\"metadata\":{\"type\":\"*\"},\"center\":{\"type\":\"array\",\"value\":\"number\"},\"zoom\":{\"type\":\"number\"},\"bearing\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\"},\"pitch\":{\"type\":\"number\",\"default\":0,\"units\":\"degrees\"},\"light\":{\"type\":\"light\"},\"terrain\":{\"type\":\"terrain\"},\"fog\":{\"type\":\"fog\"},\"sources\":{\"required\":true,\"type\":\"sources\"},\"sprite\":{\"type\":\"string\"},\"glyphs\":{\"type\":\"string\"},\"transition\":{\"type\":\"transition\"},\"projection\":{\"type\":\"projection\"},\"layers\":{\"required\":true,\"type\":\"array\",\"value\":\"layer\"}},\"sources\":{\"*\":{\"type\":\"source\"}},\"source\":[\"source_vector\",\"source_raster\",\"source_raster_dem\",\"source_geojson\",\"source_video\",\"source_image\"],\"source_vector\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"vector\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"scheme\":{\"type\":\"enum\",\"values\":{\"xyz\":{},\"tms\":{}},\"default\":\"xyz\"},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"attribution\":{\"type\":\"string\"},\"promoteId\":{\"type\":\"promoteId\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_raster\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"raster\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"tileSize\":{\"type\":\"number\",\"default\":512,\"units\":\"pixels\"},\"scheme\":{\"type\":\"enum\",\"values\":{\"xyz\":{},\"tms\":{}},\"default\":\"xyz\"},\"attribution\":{\"type\":\"string\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_raster_dem\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"raster-dem\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"tileSize\":{\"type\":\"number\",\"default\":512,\"units\":\"pixels\"},\"attribution\":{\"type\":\"string\"},\"encoding\":{\"type\":\"enum\",\"values\":{\"terrarium\":{},\"mapbox\":{}},\"default\":\"mapbox\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_geojson\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"geojson\":{}}},\"data\":{\"type\":\"*\"},\"maxzoom\":{\"type\":\"number\",\"default\":18},\"attribution\":{\"type\":\"string\"},\"buffer\":{\"type\":\"number\",\"default\":128,\"maximum\":512,\"minimum\":0},\"filter\":{\"type\":\"*\"},\"tolerance\":{\"type\":\"number\",\"default\":0.375},\"cluster\":{\"type\":\"boolean\",\"default\":false},\"clusterRadius\":{\"type\":\"number\",\"default\":50,\"minimum\":0},\"clusterMaxZoom\":{\"type\":\"number\"},\"clusterMinPoints\":{\"type\":\"number\"},\"clusterProperties\":{\"type\":\"*\"},\"lineMetrics\":{\"type\":\"boolean\",\"default\":false},\"generateId\":{\"type\":\"boolean\",\"default\":false},\"promoteId\":{\"type\":\"promoteId\"}},\"source_video\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"video\":{}}},\"urls\":{\"required\":true,\"type\":\"array\",\"value\":\"string\"},\"coordinates\":{\"required\":true,\"type\":\"array\",\"length\":4,\"value\":{\"type\":\"array\",\"length\":2,\"value\":\"number\"}}},\"source_image\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"image\":{}}},\"url\":{\"required\":true,\"type\":\"string\"},\"coordinates\":{\"required\":true,\"type\":\"array\",\"length\":4,\"value\":{\"type\":\"array\",\"length\":2,\"value\":\"number\"}}},\"layer\":{\"id\":{\"type\":\"string\",\"required\":true},\"type\":{\"type\":\"enum\",\"values\":{\"fill\":{},\"line\":{},\"symbol\":{},\"circle\":{},\"heatmap\":{},\"fill-extrusion\":{},\"raster\":{},\"hillshade\":{},\"background\":{},\"sky\":{}},\"required\":true},\"metadata\":{\"type\":\"*\"},\"source\":{\"type\":\"string\"},\"source-layer\":{\"type\":\"string\"},\"minzoom\":{\"type\":\"number\",\"minimum\":0,\"maximum\":24},\"maxzoom\":{\"type\":\"number\",\"minimum\":0,\"maximum\":24},\"filter\":{\"type\":\"filter\"},\"layout\":{\"type\":\"layout\"},\"paint\":{\"type\":\"paint\"}},\"layout\":[\"layout_fill\",\"layout_line\",\"layout_circle\",\"layout_heatmap\",\"layout_fill-extrusion\",\"layout_symbol\",\"layout_raster\",\"layout_hillshade\",\"layout_background\",\"layout_sky\"],\"layout_background\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_sky\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_fill\":{\"fill-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_circle\":{\"circle-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_heatmap\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_fill-extrusion\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"},\"fill-extrusion-edge-radius\":{\"type\":\"number\",\"private\":true,\"default\":0,\"minimum\":0,\"maximum\":1,\"property-type\":\"constant\"}},\"layout_line\":{\"line-cap\":{\"type\":\"enum\",\"values\":{\"butt\":{},\"round\":{},\"square\":{}},\"default\":\"butt\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-join\":{\"type\":\"enum\",\"values\":{\"bevel\":{},\"round\":{},\"miter\":{}},\"default\":\"miter\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-miter-limit\":{\"type\":\"number\",\"default\":2,\"requires\":[{\"line-join\":\"miter\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-round-limit\":{\"type\":\"number\",\"default\":1.05,\"requires\":[{\"line-join\":\"round\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_symbol\":{\"symbol-placement\":{\"type\":\"enum\",\"values\":{\"point\":{},\"line\":{},\"line-center\":{}},\"default\":\"point\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-spacing\":{\"type\":\"number\",\"default\":250,\"minimum\":1,\"units\":\"pixels\",\"requires\":[{\"symbol-placement\":\"line\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-avoid-edges\":{\"type\":\"boolean\",\"default\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"symbol-z-order\":{\"type\":\"enum\",\"values\":{\"auto\":{},\"viewport-y\":{},\"source\":{}},\"default\":\"auto\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-allow-overlap\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-ignore-placement\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-optional\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\",\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-rotation-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-size\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"units\":\"factor of the original icon size\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-text-fit\":{\"type\":\"enum\",\"values\":{\"none\":{},\"width\":{},\"height\":{},\"both\":{}},\"default\":\"none\",\"requires\":[\"icon-image\",\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-text-fit-padding\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[0,0,0,0],\"units\":\"pixels\",\"requires\":[\"icon-image\",\"text-field\",{\"icon-text-fit\":[\"both\",\"width\",\"height\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-image\":{\"type\":\"resolvedImage\",\"tokens\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-padding\":{\"type\":\"number\",\"default\":2,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-keep-upright\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\",{\"icon-rotation-alignment\":\"map\"},{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-offset\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-anchor\":{\"type\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"default\":\"center\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-rotation-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-field\":{\"type\":\"formatted\",\"default\":\"\",\"tokens\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-font\":{\"type\":\"array\",\"value\":\"string\",\"default\":[\"Open Sans Regular\",\"Arial Unicode MS Regular\"],\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-size\":{\"type\":\"number\",\"default\":16,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-max-width\":{\"type\":\"number\",\"default\":10,\"minimum\":0,\"units\":\"ems\",\"requires\":[\"text-field\",{\"symbol-placement\":[\"point\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-line-height\":{\"type\":\"number\",\"default\":1.2,\"units\":\"ems\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-letter-spacing\":{\"type\":\"number\",\"default\":0,\"units\":\"ems\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-justify\":{\"type\":\"enum\",\"values\":{\"auto\":{},\"left\":{},\"center\":{},\"right\":{}},\"default\":\"center\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-radial-offset\":{\"type\":\"number\",\"units\":\"ems\",\"default\":0,\"requires\":[\"text-field\"],\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]}},\"text-variable-anchor\":{\"type\":\"array\",\"value\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"requires\":[\"text-field\",{\"symbol-placement\":[\"point\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-anchor\":{\"type\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"default\":\"center\",\"requires\":[\"text-field\",{\"!\":\"text-variable-anchor\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-max-angle\":{\"type\":\"number\",\"default\":45,\"units\":\"degrees\",\"requires\":[\"text-field\",{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-writing-mode\":{\"type\":\"array\",\"value\":\"enum\",\"values\":{\"horizontal\":{},\"vertical\":{}},\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-padding\":{\"type\":\"number\",\"default\":2,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-keep-upright\":{\"type\":\"boolean\",\"default\":true,\"requires\":[\"text-field\",{\"text-rotation-alignment\":\"map\"},{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-transform\":{\"type\":\"enum\",\"values\":{\"none\":{},\"uppercase\":{},\"lowercase\":{}},\"default\":\"none\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-offset\":{\"type\":\"array\",\"value\":\"number\",\"units\":\"ems\",\"length\":2,\"default\":[0,0],\"requires\":[\"text-field\",{\"!\":\"text-radial-offset\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-allow-overlap\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-ignore-placement\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-optional\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\",\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_raster\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_hillshade\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"filter\":{\"type\":\"array\",\"value\":\"*\"},\"filter_symbol\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\",\"pitch\",\"distance-from-center\"]}},\"filter_fill\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_line\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_circle\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_fill-extrusion\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_heatmap\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_operator\":{\"type\":\"enum\",\"values\":{\"==\":{},\"!=\":{},\">\":{},\">=\":{},\"<\":{},\"<=\":{},\"in\":{},\"!in\":{},\"all\":{},\"any\":{},\"none\":{},\"has\":{},\"!has\":{},\"within\":{}}},\"geometry_type\":{\"type\":\"enum\",\"values\":{\"Point\":{},\"LineString\":{},\"Polygon\":{}}},\"function\":{\"expression\":{\"type\":\"expression\"},\"stops\":{\"type\":\"array\",\"value\":\"function_stop\"},\"base\":{\"type\":\"number\",\"default\":1,\"minimum\":0},\"property\":{\"type\":\"string\",\"default\":\"$zoom\"},\"type\":{\"type\":\"enum\",\"values\":{\"identity\":{},\"exponential\":{},\"interval\":{},\"categorical\":{}},\"default\":\"exponential\"},\"colorSpace\":{\"type\":\"enum\",\"values\":{\"rgb\":{},\"lab\":{},\"hcl\":{}},\"default\":\"rgb\"},\"default\":{\"type\":\"*\",\"required\":false}},\"function_stop\":{\"type\":\"array\",\"minimum\":0,\"maximum\":24,\"value\":[\"number\",\"color\"],\"length\":2},\"expression\":{\"type\":\"array\",\"value\":\"*\",\"minimum\":1},\"fog\":{\"range\":{\"type\":\"array\",\"default\":[0.5,10],\"minimum\":-20,\"maximum\":20,\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]}},\"color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#ffffff\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"high-color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#245cdf\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"space-color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],4,\"#010b19\",7,\"#367ab9\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"horizon-blend\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],4,0.2,7,0.1],\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"star-intensity\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],5,0.35,6,0],\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true}},\"light\":{\"anchor\":{\"type\":\"enum\",\"default\":\"viewport\",\"values\":{\"map\":{},\"viewport\":{}},\"property-type\":\"data-constant\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]}},\"position\":{\"type\":\"array\",\"default\":[1.15,210,30],\"length\":3,\"value\":\"number\",\"property-type\":\"data-constant\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]}},\"color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#ffffff\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"intensity\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":0.5,\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true}},\"projection\":{\"name\":{\"type\":\"enum\",\"values\":{\"albers\":{},\"equalEarth\":{},\"equirectangular\":{},\"lambertConformalConic\":{},\"mercator\":{},\"naturalEarth\":{},\"winkelTripel\":{},\"globe\":{}},\"default\":\"mercator\",\"required\":true},\"center\":{\"type\":\"array\",\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"minimum\":[-180,-90],\"maximum\":[180,90],\"transition\":false,\"requires\":[{\"name\":[\"albers\",\"lambertConformalConic\"]}]},\"parallels\":{\"type\":\"array\",\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"minimum\":[-90,-90],\"maximum\":[90,90],\"transition\":false,\"requires\":[{\"name\":[\"albers\",\"lambertConformalConic\"]}]}},\"terrain\":{\"source\":{\"type\":\"string\",\"required\":true},\"exaggeration\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":1,\"minimum\":0,\"maximum\":1000,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true,\"requires\":[\"source\"]}},\"paint\":[\"paint_fill\",\"paint_line\",\"paint_circle\",\"paint_heatmap\",\"paint_fill-extrusion\",\"paint_symbol\",\"paint_raster\",\"paint_hillshade\",\"paint_background\",\"paint_sky\"],\"paint_fill\":{\"fill-antialias\":{\"type\":\"boolean\",\"default\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"fill-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-outline-color\":{\"type\":\"color\",\"transition\":true,\"requires\":[{\"!\":\"fill-pattern\"},{\"fill-antialias\":true}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"fill-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"}},\"paint_fill-extrusion\":{\"fill-extrusion-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"fill-extrusion-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"fill-extrusion-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-height\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"meters\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-base\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"meters\",\"transition\":true,\"requires\":[\"fill-extrusion-height\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-vertical-gradient\":{\"type\":\"boolean\",\"default\":true,\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-ambient-occlusion-intensity\":{\"property-type\":\"data-constant\",\"type\":\"number\",\"private\":true,\"default\":0,\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"fill-extrusion-ambient-occlusion-radius\":{\"property-type\":\"data-constant\",\"type\":\"number\",\"private\":true,\"default\":3,\"minimum\":0,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true,\"requires\":[\"fill-extrusion-edge-radius\"]}},\"paint_line\":{\"line-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"line-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"line-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-width\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-gap-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-offset\":{\"type\":\"number\",\"default\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-dasharray\":{\"type\":\"array\",\"value\":\"number\",\"minimum\":0,\"transition\":false,\"units\":\"line widths\",\"requires\":[{\"!\":\"line-pattern\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-gradient\":{\"type\":\"color\",\"transition\":false,\"requires\":[{\"!\":\"line-pattern\"},{\"source\":\"geojson\",\"has\":{\"lineMetrics\":true}}],\"expression\":{\"interpolated\":true,\"parameters\":[\"line-progress\"]},\"property-type\":\"color-ramp\"},\"line-trim-offset\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"minimum\":[0,0],\"maximum\":[1,1],\"transition\":false,\"requires\":[{\"source\":\"geojson\",\"has\":{\"lineMetrics\":true}}],\"property-type\":\"constant\"}},\"paint_circle\":{\"circle-radius\":{\"type\":\"number\",\"default\":5,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-blur\":{\"type\":\"number\",\"default\":0,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"circle-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-pitch-scale\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"viewport\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-stroke-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-stroke-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-stroke-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"}},\"paint_heatmap\":{\"heatmap-radius\":{\"type\":\"number\",\"default\":30,\"minimum\":1,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"heatmap-weight\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"heatmap-intensity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"heatmap-color\":{\"type\":\"color\",\"default\":[\"interpolate\",[\"linear\"],[\"heatmap-density\"],0,\"rgba(0, 0, 255, 0)\",0.1,\"royalblue\",0.3,\"cyan\",0.5,\"lime\",0.7,\"yellow\",1,\"red\"],\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"heatmap-density\"]},\"property-type\":\"color-ramp\"},\"heatmap-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_symbol\":{\"icon-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-color\":{\"type\":\"color\",\"default\":\"rgba(0, 0, 0, 0)\",\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"icon-image\",\"icon-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"overridable\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-color\":{\"type\":\"color\",\"default\":\"rgba(0, 0, 0, 0)\",\"transition\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"text-field\",\"text-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_raster\":{\"raster-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-hue-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"transition\":true,\"units\":\"degrees\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-brightness-min\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-brightness-max\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-saturation\":{\"type\":\"number\",\"default\":0,\"minimum\":-1,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-contrast\":{\"type\":\"number\",\"default\":0,\"minimum\":-1,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-resampling\":{\"type\":\"enum\",\"values\":{\"linear\":{},\"nearest\":{}},\"default\":\"linear\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-fade-duration\":{\"type\":\"number\",\"default\":300,\"minimum\":0,\"transition\":false,\"units\":\"milliseconds\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_hillshade\":{\"hillshade-illumination-direction\":{\"type\":\"number\",\"default\":335,\"minimum\":0,\"maximum\":359,\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-illumination-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"viewport\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-exaggeration\":{\"type\":\"number\",\"default\":0.5,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-shadow-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-highlight-color\":{\"type\":\"color\",\"default\":\"#FFFFFF\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-accent-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_background\":{\"background-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"background-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"background-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"background-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_sky\":{\"sky-type\":{\"type\":\"enum\",\"values\":{\"gradient\":{},\"atmosphere\":{}},\"default\":\"atmosphere\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-atmosphere-sun\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"units\":\"degrees\",\"minimum\":[0,0],\"maximum\":[360,180],\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-atmosphere-sun-intensity\":{\"type\":\"number\",\"requires\":[{\"sky-type\":\"atmosphere\"}],\"default\":10,\"minimum\":0,\"maximum\":100,\"transition\":false,\"property-type\":\"data-constant\"},\"sky-gradient-center\":{\"type\":\"array\",\"requires\":[{\"sky-type\":\"gradient\"}],\"value\":\"number\",\"default\":[0,0],\"length\":2,\"units\":\"degrees\",\"minimum\":[0,0],\"maximum\":[360,180],\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-gradient-radius\":{\"type\":\"number\",\"requires\":[{\"sky-type\":\"gradient\"}],\"default\":90,\"minimum\":0,\"maximum\":180,\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-gradient\":{\"type\":\"color\",\"default\":[\"interpolate\",[\"linear\"],[\"sky-radial-progress\"],0.8,\"#87ceeb\",1,\"white\"],\"transition\":false,\"requires\":[{\"sky-type\":\"gradient\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"sky-radial-progress\"]},\"property-type\":\"color-ramp\"},\"sky-atmosphere-halo-color\":{\"type\":\"color\",\"default\":\"white\",\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"property-type\":\"data-constant\"},\"sky-atmosphere-color\":{\"type\":\"color\",\"default\":\"white\",\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"property-type\":\"data-constant\"},\"sky-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"transition\":{\"duration\":{\"type\":\"number\",\"default\":300,\"minimum\":0,\"units\":\"milliseconds\"},\"delay\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"milliseconds\"}},\"property-type\":{\"data-driven\":{\"type\":\"property-type\"},\"color-ramp\":{\"type\":\"property-type\"},\"data-constant\":{\"type\":\"property-type\"},\"constant\":{\"type\":\"property-type\"}},\"promoteId\":{\"*\":{\"type\":\"string\"}}}');\n  function jr(t, e, r) {\n    r[t] && -1 !== r[t].indexOf(e) || (r[t] = r[t] || [], r[t].push(e));\n  }\n  function Or(t, e, r) {\n    if (r && r[t]) {\n      var _n36 = r[t].indexOf(e);\n      -1 !== _n36 && r[t].splice(_n36, 1);\n    }\n  }\n  var Event = function Event(t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Event);\n    p(this, e), this.type = t;\n  };\n  var ErrorEvent = /*#__PURE__*/function (_Event) {\n    _inherits(ErrorEvent, _Event);\n    function ErrorEvent(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, ErrorEvent);\n      return _possibleConstructorReturn(this, _getPrototypeOf(ErrorEvent).call(this, \"error\", p({\n        error: t\n      }, e)));\n    }\n    return ErrorEvent;\n  }(Event);\n  var Evented = /*#__PURE__*/function () {\n    function Evented() {\n      _classCallCheck(this, Evented);\n    }\n    _createClass(Evented, [{\n      key: \"on\",\n      value: function on(t, e) {\n        return this._listeners = this._listeners || {}, jr(t, e, this._listeners), this;\n      }\n    }, {\n      key: \"off\",\n      value: function off(t, e) {\n        return Or(t, e, this._listeners), Or(t, e, this._oneTimeListeners), this;\n      }\n    }, {\n      key: \"once\",\n      value: function once(t, e) {\n        var _this19 = this;\n        return e ? (this._oneTimeListeners = this._oneTimeListeners || {}, jr(t, e, this._oneTimeListeners), this) : new Promise(function (e) {\n          return _this19.once(t, e);\n        });\n      }\n    }, {\n      key: \"fire\",\n      value: function fire(t, e) {\n        \"string\" == typeof t && (t = new Event(t, e || {}));\n        var r = t.type;\n        if (this.listens(r)) {\n          t.target = this;\n          var _e47 = this._listeners && this._listeners[r] ? this._listeners[r].slice() : [];\n          var _iterator46 = _createForOfIteratorHelper(_e47),\n            _step46;\n          try {\n            for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {\n              var _r57 = _step46.value;\n              _r57.call(this, t);\n            }\n          } catch (err) {\n            _iterator46.e(err);\n          } finally {\n            _iterator46.f();\n          }\n          var _n37 = this._oneTimeListeners && this._oneTimeListeners[r] ? this._oneTimeListeners[r].slice() : [];\n          var _iterator47 = _createForOfIteratorHelper(_n37),\n            _step47;\n          try {\n            for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {\n              var _e48 = _step47.value;\n              Or(r, _e48, this._oneTimeListeners), _e48.call(this, t);\n            }\n          } catch (err) {\n            _iterator47.e(err);\n          } finally {\n            _iterator47.f();\n          }\n          var _i31 = this._eventedParent;\n          _i31 && (p(t, \"function\" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData), _i31.fire(t));\n        } else t instanceof ErrorEvent && console.error(t.error);\n        return this;\n      }\n    }, {\n      key: \"listens\",\n      value: function listens(t) {\n        return !!(this._listeners && this._listeners[t] && this._listeners[t].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t] && this._oneTimeListeners[t].length > 0 || this._eventedParent && this._eventedParent.listens(t));\n      }\n    }, {\n      key: \"setEventedParent\",\n      value: function setEventedParent(t, e) {\n        return this._eventedParent = t, this._eventedParentData = e, this;\n      }\n    }]);\n    return Evented;\n  }();\n  function $r(t) {\n    return t instanceof Number || t instanceof String || t instanceof Boolean ? t.valueOf() : t;\n  }\n  function Ur(t) {\n    if (Array.isArray(t)) return t.map(Ur);\n    if (t instanceof Object && !(t instanceof Number || t instanceof String || t instanceof Boolean)) {\n      var _e49 = {};\n      for (var _r58 in t) _e49[_r58] = Ur(t[_r58]);\n      return _e49;\n    }\n    return $r(t);\n  }\n  var ValidationError = function ValidationError(t, e, r, n) {\n    _classCallCheck(this, ValidationError);\n    this.message = (t ? \"\".concat(t, \": \") : \"\") + r, n && (this.identifier = n), null != e && e.__line__ && (this.line = e.__line__);\n  };\n  function qr(t) {\n    var e = t.key,\n      r = t.value,\n      n = t.valueSpec || {},\n      i = t.objectElementValidators || {},\n      s = t.style,\n      a = t.styleSpec;\n    var o = [];\n    var l = Re(r);\n    if (\"object\" !== l) return [new ValidationError(e, r, \"object expected, \".concat(l, \" found\"))];\n    for (var _t52 in r) {\n      var _l6 = _t52.split(\".\")[0],\n        _u6 = n[_l6] || n[\"*\"];\n      var _c3 = void 0;\n      i[_l6] ? _c3 = i[_l6] : n[_l6] ? _c3 = vn : i[\"*\"] ? _c3 = i[\"*\"] : n[\"*\"] && (_c3 = vn), _c3 ? o = o.concat(_c3({\n        key: (e ? \"\".concat(e, \".\") : e) + _t52,\n        value: r[_t52],\n        valueSpec: _u6,\n        style: s,\n        styleSpec: a,\n        object: r,\n        objectKey: _t52\n      }, r)) : o.push(new ValidationError(e, r[_t52], \"unknown property \\\"\".concat(_t52, \"\\\"\")));\n    }\n    for (var _t53 in n) i[_t53] || n[_t53].required && void 0 === n[_t53].default && void 0 === r[_t53] && o.push(new ValidationError(e, r, \"missing required property \\\"\".concat(_t53, \"\\\"\")));\n    return o;\n  }\n  function Nr(t) {\n    var e = t.value,\n      r = t.valueSpec,\n      n = t.style,\n      i = t.styleSpec,\n      s = t.key,\n      a = t.arrayElementValidator || vn;\n    if (\"array\" !== Re(e)) return [new ValidationError(s, e, \"array expected, \".concat(Re(e), \" found\"))];\n    if (r.length && e.length !== r.length) return [new ValidationError(s, e, \"array length \".concat(r.length, \" expected, length \").concat(e.length, \" found\"))];\n    if (r[\"min-length\"] && e.length < r[\"min-length\"]) return [new ValidationError(s, e, \"array length at least \".concat(r[\"min-length\"], \" expected, length \").concat(e.length, \" found\"))];\n    var o = {\n      type: r.value,\n      values: r.values,\n      minimum: r.minimum,\n      maximum: r.maximum,\n      function: void 0\n    };\n    i.$version < 7 && (o.function = r.function), \"object\" === Re(r.value) && (o = r.value);\n    var l = [];\n    for (var _t54 = 0; _t54 < e.length; _t54++) l = l.concat(a({\n      array: e,\n      arrayIndex: _t54,\n      value: e[_t54],\n      valueSpec: o,\n      style: n,\n      styleSpec: i,\n      key: \"\".concat(s, \"[\").concat(_t54, \"]\")\n    }));\n    return l;\n  }\n  function Gr(t) {\n    var e = t.key,\n      r = t.value,\n      n = t.valueSpec;\n    var i = Re(r);\n    if (\"number\" === i && r != r && (i = \"NaN\"), \"number\" !== i) return [new ValidationError(e, r, \"number expected, \".concat(i, \" found\"))];\n    if (\"minimum\" in n) {\n      var _i32 = n.minimum;\n      if (\"array\" === Re(n.minimum) && (_i32 = n.minimum[t.arrayIndex]), r < _i32) return [new ValidationError(e, r, \"\".concat(r, \" is less than the minimum value \").concat(_i32))];\n    }\n    if (\"maximum\" in n) {\n      var _i33 = n.maximum;\n      if (\"array\" === Re(n.maximum) && (_i33 = n.maximum[t.arrayIndex]), r > _i33) return [new ValidationError(e, r, \"\".concat(r, \" is greater than the maximum value \").concat(_i33))];\n    }\n    return [];\n  }\n  function Zr(t) {\n    var e = t.valueSpec,\n      r = $r(t.value.type);\n    var n,\n      i,\n      s,\n      a = {};\n    var o = \"categorical\" !== r && void 0 === t.value.property,\n      l = !o,\n      u = \"array\" === Re(t.value.stops) && \"array\" === Re(t.value.stops[0]) && \"object\" === Re(t.value.stops[0][0]),\n      c = qr({\n        key: t.key,\n        value: t.value,\n        valueSpec: t.styleSpec.function,\n        style: t.style,\n        styleSpec: t.styleSpec,\n        objectElementValidators: {\n          stops: function stops(t) {\n            if (\"identity\" === r) return [new ValidationError(t.key, t.value, 'identity function may not have a \"stops\" property')];\n            var e = [];\n            var n = t.value;\n            return e = e.concat(Nr({\n              key: t.key,\n              value: n,\n              valueSpec: t.valueSpec,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              arrayElementValidator: h\n            })), \"array\" === Re(n) && 0 === n.length && e.push(new ValidationError(t.key, n, \"array must have at least one stop\")), e;\n          },\n          default: function _default(t) {\n            return vn({\n              key: t.key,\n              value: t.value,\n              valueSpec: e,\n              style: t.style,\n              styleSpec: t.styleSpec\n            });\n          }\n        }\n      });\n    return \"identity\" === r && o && c.push(new ValidationError(t.key, t.value, 'missing required property \"property\"')), \"identity\" === r || t.value.stops || c.push(new ValidationError(t.key, t.value, 'missing required property \"stops\"')), \"exponential\" === r && t.valueSpec.expression && !Fe(t.valueSpec) && c.push(new ValidationError(t.key, t.value, \"exponential functions not supported\")), t.styleSpec.$version >= 8 && (l && !Le(t.valueSpec) ? c.push(new ValidationError(t.key, t.value, \"property functions not supported\")) : o && !Ve(t.valueSpec) && c.push(new ValidationError(t.key, t.value, \"zoom functions not supported\"))), \"categorical\" !== r && !u || void 0 !== t.value.property || c.push(new ValidationError(t.key, t.value, '\"property\" property is required')), c;\n    function h(t) {\n      var r = [];\n      var n = t.value,\n        o = t.key;\n      if (\"array\" !== Re(n)) return [new ValidationError(o, n, \"array expected, \".concat(Re(n), \" found\"))];\n      if (2 !== n.length) return [new ValidationError(o, n, \"array length 2 expected, length \".concat(n.length, \" found\"))];\n      if (u) {\n        if (\"object\" !== Re(n[0])) return [new ValidationError(o, n, \"object expected, \".concat(Re(n[0]), \" found\"))];\n        if (void 0 === n[0].zoom) return [new ValidationError(o, n, \"object stop key must have zoom\")];\n        if (void 0 === n[0].value) return [new ValidationError(o, n, \"object stop key must have value\")];\n        var _e50 = $r(n[0].zoom);\n        if (\"number\" != typeof _e50) return [new ValidationError(o, n[0].zoom, \"stop zoom values must be numbers\")];\n        if (s && s > _e50) return [new ValidationError(o, n[0].zoom, \"stop zoom values must appear in ascending order\")];\n        _e50 !== s && (s = _e50, i = void 0, a = {}), r = r.concat(qr({\n          key: \"\".concat(o, \"[0]\"),\n          value: n[0],\n          valueSpec: {\n            zoom: {}\n          },\n          style: t.style,\n          styleSpec: t.styleSpec,\n          objectElementValidators: {\n            zoom: Gr,\n            value: p\n          }\n        }));\n      } else r = r.concat(p({\n        key: \"\".concat(o, \"[0]\"),\n        value: n[0],\n        valueSpec: {},\n        style: t.style,\n        styleSpec: t.styleSpec\n      }, n));\n      return Xe(Ur(n[1])) ? r.concat([new ValidationError(\"\".concat(o, \"[1]\"), n[1], \"expressions are not allowed in function stops.\")]) : r.concat(vn({\n        key: \"\".concat(o, \"[1]\"),\n        value: n[1],\n        valueSpec: e,\n        style: t.style,\n        styleSpec: t.styleSpec\n      }));\n    }\n    function p(t, s) {\n      var o = Re(t.value),\n        l = $r(t.value),\n        u = null !== t.value ? t.value : s;\n      if (n) {\n        if (o !== n) return [new ValidationError(t.key, u, \"\".concat(o, \" stop domain type must match previous stop domain type \").concat(n))];\n      } else n = o;\n      if (\"number\" !== o && \"string\" !== o && \"boolean\" !== o && \"number\" != typeof l && \"string\" != typeof l && \"boolean\" != typeof l) return [new ValidationError(t.key, u, \"stop domain value must be a number, string, or boolean\")];\n      if (\"number\" !== o && \"categorical\" !== r) {\n        var _n38 = \"number expected, \".concat(o, \" found\");\n        return Le(e) && void 0 === r && (_n38 += '\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.'), [new ValidationError(t.key, u, _n38)];\n      }\n      return \"categorical\" !== r || \"number\" !== o || \"number\" == typeof l && isFinite(l) && Math.floor(l) === l ? \"categorical\" !== r && \"number\" === o && \"number\" == typeof l && \"number\" == typeof i && void 0 !== i && l < i ? [new ValidationError(t.key, u, \"stop domain values must appear in ascending order\")] : (i = l, \"categorical\" === r && l in a ? [new ValidationError(t.key, u, \"stop domain values must be unique\")] : (a[l] = !0, [])) : [new ValidationError(t.key, u, \"integer expected, found \".concat(String(l)))];\n    }\n  }\n  function Xr(t) {\n    var e = (\"property\" === t.expressionContext ? We : Ye)(Ur(t.value), t.valueSpec);\n    if (\"error\" === e.result) return e.value.map(function (e) {\n      return new ValidationError(\"\".concat(t.key).concat(e.key), t.value, e.message);\n    });\n    var r = e.value.expression || e.value._styleExpression.expression;\n    if (\"property\" === t.expressionContext && \"text-font\" === t.propertyKey && !r.outputDefined()) return [new ValidationError(t.key, t.value, \"Invalid data expression for \\\"\".concat(t.propertyKey, \"\\\". Output values must be contained as literals within the expression.\"))];\n    if (\"property\" === t.expressionContext && \"layout\" === t.propertyType && !Vt(r)) return [new ValidationError(t.key, t.value, '\"feature-state\" data expressions are not supported with layout properties.')];\n    if (\"filter\" === t.expressionContext) return Yr(r, t);\n    if (t.expressionContext && 0 === t.expressionContext.indexOf(\"cluster\")) {\n      if (!Ft(r, [\"zoom\", \"feature-state\"])) return [new ValidationError(t.key, t.value, '\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.')];\n      if (\"cluster-initial\" === t.expressionContext && !Lt(r)) return [new ValidationError(t.key, t.value, \"Feature data expressions are not supported with initial expression part of cluster properties.\")];\n    }\n    return [];\n  }\n  function Yr(t, e) {\n    var r = new Set([\"zoom\", \"feature-state\", \"pitch\", \"distance-from-center\"]);\n    if (e.valueSpec && e.valueSpec.expression) {\n      var _iterator48 = _createForOfIteratorHelper(e.valueSpec.expression.parameters),\n        _step48;\n      try {\n        for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {\n          var _t55 = _step48.value;\n          r.delete(_t55);\n        }\n      } catch (err) {\n        _iterator48.e(err);\n      } finally {\n        _iterator48.f();\n      }\n    }\n    if (0 === r.size) return [];\n    var n = [];\n    return t instanceof mt && r.has(t.name) ? [new ValidationError(e.key, e.value, \"[\\\"\".concat(t.name, \"\\\"] expression is not supported in a filter for a \").concat(e.object.type, \" layer with id: \").concat(e.object.id))] : (t.eachChild(function (t) {\n      n.push.apply(n, _toConsumableArray(Yr(t, e)));\n    }), n);\n  }\n  function Wr(t) {\n    var e = t.key,\n      r = t.value,\n      n = t.valueSpec,\n      i = [];\n    return Array.isArray(n.values) ? -1 === n.values.indexOf($r(r)) && i.push(new ValidationError(e, r, \"expected one of [\".concat(n.values.join(\", \"), \"], \").concat(JSON.stringify(r), \" found\"))) : -1 === Object.keys(n.values).indexOf($r(r)) && i.push(new ValidationError(e, r, \"expected one of [\".concat(Object.keys(n.values).join(\", \"), \"], \").concat(JSON.stringify(r), \" found\"))), i;\n  }\n  function Jr(t) {\n    if (!0 === t || !1 === t) return !0;\n    if (!Array.isArray(t) || 0 === t.length) return !1;\n    switch (t[0]) {\n      case \"has\":\n        return t.length >= 2 && \"$id\" !== t[1] && \"$type\" !== t[1];\n      case \"in\":\n        return t.length >= 3 && (\"string\" != typeof t[1] || Array.isArray(t[2]));\n      case \"!in\":\n      case \"!has\":\n      case \"none\":\n        return !1;\n      case \"==\":\n      case \"!=\":\n      case \">\":\n      case \">=\":\n      case \"<\":\n      case \"<=\":\n        return 3 !== t.length || Array.isArray(t[1]) || Array.isArray(t[2]);\n      case \"any\":\n      case \"all\":\n        var _iterator49 = _createForOfIteratorHelper(t.slice(1)),\n          _step49;\n        try {\n          for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {\n            var _e51 = _step49.value;\n            if (!Jr(_e51) && \"boolean\" != typeof _e51) return !1;\n          }\n        } catch (err) {\n          _iterator49.e(err);\n        } finally {\n          _iterator49.f();\n        }\n        return !0;\n      default:\n        return !0;\n    }\n  }\n  function Kr(t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"fill\";\n    if (null == t) return {\n      filter: function filter() {\n        return !0;\n      },\n      needGeometry: !1,\n      needFeature: !1\n    };\n    Jr(t) || (t = sn(t));\n    var r = t;\n    var n = !0;\n    try {\n      n = function (t) {\n        if (!tn(t)) return t;\n        var e = Ur(t);\n        return Qr(e), e = Hr(e), e;\n      }(r);\n    } catch (t) {\n      console.warn(\"Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\\nand paste the contents of this message in the report.\\nThank you!\\nFilter Expression:\\n\".concat(JSON.stringify(r, null, 2), \"\\n        \"));\n    }\n    var i = Rr[\"filter_\".concat(e)],\n      s = Ye(n, i);\n    var a = null;\n    if (\"error\" === s.result) throw new Error(s.value.map(function (t) {\n      return \"\".concat(t.key, \": \").concat(t.message);\n    }).join(\", \"));\n    a = function a(t, e, r) {\n      return s.value.evaluate(t, e, {}, r);\n    };\n    var o = null,\n      l = null;\n    if (n !== r) {\n      var _t56 = Ye(r, i);\n      if (\"error\" === _t56.result) throw new Error(_t56.value.map(function (t) {\n        return \"\".concat(t.key, \": \").concat(t.message);\n      }).join(\", \"));\n      o = function o(e, r, n, i, s) {\n        return _t56.value.evaluate(e, r, {}, n, void 0, void 0, i, s);\n      }, l = !Lt(_t56.value.expression);\n    }\n    return {\n      filter: a,\n      dynamicFilter: o || void 0,\n      needGeometry: nn(n),\n      needFeature: !!l\n    };\n  }\n  function Hr(t) {\n    if (!Array.isArray(t)) return t;\n    var e = function (t) {\n      if (en.has(t[0])) for (var _e52 = 1; _e52 < t.length; _e52++) if (tn(t[_e52])) return !0;\n      return t;\n    }(t);\n    return !0 === e ? e : e.map(function (t) {\n      return Hr(t);\n    });\n  }\n  function Qr(t) {\n    var e = !1;\n    var r = [];\n    if (\"case\" === t[0]) {\n      for (var _n39 = 1; _n39 < t.length - 1; _n39 += 2) e = e || tn(t[_n39]), r.push(t[_n39 + 1]);\n      r.push(t[t.length - 1]);\n    } else if (\"match\" === t[0]) {\n      e = e || tn(t[1]);\n      for (var _e53 = 2; _e53 < t.length - 1; _e53 += 2) r.push(t[_e53 + 1]);\n      r.push(t[t.length - 1]);\n    } else if (\"step\" === t[0]) {\n      e = e || tn(t[1]);\n      for (var _e54 = 1; _e54 < t.length - 1; _e54 += 2) r.push(t[_e54 + 1]);\n    }\n    e && (t.length = 0, t.push.apply(t, [\"any\"].concat(r)));\n    for (var _e55 = 1; _e55 < t.length; _e55++) Qr(t[_e55]);\n  }\n  function tn(t) {\n    if (!Array.isArray(t)) return !1;\n    if (\"pitch\" === (e = t[0]) || \"distance-from-center\" === e) return !0;\n    var e;\n    for (var _e56 = 1; _e56 < t.length; _e56++) if (tn(t[_e56])) return !0;\n    return !1;\n  }\n  var en = new Set([\"in\", \"==\", \"!=\", \">\", \">=\", \"<\", \"<=\", \"to-boolean\"]);\n  function rn(t, e) {\n    return t < e ? -1 : t > e ? 1 : 0;\n  }\n  function nn(t) {\n    if (!Array.isArray(t)) return !1;\n    if (\"within\" === t[0]) return !0;\n    for (var _e57 = 1; _e57 < t.length; _e57++) if (nn(t[_e57])) return !0;\n    return !1;\n  }\n  function sn(t) {\n    if (!t) return !0;\n    var e = t[0];\n    return t.length <= 1 ? \"any\" !== e : \"==\" === e ? an(t[1], t[2], \"==\") : \"!=\" === e ? un(an(t[1], t[2], \"==\")) : \"<\" === e || \">\" === e || \"<=\" === e || \">=\" === e ? an(t[1], t[2], e) : \"any\" === e ? (r = t.slice(1), [\"any\"].concat(r.map(sn))) : \"all\" === e ? [\"all\"].concat(t.slice(1).map(sn)) : \"none\" === e ? [\"all\"].concat(t.slice(1).map(sn).map(un)) : \"in\" === e ? on(t[1], t.slice(2)) : \"!in\" === e ? un(on(t[1], t.slice(2))) : \"has\" === e ? ln(t[1]) : \"!has\" === e ? un(ln(t[1])) : \"within\" !== e || t;\n    var r;\n  }\n  function an(t, e, r) {\n    switch (t) {\n      case \"$type\":\n        return [\"filter-type-\".concat(r), e];\n      case \"$id\":\n        return [\"filter-id-\".concat(r), e];\n      default:\n        return [\"filter-\".concat(r), t, e];\n    }\n  }\n  function on(t, e) {\n    if (0 === e.length) return !1;\n    switch (t) {\n      case \"$type\":\n        return [\"filter-type-in\", [\"literal\", e]];\n      case \"$id\":\n        return [\"filter-id-in\", [\"literal\", e]];\n      default:\n        return e.length > 200 && !e.some(function (t) {\n          return typeof t != typeof e[0];\n        }) ? [\"filter-in-large\", t, [\"literal\", e.sort(rn)]] : [\"filter-in-small\", t, [\"literal\", e]];\n    }\n  }\n  function ln(t) {\n    switch (t) {\n      case \"$type\":\n        return !0;\n      case \"$id\":\n        return [\"filter-has-id\"];\n      default:\n        return [\"filter-has\", t];\n    }\n  }\n  function un(t) {\n    return [\"!\", t];\n  }\n  function cn(t) {\n    return Jr(Ur(t.value)) ? Xr(j({}, t, {\n      expressionContext: \"filter\",\n      valueSpec: t.styleSpec[\"filter_\".concat(t.layerType || \"fill\")]\n    })) : hn(t);\n  }\n  function hn(t) {\n    var e = t.value,\n      r = t.key;\n    if (\"array\" !== Re(e)) return [new ValidationError(r, e, \"array expected, \".concat(Re(e), \" found\"))];\n    var n = t.styleSpec;\n    var i,\n      s = [];\n    if (e.length < 1) return [new ValidationError(r, e, \"filter array must have at least 1 element\")];\n    switch (s = s.concat(Wr({\n      key: \"\".concat(r, \"[0]\"),\n      value: e[0],\n      valueSpec: n.filter_operator,\n      style: t.style,\n      styleSpec: t.styleSpec\n    })), $r(e[0])) {\n      case \"<\":\n      case \"<=\":\n      case \">\":\n      case \">=\":\n        e.length >= 2 && \"$type\" === $r(e[1]) && s.push(new ValidationError(r, e, \"\\\"$type\\\" cannot be use with operator \\\"\".concat(e[0], \"\\\"\")));\n      case \"==\":\n      case \"!=\":\n        3 !== e.length && s.push(new ValidationError(r, e, \"filter array for operator \\\"\".concat(e[0], \"\\\" must have 3 elements\")));\n      case \"in\":\n      case \"!in\":\n        e.length >= 2 && (i = Re(e[1]), \"string\" !== i && s.push(new ValidationError(\"\".concat(r, \"[1]\"), e[1], \"string expected, \".concat(i, \" found\"))));\n        for (var _a18 = 2; _a18 < e.length; _a18++) i = Re(e[_a18]), \"$type\" === $r(e[1]) ? s = s.concat(Wr({\n          key: \"\".concat(r, \"[\").concat(_a18, \"]\"),\n          value: e[_a18],\n          valueSpec: n.geometry_type,\n          style: t.style,\n          styleSpec: t.styleSpec\n        })) : \"string\" !== i && \"number\" !== i && \"boolean\" !== i && s.push(new ValidationError(\"\".concat(r, \"[\").concat(_a18, \"]\"), e[_a18], \"string, number, or boolean expected, \".concat(i, \" found\")));\n        break;\n      case \"any\":\n      case \"all\":\n      case \"none\":\n        for (var _n40 = 1; _n40 < e.length; _n40++) s = s.concat(hn({\n          key: \"\".concat(r, \"[\").concat(_n40, \"]\"),\n          value: e[_n40],\n          style: t.style,\n          styleSpec: t.styleSpec\n        }));\n        break;\n      case \"has\":\n      case \"!has\":\n        i = Re(e[1]), 2 !== e.length ? s.push(new ValidationError(r, e, \"filter array for \\\"\".concat(e[0], \"\\\" operator must have 2 elements\"))) : \"string\" !== i && s.push(new ValidationError(\"\".concat(r, \"[1]\"), e[1], \"string expected, \".concat(i, \" found\")));\n        break;\n      case \"within\":\n        i = Re(e[1]), 2 !== e.length ? s.push(new ValidationError(r, e, \"filter array for \\\"\".concat(e[0], \"\\\" operator must have 2 elements\"))) : \"object\" !== i && s.push(new ValidationError(\"\".concat(r, \"[1]\"), e[1], \"object expected, \".concat(i, \" found\")));\n    }\n    return s;\n  }\n  function pn(t, e) {\n    var r = t.key,\n      n = t.style,\n      i = t.styleSpec,\n      s = t.value,\n      a = t.objectKey,\n      o = i[\"\".concat(e, \"_\").concat(t.layerType)];\n    if (!o) return [];\n    var l = a.match(/^(.*)-transition$/);\n    if (\"paint\" === e && l && o[l[1]] && o[l[1]].transition) return vn({\n      key: r,\n      value: s,\n      valueSpec: i.transition,\n      style: n,\n      styleSpec: i\n    });\n    var u = t.valueSpec || o[a];\n    if (!u) return [new ValidationError(r, s, \"unknown property \\\"\".concat(a, \"\\\"\"))];\n    var c;\n    if (\"string\" === Re(s) && Le(u) && !u.tokens && (c = /^{([^}]+)}$/.exec(s))) {\n      var _t57 = \"`{ \\\"type\\\": \\\"identity\\\", \\\"property\\\": \".concat(c ? JSON.stringify(c[1]) : '\"_\"', \" }`\");\n      return [new ValidationError(r, s, \"\\\"\".concat(a, \"\\\" does not support interpolation syntax\\nUse an identity property function instead: \").concat(_t57, \".\"))];\n    }\n    var h = [];\n    return \"symbol\" === t.layerType && (\"text-field\" === a && n && !n.glyphs && h.push(new ValidationError(r, s, 'use of \"text-field\" requires a style \"glyphs\" property')), \"text-font\" === a && je(Ur(s)) && \"identity\" === $r(s.type) && h.push(new ValidationError(r, s, '\"text-font\" does not support identity functions'))), h.concat(vn({\n      key: t.key,\n      value: s,\n      valueSpec: u,\n      style: n,\n      styleSpec: i,\n      expressionContext: \"property\",\n      propertyType: e,\n      propertyKey: a\n    }));\n  }\n  function dn(t) {\n    return pn(t, \"paint\");\n  }\n  function fn(t) {\n    return pn(t, \"layout\");\n  }\n  function yn(t) {\n    var e = t.value,\n      r = t.key,\n      n = Re(e);\n    return \"string\" !== n ? [new ValidationError(r, e, \"string expected, \".concat(n, \" found\"))] : [];\n  }\n  var mn = {\n    promoteId: function promoteId(_ref112) {\n      var t = _ref112.key,\n        e = _ref112.value;\n      if (\"string\" === Re(e)) return yn({\n        key: t,\n        value: e\n      });\n      {\n        var _r59 = [];\n        for (var _n41 in e) _r59.push.apply(_r59, _toConsumableArray(yn({\n          key: \"\".concat(t, \".\").concat(_n41),\n          value: e[_n41]\n        })));\n        return _r59;\n      }\n    }\n  };\n  function gn(t) {\n    return t.source.reduce(function (e, r) {\n      var n = t[r];\n      return \"enum\" === n.type.type && (e = e.concat(Object.keys(n.type.values))), e;\n    }, []);\n  }\n  var xn = {\n    \"*\": function _() {\n      return [];\n    },\n    array: Nr,\n    boolean: function boolean(t) {\n      var e = t.value,\n        r = t.key,\n        n = Re(e);\n      return \"boolean\" !== n ? [new ValidationError(r, e, \"boolean expected, \".concat(n, \" found\"))] : [];\n    },\n    number: Gr,\n    color: function color(t) {\n      var e = t.key,\n        r = t.value,\n        n = Re(r);\n      return \"string\" !== n ? [new ValidationError(e, r, \"color expected, \".concat(n, \" found\"))] : null === D(r) ? [new ValidationError(e, r, \"color expected, \\\"\".concat(r, \"\\\" found\"))] : [];\n    },\n    enum: Wr,\n    filter: cn,\n    function: Zr,\n    layer: function layer(t) {\n      var e = [];\n      var r = t.value,\n        n = t.key,\n        i = t.style,\n        s = t.styleSpec;\n      r.type || r.ref || e.push(new ValidationError(n, r, 'either \"type\" or \"ref\" is required'));\n      var a = $r(r.type);\n      var o = $r(r.ref);\n      if (r.id) {\n        var _s20 = $r(r.id);\n        for (var _a19 = 0; _a19 < t.arrayIndex; _a19++) {\n          var _t58 = i.layers[_a19];\n          $r(_t58.id) === _s20 && e.push(new ValidationError(n, r.id, \"duplicate layer id \\\"\".concat(r.id, \"\\\", previously used at line \").concat(_t58.id.__line__)));\n        }\n      }\n      if (\"ref\" in r) {\n        var _t59;\n        [\"type\", \"source\", \"source-layer\", \"filter\", \"layout\"].forEach(function (t) {\n          t in r && e.push(new ValidationError(n, r[t], \"\\\"\".concat(t, \"\\\" is prohibited for ref layers\")));\n        }), i.layers.forEach(function (e) {\n          $r(e.id) === o && (_t59 = e);\n        }), _t59 ? _t59.ref ? e.push(new ValidationError(n, r.ref, \"ref cannot reference another ref layer\")) : a = $r(_t59.type) : \"string\" == typeof o && e.push(new ValidationError(n, r.ref, \"ref layer \\\"\".concat(o, \"\\\" not found\")));\n      } else if (\"background\" !== a && \"sky\" !== a) if (r.source) {\n        var _t60 = i.sources && i.sources[r.source],\n          _s21 = _t60 && $r(_t60.type);\n        _t60 ? \"vector\" === _s21 && \"raster\" === a ? e.push(new ValidationError(n, r.source, \"layer \\\"\".concat(r.id, \"\\\" requires a raster source\"))) : \"raster\" === _s21 && \"raster\" !== a ? e.push(new ValidationError(n, r.source, \"layer \\\"\".concat(r.id, \"\\\" requires a vector source\"))) : \"vector\" !== _s21 || r[\"source-layer\"] ? \"raster-dem\" === _s21 && \"hillshade\" !== a ? e.push(new ValidationError(n, r.source, \"raster-dem source can only be used with layer type 'hillshade'.\")) : \"line\" !== a || !r.paint || !r.paint[\"line-gradient\"] && !r.paint[\"line-trim-offset\"] || \"geojson\" === _s21 && _t60.lineMetrics || e.push(new ValidationError(n, r, \"layer \\\"\".concat(r.id, \"\\\" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.\"))) : e.push(new ValidationError(n, r, \"layer \\\"\".concat(r.id, \"\\\" must specify a \\\"source-layer\\\"\"))) : e.push(new ValidationError(n, r.source, \"source \\\"\".concat(r.source, \"\\\" not found\")));\n      } else e.push(new ValidationError(n, r, 'missing required property \"source\"'));\n      return e = e.concat(qr({\n        key: n,\n        value: r,\n        valueSpec: s.layer,\n        style: t.style,\n        styleSpec: t.styleSpec,\n        objectElementValidators: {\n          \"*\": function _() {\n            return [];\n          },\n          type: function type() {\n            return vn({\n              key: \"\".concat(n, \".type\"),\n              value: r.type,\n              valueSpec: s.layer.type,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              object: r,\n              objectKey: \"type\"\n            });\n          },\n          filter: function filter(t) {\n            return cn(j({\n              layerType: a\n            }, t));\n          },\n          layout: function layout(t) {\n            return qr({\n              layer: r,\n              key: t.key,\n              value: t.value,\n              valueSpec: {},\n              style: t.style,\n              styleSpec: t.styleSpec,\n              objectElementValidators: {\n                \"*\": function _(t) {\n                  return fn(j({\n                    layerType: a\n                  }, t));\n                }\n              }\n            });\n          },\n          paint: function paint(t) {\n            return qr({\n              layer: r,\n              key: t.key,\n              value: t.value,\n              valueSpec: {},\n              style: t.style,\n              styleSpec: t.styleSpec,\n              objectElementValidators: {\n                \"*\": function _(t) {\n                  return dn(j({\n                    layerType: a\n                  }, t));\n                }\n              }\n            });\n          }\n        }\n      })), e;\n    },\n    object: qr,\n    source: function source(t) {\n      var e = t.value,\n        r = t.key,\n        n = t.styleSpec,\n        i = t.style;\n      if (!e.type) return [new ValidationError(r, e, '\"type\" is required')];\n      var s = $r(e.type);\n      var a;\n      switch (s) {\n        case \"vector\":\n        case \"raster\":\n        case \"raster-dem\":\n          return a = qr({\n            key: r,\n            value: e,\n            valueSpec: n[\"source_\".concat(s.replace(\"-\", \"_\"))],\n            style: t.style,\n            styleSpec: n,\n            objectElementValidators: mn\n          }), a;\n        case \"geojson\":\n          if (a = qr({\n            key: r,\n            value: e,\n            valueSpec: n.source_geojson,\n            style: i,\n            styleSpec: n,\n            objectElementValidators: mn\n          }), e.cluster) for (var _t61 in e.clusterProperties) {\n            var _a20, _a21;\n            var _e$clusterProperties$ = _slicedToArray(e.clusterProperties[_t61], 2),\n              _n42 = _e$clusterProperties$[0],\n              _i34 = _e$clusterProperties$[1],\n              _s22 = \"string\" == typeof _n42 ? [_n42, [\"accumulated\"], [\"get\", _t61]] : _n42;\n            (_a20 = a).push.apply(_a20, _toConsumableArray(Xr({\n              key: \"\".concat(r, \".\").concat(_t61, \".map\"),\n              value: _i34,\n              expressionContext: \"cluster-map\"\n            }))), (_a21 = a).push.apply(_a21, _toConsumableArray(Xr({\n              key: \"\".concat(r, \".\").concat(_t61, \".reduce\"),\n              value: _s22,\n              expressionContext: \"cluster-reduce\"\n            })));\n          }\n          return a;\n        case \"video\":\n          return qr({\n            key: r,\n            value: e,\n            valueSpec: n.source_video,\n            style: i,\n            styleSpec: n\n          });\n        case \"image\":\n          return qr({\n            key: r,\n            value: e,\n            valueSpec: n.source_image,\n            style: i,\n            styleSpec: n\n          });\n        case \"canvas\":\n          return [new ValidationError(r, null, \"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.\", \"source.canvas\")];\n        default:\n          return Wr({\n            key: \"\".concat(r, \".type\"),\n            value: e.type,\n            valueSpec: {\n              values: gn(n)\n            },\n            style: i,\n            styleSpec: n\n          });\n      }\n    },\n    light: function light(t) {\n      var e = t.value,\n        r = t.styleSpec,\n        n = r.light,\n        i = t.style;\n      var s = [];\n      var a = Re(e);\n      if (void 0 === e) return s;\n      if (\"object\" !== a) return s = s.concat([new ValidationError(\"light\", e, \"object expected, \".concat(a, \" found\"))]), s;\n      for (var _t62 in e) {\n        var _a22 = _t62.match(/^(.*)-transition$/);\n        s = s.concat(_a22 && n[_a22[1]] && n[_a22[1]].transition ? vn({\n          key: _t62,\n          value: e[_t62],\n          valueSpec: r.transition,\n          style: i,\n          styleSpec: r\n        }) : n[_t62] ? vn({\n          key: _t62,\n          value: e[_t62],\n          valueSpec: n[_t62],\n          style: i,\n          styleSpec: r\n        }) : [new ValidationError(_t62, e[_t62], \"unknown property \\\"\".concat(_t62, \"\\\"\"))]);\n      }\n      return s;\n    },\n    terrain: function terrain(t) {\n      var e = t.value,\n        r = t.key,\n        n = t.style,\n        i = t.styleSpec,\n        s = i.terrain;\n      var a = [];\n      var o = Re(e);\n      if (void 0 === e) return a;\n      if (\"object\" !== o) return a = a.concat([new ValidationError(\"terrain\", e, \"object expected, \".concat(o, \" found\"))]), a;\n      for (var _t63 in e) {\n        var _r60 = _t63.match(/^(.*)-transition$/);\n        a = a.concat(_r60 && s[_r60[1]] && s[_r60[1]].transition ? vn({\n          key: _t63,\n          value: e[_t63],\n          valueSpec: i.transition,\n          style: n,\n          styleSpec: i\n        }) : s[_t63] ? vn({\n          key: _t63,\n          value: e[_t63],\n          valueSpec: s[_t63],\n          style: n,\n          styleSpec: i\n        }) : [new ValidationError(_t63, e[_t63], \"unknown property \\\"\".concat(_t63, \"\\\"\"))]);\n      }\n      if (e.source) {\n        var _t64 = n.sources && n.sources[e.source],\n          _i35 = _t64 && $r(_t64.type);\n        _t64 ? \"raster-dem\" !== _i35 && a.push(new ValidationError(r, e.source, \"terrain cannot be used with a source of type \".concat(String(_i35), \", it only be used with a \\\"raster-dem\\\" source type\"))) : a.push(new ValidationError(r, e.source, \"source \\\"\".concat(e.source, \"\\\" not found\")));\n      } else a.push(new ValidationError(r, e, 'terrain is missing required property \"source\"'));\n      return a;\n    },\n    fog: function fog(t) {\n      var e = t.value,\n        r = t.style,\n        n = t.styleSpec,\n        i = n.fog;\n      var s = [];\n      var a = Re(e);\n      if (void 0 === e) return s;\n      if (\"object\" !== a) return s = s.concat([new ValidationError(\"fog\", e, \"object expected, \".concat(a, \" found\"))]), s;\n      for (var _t65 in e) {\n        var _a23 = _t65.match(/^(.*)-transition$/);\n        s = s.concat(_a23 && i[_a23[1]] && i[_a23[1]].transition ? vn({\n          key: _t65,\n          value: e[_t65],\n          valueSpec: n.transition,\n          style: r,\n          styleSpec: n\n        }) : i[_t65] ? vn({\n          key: _t65,\n          value: e[_t65],\n          valueSpec: i[_t65],\n          style: r,\n          styleSpec: n\n        }) : [new ValidationError(_t65, e[_t65], \"unknown property \\\"\".concat(_t65, \"\\\"\"))]);\n      }\n      return s;\n    },\n    string: yn,\n    formatted: function formatted(t) {\n      return 0 === yn(t).length ? [] : Xr(t);\n    },\n    resolvedImage: function resolvedImage(t) {\n      return 0 === yn(t).length ? [] : Xr(t);\n    },\n    projection: function projection(t) {\n      var e = t.value,\n        r = t.styleSpec,\n        n = r.projection,\n        i = t.style;\n      var s = [];\n      var a = Re(e);\n      if (\"object\" === a) for (var _t66 in e) s = s.concat(vn({\n        key: _t66,\n        value: e[_t66],\n        valueSpec: n[_t66],\n        style: i,\n        styleSpec: r\n      }));else \"string\" !== a && (s = s.concat([new ValidationError(\"projection\", e, \"object or string expected, \".concat(a, \" found\"))]));\n      return s;\n    }\n  };\n  function vn(t) {\n    var e = t.value,\n      r = t.valueSpec,\n      n = t.styleSpec;\n    return r.expression && je($r(e)) ? Zr(t) : r.expression && Xe(Ur(e)) ? Xr(t) : r.type && xn[r.type] ? xn[r.type](t) : qr(j({}, t, {\n      valueSpec: r.type ? n[r.type] : r\n    }));\n  }\n  function bn(t) {\n    var e = t.value,\n      r = t.key,\n      n = yn(t);\n    return n.length || (-1 === e.indexOf(\"{fontstack}\") && n.push(new ValidationError(r, e, '\"glyphs\" url must include a \"{fontstack}\" token')), -1 === e.indexOf(\"{range}\") && n.push(new ValidationError(r, e, '\"glyphs\" url must include a \"{range}\" token'))), n;\n  }\n  function wn(t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Rr;\n    return An(vn({\n      key: \"\",\n      value: t,\n      valueSpec: e.$root,\n      styleSpec: e,\n      style: t,\n      objectElementValidators: {\n        glyphs: bn,\n        \"*\": function _() {\n          return [];\n        }\n      }\n    }));\n  }\n  var _n = function _n(t) {\n      return An(dn(t));\n    },\n    Sn = function Sn(t) {\n      return An(fn(t));\n    };\n  function An(t) {\n    return t.slice().sort(function (t, e) {\n      return t.line && e.line ? t.line - e.line : 0;\n    });\n  }\n  var kn = function kn(t) {\n      return t >= 1536 && t <= 1791;\n    },\n    Mn = function Mn(t) {\n      return t >= 1872 && t <= 1919;\n    },\n    Pn = function Pn(t) {\n      return t >= 2208 && t <= 2303;\n    },\n    Tn = function Tn(t) {\n      return t >= 11904 && t <= 12031;\n    },\n    Cn = function Cn(t) {\n      return t >= 12032 && t <= 12255;\n    },\n    En = function En(t) {\n      return t >= 12272 && t <= 12287;\n    },\n    Dn = function Dn(t) {\n      return t >= 12288 && t <= 12351;\n    },\n    zn = function zn(t) {\n      return t >= 12352 && t <= 12447;\n    },\n    Bn = function Bn(t) {\n      return t >= 12448 && t <= 12543;\n    },\n    Ln = function Ln(t) {\n      return t >= 12544 && t <= 12591;\n    },\n    Vn = function Vn(t) {\n      return t >= 12704 && t <= 12735;\n    },\n    Fn = function Fn(t) {\n      return t >= 12736 && t <= 12783;\n    },\n    Rn = function Rn(t) {\n      return t >= 12784 && t <= 12799;\n    },\n    jn = function jn(t) {\n      return t >= 12800 && t <= 13055;\n    },\n    On = function On(t) {\n      return t >= 13056 && t <= 13311;\n    },\n    $n = function $n(t) {\n      return t >= 13312 && t <= 19903;\n    },\n    Un = function Un(t) {\n      return t >= 19968 && t <= 40959;\n    },\n    qn = function qn(t) {\n      return t >= 40960 && t <= 42127;\n    },\n    Nn = function Nn(t) {\n      return t >= 42128 && t <= 42191;\n    },\n    Gn = function Gn(t) {\n      return t >= 63744 && t <= 64255;\n    },\n    Zn = function Zn(t) {\n      return t >= 64336 && t <= 65023;\n    },\n    Xn = function Xn(t) {\n      return t >= 65040 && t <= 65055;\n    },\n    Yn = function Yn(t) {\n      return t >= 65072 && t <= 65103;\n    },\n    Wn = function Wn(t) {\n      return t >= 65104 && t <= 65135;\n    },\n    Jn = function Jn(t) {\n      return t >= 65136 && t <= 65279;\n    },\n    Kn = function Kn(t) {\n      return t >= 65280 && t <= 65519;\n    };\n  function Hn(t) {\n    var _iterator50 = _createForOfIteratorHelper(t),\n      _step50;\n    try {\n      for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {\n        var _e58 = _step50.value;\n        if (ei(_e58.charCodeAt(0))) return !0;\n      }\n    } catch (err) {\n      _iterator50.e(err);\n    } finally {\n      _iterator50.f();\n    }\n    return !1;\n  }\n  function Qn(t) {\n    var _iterator51 = _createForOfIteratorHelper(t),\n      _step51;\n    try {\n      for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {\n        var _e59 = _step51.value;\n        if (!ti(_e59.charCodeAt(0))) return !1;\n      }\n    } catch (err) {\n      _iterator51.e(err);\n    } finally {\n      _iterator51.f();\n    }\n    return !0;\n  }\n  function ti(t) {\n    return !(kn(t) || Mn(t) || Pn(t) || Zn(t) || Jn(t));\n  }\n  function ei(t) {\n    return !(746 !== t && 747 !== t && (t < 4352 || !(Vn(t) || Ln(t) || Yn(t) && !(t >= 65097 && t <= 65103) || Gn(t) || On(t) || Tn(t) || Fn(t) || !(!Dn(t) || t >= 12296 && t <= 12305 || t >= 12308 && t <= 12319 || 12336 === t) || $n(t) || Un(t) || jn(t) || function (t) {\n      return t >= 12592 && t <= 12687;\n    }(t) || function (t) {\n      return t >= 43360 && t <= 43391;\n    }(t) || function (t) {\n      return t >= 55216 && t <= 55295;\n    }(t) || function (t) {\n      return t >= 4352 && t <= 4607;\n    }(t) || function (t) {\n      return t >= 44032 && t <= 55215;\n    }(t) || zn(t) || En(t) || function (t) {\n      return t >= 12688 && t <= 12703;\n    }(t) || Cn(t) || Rn(t) || Bn(t) && 12540 !== t || !(!Kn(t) || 65288 === t || 65289 === t || 65293 === t || t >= 65306 && t <= 65310 || 65339 === t || 65341 === t || 65343 === t || t >= 65371 && t <= 65503 || 65507 === t || t >= 65512 && t <= 65519) || !(!Wn(t) || t >= 65112 && t <= 65118 || t >= 65123 && t <= 65126) || function (t) {\n      return t >= 5120 && t <= 5759;\n    }(t) || function (t) {\n      return t >= 6320 && t <= 6399;\n    }(t) || Xn(t) || function (t) {\n      return t >= 19904 && t <= 19967;\n    }(t) || qn(t) || Nn(t))));\n  }\n  function ri(t) {\n    return !(ei(t) || function (t) {\n      return !!(function (t) {\n        return t >= 128 && t <= 255;\n      }(t) && (167 === t || 169 === t || 174 === t || 177 === t || 188 === t || 189 === t || 190 === t || 215 === t || 247 === t) || function (t) {\n        return t >= 8192 && t <= 8303;\n      }(t) && (8214 === t || 8224 === t || 8225 === t || 8240 === t || 8241 === t || 8251 === t || 8252 === t || 8258 === t || 8263 === t || 8264 === t || 8265 === t || 8273 === t) || function (t) {\n        return t >= 8448 && t <= 8527;\n      }(t) || function (t) {\n        return t >= 8528 && t <= 8591;\n      }(t) || function (t) {\n        return t >= 8960 && t <= 9215;\n      }(t) && (t >= 8960 && t <= 8967 || t >= 8972 && t <= 8991 || t >= 8996 && t <= 9e3 || 9003 === t || t >= 9085 && t <= 9114 || t >= 9150 && t <= 9165 || 9167 === t || t >= 9169 && t <= 9179 || t >= 9186 && t <= 9215) || function (t) {\n        return t >= 9216 && t <= 9279;\n      }(t) && 9251 !== t || function (t) {\n        return t >= 9280 && t <= 9311;\n      }(t) || function (t) {\n        return t >= 9312 && t <= 9471;\n      }(t) || function (t) {\n        return t >= 9632 && t <= 9727;\n      }(t) || function (t) {\n        return t >= 9728 && t <= 9983;\n      }(t) && !(t >= 9754 && t <= 9759) || function (t) {\n        return t >= 11008 && t <= 11263;\n      }(t) && (t >= 11026 && t <= 11055 || t >= 11088 && t <= 11097 || t >= 11192 && t <= 11243) || Dn(t) || Bn(t) || function (t) {\n        return t >= 57344 && t <= 63743;\n      }(t) || Yn(t) || Wn(t) || Kn(t) || 8734 === t || 8756 === t || 8757 === t || t >= 9984 && t <= 10087 || t >= 10102 && t <= 10131 || 65532 === t || 65533 === t);\n    }(t));\n  }\n  function ni(t) {\n    return t >= 1424 && t <= 2303 || Zn(t) || Jn(t);\n  }\n  function ii(t, e) {\n    return !(!e && ni(t) || t >= 2304 && t <= 3583 || t >= 3840 && t <= 4255 || function (t) {\n      return t >= 6016 && t <= 6143;\n    }(t));\n  }\n  function si(t) {\n    var _iterator52 = _createForOfIteratorHelper(t),\n      _step52;\n    try {\n      for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {\n        var _e60 = _step52.value;\n        if (ni(_e60.charCodeAt(0))) return !0;\n      }\n    } catch (err) {\n      _iterator52.e(err);\n    } finally {\n      _iterator52.f();\n    }\n    return !1;\n  }\n  var ai, oi, li, ui;\n  var ci = {\n      now: function now() {\n        return void 0 !== li ? li : i.performance.now();\n      },\n      setNow: function setNow(t) {\n        li = t;\n      },\n      restoreNow: function restoreNow() {\n        li = void 0;\n      },\n      frame: function frame(t) {\n        var e = i.requestAnimationFrame(t);\n        return {\n          cancel: function cancel() {\n            return i.cancelAnimationFrame(e);\n          }\n        };\n      },\n      getImageData: function getImageData(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var r = t.width,\n          n = t.height;\n        ui || (ui = i.document.createElement(\"canvas\"));\n        var s = ui.getContext(\"2d\", {\n          willReadFrequently: !0\n        });\n        if (!s) throw new Error(\"failed to create canvas 2d context\");\n        return (r > ui.width || n > ui.height) && (ui.width = r, ui.height = n), s.clearRect(-e, -e, r + 2 * e, n + 2 * e), s.drawImage(t, 0, 0, r, n), s.getImageData(-e, -e, r + 2 * e, n + 2 * e);\n      },\n      resolveURL: function resolveURL(t) {\n        return ai || (ai = i.document.createElement(\"a\")), ai.href = t, ai.href;\n      },\n      get devicePixelRatio() {\n        return i.devicePixelRatio;\n      },\n      get prefersReducedMotion() {\n        return !!i.matchMedia && (null == oi && (oi = i.matchMedia(\"(prefers-reduced-motion: reduce)\")), oi.matches);\n      }\n    },\n    hi = \"loading\",\n    pi = \"loaded\";\n  var di = \"unavailable\",\n    fi = null;\n  function yi() {\n    mi.fire(new Event(\"pluginStateChange\", {\n      pluginStatus: di,\n      pluginURL: fi\n    }));\n  }\n  var mi = new Evented(),\n    gi = function gi() {\n      return di;\n    },\n    xi = function xi() {\n      if (\"deferred\" !== di || !fi) throw new Error(\"rtl-text-plugin cannot be downloaded unless a pluginURL is specified\");\n      di = hi, yi(), fi && Mr({\n        url: fi\n      }, function (t) {\n        t ? function (t) {\n          t && \"string\" == typeof t && t.indexOf(\"NetworkError\") > -1 && (di = \"error\");\n        }(t) : (di = pi, yi());\n      });\n    },\n    vi = {\n      applyArabicShaping: null,\n      processBidirectionalText: null,\n      processStyledBidirectionalText: null,\n      isLoaded: function isLoaded() {\n        return di === pi || null != vi.applyArabicShaping;\n      },\n      isLoading: function isLoading() {\n        return di === hi;\n      },\n      setState: function setState(t) {\n        di = t.pluginStatus, fi = t.pluginURL;\n      },\n      isParsed: function isParsed() {\n        return null != vi.applyArabicShaping && null != vi.processBidirectionalText && null != vi.processStyledBidirectionalText;\n      },\n      getPluginURL: function getPluginURL() {\n        return fi;\n      }\n    };\n  var EvaluationParameters = /*#__PURE__*/function () {\n    function EvaluationParameters(t, e) {\n      _classCallCheck(this, EvaluationParameters);\n      this.zoom = t, e ? (this.now = e.now, this.fadeDuration = e.fadeDuration, this.transition = e.transition, this.pitch = e.pitch) : (this.now = 0, this.fadeDuration = 0, this.transition = {}, this.pitch = 0);\n    }\n    _createClass(EvaluationParameters, [{\n      key: \"isSupportedScript\",\n      value: function isSupportedScript(t) {\n        return function (t, e) {\n          var _iterator53 = _createForOfIteratorHelper(t),\n            _step53;\n          try {\n            for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {\n              var _r61 = _step53.value;\n              if (!ii(_r61.charCodeAt(0), e)) return !1;\n            }\n          } catch (err) {\n            _iterator53.e(err);\n          } finally {\n            _iterator53.f();\n          }\n          return !0;\n        }(t, vi.isLoaded());\n      }\n    }]);\n    return EvaluationParameters;\n  }();\n  var PropertyValue = /*#__PURE__*/function () {\n    function PropertyValue(t, e) {\n      _classCallCheck(this, PropertyValue);\n      this.property = t, this.value = e, this.expression = function (t, e) {\n        if (je(t)) return new StylePropertyFunction(t, e);\n        if (Xe(t)) {\n          var _r62 = We(t, e);\n          if (\"error\" === _r62.result) throw new Error(_r62.value.map(function (t) {\n            return \"\".concat(t.key, \": \").concat(t.message);\n          }).join(\", \"));\n          return _r62.value;\n        }\n        {\n          var _r63 = t;\n          return \"string\" == typeof t && \"color\" === e.type && (_r63 = R.parse(t)), {\n            kind: \"constant\",\n            evaluate: function evaluate() {\n              return _r63;\n            }\n          };\n        }\n      }(void 0 === e ? t.specification.default : e, t.specification);\n    }\n    _createClass(PropertyValue, [{\n      key: \"isDataDriven\",\n      value: function isDataDriven() {\n        return \"source\" === this.expression.kind || \"composite\" === this.expression.kind;\n      }\n    }, {\n      key: \"possiblyEvaluate\",\n      value: function possiblyEvaluate(t, e, r) {\n        return this.property.possiblyEvaluate(this, t, e, r);\n      }\n    }]);\n    return PropertyValue;\n  }();\n  var TransitionablePropertyValue = /*#__PURE__*/function () {\n    function TransitionablePropertyValue(t) {\n      _classCallCheck(this, TransitionablePropertyValue);\n      this.property = t, this.value = new PropertyValue(t, void 0);\n    }\n    _createClass(TransitionablePropertyValue, [{\n      key: \"transitioned\",\n      value: function transitioned(t, e) {\n        return new TransitioningPropertyValue(this.property, this.value, e, p({}, t.transition, this.transition), t.now);\n      }\n    }, {\n      key: \"untransitioned\",\n      value: function untransitioned() {\n        return new TransitioningPropertyValue(this.property, this.value, null, {}, 0);\n      }\n    }]);\n    return TransitionablePropertyValue;\n  }();\n  var Transitionable = /*#__PURE__*/function () {\n    function Transitionable(t) {\n      _classCallCheck(this, Transitionable);\n      this._properties = t, this._values = Object.create(t.defaultTransitionablePropertyValues);\n    }\n    _createClass(Transitionable, [{\n      key: \"getValue\",\n      value: function getValue(t) {\n        return v(this._values[t].value.value);\n      }\n    }, {\n      key: \"setValue\",\n      value: function setValue(t, e) {\n        this._values.hasOwnProperty(t) || (this._values[t] = new TransitionablePropertyValue(this._values[t].property)), this._values[t].value = new PropertyValue(this._values[t].property, null === e ? void 0 : v(e));\n      }\n    }, {\n      key: \"getTransition\",\n      value: function getTransition(t) {\n        return v(this._values[t].transition);\n      }\n    }, {\n      key: \"setTransition\",\n      value: function setTransition(t, e) {\n        this._values.hasOwnProperty(t) || (this._values[t] = new TransitionablePropertyValue(this._values[t].property)), this._values[t].transition = v(e) || void 0;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = {};\n        for (var _i36 = 0, _Object$keys3 = Object.keys(this._values); _i36 < _Object$keys3.length; _i36++) {\n          var _e61 = _Object$keys3[_i36];\n          var _r64 = this.getValue(_e61);\n          void 0 !== _r64 && (t[_e61] = _r64);\n          var _n43 = this.getTransition(_e61);\n          void 0 !== _n43 && (t[\"\".concat(_e61, \"-transition\")] = _n43);\n        }\n        return t;\n      }\n    }, {\n      key: \"transitioned\",\n      value: function transitioned(t, e) {\n        var r = new Transitioning(this._properties);\n        for (var _i37 = 0, _Object$keys4 = Object.keys(this._values); _i37 < _Object$keys4.length; _i37++) {\n          var _n44 = _Object$keys4[_i37];\n          r._values[_n44] = this._values[_n44].transitioned(t, e._values[_n44]);\n        }\n        return r;\n      }\n    }, {\n      key: \"untransitioned\",\n      value: function untransitioned() {\n        var t = new Transitioning(this._properties);\n        for (var _i38 = 0, _Object$keys5 = Object.keys(this._values); _i38 < _Object$keys5.length; _i38++) {\n          var _e62 = _Object$keys5[_i38];\n          t._values[_e62] = this._values[_e62].untransitioned();\n        }\n        return t;\n      }\n    }]);\n    return Transitionable;\n  }();\n  var TransitioningPropertyValue = /*#__PURE__*/function () {\n    function TransitioningPropertyValue(t, e, r, n, i) {\n      _classCallCheck(this, TransitioningPropertyValue);\n      var s = n.delay || 0,\n        a = n.duration || 0;\n      i = i || 0, this.property = t, this.value = e, this.begin = i + s, this.end = this.begin + a, t.specification.transition && (n.delay || n.duration) && (this.prior = r);\n    }\n    _createClass(TransitioningPropertyValue, [{\n      key: \"possiblyEvaluate\",\n      value: function possiblyEvaluate(t, e, r) {\n        var n = t.now || 0,\n          i = this.value.possiblyEvaluate(t, e, r),\n          s = this.prior;\n        if (s) {\n          if (n > this.end) return this.prior = null, i;\n          if (this.value.isDataDriven()) return this.prior = null, i;\n          if (n < this.begin) return s.possiblyEvaluate(t, e, r);\n          {\n            var _a24 = (n - this.begin) / (this.end - this.begin);\n            return this.property.interpolate(s.possiblyEvaluate(t, e, r), i, function (t) {\n              if (t <= 0) return 0;\n              if (t >= 1) return 1;\n              var e = t * t,\n                r = e * t;\n              return 4 * (t < .5 ? r : 3 * (t - e) + r - .75);\n            }(_a24));\n          }\n        }\n        return i;\n      }\n    }]);\n    return TransitioningPropertyValue;\n  }();\n  var Transitioning = /*#__PURE__*/function () {\n    function Transitioning(t) {\n      _classCallCheck(this, Transitioning);\n      this._properties = t, this._values = Object.create(t.defaultTransitioningPropertyValues);\n    }\n    _createClass(Transitioning, [{\n      key: \"possiblyEvaluate\",\n      value: function possiblyEvaluate(t, e, r) {\n        var n = new PossiblyEvaluated(this._properties);\n        for (var _i39 = 0, _Object$keys6 = Object.keys(this._values); _i39 < _Object$keys6.length; _i39++) {\n          var _i40 = _Object$keys6[_i39];\n          n._values[_i40] = this._values[_i40].possiblyEvaluate(t, e, r);\n        }\n        return n;\n      }\n    }, {\n      key: \"hasTransition\",\n      value: function hasTransition() {\n        for (var _i41 = 0, _Object$keys7 = Object.keys(this._values); _i41 < _Object$keys7.length; _i41++) {\n          var _t67 = _Object$keys7[_i41];\n          if (this._values[_t67].prior) return !0;\n        }\n        return !1;\n      }\n    }]);\n    return Transitioning;\n  }();\n  var Layout = /*#__PURE__*/function () {\n    function Layout(t) {\n      _classCallCheck(this, Layout);\n      this._properties = t, this._values = Object.create(t.defaultPropertyValues);\n    }\n    _createClass(Layout, [{\n      key: \"getValue\",\n      value: function getValue(t) {\n        return v(this._values[t].value);\n      }\n    }, {\n      key: \"setValue\",\n      value: function setValue(t, e) {\n        this._values[t] = new PropertyValue(this._values[t].property, null === e ? void 0 : v(e));\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = {};\n        for (var _i42 = 0, _Object$keys8 = Object.keys(this._values); _i42 < _Object$keys8.length; _i42++) {\n          var _e63 = _Object$keys8[_i42];\n          var _r65 = this.getValue(_e63);\n          void 0 !== _r65 && (t[_e63] = _r65);\n        }\n        return t;\n      }\n    }, {\n      key: \"possiblyEvaluate\",\n      value: function possiblyEvaluate(t, e, r) {\n        var n = new PossiblyEvaluated(this._properties);\n        for (var _i43 = 0, _Object$keys9 = Object.keys(this._values); _i43 < _Object$keys9.length; _i43++) {\n          var _i44 = _Object$keys9[_i43];\n          n._values[_i44] = this._values[_i44].possiblyEvaluate(t, e, r);\n        }\n        return n;\n      }\n    }]);\n    return Layout;\n  }();\n  var PossiblyEvaluatedPropertyValue = /*#__PURE__*/function () {\n    function PossiblyEvaluatedPropertyValue(t, e, r) {\n      _classCallCheck(this, PossiblyEvaluatedPropertyValue);\n      this.property = t, this.value = e, this.parameters = r;\n    }\n    _createClass(PossiblyEvaluatedPropertyValue, [{\n      key: \"isConstant\",\n      value: function isConstant() {\n        return \"constant\" === this.value.kind;\n      }\n    }, {\n      key: \"constantOr\",\n      value: function constantOr(t) {\n        return \"constant\" === this.value.kind ? this.value.value : t;\n      }\n    }, {\n      key: \"evaluate\",\n      value: function evaluate(t, e, r, n) {\n        return this.property.evaluate(this.value, this.parameters, t, e, r, n);\n      }\n    }]);\n    return PossiblyEvaluatedPropertyValue;\n  }();\n  var PossiblyEvaluated = /*#__PURE__*/function () {\n    function PossiblyEvaluated(t) {\n      _classCallCheck(this, PossiblyEvaluated);\n      this._properties = t, this._values = Object.create(t.defaultPossiblyEvaluatedValues);\n    }\n    _createClass(PossiblyEvaluated, [{\n      key: \"get\",\n      value: function get(t) {\n        return this._values[t];\n      }\n    }]);\n    return PossiblyEvaluated;\n  }();\n  var DataConstantProperty = /*#__PURE__*/function () {\n    function DataConstantProperty(t) {\n      _classCallCheck(this, DataConstantProperty);\n      this.specification = t;\n    }\n    _createClass(DataConstantProperty, [{\n      key: \"possiblyEvaluate\",\n      value: function possiblyEvaluate(t, e) {\n        return t.expression.evaluate(e);\n      }\n    }, {\n      key: \"interpolate\",\n      value: function interpolate(t, e, r) {\n        var n = Nt[this.specification.type];\n        return n ? n(t, e, r) : t;\n      }\n    }]);\n    return DataConstantProperty;\n  }();\n  var DataDrivenProperty = /*#__PURE__*/function () {\n    function DataDrivenProperty(t, e) {\n      _classCallCheck(this, DataDrivenProperty);\n      this.specification = t, this.overrides = e;\n    }\n    _createClass(DataDrivenProperty, [{\n      key: \"possiblyEvaluate\",\n      value: function possiblyEvaluate(t, e, r, n) {\n        return new PossiblyEvaluatedPropertyValue(this, \"constant\" === t.expression.kind || \"camera\" === t.expression.kind ? {\n          kind: \"constant\",\n          value: t.expression.evaluate(e, null, {}, r, n)\n        } : t.expression, e);\n      }\n    }, {\n      key: \"interpolate\",\n      value: function interpolate(t, e, r) {\n        if (\"constant\" !== t.value.kind || \"constant\" !== e.value.kind) return t;\n        if (void 0 === t.value.value || void 0 === e.value.value) return new PossiblyEvaluatedPropertyValue(this, {\n          kind: \"constant\",\n          value: void 0\n        }, t.parameters);\n        var n = Nt[this.specification.type];\n        return n ? new PossiblyEvaluatedPropertyValue(this, {\n          kind: \"constant\",\n          value: n(t.value.value, e.value.value, r)\n        }, t.parameters) : t;\n      }\n    }, {\n      key: \"evaluate\",\n      value: function evaluate(t, e, r, n, i, s) {\n        return \"constant\" === t.kind ? t.value : t.evaluate(e, r, n, i, s);\n      }\n    }]);\n    return DataDrivenProperty;\n  }();\n  var ColorRampProperty = /*#__PURE__*/function () {\n    function ColorRampProperty(t) {\n      _classCallCheck(this, ColorRampProperty);\n      this.specification = t;\n    }\n    _createClass(ColorRampProperty, [{\n      key: \"possiblyEvaluate\",\n      value: function possiblyEvaluate(t, e, r, n) {\n        return !!t.expression.evaluate(e, null, {}, r, n);\n      }\n    }, {\n      key: \"interpolate\",\n      value: function interpolate() {\n        return !1;\n      }\n    }]);\n    return ColorRampProperty;\n  }();\n  var Properties = function Properties(t) {\n    _classCallCheck(this, Properties);\n    this.properties = t, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {}, this.overridableProperties = [];\n    var e = new EvaluationParameters(0, {});\n    for (var _r66 in t) {\n      var _n45 = t[_r66];\n      _n45.specification.overridable && this.overridableProperties.push(_r66);\n      var _i45 = this.defaultPropertyValues[_r66] = new PropertyValue(_n45, void 0),\n        _s23 = this.defaultTransitionablePropertyValues[_r66] = new TransitionablePropertyValue(_n45);\n      this.defaultTransitioningPropertyValues[_r66] = _s23.untransitioned(), this.defaultPossiblyEvaluatedValues[_r66] = _i45.possiblyEvaluate(e);\n    }\n  };\n  function bi(t, e) {\n    return 256 * (t = u(Math.floor(t), 0, 255)) + u(Math.floor(e), 0, 255);\n  }\n  Er(DataDrivenProperty, \"DataDrivenProperty\"), Er(DataConstantProperty, \"DataConstantProperty\"), Er(ColorRampProperty, \"ColorRampProperty\");\n  var wi = {\n    Int8: Int8Array,\n    Uint8: Uint8Array,\n    Int16: Int16Array,\n    Uint16: Uint16Array,\n    Int32: Int32Array,\n    Uint32: Uint32Array,\n    Float32: Float32Array\n  };\n  var Struct = function Struct(t, e) {\n    _classCallCheck(this, Struct);\n    this._structArray = t, this._pos1 = e * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;\n  };\n  var StructArray = /*#__PURE__*/function () {\n    function StructArray() {\n      _classCallCheck(this, StructArray);\n      this.isTransferred = !1, this.capacity = -1, this.resize(0);\n    }\n    _createClass(StructArray, [{\n      key: \"_trim\",\n      value: function _trim() {\n        this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this.length = 0;\n      }\n    }, {\n      key: \"resize\",\n      value: function resize(t) {\n        this.reserve(t), this.length = t;\n      }\n    }, {\n      key: \"reserve\",\n      value: function reserve(t) {\n        if (t > this.capacity) {\n          this.capacity = Math.max(t, Math.floor(5 * this.capacity), 128), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);\n          var _e64 = this.uint8;\n          this._refreshViews(), _e64 && this.uint8.set(_e64);\n        }\n      }\n    }, {\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        throw new Error(\"_refreshViews() must be implemented by each concrete StructArray layout\");\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.int8 = this.uint8 = this.int16 = this.uint16 = this.int32 = this.uint32 = this.float32 = null, this.arrayBuffer = null;\n      }\n    }], [{\n      key: \"serialize\",\n      value: function serialize(t, e) {\n        return t._trim(), e && (t.isTransferred = !0, e.push(t.arrayBuffer)), {\n          length: t.length,\n          arrayBuffer: t.arrayBuffer\n        };\n      }\n    }, {\n      key: \"deserialize\",\n      value: function deserialize(t) {\n        var e = Object.create(this.prototype);\n        return e.arrayBuffer = t.arrayBuffer, e.length = t.length, e.capacity = t.arrayBuffer.byteLength / e.bytesPerElement, e._refreshViews(), e;\n      }\n    }]);\n    return StructArray;\n  }();\n  function _i(t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var r = 0,\n      n = 0;\n    return {\n      members: t.map(function (t) {\n        var i = wi[t.type].BYTES_PER_ELEMENT,\n          s = r = Si(r, Math.max(e, i)),\n          a = t.components || 1;\n        return n = Math.max(n, i), r += i * a, {\n          name: t.name,\n          type: t.type,\n          components: a,\n          offset: s\n        };\n      }),\n      size: Si(r, Math.max(n, e)),\n      alignment: e\n    };\n  }\n  function Si(t, e) {\n    return Math.ceil(t / e) * e;\n  }\n  var StructArrayLayout2i4 = /*#__PURE__*/function (_StructArray) {\n    _inherits(StructArrayLayout2i4, _StructArray);\n    function StructArrayLayout2i4() {\n      _classCallCheck(this, StructArrayLayout2i4);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout2i4).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout2i4, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e) {\n        var r = this.length;\n        return this.resize(r + 1), this.emplace(r, t, e);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r) {\n        var n = 2 * t;\n        return this.int16[n + 0] = e, this.int16[n + 1] = r, t;\n      }\n    }]);\n    return StructArrayLayout2i4;\n  }(StructArray);\n  StructArrayLayout2i4.prototype.bytesPerElement = 4, Er(StructArrayLayout2i4, \"StructArrayLayout2i4\");\n  var StructArrayLayout3i6 = /*#__PURE__*/function (_StructArray2) {\n    _inherits(StructArrayLayout3i6, _StructArray2);\n    function StructArrayLayout3i6() {\n      _classCallCheck(this, StructArrayLayout3i6);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout3i6).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout3i6, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r) {\n        var n = this.length;\n        return this.resize(n + 1), this.emplace(n, t, e, r);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n) {\n        var i = 3 * t;\n        return this.int16[i + 0] = e, this.int16[i + 1] = r, this.int16[i + 2] = n, t;\n      }\n    }]);\n    return StructArrayLayout3i6;\n  }(StructArray);\n  StructArrayLayout3i6.prototype.bytesPerElement = 6, Er(StructArrayLayout3i6, \"StructArrayLayout3i6\");\n  var StructArrayLayout4i8 = /*#__PURE__*/function (_StructArray3) {\n    _inherits(StructArrayLayout4i8, _StructArray3);\n    function StructArrayLayout4i8() {\n      _classCallCheck(this, StructArrayLayout4i8);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout4i8).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout4i8, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n) {\n        var i = this.length;\n        return this.resize(i + 1), this.emplace(i, t, e, r, n);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i) {\n        var s = 4 * t;\n        return this.int16[s + 0] = e, this.int16[s + 1] = r, this.int16[s + 2] = n, this.int16[s + 3] = i, t;\n      }\n    }]);\n    return StructArrayLayout4i8;\n  }(StructArray);\n  StructArrayLayout4i8.prototype.bytesPerElement = 8, Er(StructArrayLayout4i8, \"StructArrayLayout4i8\");\n  var StructArrayLayout2i4ub1f12 = /*#__PURE__*/function (_StructArray4) {\n    _inherits(StructArrayLayout2i4ub1f12, _StructArray4);\n    function StructArrayLayout2i4ub1f12() {\n      _classCallCheck(this, StructArrayLayout2i4ub1f12);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout2i4ub1f12).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout2i4ub1f12, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i, s, a) {\n        var o = this.length;\n        return this.resize(o + 1), this.emplace(o, t, e, r, n, i, s, a);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s, a, o) {\n        var l = 6 * t,\n          u = 12 * t,\n          c = 3 * t;\n        return this.int16[l + 0] = e, this.int16[l + 1] = r, this.uint8[u + 4] = n, this.uint8[u + 5] = i, this.uint8[u + 6] = s, this.uint8[u + 7] = a, this.float32[c + 2] = o, t;\n      }\n    }]);\n    return StructArrayLayout2i4ub1f12;\n  }(StructArray);\n  StructArrayLayout2i4ub1f12.prototype.bytesPerElement = 12, Er(StructArrayLayout2i4ub1f12, \"StructArrayLayout2i4ub1f12\");\n  var StructArrayLayout4f16 = /*#__PURE__*/function (_StructArray5) {\n    _inherits(StructArrayLayout4f16, _StructArray5);\n    function StructArrayLayout4f16() {\n      _classCallCheck(this, StructArrayLayout4f16);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout4f16).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout4f16, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n) {\n        var i = this.length;\n        return this.resize(i + 1), this.emplace(i, t, e, r, n);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i) {\n        var s = 4 * t;\n        return this.float32[s + 0] = e, this.float32[s + 1] = r, this.float32[s + 2] = n, this.float32[s + 3] = i, t;\n      }\n    }]);\n    return StructArrayLayout4f16;\n  }(StructArray);\n  StructArrayLayout4f16.prototype.bytesPerElement = 16, Er(StructArrayLayout4f16, \"StructArrayLayout4f16\");\n  var StructArrayLayout4ui1f12 = /*#__PURE__*/function (_StructArray6) {\n    _inherits(StructArrayLayout4ui1f12, _StructArray6);\n    function StructArrayLayout4ui1f12() {\n      _classCallCheck(this, StructArrayLayout4ui1f12);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout4ui1f12).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout4ui1f12, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i) {\n        var s = this.length;\n        return this.resize(s + 1), this.emplace(s, t, e, r, n, i);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s) {\n        var a = 6 * t,\n          o = 3 * t;\n        return this.uint16[a + 0] = e, this.uint16[a + 1] = r, this.uint16[a + 2] = n, this.uint16[a + 3] = i, this.float32[o + 2] = s, t;\n      }\n    }]);\n    return StructArrayLayout4ui1f12;\n  }(StructArray);\n  StructArrayLayout4ui1f12.prototype.bytesPerElement = 12, Er(StructArrayLayout4ui1f12, \"StructArrayLayout4ui1f12\");\n  var StructArrayLayout4ui8 = /*#__PURE__*/function (_StructArray7) {\n    _inherits(StructArrayLayout4ui8, _StructArray7);\n    function StructArrayLayout4ui8() {\n      _classCallCheck(this, StructArrayLayout4ui8);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout4ui8).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout4ui8, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n) {\n        var i = this.length;\n        return this.resize(i + 1), this.emplace(i, t, e, r, n);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i) {\n        var s = 4 * t;\n        return this.uint16[s + 0] = e, this.uint16[s + 1] = r, this.uint16[s + 2] = n, this.uint16[s + 3] = i, t;\n      }\n    }]);\n    return StructArrayLayout4ui8;\n  }(StructArray);\n  StructArrayLayout4ui8.prototype.bytesPerElement = 8, Er(StructArrayLayout4ui8, \"StructArrayLayout4ui8\");\n  var StructArrayLayout6i12 = /*#__PURE__*/function (_StructArray8) {\n    _inherits(StructArrayLayout6i12, _StructArray8);\n    function StructArrayLayout6i12() {\n      _classCallCheck(this, StructArrayLayout6i12);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout6i12).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout6i12, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i, s) {\n        var a = this.length;\n        return this.resize(a + 1), this.emplace(a, t, e, r, n, i, s);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s, a) {\n        var o = 6 * t;\n        return this.int16[o + 0] = e, this.int16[o + 1] = r, this.int16[o + 2] = n, this.int16[o + 3] = i, this.int16[o + 4] = s, this.int16[o + 5] = a, t;\n      }\n    }]);\n    return StructArrayLayout6i12;\n  }(StructArray);\n  StructArrayLayout6i12.prototype.bytesPerElement = 12, Er(StructArrayLayout6i12, \"StructArrayLayout6i12\");\n  var StructArrayLayout4i4ui4i24 = /*#__PURE__*/function (_StructArray9) {\n    _inherits(StructArrayLayout4i4ui4i24, _StructArray9);\n    function StructArrayLayout4i4ui4i24() {\n      _classCallCheck(this, StructArrayLayout4i4ui4i24);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout4i4ui4i24).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout4i4ui4i24, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i, s, a, o, l, u, c, h) {\n        var p = this.length;\n        return this.resize(p + 1), this.emplace(p, t, e, r, n, i, s, a, o, l, u, c, h);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s, a, o, l, u, c, h, p) {\n        var d = 12 * t;\n        return this.int16[d + 0] = e, this.int16[d + 1] = r, this.int16[d + 2] = n, this.int16[d + 3] = i, this.uint16[d + 4] = s, this.uint16[d + 5] = a, this.uint16[d + 6] = o, this.uint16[d + 7] = l, this.int16[d + 8] = u, this.int16[d + 9] = c, this.int16[d + 10] = h, this.int16[d + 11] = p, t;\n      }\n    }]);\n    return StructArrayLayout4i4ui4i24;\n  }(StructArray);\n  StructArrayLayout4i4ui4i24.prototype.bytesPerElement = 24, Er(StructArrayLayout4i4ui4i24, \"StructArrayLayout4i4ui4i24\");\n  var StructArrayLayout3i3f20 = /*#__PURE__*/function (_StructArray10) {\n    _inherits(StructArrayLayout3i3f20, _StructArray10);\n    function StructArrayLayout3i3f20() {\n      _classCallCheck(this, StructArrayLayout3i3f20);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout3i3f20).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout3i3f20, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i, s) {\n        var a = this.length;\n        return this.resize(a + 1), this.emplace(a, t, e, r, n, i, s);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s, a) {\n        var o = 10 * t,\n          l = 5 * t;\n        return this.int16[o + 0] = e, this.int16[o + 1] = r, this.int16[o + 2] = n, this.float32[l + 2] = i, this.float32[l + 3] = s, this.float32[l + 4] = a, t;\n      }\n    }]);\n    return StructArrayLayout3i3f20;\n  }(StructArray);\n  StructArrayLayout3i3f20.prototype.bytesPerElement = 20, Er(StructArrayLayout3i3f20, \"StructArrayLayout3i3f20\");\n  var StructArrayLayout1ul4 = /*#__PURE__*/function (_StructArray11) {\n    _inherits(StructArrayLayout1ul4, _StructArray11);\n    function StructArrayLayout1ul4() {\n      _classCallCheck(this, StructArrayLayout1ul4);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout1ul4).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout1ul4, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t) {\n        var e = this.length;\n        return this.resize(e + 1), this.emplace(e, t);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e) {\n        return this.uint32[1 * t + 0] = e, t;\n      }\n    }]);\n    return StructArrayLayout1ul4;\n  }(StructArray);\n  StructArrayLayout1ul4.prototype.bytesPerElement = 4, Er(StructArrayLayout1ul4, \"StructArrayLayout1ul4\");\n  var StructArrayLayout5i4f1i1ul2ui40 = /*#__PURE__*/function (_StructArray12) {\n    _inherits(StructArrayLayout5i4f1i1ul2ui40, _StructArray12);\n    function StructArrayLayout5i4f1i1ul2ui40() {\n      _classCallCheck(this, StructArrayLayout5i4f1i1ul2ui40);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout5i4f1i1ul2ui40).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout5i4f1i1ul2ui40, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i, s, a, o, l, u, c, h, p) {\n        var d = this.length;\n        return this.resize(d + 1), this.emplace(d, t, e, r, n, i, s, a, o, l, u, c, h, p);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s, a, o, l, u, c, h, p, d) {\n        var f = 20 * t,\n          y = 10 * t;\n        return this.int16[f + 0] = e, this.int16[f + 1] = r, this.int16[f + 2] = n, this.int16[f + 3] = i, this.int16[f + 4] = s, this.float32[y + 3] = a, this.float32[y + 4] = o, this.float32[y + 5] = l, this.float32[y + 6] = u, this.int16[f + 14] = c, this.uint32[y + 8] = h, this.uint16[f + 18] = p, this.uint16[f + 19] = d, t;\n      }\n    }]);\n    return StructArrayLayout5i4f1i1ul2ui40;\n  }(StructArray);\n  StructArrayLayout5i4f1i1ul2ui40.prototype.bytesPerElement = 40, Er(StructArrayLayout5i4f1i1ul2ui40, \"StructArrayLayout5i4f1i1ul2ui40\");\n  var StructArrayLayout3i2i2i16 = /*#__PURE__*/function (_StructArray13) {\n    _inherits(StructArrayLayout3i2i2i16, _StructArray13);\n    function StructArrayLayout3i2i2i16() {\n      _classCallCheck(this, StructArrayLayout3i2i2i16);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout3i2i2i16).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout3i2i2i16, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i, s, a) {\n        var o = this.length;\n        return this.resize(o + 1), this.emplace(o, t, e, r, n, i, s, a);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s, a, o) {\n        var l = 8 * t;\n        return this.int16[l + 0] = e, this.int16[l + 1] = r, this.int16[l + 2] = n, this.int16[l + 4] = i, this.int16[l + 5] = s, this.int16[l + 6] = a, this.int16[l + 7] = o, t;\n      }\n    }]);\n    return StructArrayLayout3i2i2i16;\n  }(StructArray);\n  StructArrayLayout3i2i2i16.prototype.bytesPerElement = 16, Er(StructArrayLayout3i2i2i16, \"StructArrayLayout3i2i2i16\");\n  var StructArrayLayout2f1f2i16 = /*#__PURE__*/function (_StructArray14) {\n    _inherits(StructArrayLayout2f1f2i16, _StructArray14);\n    function StructArrayLayout2f1f2i16() {\n      _classCallCheck(this, StructArrayLayout2f1f2i16);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout2f1f2i16).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout2f1f2i16, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i) {\n        var s = this.length;\n        return this.resize(s + 1), this.emplace(s, t, e, r, n, i);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s) {\n        var a = 4 * t,\n          o = 8 * t;\n        return this.float32[a + 0] = e, this.float32[a + 1] = r, this.float32[a + 2] = n, this.int16[o + 6] = i, this.int16[o + 7] = s, t;\n      }\n    }]);\n    return StructArrayLayout2f1f2i16;\n  }(StructArray);\n  StructArrayLayout2f1f2i16.prototype.bytesPerElement = 16, Er(StructArrayLayout2f1f2i16, \"StructArrayLayout2f1f2i16\");\n  var StructArrayLayout2ub2f12 = /*#__PURE__*/function (_StructArray15) {\n    _inherits(StructArrayLayout2ub2f12, _StructArray15);\n    function StructArrayLayout2ub2f12() {\n      _classCallCheck(this, StructArrayLayout2ub2f12);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout2ub2f12).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout2ub2f12, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n) {\n        var i = this.length;\n        return this.resize(i + 1), this.emplace(i, t, e, r, n);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i) {\n        var s = 12 * t,\n          a = 3 * t;\n        return this.uint8[s + 0] = e, this.uint8[s + 1] = r, this.float32[a + 1] = n, this.float32[a + 2] = i, t;\n      }\n    }]);\n    return StructArrayLayout2ub2f12;\n  }(StructArray);\n  StructArrayLayout2ub2f12.prototype.bytesPerElement = 12, Er(StructArrayLayout2ub2f12, \"StructArrayLayout2ub2f12\");\n  var StructArrayLayout3f12 = /*#__PURE__*/function (_StructArray16) {\n    _inherits(StructArrayLayout3f12, _StructArray16);\n    function StructArrayLayout3f12() {\n      _classCallCheck(this, StructArrayLayout3f12);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout3f12).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout3f12, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r) {\n        var n = this.length;\n        return this.resize(n + 1), this.emplace(n, t, e, r);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n) {\n        var i = 3 * t;\n        return this.float32[i + 0] = e, this.float32[i + 1] = r, this.float32[i + 2] = n, t;\n      }\n    }]);\n    return StructArrayLayout3f12;\n  }(StructArray);\n  StructArrayLayout3f12.prototype.bytesPerElement = 12, Er(StructArrayLayout3f12, \"StructArrayLayout3f12\");\n  var StructArrayLayout3ui6 = /*#__PURE__*/function (_StructArray17) {\n    _inherits(StructArrayLayout3ui6, _StructArray17);\n    function StructArrayLayout3ui6() {\n      _classCallCheck(this, StructArrayLayout3ui6);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout3ui6).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout3ui6, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r) {\n        var n = this.length;\n        return this.resize(n + 1), this.emplace(n, t, e, r);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n) {\n        var i = 3 * t;\n        return this.uint16[i + 0] = e, this.uint16[i + 1] = r, this.uint16[i + 2] = n, t;\n      }\n    }]);\n    return StructArrayLayout3ui6;\n  }(StructArray);\n  StructArrayLayout3ui6.prototype.bytesPerElement = 6, Er(StructArrayLayout3ui6, \"StructArrayLayout3ui6\");\n  var StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60 = /*#__PURE__*/function (_StructArray18) {\n    _inherits(StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60, _StructArray18);\n    function StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60() {\n      _classCallCheck(this, StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b) {\n        var w = this.length;\n        return this.resize(w + 1), this.emplace(w, t, e, r, n, i, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, w) {\n        var _ = 30 * t,\n          S = 15 * t,\n          A = 60 * t;\n        return this.int16[_ + 0] = e, this.int16[_ + 1] = r, this.int16[_ + 2] = n, this.float32[S + 2] = i, this.float32[S + 3] = s, this.uint16[_ + 8] = a, this.uint16[_ + 9] = o, this.uint32[S + 5] = l, this.uint32[S + 6] = u, this.uint32[S + 7] = c, this.uint16[_ + 16] = h, this.uint16[_ + 17] = p, this.uint16[_ + 18] = d, this.float32[S + 10] = f, this.float32[S + 11] = y, this.uint8[A + 48] = m, this.uint8[A + 49] = g, this.uint8[A + 50] = x, this.uint32[S + 13] = v, this.int16[_ + 28] = b, this.uint8[A + 58] = w, t;\n      }\n    }]);\n    return StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60;\n  }(StructArray);\n  StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60.prototype.bytesPerElement = 60, Er(StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60, \"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60\");\n  var StructArrayLayout3i2f6i15ui1ul3f76 = /*#__PURE__*/function (_StructArray19) {\n    _inherits(StructArrayLayout3i2f6i15ui1ul3f76, _StructArray19);\n    function StructArrayLayout3i2f6i15ui1ul3f76() {\n      _classCallCheck(this, StructArrayLayout3i2f6i15ui1ul3f76);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout3i2f6i15ui1ul3f76).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout3i2f6i15ui1ul3f76, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, w, _, S, A, k, I, M, P, T) {\n        var C = this.length;\n        return this.resize(C + 1), this.emplace(C, t, e, r, n, i, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, w, _, S, A, k, I, M, P, T);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, w, _, S, A, k, I, M, P, T, C) {\n        var E = 38 * t,\n          D = 19 * t;\n        return this.int16[E + 0] = e, this.int16[E + 1] = r, this.int16[E + 2] = n, this.float32[D + 2] = i, this.float32[D + 3] = s, this.int16[E + 8] = a, this.int16[E + 9] = o, this.int16[E + 10] = l, this.int16[E + 11] = u, this.int16[E + 12] = c, this.int16[E + 13] = h, this.uint16[E + 14] = p, this.uint16[E + 15] = d, this.uint16[E + 16] = f, this.uint16[E + 17] = y, this.uint16[E + 18] = m, this.uint16[E + 19] = g, this.uint16[E + 20] = x, this.uint16[E + 21] = v, this.uint16[E + 22] = b, this.uint16[E + 23] = w, this.uint16[E + 24] = _, this.uint16[E + 25] = S, this.uint16[E + 26] = A, this.uint16[E + 27] = k, this.uint16[E + 28] = I, this.uint32[D + 15] = M, this.float32[D + 16] = P, this.float32[D + 17] = T, this.float32[D + 18] = C, t;\n      }\n    }]);\n    return StructArrayLayout3i2f6i15ui1ul3f76;\n  }(StructArray);\n  StructArrayLayout3i2f6i15ui1ul3f76.prototype.bytesPerElement = 76, Er(StructArrayLayout3i2f6i15ui1ul3f76, \"StructArrayLayout3i2f6i15ui1ul3f76\");\n  var StructArrayLayout1f4 = /*#__PURE__*/function (_StructArray20) {\n    _inherits(StructArrayLayout1f4, _StructArray20);\n    function StructArrayLayout1f4() {\n      _classCallCheck(this, StructArrayLayout1f4);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout1f4).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout1f4, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t) {\n        var e = this.length;\n        return this.resize(e + 1), this.emplace(e, t);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e) {\n        return this.float32[1 * t + 0] = e, t;\n      }\n    }]);\n    return StructArrayLayout1f4;\n  }(StructArray);\n  StructArrayLayout1f4.prototype.bytesPerElement = 4, Er(StructArrayLayout1f4, \"StructArrayLayout1f4\");\n  var StructArrayLayout5f20 = /*#__PURE__*/function (_StructArray21) {\n    _inherits(StructArrayLayout5f20, _StructArray21);\n    function StructArrayLayout5f20() {\n      _classCallCheck(this, StructArrayLayout5f20);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout5f20).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout5f20, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n, i) {\n        var s = this.length;\n        return this.resize(s + 1), this.emplace(s, t, e, r, n, i);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i, s) {\n        var a = 5 * t;\n        return this.float32[a + 0] = e, this.float32[a + 1] = r, this.float32[a + 2] = n, this.float32[a + 3] = i, this.float32[a + 4] = s, t;\n      }\n    }]);\n    return StructArrayLayout5f20;\n  }(StructArray);\n  StructArrayLayout5f20.prototype.bytesPerElement = 20, Er(StructArrayLayout5f20, \"StructArrayLayout5f20\");\n  var StructArrayLayout1ul3ui12 = /*#__PURE__*/function (_StructArray22) {\n    _inherits(StructArrayLayout1ul3ui12, _StructArray22);\n    function StructArrayLayout1ul3ui12() {\n      _classCallCheck(this, StructArrayLayout1ul3ui12);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout1ul3ui12).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout1ul3ui12, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e, r, n) {\n        var i = this.length;\n        return this.resize(i + 1), this.emplace(i, t, e, r, n);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r, n, i) {\n        var s = 6 * t;\n        return this.uint32[3 * t + 0] = e, this.uint16[s + 2] = r, this.uint16[s + 3] = n, this.uint16[s + 4] = i, t;\n      }\n    }]);\n    return StructArrayLayout1ul3ui12;\n  }(StructArray);\n  StructArrayLayout1ul3ui12.prototype.bytesPerElement = 12, Er(StructArrayLayout1ul3ui12, \"StructArrayLayout1ul3ui12\");\n  var StructArrayLayout2ui4 = /*#__PURE__*/function (_StructArray23) {\n    _inherits(StructArrayLayout2ui4, _StructArray23);\n    function StructArrayLayout2ui4() {\n      _classCallCheck(this, StructArrayLayout2ui4);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout2ui4).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout2ui4, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e) {\n        var r = this.length;\n        return this.resize(r + 1), this.emplace(r, t, e);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r) {\n        var n = 2 * t;\n        return this.uint16[n + 0] = e, this.uint16[n + 1] = r, t;\n      }\n    }]);\n    return StructArrayLayout2ui4;\n  }(StructArray);\n  StructArrayLayout2ui4.prototype.bytesPerElement = 4, Er(StructArrayLayout2ui4, \"StructArrayLayout2ui4\");\n  var StructArrayLayout1ui2 = /*#__PURE__*/function (_StructArray24) {\n    _inherits(StructArrayLayout1ui2, _StructArray24);\n    function StructArrayLayout1ui2() {\n      _classCallCheck(this, StructArrayLayout1ui2);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout1ui2).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout1ui2, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t) {\n        var e = this.length;\n        return this.resize(e + 1), this.emplace(e, t);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e) {\n        return this.uint16[1 * t + 0] = e, t;\n      }\n    }]);\n    return StructArrayLayout1ui2;\n  }(StructArray);\n  StructArrayLayout1ui2.prototype.bytesPerElement = 2, Er(StructArrayLayout1ui2, \"StructArrayLayout1ui2\");\n  var StructArrayLayout2f8 = /*#__PURE__*/function (_StructArray25) {\n    _inherits(StructArrayLayout2f8, _StructArray25);\n    function StructArrayLayout2f8() {\n      _classCallCheck(this, StructArrayLayout2f8);\n      return _possibleConstructorReturn(this, _getPrototypeOf(StructArrayLayout2f8).apply(this, arguments));\n    }\n    _createClass(StructArrayLayout2f8, [{\n      key: \"_refreshViews\",\n      value: function _refreshViews() {\n        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n      }\n    }, {\n      key: \"emplaceBack\",\n      value: function emplaceBack(t, e) {\n        var r = this.length;\n        return this.resize(r + 1), this.emplace(r, t, e);\n      }\n    }, {\n      key: \"emplace\",\n      value: function emplace(t, e, r) {\n        var n = 2 * t;\n        return this.float32[n + 0] = e, this.float32[n + 1] = r, t;\n      }\n    }]);\n    return StructArrayLayout2f8;\n  }(StructArray);\n  StructArrayLayout2f8.prototype.bytesPerElement = 8, Er(StructArrayLayout2f8, \"StructArrayLayout2f8\");\n  var CollisionBoxStruct = /*#__PURE__*/function (_Struct) {\n    _inherits(CollisionBoxStruct, _Struct);\n    function CollisionBoxStruct() {\n      _classCallCheck(this, CollisionBoxStruct);\n      return _possibleConstructorReturn(this, _getPrototypeOf(CollisionBoxStruct).apply(this, arguments));\n    }\n    _createClass(CollisionBoxStruct, [{\n      key: \"projectedAnchorX\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 0];\n      }\n    }, {\n      key: \"projectedAnchorY\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 1];\n      }\n    }, {\n      key: \"projectedAnchorZ\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 2];\n      }\n    }, {\n      key: \"tileAnchorX\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 3];\n      }\n    }, {\n      key: \"tileAnchorY\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 4];\n      }\n    }, {\n      key: \"x1\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 3];\n      }\n    }, {\n      key: \"y1\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 4];\n      }\n    }, {\n      key: \"x2\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 5];\n      }\n    }, {\n      key: \"y2\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 6];\n      }\n    }, {\n      key: \"padding\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 14];\n      }\n    }, {\n      key: \"featureIndex\",\n      get: function get() {\n        return this._structArray.uint32[this._pos4 + 8];\n      }\n    }, {\n      key: \"sourceLayerIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 18];\n      }\n    }, {\n      key: \"bucketIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 19];\n      }\n    }]);\n    return CollisionBoxStruct;\n  }(Struct);\n  CollisionBoxStruct.prototype.size = 40;\n  var CollisionBoxArray = /*#__PURE__*/function (_StructArrayLayout5i) {\n    _inherits(CollisionBoxArray, _StructArrayLayout5i);\n    function CollisionBoxArray() {\n      _classCallCheck(this, CollisionBoxArray);\n      return _possibleConstructorReturn(this, _getPrototypeOf(CollisionBoxArray).apply(this, arguments));\n    }\n    _createClass(CollisionBoxArray, [{\n      key: \"get\",\n      value: function get(t) {\n        return new CollisionBoxStruct(this, t);\n      }\n    }]);\n    return CollisionBoxArray;\n  }(StructArrayLayout5i4f1i1ul2ui40);\n  Er(CollisionBoxArray, \"CollisionBoxArray\");\n  var PlacedSymbolStruct = /*#__PURE__*/function (_Struct2) {\n    _inherits(PlacedSymbolStruct, _Struct2);\n    function PlacedSymbolStruct() {\n      _classCallCheck(this, PlacedSymbolStruct);\n      return _possibleConstructorReturn(this, _getPrototypeOf(PlacedSymbolStruct).apply(this, arguments));\n    }\n    _createClass(PlacedSymbolStruct, [{\n      key: \"projectedAnchorX\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 0];\n      }\n    }, {\n      key: \"projectedAnchorY\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 1];\n      }\n    }, {\n      key: \"projectedAnchorZ\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 2];\n      }\n    }, {\n      key: \"tileAnchorX\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 2];\n      }\n    }, {\n      key: \"tileAnchorY\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 3];\n      }\n    }, {\n      key: \"glyphStartIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 8];\n      }\n    }, {\n      key: \"numGlyphs\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 9];\n      }\n    }, {\n      key: \"vertexStartIndex\",\n      get: function get() {\n        return this._structArray.uint32[this._pos4 + 5];\n      }\n    }, {\n      key: \"lineStartIndex\",\n      get: function get() {\n        return this._structArray.uint32[this._pos4 + 6];\n      }\n    }, {\n      key: \"lineLength\",\n      get: function get() {\n        return this._structArray.uint32[this._pos4 + 7];\n      }\n    }, {\n      key: \"segment\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 16];\n      }\n    }, {\n      key: \"lowerSize\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 17];\n      }\n    }, {\n      key: \"upperSize\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 18];\n      }\n    }, {\n      key: \"lineOffsetX\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 10];\n      }\n    }, {\n      key: \"lineOffsetY\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 11];\n      }\n    }, {\n      key: \"writingMode\",\n      get: function get() {\n        return this._structArray.uint8[this._pos1 + 48];\n      }\n    }, {\n      key: \"placedOrientation\",\n      get: function get() {\n        return this._structArray.uint8[this._pos1 + 49];\n      },\n      set: function set(t) {\n        this._structArray.uint8[this._pos1 + 49] = t;\n      }\n    }, {\n      key: \"hidden\",\n      get: function get() {\n        return this._structArray.uint8[this._pos1 + 50];\n      },\n      set: function set(t) {\n        this._structArray.uint8[this._pos1 + 50] = t;\n      }\n    }, {\n      key: \"crossTileID\",\n      get: function get() {\n        return this._structArray.uint32[this._pos4 + 13];\n      },\n      set: function set(t) {\n        this._structArray.uint32[this._pos4 + 13] = t;\n      }\n    }, {\n      key: \"associatedIconIndex\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 28];\n      }\n    }, {\n      key: \"flipState\",\n      get: function get() {\n        return this._structArray.uint8[this._pos1 + 58];\n      },\n      set: function set(t) {\n        this._structArray.uint8[this._pos1 + 58] = t;\n      }\n    }]);\n    return PlacedSymbolStruct;\n  }(Struct);\n  PlacedSymbolStruct.prototype.size = 60;\n  var PlacedSymbolArray = /*#__PURE__*/function (_StructArrayLayout3i) {\n    _inherits(PlacedSymbolArray, _StructArrayLayout3i);\n    function PlacedSymbolArray() {\n      _classCallCheck(this, PlacedSymbolArray);\n      return _possibleConstructorReturn(this, _getPrototypeOf(PlacedSymbolArray).apply(this, arguments));\n    }\n    _createClass(PlacedSymbolArray, [{\n      key: \"get\",\n      value: function get(t) {\n        return new PlacedSymbolStruct(this, t);\n      }\n    }]);\n    return PlacedSymbolArray;\n  }(StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60);\n  Er(PlacedSymbolArray, \"PlacedSymbolArray\");\n  var SymbolInstanceStruct = /*#__PURE__*/function (_Struct3) {\n    _inherits(SymbolInstanceStruct, _Struct3);\n    function SymbolInstanceStruct() {\n      _classCallCheck(this, SymbolInstanceStruct);\n      return _possibleConstructorReturn(this, _getPrototypeOf(SymbolInstanceStruct).apply(this, arguments));\n    }\n    _createClass(SymbolInstanceStruct, [{\n      key: \"projectedAnchorX\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 0];\n      }\n    }, {\n      key: \"projectedAnchorY\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 1];\n      }\n    }, {\n      key: \"projectedAnchorZ\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 2];\n      }\n    }, {\n      key: \"tileAnchorX\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 2];\n      }\n    }, {\n      key: \"tileAnchorY\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 3];\n      }\n    }, {\n      key: \"rightJustifiedTextSymbolIndex\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 8];\n      }\n    }, {\n      key: \"centerJustifiedTextSymbolIndex\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 9];\n      }\n    }, {\n      key: \"leftJustifiedTextSymbolIndex\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 10];\n      }\n    }, {\n      key: \"verticalPlacedTextSymbolIndex\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 11];\n      }\n    }, {\n      key: \"placedIconSymbolIndex\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 12];\n      }\n    }, {\n      key: \"verticalPlacedIconSymbolIndex\",\n      get: function get() {\n        return this._structArray.int16[this._pos2 + 13];\n      }\n    }, {\n      key: \"key\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 14];\n      }\n    }, {\n      key: \"textBoxStartIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 15];\n      }\n    }, {\n      key: \"textBoxEndIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 16];\n      }\n    }, {\n      key: \"verticalTextBoxStartIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 17];\n      }\n    }, {\n      key: \"verticalTextBoxEndIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 18];\n      }\n    }, {\n      key: \"iconBoxStartIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 19];\n      }\n    }, {\n      key: \"iconBoxEndIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 20];\n      }\n    }, {\n      key: \"verticalIconBoxStartIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 21];\n      }\n    }, {\n      key: \"verticalIconBoxEndIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 22];\n      }\n    }, {\n      key: \"featureIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 23];\n      }\n    }, {\n      key: \"numHorizontalGlyphVertices\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 24];\n      }\n    }, {\n      key: \"numVerticalGlyphVertices\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 25];\n      }\n    }, {\n      key: \"numIconVertices\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 26];\n      }\n    }, {\n      key: \"numVerticalIconVertices\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 27];\n      }\n    }, {\n      key: \"useRuntimeCollisionCircles\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 28];\n      }\n    }, {\n      key: \"crossTileID\",\n      get: function get() {\n        return this._structArray.uint32[this._pos4 + 15];\n      },\n      set: function set(t) {\n        this._structArray.uint32[this._pos4 + 15] = t;\n      }\n    }, {\n      key: \"textOffset0\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 16];\n      }\n    }, {\n      key: \"textOffset1\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 17];\n      }\n    }, {\n      key: \"collisionCircleDiameter\",\n      get: function get() {\n        return this._structArray.float32[this._pos4 + 18];\n      }\n    }]);\n    return SymbolInstanceStruct;\n  }(Struct);\n  SymbolInstanceStruct.prototype.size = 76;\n  var SymbolInstanceArray = /*#__PURE__*/function (_StructArrayLayout3i2) {\n    _inherits(SymbolInstanceArray, _StructArrayLayout3i2);\n    function SymbolInstanceArray() {\n      _classCallCheck(this, SymbolInstanceArray);\n      return _possibleConstructorReturn(this, _getPrototypeOf(SymbolInstanceArray).apply(this, arguments));\n    }\n    _createClass(SymbolInstanceArray, [{\n      key: \"get\",\n      value: function get(t) {\n        return new SymbolInstanceStruct(this, t);\n      }\n    }]);\n    return SymbolInstanceArray;\n  }(StructArrayLayout3i2f6i15ui1ul3f76);\n  Er(SymbolInstanceArray, \"SymbolInstanceArray\");\n  var GlyphOffsetArray = /*#__PURE__*/function (_StructArrayLayout1f) {\n    _inherits(GlyphOffsetArray, _StructArrayLayout1f);\n    function GlyphOffsetArray() {\n      _classCallCheck(this, GlyphOffsetArray);\n      return _possibleConstructorReturn(this, _getPrototypeOf(GlyphOffsetArray).apply(this, arguments));\n    }\n    _createClass(GlyphOffsetArray, [{\n      key: \"getoffsetX\",\n      value: function getoffsetX(t) {\n        return this.float32[1 * t + 0];\n      }\n    }]);\n    return GlyphOffsetArray;\n  }(StructArrayLayout1f4);\n  Er(GlyphOffsetArray, \"GlyphOffsetArray\");\n  var SymbolLineVertexArray = /*#__PURE__*/function (_StructArrayLayout2i) {\n    _inherits(SymbolLineVertexArray, _StructArrayLayout2i);\n    function SymbolLineVertexArray() {\n      _classCallCheck(this, SymbolLineVertexArray);\n      return _possibleConstructorReturn(this, _getPrototypeOf(SymbolLineVertexArray).apply(this, arguments));\n    }\n    _createClass(SymbolLineVertexArray, [{\n      key: \"getx\",\n      value: function getx(t) {\n        return this.int16[2 * t + 0];\n      }\n    }, {\n      key: \"gety\",\n      value: function gety(t) {\n        return this.int16[2 * t + 1];\n      }\n    }]);\n    return SymbolLineVertexArray;\n  }(StructArrayLayout2i4);\n  Er(SymbolLineVertexArray, \"SymbolLineVertexArray\");\n  var FeatureIndexStruct = /*#__PURE__*/function (_Struct4) {\n    _inherits(FeatureIndexStruct, _Struct4);\n    function FeatureIndexStruct() {\n      _classCallCheck(this, FeatureIndexStruct);\n      return _possibleConstructorReturn(this, _getPrototypeOf(FeatureIndexStruct).apply(this, arguments));\n    }\n    _createClass(FeatureIndexStruct, [{\n      key: \"featureIndex\",\n      get: function get() {\n        return this._structArray.uint32[this._pos4 + 0];\n      }\n    }, {\n      key: \"sourceLayerIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 2];\n      }\n    }, {\n      key: \"bucketIndex\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 3];\n      }\n    }, {\n      key: \"layoutVertexArrayOffset\",\n      get: function get() {\n        return this._structArray.uint16[this._pos2 + 4];\n      }\n    }]);\n    return FeatureIndexStruct;\n  }(Struct);\n  FeatureIndexStruct.prototype.size = 12;\n  var FeatureIndexArray = /*#__PURE__*/function (_StructArrayLayout1ul) {\n    _inherits(FeatureIndexArray, _StructArrayLayout1ul);\n    function FeatureIndexArray() {\n      _classCallCheck(this, FeatureIndexArray);\n      return _possibleConstructorReturn(this, _getPrototypeOf(FeatureIndexArray).apply(this, arguments));\n    }\n    _createClass(FeatureIndexArray, [{\n      key: \"get\",\n      value: function get(t) {\n        return new FeatureIndexStruct(this, t);\n      }\n    }]);\n    return FeatureIndexArray;\n  }(StructArrayLayout1ul3ui12);\n  Er(FeatureIndexArray, \"FeatureIndexArray\");\n  var FillExtrusionCentroidArray = /*#__PURE__*/function (_StructArrayLayout2ui) {\n    _inherits(FillExtrusionCentroidArray, _StructArrayLayout2ui);\n    function FillExtrusionCentroidArray() {\n      _classCallCheck(this, FillExtrusionCentroidArray);\n      return _possibleConstructorReturn(this, _getPrototypeOf(FillExtrusionCentroidArray).apply(this, arguments));\n    }\n    _createClass(FillExtrusionCentroidArray, [{\n      key: \"geta_centroid_pos0\",\n      value: function geta_centroid_pos0(t) {\n        return this.uint16[2 * t + 0];\n      }\n    }, {\n      key: \"geta_centroid_pos1\",\n      value: function geta_centroid_pos1(t) {\n        return this.uint16[2 * t + 1];\n      }\n    }]);\n    return FillExtrusionCentroidArray;\n  }(StructArrayLayout2ui4);\n  Er(FillExtrusionCentroidArray, \"FillExtrusionCentroidArray\");\n  var Ai = _i([{\n      name: \"a_pattern\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixel_ratio\",\n      components: 1,\n      type: \"Float32\"\n    }]),\n    ki = _i([{\n      name: \"a_dash\",\n      components: 4,\n      type: \"Uint16\"\n    }]);\n  var Ii = {},\n    Mi = {\n      get exports() {\n        return Ii;\n      },\n      set exports(t) {\n        Ii = t;\n      }\n    },\n    Pi = {};\n  ({\n    get exports() {\n      return Pi;\n    },\n    set exports(t) {\n      Pi = t;\n    }\n  }).exports = function (t, e) {\n    var r, n, i, s, a, o, l, u;\n    for (n = t.length - (r = 3 & t.length), i = e, a = 3432918353, o = 461845907, u = 0; u < n;) l = 255 & t.charCodeAt(u) | (255 & t.charCodeAt(++u)) << 8 | (255 & t.charCodeAt(++u)) << 16 | (255 & t.charCodeAt(++u)) << 24, ++u, i = 27492 + (65535 & (s = 5 * (65535 & (i = (i ^= l = (65535 & (l = (l = (65535 & l) * a + (((l >>> 16) * a & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * o + (((l >>> 16) * o & 65535) << 16) & 4294967295) << 13 | i >>> 19)) + ((5 * (i >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (s >>> 16) & 65535) << 16);\n    switch (l = 0, r) {\n      case 3:\n        l ^= (255 & t.charCodeAt(u + 2)) << 16;\n      case 2:\n        l ^= (255 & t.charCodeAt(u + 1)) << 8;\n      case 1:\n        i ^= l = (65535 & (l = (l = (65535 & (l ^= 255 & t.charCodeAt(u))) * a + (((l >>> 16) * a & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * o + (((l >>> 16) * o & 65535) << 16) & 4294967295;\n    }\n    return i ^= t.length, i = 2246822507 * (65535 & (i ^= i >>> 16)) + ((2246822507 * (i >>> 16) & 65535) << 16) & 4294967295, i = 3266489909 * (65535 & (i ^= i >>> 13)) + ((3266489909 * (i >>> 16) & 65535) << 16) & 4294967295, (i ^= i >>> 16) >>> 0;\n  };\n  var Ti = {};\n  ({\n    get exports() {\n      return Ti;\n    },\n    set exports(t) {\n      Ti = t;\n    }\n  }).exports = function (t, e) {\n    for (var r, n = t.length, i = e ^ n, s = 0; n >= 4;) r = 1540483477 * (65535 & (r = 255 & t.charCodeAt(s) | (255 & t.charCodeAt(++s)) << 8 | (255 & t.charCodeAt(++s)) << 16 | (255 & t.charCodeAt(++s)) << 24)) + ((1540483477 * (r >>> 16) & 65535) << 16), i = 1540483477 * (65535 & i) + ((1540483477 * (i >>> 16) & 65535) << 16) ^ (r = 1540483477 * (65535 & (r ^= r >>> 24)) + ((1540483477 * (r >>> 16) & 65535) << 16)), n -= 4, ++s;\n    switch (n) {\n      case 3:\n        i ^= (255 & t.charCodeAt(s + 2)) << 16;\n      case 2:\n        i ^= (255 & t.charCodeAt(s + 1)) << 8;\n      case 1:\n        i = 1540483477 * (65535 & (i ^= 255 & t.charCodeAt(s))) + ((1540483477 * (i >>> 16) & 65535) << 16);\n    }\n    return i = 1540483477 * (65535 & (i ^= i >>> 13)) + ((1540483477 * (i >>> 16) & 65535) << 16), (i ^= i >>> 15) >>> 0;\n  };\n  var Ci = Pi,\n    Ei = Ti;\n  Mi.exports = Ci, Ii.murmur3 = Ci, Ii.murmur2 = Ei;\n  var FeaturePositionMap = /*#__PURE__*/function () {\n    function FeaturePositionMap() {\n      _classCallCheck(this, FeaturePositionMap);\n      this.ids = [], this.positions = [], this.indexed = !1;\n    }\n    _createClass(FeaturePositionMap, [{\n      key: \"add\",\n      value: function add(t, e, r, n) {\n        this.ids.push(Di(t)), this.positions.push(e, r, n);\n      }\n    }, {\n      key: \"getPositions\",\n      value: function getPositions(t) {\n        var e = Di(t);\n        var r = 0,\n          n = this.ids.length - 1;\n        for (; r < n;) {\n          var _t68 = r + n >> 1;\n          this.ids[_t68] >= e ? n = _t68 : r = _t68 + 1;\n        }\n        var i = [];\n        for (; this.ids[r] === e;) i.push({\n          index: this.positions[3 * r],\n          start: this.positions[3 * r + 1],\n          end: this.positions[3 * r + 2]\n        }), r++;\n        return i;\n      }\n    }], [{\n      key: \"serialize\",\n      value: function serialize(t, e) {\n        var r = new Float64Array(t.ids),\n          n = new Uint32Array(t.positions);\n        return zi(r, n, 0, r.length - 1), e && e.push(r.buffer, n.buffer), {\n          ids: r,\n          positions: n\n        };\n      }\n    }, {\n      key: \"deserialize\",\n      value: function deserialize(t) {\n        var e = new FeaturePositionMap();\n        return e.ids = t.ids, e.positions = t.positions, e.indexed = !0, e;\n      }\n    }]);\n    return FeaturePositionMap;\n  }();\n  function Di(t) {\n    var e = +t;\n    return !isNaN(e) && Number.MIN_SAFE_INTEGER <= e && e <= Number.MAX_SAFE_INTEGER ? e : Ii(String(t));\n  }\n  function zi(t, e, r, n) {\n    for (; r < n;) {\n      var _i46 = t[r + n >> 1];\n      var _s24 = r - 1,\n        _a25 = n + 1;\n      for (;;) {\n        do {\n          _s24++;\n        } while (t[_s24] < _i46);\n        do {\n          _a25--;\n        } while (t[_a25] > _i46);\n        if (_s24 >= _a25) break;\n        Bi(t, _s24, _a25), Bi(e, 3 * _s24, 3 * _a25), Bi(e, 3 * _s24 + 1, 3 * _a25 + 1), Bi(e, 3 * _s24 + 2, 3 * _a25 + 2);\n      }\n      _a25 - r < n - _a25 ? (zi(t, e, r, _a25), r = _a25 + 1) : (zi(t, e, _a25 + 1, n), n = _a25);\n    }\n  }\n  function Bi(t, e, r) {\n    var n = t[e];\n    t[e] = t[r], t[r] = n;\n  }\n  Er(FeaturePositionMap, \"FeaturePositionMap\");\n  var Uniform = /*#__PURE__*/function () {\n    function Uniform(t) {\n      _classCallCheck(this, Uniform);\n      this.gl = t.gl, this.initialized = !1;\n    }\n    _createClass(Uniform, [{\n      key: \"fetchUniformLocation\",\n      value: function fetchUniformLocation(t, e) {\n        return this.location || this.initialized || (this.location = this.gl.getUniformLocation(t, e), this.initialized = !0), !!this.location;\n      }\n    }]);\n    return Uniform;\n  }();\n  var Uniform1f = /*#__PURE__*/function (_Uniform) {\n    _inherits(Uniform1f, _Uniform);\n    function Uniform1f(t) {\n      var _this20;\n      _classCallCheck(this, Uniform1f);\n      _this20 = _possibleConstructorReturn(this, _getPrototypeOf(Uniform1f).call(this, t)), _this20.current = 0;\n      return _this20;\n    }\n    _createClass(Uniform1f, [{\n      key: \"set\",\n      value: function set(t, e, r) {\n        this.fetchUniformLocation(t, e) && this.current !== r && (this.current = r, this.gl.uniform1f(this.location, r));\n      }\n    }]);\n    return Uniform1f;\n  }(Uniform);\n  var Uniform4f = /*#__PURE__*/function (_Uniform2) {\n    _inherits(Uniform4f, _Uniform2);\n    function Uniform4f(t) {\n      var _this21;\n      _classCallCheck(this, Uniform4f);\n      _this21 = _possibleConstructorReturn(this, _getPrototypeOf(Uniform4f).call(this, t)), _this21.current = [0, 0, 0, 0];\n      return _this21;\n    }\n    _createClass(Uniform4f, [{\n      key: \"set\",\n      value: function set(t, e, r) {\n        this.fetchUniformLocation(t, e) && (r[0] === this.current[0] && r[1] === this.current[1] && r[2] === this.current[2] && r[3] === this.current[3] || (this.current = r, this.gl.uniform4f(this.location, r[0], r[1], r[2], r[3])));\n      }\n    }]);\n    return Uniform4f;\n  }(Uniform);\n  var UniformColor = /*#__PURE__*/function (_Uniform3) {\n    _inherits(UniformColor, _Uniform3);\n    function UniformColor(t) {\n      var _this22;\n      _classCallCheck(this, UniformColor);\n      _this22 = _possibleConstructorReturn(this, _getPrototypeOf(UniformColor).call(this, t)), _this22.current = R.transparent;\n      return _this22;\n    }\n    _createClass(UniformColor, [{\n      key: \"set\",\n      value: function set(t, e, r) {\n        this.fetchUniformLocation(t, e) && (r.r === this.current.r && r.g === this.current.g && r.b === this.current.b && r.a === this.current.a || (this.current = r, this.gl.uniform4f(this.location, r.r, r.g, r.b, r.a)));\n      }\n    }]);\n    return UniformColor;\n  }(Uniform);\n  function Li(t) {\n    return [bi(255 * t.r, 255 * t.g), bi(255 * t.b, 255 * t.a)];\n  }\n  var ConstantBinder = /*#__PURE__*/function () {\n    function ConstantBinder(t, e, r) {\n      _classCallCheck(this, ConstantBinder);\n      this.value = t, this.uniformNames = e.map(function (t) {\n        return \"u_\".concat(t);\n      }), this.type = r;\n    }\n    _createClass(ConstantBinder, [{\n      key: \"setUniform\",\n      value: function setUniform(t, e, r, n, i) {\n        e.set(t, i, n.constantOr(this.value));\n      }\n    }, {\n      key: \"getBinding\",\n      value: function getBinding(t, e) {\n        return \"color\" === this.type ? new UniformColor(t) : new Uniform1f(t);\n      }\n    }]);\n    return ConstantBinder;\n  }();\n  var PatternConstantBinder = /*#__PURE__*/function () {\n    function PatternConstantBinder(t, e) {\n      _classCallCheck(this, PatternConstantBinder);\n      this.uniformNames = e.map(function (t) {\n        return \"u_\".concat(t);\n      }), this.pattern = null, this.pixelRatio = 1;\n    }\n    _createClass(PatternConstantBinder, [{\n      key: \"setConstantPatternPositions\",\n      value: function setConstantPatternPositions(t) {\n        this.pixelRatio = t.pixelRatio || 1, this.pattern = t.tl.concat(t.br);\n      }\n    }, {\n      key: \"setUniform\",\n      value: function setUniform(t, e, r, n, i) {\n        var s = \"u_pattern\" === i || \"u_dash\" === i ? this.pattern : \"u_pixel_ratio\" === i ? this.pixelRatio : null;\n        s && e.set(t, i, s);\n      }\n    }, {\n      key: \"getBinding\",\n      value: function getBinding(t, e) {\n        return \"u_pattern\" === e || \"u_dash\" === e ? new Uniform4f(t) : new Uniform1f(t);\n      }\n    }]);\n    return PatternConstantBinder;\n  }();\n  var SourceExpressionBinder = /*#__PURE__*/function () {\n    function SourceExpressionBinder(t, e, r, n) {\n      _classCallCheck(this, SourceExpressionBinder);\n      this.expression = t, this.type = r, this.maxValue = 0, this.paintVertexAttributes = e.map(function (t) {\n        return {\n          name: \"a_\".concat(t),\n          type: \"Float32\",\n          components: \"color\" === r ? 2 : 1,\n          offset: 0\n        };\n      }), this.paintVertexArray = new n();\n    }\n    _createClass(SourceExpressionBinder, [{\n      key: \"populatePaintArray\",\n      value: function populatePaintArray(t, e, r, n, i, s) {\n        var a = this.paintVertexArray.length,\n          o = this.expression.evaluate(new EvaluationParameters(0), e, {}, i, n, s);\n        this.paintVertexArray.resize(t), this._setPaintValue(a, t, o);\n      }\n    }, {\n      key: \"updatePaintArray\",\n      value: function updatePaintArray(t, e, r, n, i) {\n        var s = this.expression.evaluate({\n          zoom: 0\n        }, r, n, void 0, i);\n        this._setPaintValue(t, e, s);\n      }\n    }, {\n      key: \"_setPaintValue\",\n      value: function _setPaintValue(t, e, r) {\n        if (\"color\" === this.type) {\n          var _n46 = Li(r);\n          for (var _r67 = t; _r67 < e; _r67++) this.paintVertexArray.emplace(_r67, _n46[0], _n46[1]);\n        } else {\n          for (var _n47 = t; _n47 < e; _n47++) this.paintVertexArray.emplace(_n47, r);\n          this.maxValue = Math.max(this.maxValue, Math.abs(r));\n        }\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n      }\n    }]);\n    return SourceExpressionBinder;\n  }();\n  var CompositeExpressionBinder = /*#__PURE__*/function () {\n    function CompositeExpressionBinder(t, e, r, n, i, s) {\n      _classCallCheck(this, CompositeExpressionBinder);\n      this.expression = t, this.uniformNames = e.map(function (t) {\n        return \"u_\".concat(t, \"_t\");\n      }), this.type = r, this.useIntegerZoom = n, this.zoom = i, this.maxValue = 0, this.paintVertexAttributes = e.map(function (t) {\n        return {\n          name: \"a_\".concat(t),\n          type: \"Float32\",\n          components: \"color\" === r ? 4 : 2,\n          offset: 0\n        };\n      }), this.paintVertexArray = new s();\n    }\n    _createClass(CompositeExpressionBinder, [{\n      key: \"populatePaintArray\",\n      value: function populatePaintArray(t, e, r, n, i, s) {\n        var a = this.expression.evaluate(new EvaluationParameters(this.zoom), e, {}, i, n, s),\n          o = this.expression.evaluate(new EvaluationParameters(this.zoom + 1), e, {}, i, n, s),\n          l = this.paintVertexArray.length;\n        this.paintVertexArray.resize(t), this._setPaintValue(l, t, a, o);\n      }\n    }, {\n      key: \"updatePaintArray\",\n      value: function updatePaintArray(t, e, r, n, i) {\n        var s = this.expression.evaluate({\n            zoom: this.zoom\n          }, r, n, void 0, i),\n          a = this.expression.evaluate({\n            zoom: this.zoom + 1\n          }, r, n, void 0, i);\n        this._setPaintValue(t, e, s, a);\n      }\n    }, {\n      key: \"_setPaintValue\",\n      value: function _setPaintValue(t, e, r, n) {\n        if (\"color\" === this.type) {\n          var _i47 = Li(r),\n            _s25 = Li(n);\n          for (var _r68 = t; _r68 < e; _r68++) this.paintVertexArray.emplace(_r68, _i47[0], _i47[1], _s25[0], _s25[1]);\n        } else {\n          for (var _i48 = t; _i48 < e; _i48++) this.paintVertexArray.emplace(_i48, r, n);\n          this.maxValue = Math.max(this.maxValue, Math.abs(r), Math.abs(n));\n        }\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n      }\n    }, {\n      key: \"setUniform\",\n      value: function setUniform(t, e, r, n, i) {\n        var s = this.useIntegerZoom ? Math.floor(r.zoom) : r.zoom,\n          a = u(this.expression.interpolationFactor(s, this.zoom, this.zoom + 1), 0, 1);\n        e.set(t, i, a);\n      }\n    }, {\n      key: \"getBinding\",\n      value: function getBinding(t, e) {\n        return new Uniform1f(t);\n      }\n    }]);\n    return CompositeExpressionBinder;\n  }();\n  var PatternCompositeBinder = /*#__PURE__*/function () {\n    function PatternCompositeBinder(t, e, r, n, i) {\n      _classCallCheck(this, PatternCompositeBinder);\n      this.expression = t, this.layerId = i, this.paintVertexAttributes = (\"array\" === r ? ki : Ai).members;\n      for (var _t69 = 0; _t69 < e.length; ++_t69);\n      this.paintVertexArray = new n();\n    }\n    _createClass(PatternCompositeBinder, [{\n      key: \"populatePaintArray\",\n      value: function populatePaintArray(t, e, r) {\n        var n = this.paintVertexArray.length;\n        this.paintVertexArray.resize(t), this._setPaintValues(n, t, e.patterns && e.patterns[this.layerId], r);\n      }\n    }, {\n      key: \"updatePaintArray\",\n      value: function updatePaintArray(t, e, r, n, i, s) {\n        this._setPaintValues(t, e, r.patterns && r.patterns[this.layerId], s);\n      }\n    }, {\n      key: \"_setPaintValues\",\n      value: function _setPaintValues(t, e, r, n) {\n        if (!n || !r) return;\n        var i = n[r];\n        if (!i) return;\n        var s = i.tl,\n          a = i.br,\n          o = i.pixelRatio;\n        for (var _r69 = t; _r69 < e; _r69++) this.paintVertexArray.emplace(_r69, s[0], s[1], a[0], a[1], o);\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n      }\n    }]);\n    return PatternCompositeBinder;\n  }();\n  var ProgramConfiguration = /*#__PURE__*/function () {\n    function ProgramConfiguration(t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n        return !0;\n      };\n      _classCallCheck(this, ProgramConfiguration);\n      this.binders = {}, this._buffers = [];\n      var n = [];\n      for (var _i49 in t.paint._values) {\n        if (!r(_i49)) continue;\n        var _s26 = t.paint.get(_i49);\n        if (!(_s26 instanceof PossiblyEvaluatedPropertyValue && Le(_s26.property.specification))) continue;\n        var _a26 = Fi(_i49, t.type),\n          _o8 = _s26.value,\n          _l7 = _s26.property.specification.type,\n          _u7 = !!_s26.property.useIntegerZoom,\n          _c4 = \"line-dasharray\" === _i49 || _i49.endsWith(\"pattern\"),\n          _h2 = \"line-dasharray\" === _i49 && \"constant\" !== t.layout.get(\"line-cap\").value.kind;\n        if (\"constant\" !== _o8.kind || _h2) {\n          if (\"source\" === _o8.kind || _h2 || _c4) {\n            var _e65 = Oi(_i49, _l7, \"source\");\n            this.binders[_i49] = _c4 ? new PatternCompositeBinder(_o8, _a26, _l7, _e65, t.id) : new SourceExpressionBinder(_o8, _a26, _l7, _e65), n.push(\"/a_\".concat(_i49));\n          } else {\n            var _t70 = Oi(_i49, _l7, \"composite\");\n            this.binders[_i49] = new CompositeExpressionBinder(_o8, _a26, _l7, _u7, e, _t70), n.push(\"/z_\".concat(_i49));\n          }\n        } else this.binders[_i49] = _c4 ? new PatternConstantBinder(_o8.value, _a26) : new ConstantBinder(_o8.value, _a26, _l7), n.push(\"/u_\".concat(_i49));\n      }\n      this.cacheKey = n.sort().join(\"\");\n    }\n    _createClass(ProgramConfiguration, [{\n      key: \"getMaxValue\",\n      value: function getMaxValue(t) {\n        var e = this.binders[t];\n        return e instanceof SourceExpressionBinder || e instanceof CompositeExpressionBinder ? e.maxValue : 0;\n      }\n    }, {\n      key: \"populatePaintArrays\",\n      value: function populatePaintArrays(t, e, r, n, i, s) {\n        for (var _a27 in this.binders) {\n          var _o9 = this.binders[_a27];\n          (_o9 instanceof SourceExpressionBinder || _o9 instanceof CompositeExpressionBinder || _o9 instanceof PatternCompositeBinder) && _o9.populatePaintArray(t, e, r, n, i, s);\n        }\n      }\n    }, {\n      key: \"setConstantPatternPositions\",\n      value: function setConstantPatternPositions(t) {\n        for (var _e66 in this.binders) {\n          var _r70 = this.binders[_e66];\n          _r70 instanceof PatternConstantBinder && _r70.setConstantPatternPositions(t);\n        }\n      }\n    }, {\n      key: \"updatePaintArrays\",\n      value: function updatePaintArrays(t, e, r, n, i, s) {\n        var a = !1;\n        for (var _o10 in t) {\n          var _l8 = e.getPositions(_o10);\n          var _iterator54 = _createForOfIteratorHelper(_l8),\n            _step54;\n          try {\n            for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {\n              var _e67 = _step54.value;\n              var _l9 = r.feature(_e67.index);\n              for (var _r71 in this.binders) {\n                var _u8 = this.binders[_r71];\n                if ((_u8 instanceof SourceExpressionBinder || _u8 instanceof CompositeExpressionBinder || _u8 instanceof PatternCompositeBinder) && !0 === _u8.expression.isStateDependent) {\n                  var _c5 = n.paint.get(_r71);\n                  _u8.expression = _c5.value, _u8.updatePaintArray(_e67.start, _e67.end, _l9, t[_o10], i, s), a = !0;\n                }\n              }\n            }\n          } catch (err) {\n            _iterator54.e(err);\n          } finally {\n            _iterator54.f();\n          }\n        }\n        return a;\n      }\n    }, {\n      key: \"defines\",\n      value: function defines() {\n        var t = [];\n        for (var _e68 in this.binders) {\n          var _r72 = this.binders[_e68];\n          (_r72 instanceof ConstantBinder || _r72 instanceof PatternConstantBinder) && t.push.apply(t, _toConsumableArray(_r72.uniformNames.map(function (t) {\n            return \"#define HAS_UNIFORM_\".concat(t);\n          })));\n        }\n        return t;\n      }\n    }, {\n      key: \"getBinderAttributes\",\n      value: function getBinderAttributes() {\n        var t = [];\n        for (var _e69 in this.binders) {\n          var _r73 = this.binders[_e69];\n          if (_r73 instanceof SourceExpressionBinder || _r73 instanceof CompositeExpressionBinder || _r73 instanceof PatternCompositeBinder) for (var _e70 = 0; _e70 < _r73.paintVertexAttributes.length; _e70++) t.push(_r73.paintVertexAttributes[_e70].name);\n        }\n        return t;\n      }\n    }, {\n      key: \"getBinderUniforms\",\n      value: function getBinderUniforms() {\n        var t = [];\n        for (var _e71 in this.binders) {\n          var _r74 = this.binders[_e71];\n          if (_r74 instanceof ConstantBinder || _r74 instanceof PatternConstantBinder || _r74 instanceof CompositeExpressionBinder) {\n            var _iterator55 = _createForOfIteratorHelper(_r74.uniformNames),\n              _step55;\n            try {\n              for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {\n                var _e72 = _step55.value;\n                t.push(_e72);\n              }\n            } catch (err) {\n              _iterator55.e(err);\n            } finally {\n              _iterator55.f();\n            }\n          }\n        }\n        return t;\n      }\n    }, {\n      key: \"getPaintVertexBuffers\",\n      value: function getPaintVertexBuffers() {\n        return this._buffers;\n      }\n    }, {\n      key: \"getUniforms\",\n      value: function getUniforms(t) {\n        var e = [];\n        for (var _r75 in this.binders) {\n          var _n48 = this.binders[_r75];\n          if (_n48 instanceof ConstantBinder || _n48 instanceof PatternConstantBinder || _n48 instanceof CompositeExpressionBinder) {\n            var _iterator56 = _createForOfIteratorHelper(_n48.uniformNames),\n              _step56;\n            try {\n              for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {\n                var _i50 = _step56.value;\n                e.push({\n                  name: _i50,\n                  property: _r75,\n                  binding: _n48.getBinding(t, _i50)\n                });\n              }\n            } catch (err) {\n              _iterator56.e(err);\n            } finally {\n              _iterator56.f();\n            }\n          }\n        }\n        return e;\n      }\n    }, {\n      key: \"setUniforms\",\n      value: function setUniforms(t, e, r, n, i) {\n        var _iterator57 = _createForOfIteratorHelper(r),\n          _step57;\n        try {\n          for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {\n            var _step57$value = _step57.value,\n              _e73 = _step57$value.name,\n              _s27 = _step57$value.property,\n              _a28 = _step57$value.binding;\n            this.binders[_s27].setUniform(t, _a28, i, n.get(_s27), _e73);\n          }\n        } catch (err) {\n          _iterator57.e(err);\n        } finally {\n          _iterator57.f();\n        }\n      }\n    }, {\n      key: \"updatePaintBuffers\",\n      value: function updatePaintBuffers() {\n        this._buffers = [];\n        for (var _t71 in this.binders) {\n          var _e74 = this.binders[_t71];\n          (_e74 instanceof SourceExpressionBinder || _e74 instanceof CompositeExpressionBinder || _e74 instanceof PatternCompositeBinder) && _e74.paintVertexBuffer && this._buffers.push(_e74.paintVertexBuffer);\n        }\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        for (var _e75 in this.binders) {\n          var _r76 = this.binders[_e75];\n          (_r76 instanceof SourceExpressionBinder || _r76 instanceof CompositeExpressionBinder || _r76 instanceof PatternCompositeBinder) && _r76.upload(t);\n        }\n        this.updatePaintBuffers();\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        for (var _t72 in this.binders) {\n          var _e76 = this.binders[_t72];\n          (_e76 instanceof SourceExpressionBinder || _e76 instanceof CompositeExpressionBinder || _e76 instanceof PatternCompositeBinder) && _e76.destroy();\n        }\n      }\n    }]);\n    return ProgramConfiguration;\n  }();\n  var ProgramConfigurationSet = /*#__PURE__*/function () {\n    function ProgramConfigurationSet(t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n        return !0;\n      };\n      _classCallCheck(this, ProgramConfigurationSet);\n      this.programConfigurations = {};\n      var _iterator58 = _createForOfIteratorHelper(t),\n        _step58;\n      try {\n        for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {\n          var _n49 = _step58.value;\n          this.programConfigurations[_n49.id] = new ProgramConfiguration(_n49, e, r);\n        }\n      } catch (err) {\n        _iterator58.e(err);\n      } finally {\n        _iterator58.f();\n      }\n      this.needsUpload = !1, this._featureMap = new FeaturePositionMap(), this._bufferOffset = 0;\n    }\n    _createClass(ProgramConfigurationSet, [{\n      key: \"populatePaintArrays\",\n      value: function populatePaintArrays(t, e, r, n, i, s, a) {\n        for (var _r77 in this.programConfigurations) this.programConfigurations[_r77].populatePaintArrays(t, e, n, i, s, a);\n        void 0 !== e.id && this._featureMap.add(e.id, r, this._bufferOffset, t), this._bufferOffset = t, this.needsUpload = !0;\n      }\n    }, {\n      key: \"updatePaintArrays\",\n      value: function updatePaintArrays(t, e, r, n, i) {\n        var _iterator59 = _createForOfIteratorHelper(r),\n          _step59;\n        try {\n          for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {\n            var _s28 = _step59.value;\n            this.needsUpload = this.programConfigurations[_s28.id].updatePaintArrays(t, this._featureMap, e, _s28, n, i) || this.needsUpload;\n          }\n        } catch (err) {\n          _iterator59.e(err);\n        } finally {\n          _iterator59.f();\n        }\n      }\n    }, {\n      key: \"get\",\n      value: function get(t) {\n        return this.programConfigurations[t];\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        if (this.needsUpload) {\n          for (var _e77 in this.programConfigurations) this.programConfigurations[_e77].upload(t);\n          this.needsUpload = !1;\n        }\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        for (var _t73 in this.programConfigurations) this.programConfigurations[_t73].destroy();\n      }\n    }]);\n    return ProgramConfigurationSet;\n  }();\n  var Vi = {\n    \"text-opacity\": [\"opacity\"],\n    \"icon-opacity\": [\"opacity\"],\n    \"text-color\": [\"fill_color\"],\n    \"icon-color\": [\"fill_color\"],\n    \"text-halo-color\": [\"halo_color\"],\n    \"icon-halo-color\": [\"halo_color\"],\n    \"text-halo-blur\": [\"halo_blur\"],\n    \"icon-halo-blur\": [\"halo_blur\"],\n    \"text-halo-width\": [\"halo_width\"],\n    \"icon-halo-width\": [\"halo_width\"],\n    \"line-gap-width\": [\"gapwidth\"],\n    \"line-pattern\": [\"pattern\", \"pixel_ratio\"],\n    \"fill-pattern\": [\"pattern\", \"pixel_ratio\"],\n    \"fill-extrusion-pattern\": [\"pattern\", \"pixel_ratio\"],\n    \"line-dasharray\": [\"dash\"]\n  };\n  function Fi(t, e) {\n    return Vi[t] || [t.replace(\"\".concat(e, \"-\"), \"\").replace(/-/g, \"_\")];\n  }\n  var Ri = {\n      \"line-pattern\": {\n        source: StructArrayLayout4ui1f12,\n        composite: StructArrayLayout4ui1f12\n      },\n      \"fill-pattern\": {\n        source: StructArrayLayout4ui1f12,\n        composite: StructArrayLayout4ui1f12\n      },\n      \"fill-extrusion-pattern\": {\n        source: StructArrayLayout4ui1f12,\n        composite: StructArrayLayout4ui1f12\n      },\n      \"line-dasharray\": {\n        source: StructArrayLayout4ui8,\n        composite: StructArrayLayout4ui8\n      }\n    },\n    ji = {\n      color: {\n        source: StructArrayLayout2f8,\n        composite: StructArrayLayout4f16\n      },\n      number: {\n        source: StructArrayLayout1f4,\n        composite: StructArrayLayout2f8\n      }\n    };\n  function Oi(t, e, r) {\n    var n = Ri[t];\n    return n && n[r] || ji[e][r];\n  }\n  Er(ConstantBinder, \"ConstantBinder\"), Er(PatternConstantBinder, \"PatternConstantBinder\"), Er(SourceExpressionBinder, \"SourceExpressionBinder\"), Er(PatternCompositeBinder, \"PatternCompositeBinder\"), Er(CompositeExpressionBinder, \"CompositeExpressionBinder\"), Er(ProgramConfiguration, \"ProgramConfiguration\", {\n    omit: [\"_buffers\"]\n  }), Er(ProgramConfigurationSet, \"ProgramConfigurationSet\");\n  var $i = \"-transition\";\n  var StyleLayer = /*#__PURE__*/function (_Evented) {\n    _inherits(StyleLayer, _Evented);\n    function StyleLayer(t, e) {\n      var _this23;\n      _classCallCheck(this, StyleLayer);\n      if (_this23 = _possibleConstructorReturn(this, _getPrototypeOf(StyleLayer).call(this)), _this23.id = t.id, _this23.type = t.type, _this23._featureFilter = {\n        filter: function filter() {\n          return !0;\n        },\n        needGeometry: !1,\n        needFeature: !1\n      }, _this23._filterCompiled = !1, \"custom\" !== t.type && (_this23.metadata = t.metadata, _this23.minzoom = t.minzoom, _this23.maxzoom = t.maxzoom, \"background\" !== t.type && \"sky\" !== t.type && (_this23.source = t.source, _this23.sourceLayer = t[\"source-layer\"], _this23.filter = t.filter), e.layout && (_this23._unevaluatedLayout = new Layout(e.layout)), e.paint)) {\n        _this23._transitionablePaint = new Transitionable(e.paint);\n        for (var _e78 in t.paint) _this23.setPaintProperty(_e78, t.paint[_e78], {\n          validate: !1\n        });\n        for (var _e79 in t.layout) _this23.setLayoutProperty(_e79, t.layout[_e79], {\n          validate: !1\n        });\n        _this23._transitioningPaint = _this23._transitionablePaint.untransitioned(), _this23.paint = new PossiblyEvaluated(e.paint);\n      }\n      return _possibleConstructorReturn(_this23);\n    }\n    _createClass(StyleLayer, [{\n      key: \"getLayoutProperty\",\n      value: function getLayoutProperty(t) {\n        return \"visibility\" === t ? this.visibility : this._unevaluatedLayout.getValue(t);\n      }\n    }, {\n      key: \"setLayoutProperty\",\n      value: function setLayoutProperty(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        null != e && this._validate(Sn, \"layers.\".concat(this.id, \".layout.\").concat(t), t, e, r) || (\"visibility\" !== t ? this._unevaluatedLayout.setValue(t, e) : this.visibility = e);\n      }\n    }, {\n      key: \"getPaintProperty\",\n      value: function getPaintProperty(t) {\n        return g(t, $i) ? this._transitionablePaint.getTransition(t.slice(0, -$i.length)) : this._transitionablePaint.getValue(t);\n      }\n    }, {\n      key: \"setPaintProperty\",\n      value: function setPaintProperty(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        if (null != e && this._validate(_n, \"layers.\".concat(this.id, \".paint.\").concat(t), t, e, r)) return !1;\n        if (g(t, $i)) return this._transitionablePaint.setTransition(t.slice(0, -$i.length), e || void 0), !1;\n        {\n          var _r78 = this._transitionablePaint._values[t],\n            _n50 = _r78.value.isDataDriven(),\n            _i51 = _r78.value;\n          this._transitionablePaint.setValue(t, e), this._handleSpecialPaintPropertyUpdate(t);\n          var _s29 = this._transitionablePaint._values[t].value,\n            _a29 = _s29.isDataDriven(),\n            _o11 = g(t, \"pattern\") || \"line-dasharray\" === t;\n          return _a29 || _n50 || _o11 || this._handleOverridablePaintPropertyUpdate(t, _i51, _s29);\n        }\n      }\n    }, {\n      key: \"_handleSpecialPaintPropertyUpdate\",\n      value: function _handleSpecialPaintPropertyUpdate(t) {}\n    }, {\n      key: \"getProgramIds\",\n      value: function getProgramIds() {\n        return null;\n      }\n    }, {\n      key: \"getProgramConfiguration\",\n      value: function getProgramConfiguration(t) {\n        return null;\n      }\n    }, {\n      key: \"_handleOverridablePaintPropertyUpdate\",\n      value: function _handleOverridablePaintPropertyUpdate(t, e, r) {\n        return !1;\n      }\n    }, {\n      key: \"isHidden\",\n      value: function isHidden(t) {\n        return !!(this.minzoom && t < this.minzoom) || !!(this.maxzoom && t >= this.maxzoom) || \"none\" === this.visibility;\n      }\n    }, {\n      key: \"updateTransitions\",\n      value: function updateTransitions(t) {\n        this._transitioningPaint = this._transitionablePaint.transitioned(t, this._transitioningPaint);\n      }\n    }, {\n      key: \"hasTransition\",\n      value: function hasTransition() {\n        return this._transitioningPaint.hasTransition();\n      }\n    }, {\n      key: \"recalculate\",\n      value: function recalculate(t, e) {\n        this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t, void 0, e)), this.paint = this._transitioningPaint.possiblyEvaluate(t, void 0, e);\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        var t = {\n          id: this.id,\n          type: this.type,\n          source: this.source,\n          \"source-layer\": this.sourceLayer,\n          metadata: this.metadata,\n          minzoom: this.minzoom,\n          maxzoom: this.maxzoom,\n          filter: this.filter,\n          layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(),\n          paint: this._transitionablePaint && this._transitionablePaint.serialize()\n        };\n        return this.visibility && (t.layout = t.layout || {}, t.layout.visibility = this.visibility), function (t, e, r) {\n          var n = {};\n          for (var _r79 in t) e.call(this, t[_r79], _r79, t) && (n[_r79] = t[_r79]);\n          return n;\n        }(t, function (t, e) {\n          return !(void 0 === t || \"layout\" === e && !Object.keys(t).length || \"paint\" === e && !Object.keys(t).length);\n        });\n      }\n    }, {\n      key: \"_validate\",\n      value: function _validate(t, e, r, n) {\n        var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n        return (!i || !1 !== i.validate) && function (t, e) {\n          var r = !1;\n          if (e && e.length) {\n            var _iterator60 = _createForOfIteratorHelper(e),\n              _step60;\n            try {\n              for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {\n                var _n51 = _step60.value;\n                t.fire(new ErrorEvent(new Error(_n51.message))), r = !0;\n              }\n            } catch (err) {\n              _iterator60.e(err);\n            } finally {\n              _iterator60.f();\n            }\n          }\n          return r;\n        }(this, t.call(wn, {\n          key: e,\n          layerType: this.type,\n          objectKey: r,\n          value: n,\n          styleSpec: Rr,\n          style: {\n            glyphs: !0,\n            sprite: !0\n          }\n        }));\n      }\n    }, {\n      key: \"is3D\",\n      value: function is3D() {\n        return !1;\n      }\n    }, {\n      key: \"isSky\",\n      value: function isSky() {\n        return !1;\n      }\n    }, {\n      key: \"isTileClipped\",\n      value: function isTileClipped() {\n        return !1;\n      }\n    }, {\n      key: \"hasOffscreenPass\",\n      value: function hasOffscreenPass() {\n        return !1;\n      }\n    }, {\n      key: \"resize\",\n      value: function resize() {}\n    }, {\n      key: \"isStateDependent\",\n      value: function isStateDependent() {\n        for (var _t74 in this.paint._values) {\n          var _e80 = this.paint.get(_t74);\n          if (_e80 instanceof PossiblyEvaluatedPropertyValue && Le(_e80.property.specification) && (\"source\" === _e80.value.kind || \"composite\" === _e80.value.kind) && _e80.value.isStateDependent) return !0;\n        }\n        return !1;\n      }\n    }, {\n      key: \"compileFilter\",\n      value: function compileFilter() {\n        this._filterCompiled || (this._featureFilter = Kr(this.filter), this._filterCompiled = !0);\n      }\n    }, {\n      key: \"invalidateCompiledFilter\",\n      value: function invalidateCompiledFilter() {\n        this._filterCompiled = !1;\n      }\n    }, {\n      key: \"dynamicFilter\",\n      value: function dynamicFilter() {\n        return this._featureFilter.dynamicFilter;\n      }\n    }, {\n      key: \"dynamicFilterNeedsFeature\",\n      value: function dynamicFilterNeedsFeature() {\n        return this._featureFilter.needFeature;\n      }\n    }]);\n    return StyleLayer;\n  }(Evented);\n  var Ui = _i([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }], 4),\n    qi = _i([{\n      name: \"a_pos_3\",\n      components: 3,\n      type: \"Int16\"\n    }, {\n      name: \"a_pos_normal_3\",\n      components: 3,\n      type: \"Int16\"\n    }]);\n  var SegmentVector = /*#__PURE__*/function () {\n    function SegmentVector() {\n      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      _classCallCheck(this, SegmentVector);\n      this.segments = t;\n    }\n    _createClass(SegmentVector, [{\n      key: \"prepareSegment\",\n      value: function prepareSegment(t, e, r, n) {\n        var i = this.segments[this.segments.length - 1];\n        return t > SegmentVector.MAX_VERTEX_ARRAY_LENGTH && w(\"Max vertices per segment is \".concat(SegmentVector.MAX_VERTEX_ARRAY_LENGTH, \": bucket requested \").concat(t)), (!i || i.vertexLength + t > SegmentVector.MAX_VERTEX_ARRAY_LENGTH || i.sortKey !== n) && (i = {\n          vertexOffset: e.length,\n          primitiveOffset: r.length,\n          vertexLength: 0,\n          primitiveLength: 0\n        }, void 0 !== n && (i.sortKey = n), this.segments.push(i)), i;\n      }\n    }, {\n      key: \"get\",\n      value: function get() {\n        return this.segments;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        var _iterator61 = _createForOfIteratorHelper(this.segments),\n          _step61;\n        try {\n          for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {\n            var _t75 = _step61.value;\n            for (var _e81 in _t75.vaos) _t75.vaos[_e81].destroy();\n          }\n        } catch (err) {\n          _iterator61.e(err);\n        } finally {\n          _iterator61.f();\n        }\n      }\n    }], [{\n      key: \"simpleSegment\",\n      value: function simpleSegment(t, e, r, n) {\n        return new SegmentVector([{\n          vertexOffset: t,\n          primitiveOffset: e,\n          vertexLength: r,\n          primitiveLength: n,\n          vaos: {},\n          sortKey: 0\n        }]);\n      }\n    }]);\n    return SegmentVector;\n  }();\n  SegmentVector.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, Er(SegmentVector, \"SegmentVector\");\n  var Ni = 8192;\n  var LngLatBounds = /*#__PURE__*/function () {\n    function LngLatBounds(t, e) {\n      _classCallCheck(this, LngLatBounds);\n      t && (e ? this.setSouthWest(t).setNorthEast(e) : 4 === t.length ? this.setSouthWest([t[0], t[1]]).setNorthEast([t[2], t[3]]) : this.setSouthWest(t[0]).setNorthEast(t[1]));\n    }\n    _createClass(LngLatBounds, [{\n      key: \"setNorthEast\",\n      value: function setNorthEast(t) {\n        return this._ne = t instanceof LngLat ? new LngLat(t.lng, t.lat) : LngLat.convert(t), this;\n      }\n    }, {\n      key: \"setSouthWest\",\n      value: function setSouthWest(t) {\n        return this._sw = t instanceof LngLat ? new LngLat(t.lng, t.lat) : LngLat.convert(t), this;\n      }\n    }, {\n      key: \"extend\",\n      value: function extend(t) {\n        var e = this._sw,\n          r = this._ne;\n        var n, i;\n        if (t instanceof LngLat) n = t, i = t;else {\n          if (!(t instanceof LngLatBounds)) return Array.isArray(t) ? 4 === t.length || t.every(Array.isArray) ? this.extend(LngLatBounds.convert(t)) : this.extend(LngLat.convert(t)) : \"object\" == typeof t && null !== t && t.hasOwnProperty(\"lat\") && (t.hasOwnProperty(\"lon\") || t.hasOwnProperty(\"lng\")) ? this.extend(LngLat.convert(t)) : this;\n          if (n = t._sw, i = t._ne, !n || !i) return this;\n        }\n        return e || r ? (e.lng = Math.min(n.lng, e.lng), e.lat = Math.min(n.lat, e.lat), r.lng = Math.max(i.lng, r.lng), r.lat = Math.max(i.lat, r.lat)) : (this._sw = new LngLat(n.lng, n.lat), this._ne = new LngLat(i.lng, i.lat)), this;\n      }\n    }, {\n      key: \"getCenter\",\n      value: function getCenter() {\n        return new LngLat((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);\n      }\n    }, {\n      key: \"getSouthWest\",\n      value: function getSouthWest() {\n        return this._sw;\n      }\n    }, {\n      key: \"getNorthEast\",\n      value: function getNorthEast() {\n        return this._ne;\n      }\n    }, {\n      key: \"getNorthWest\",\n      value: function getNorthWest() {\n        return new LngLat(this.getWest(), this.getNorth());\n      }\n    }, {\n      key: \"getSouthEast\",\n      value: function getSouthEast() {\n        return new LngLat(this.getEast(), this.getSouth());\n      }\n    }, {\n      key: \"getWest\",\n      value: function getWest() {\n        return this._sw.lng;\n      }\n    }, {\n      key: \"getSouth\",\n      value: function getSouth() {\n        return this._sw.lat;\n      }\n    }, {\n      key: \"getEast\",\n      value: function getEast() {\n        return this._ne.lng;\n      }\n    }, {\n      key: \"getNorth\",\n      value: function getNorth() {\n        return this._ne.lat;\n      }\n    }, {\n      key: \"toArray\",\n      value: function toArray() {\n        return [this._sw.toArray(), this._ne.toArray()];\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return \"LngLatBounds(\".concat(this._sw.toString(), \", \").concat(this._ne.toString(), \")\");\n      }\n    }, {\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return !(this._sw && this._ne);\n      }\n    }, {\n      key: \"contains\",\n      value: function contains(t) {\n        var _LngLat$convert = LngLat.convert(t),\n          e = _LngLat$convert.lng,\n          r = _LngLat$convert.lat;\n        var n = this._sw.lng <= e && e <= this._ne.lng;\n        return this._sw.lng > this._ne.lng && (n = this._sw.lng >= e && e >= this._ne.lng), this._sw.lat <= r && r <= this._ne.lat && n;\n      }\n    }], [{\n      key: \"convert\",\n      value: function convert(t) {\n        return !t || t instanceof LngLatBounds ? t : new LngLatBounds(t);\n      }\n    }]);\n    return LngLatBounds;\n  }();\n  var Gi = 1e-6,\n    Zi = \"undefined\" != typeof Float32Array ? Float32Array : Array;\n  function Xi(t) {\n    return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n  }\n  function Yi(t, e) {\n    var r = e[0],\n      n = e[1],\n      i = e[2],\n      s = e[3],\n      a = e[4],\n      o = e[5],\n      l = e[6],\n      u = e[7],\n      c = e[8],\n      h = e[9],\n      p = e[10],\n      d = e[11],\n      f = e[12],\n      y = e[13],\n      m = e[14],\n      g = e[15],\n      x = r * o - n * a,\n      v = r * l - i * a,\n      b = r * u - s * a,\n      w = n * l - i * o,\n      _ = n * u - s * o,\n      S = i * u - s * l,\n      A = c * y - h * f,\n      k = c * m - p * f,\n      I = c * g - d * f,\n      M = h * m - p * y,\n      P = h * g - d * y,\n      T = p * g - d * m,\n      C = x * T - v * P + b * M + w * I - _ * k + S * A;\n    return C ? (t[0] = (o * T - l * P + u * M) * (C = 1 / C), t[1] = (i * P - n * T - s * M) * C, t[2] = (y * S - m * _ + g * w) * C, t[3] = (p * _ - h * S - d * w) * C, t[4] = (l * I - a * T - u * k) * C, t[5] = (r * T - i * I + s * k) * C, t[6] = (m * b - f * S - g * v) * C, t[7] = (c * S - p * b + d * v) * C, t[8] = (a * P - o * I + u * A) * C, t[9] = (n * I - r * P - s * A) * C, t[10] = (f * _ - y * b + g * x) * C, t[11] = (h * b - c * _ - d * x) * C, t[12] = (o * k - a * M - l * A) * C, t[13] = (r * M - n * k + i * A) * C, t[14] = (y * v - f * w - m * x) * C, t[15] = (c * w - h * v + p * x) * C, t) : null;\n  }\n  function Wi(t, e, r) {\n    var n = e[0],\n      i = e[1],\n      s = e[2],\n      a = e[3],\n      o = e[4],\n      l = e[5],\n      u = e[6],\n      c = e[7],\n      h = e[8],\n      p = e[9],\n      d = e[10],\n      f = e[11],\n      y = e[12],\n      m = e[13],\n      g = e[14],\n      x = e[15],\n      v = r[0],\n      b = r[1],\n      w = r[2],\n      _ = r[3];\n    return t[0] = v * n + b * o + w * h + _ * y, t[1] = v * i + b * l + w * p + _ * m, t[2] = v * s + b * u + w * d + _ * g, t[3] = v * a + b * c + w * f + _ * x, t[4] = (v = r[4]) * n + (b = r[5]) * o + (w = r[6]) * h + (_ = r[7]) * y, t[5] = v * i + b * l + w * p + _ * m, t[6] = v * s + b * u + w * d + _ * g, t[7] = v * a + b * c + w * f + _ * x, t[8] = (v = r[8]) * n + (b = r[9]) * o + (w = r[10]) * h + (_ = r[11]) * y, t[9] = v * i + b * l + w * p + _ * m, t[10] = v * s + b * u + w * d + _ * g, t[11] = v * a + b * c + w * f + _ * x, t[12] = (v = r[12]) * n + (b = r[13]) * o + (w = r[14]) * h + (_ = r[15]) * y, t[13] = v * i + b * l + w * p + _ * m, t[14] = v * s + b * u + w * d + _ * g, t[15] = v * a + b * c + w * f + _ * x, t;\n  }\n  function Ji(t, e, r) {\n    var n,\n      i,\n      s,\n      a,\n      o,\n      l,\n      u,\n      c,\n      h,\n      p,\n      d,\n      f,\n      y = r[0],\n      m = r[1],\n      g = r[2];\n    return e === t ? (t[12] = e[0] * y + e[4] * m + e[8] * g + e[12], t[13] = e[1] * y + e[5] * m + e[9] * g + e[13], t[14] = e[2] * y + e[6] * m + e[10] * g + e[14], t[15] = e[3] * y + e[7] * m + e[11] * g + e[15]) : (i = e[1], s = e[2], a = e[3], o = e[4], l = e[5], u = e[6], c = e[7], h = e[8], p = e[9], d = e[10], f = e[11], t[0] = n = e[0], t[1] = i, t[2] = s, t[3] = a, t[4] = o, t[5] = l, t[6] = u, t[7] = c, t[8] = h, t[9] = p, t[10] = d, t[11] = f, t[12] = n * y + o * m + h * g + e[12], t[13] = i * y + l * m + p * g + e[13], t[14] = s * y + u * m + d * g + e[14], t[15] = a * y + c * m + f * g + e[15]), t;\n  }\n  function Ki(t, e, r) {\n    var n = r[0],\n      i = r[1],\n      s = r[2];\n    return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t[3] = e[3] * n, t[4] = e[4] * i, t[5] = e[5] * i, t[6] = e[6] * i, t[7] = e[7] * i, t[8] = e[8] * s, t[9] = e[9] * s, t[10] = e[10] * s, t[11] = e[11] * s, t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], t;\n  }\n  function Hi() {\n    var t = new Zi(3);\n    return Zi != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t;\n  }\n  function Qi(t) {\n    var e = new Zi(3);\n    return e[0] = t[0], e[1] = t[1], e[2] = t[2], e;\n  }\n  function ts(t) {\n    return Math.hypot(t[0], t[1], t[2]);\n  }\n  function es(t, e, r) {\n    var n = new Zi(3);\n    return n[0] = t, n[1] = e, n[2] = r, n;\n  }\n  function rs(t, e, r) {\n    return t[0] = e[0] + r[0], t[1] = e[1] + r[1], t[2] = e[2] + r[2], t;\n  }\n  function ns(t, e, r) {\n    return t[0] = Math.min(e[0], r[0]), t[1] = Math.min(e[1], r[1]), t[2] = Math.min(e[2], r[2]), t;\n  }\n  function is(t, e, r) {\n    return t[0] = Math.max(e[0], r[0]), t[1] = Math.max(e[1], r[1]), t[2] = Math.max(e[2], r[2]), t;\n  }\n  function ss(t, e, r) {\n    return t[0] = e[0] * r, t[1] = e[1] * r, t[2] = e[2] * r, t;\n  }\n  function as(t, e, r, n) {\n    return t[0] = e[0] + r[0] * n, t[1] = e[1] + r[1] * n, t[2] = e[2] + r[2] * n, t;\n  }\n  function os(t, e) {\n    var r = e[0],\n      n = e[1],\n      i = e[2],\n      s = r * r + n * n + i * i;\n    return s > 0 && (s = 1 / Math.sqrt(s)), t[0] = e[0] * s, t[1] = e[1] * s, t[2] = e[2] * s, t;\n  }\n  function ls(t, e) {\n    return t[0] * e[0] + t[1] * e[1] + t[2] * e[2];\n  }\n  function us(t, e, r) {\n    var n = e[0],\n      i = e[1],\n      s = e[2],\n      a = r[3] * n + r[7] * i + r[11] * s + r[15];\n    return t[0] = (r[0] * n + r[4] * i + r[8] * s + r[12]) / (a = a || 1), t[1] = (r[1] * n + r[5] * i + r[9] * s + r[13]) / a, t[2] = (r[2] * n + r[6] * i + r[10] * s + r[14]) / a, t;\n  }\n  Math.hypot || (Math.hypot = function () {\n    for (var t = 0, e = arguments.length; e--;) t += arguments[e] * arguments[e];\n    return Math.sqrt(t);\n  });\n  var cs,\n    hs = function hs(t, e, r) {\n      return t[0] = e[0] - r[0], t[1] = e[1] - r[1], t[2] = e[2] - r[2], t;\n    };\n  function ps(t, e, r) {\n    var n = e[0],\n      i = e[1],\n      s = e[2],\n      a = e[3];\n    return t[0] = r[0] * n + r[4] * i + r[8] * s + r[12] * a, t[1] = r[1] * n + r[5] * i + r[9] * s + r[13] * a, t[2] = r[2] * n + r[6] * i + r[10] * s + r[14] * a, t[3] = r[3] * n + r[7] * i + r[11] * s + r[15] * a, t;\n  }\n  function ds() {\n    var t = new Zi(4);\n    return Zi != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t[3] = 1, t;\n  }\n  Hi(), function () {\n    var t;\n    t = new Zi(4), Zi != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 0);\n  }(), Hi(), es(1, 0, 0), es(0, 1, 0), ds(), ds(), cs = new Zi(9), Zi != Float32Array && (cs[1] = 0, cs[2] = 0, cs[3] = 0, cs[5] = 0, cs[6] = 0, cs[7] = 0), cs[0] = 1, cs[4] = 1, cs[8] = 1, _i([{\n    type: \"Float32\",\n    name: \"a_globe_pos\",\n    components: 3\n  }, {\n    type: \"Float32\",\n    name: \"a_uv\",\n    components: 2\n  }]);\n  var fs = _i([{\n    name: \"a_pos_3\",\n    components: 3,\n    type: \"Int16\"\n  }]);\n  var ys = _i([{\n    name: \"a_pos\",\n    type: \"Int16\",\n    components: 2\n  }]);\n  var Ray = /*#__PURE__*/function () {\n    function Ray(t, e) {\n      _classCallCheck(this, Ray);\n      this.pos = t, this.dir = e;\n    }\n    _createClass(Ray, [{\n      key: \"intersectsPlane\",\n      value: function intersectsPlane(t, e, r) {\n        var n = ls(e, this.dir);\n        if (Math.abs(n) < 1e-6) return !1;\n        var i = ((t[0] - this.pos[0]) * e[0] + (t[1] - this.pos[1]) * e[1] + (t[2] - this.pos[2]) * e[2]) / n;\n        return r[0] = this.pos[0] + this.dir[0] * i, r[1] = this.pos[1] + this.dir[1] * i, r[2] = this.pos[2] + this.dir[2] * i, !0;\n      }\n    }, {\n      key: \"closestPointOnSphere\",\n      value: function closestPointOnSphere(t, e, r) {\n        if (function (t, e) {\n          var r = t[0],\n            n = t[1],\n            i = t[2],\n            s = e[0],\n            a = e[1],\n            o = e[2];\n          return Math.abs(r - s) <= Gi * Math.max(1, Math.abs(r), Math.abs(s)) && Math.abs(n - a) <= Gi * Math.max(1, Math.abs(n), Math.abs(a)) && Math.abs(i - o) <= Gi * Math.max(1, Math.abs(i), Math.abs(o));\n        }(this.pos, t) || 0 === e) return r[0] = r[1] = r[2] = 0, !1;\n        var _this$dir = _slicedToArray(this.dir, 3),\n          n = _this$dir[0],\n          i = _this$dir[1],\n          s = _this$dir[2],\n          a = this.pos[0] - t[0],\n          o = this.pos[1] - t[1],\n          l = this.pos[2] - t[2],\n          u = n * n + i * i + s * s,\n          c = 2 * (a * n + o * i + l * s),\n          h = c * c - 4 * u * (a * a + o * o + l * l - e * e);\n        if (h < 0) {\n          var _t76 = Math.max(-c / 2, 0),\n            _u9 = a + n * _t76,\n            _h3 = o + i * _t76,\n            _p = l + s * _t76,\n            _d = Math.hypot(_u9, _h3, _p);\n          return r[0] = _u9 * e / _d, r[1] = _h3 * e / _d, r[2] = _p * e / _d, !1;\n        }\n        {\n          var _t77 = (-c - Math.sqrt(h)) / (2 * u);\n          if (_t77 < 0) {\n            var _t78 = Math.hypot(a, o, l);\n            return r[0] = a * e / _t78, r[1] = o * e / _t78, r[2] = l * e / _t78, !1;\n          }\n          return r[0] = a + n * _t77, r[1] = o + i * _t77, r[2] = l + s * _t77, !0;\n        }\n      }\n    }]);\n    return Ray;\n  }();\n  var Aabb = /*#__PURE__*/function () {\n    _createClass(Aabb, null, [{\n      key: \"fromPoints\",\n      value: function fromPoints(t) {\n        var e = [1 / 0, 1 / 0, 1 / 0],\n          r = [-1 / 0, -1 / 0, -1 / 0];\n        var _iterator62 = _createForOfIteratorHelper(t),\n          _step62;\n        try {\n          for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {\n            var _n52 = _step62.value;\n            ns(e, e, _n52), is(r, r, _n52);\n          }\n        } catch (err) {\n          _iterator62.e(err);\n        } finally {\n          _iterator62.f();\n        }\n        return new Aabb(e, r);\n      }\n    }, {\n      key: \"applyTransform\",\n      value: function applyTransform(t, e) {\n        var r = t.getCorners();\n        for (var _t79 = 0; _t79 < r.length; ++_t79) us(r[_t79], r[_t79], e);\n        return Aabb.fromPoints(r);\n      }\n    }]);\n    function Aabb(t, e) {\n      _classCallCheck(this, Aabb);\n      this.min = t, this.max = e, this.center = ss([], rs([], this.min, this.max), .5);\n    }\n    _createClass(Aabb, [{\n      key: \"quadrant\",\n      value: function quadrant(t) {\n        var e = [t % 2 == 0, t < 2],\n          r = Qi(this.min),\n          n = Qi(this.max);\n        for (var _t80 = 0; _t80 < e.length; _t80++) r[_t80] = e[_t80] ? this.min[_t80] : this.center[_t80], n[_t80] = e[_t80] ? this.center[_t80] : this.max[_t80];\n        return n[2] = this.max[2], new Aabb(r, n);\n      }\n    }, {\n      key: \"distanceX\",\n      value: function distanceX(t) {\n        return Math.max(Math.min(this.max[0], t[0]), this.min[0]) - t[0];\n      }\n    }, {\n      key: \"distanceY\",\n      value: function distanceY(t) {\n        return Math.max(Math.min(this.max[1], t[1]), this.min[1]) - t[1];\n      }\n    }, {\n      key: \"distanceZ\",\n      value: function distanceZ(t) {\n        return Math.max(Math.min(this.max[2], t[2]), this.min[2]) - t[2];\n      }\n    }, {\n      key: \"getCorners\",\n      value: function getCorners() {\n        var t = this.min,\n          e = this.max;\n        return [[t[0], t[1], t[2]], [e[0], t[1], t[2]], [e[0], e[1], t[2]], [t[0], e[1], t[2]], [t[0], t[1], e[2]], [e[0], t[1], e[2]], [e[0], e[1], e[2]], [t[0], e[1], e[2]]];\n      }\n    }, {\n      key: \"intersects\",\n      value: function intersects(t) {\n        var e = this.getCorners();\n        var r = !0;\n        for (var _n53 = 0; _n53 < t.planes.length; _n53++) {\n          var _i52 = t.planes[_n53];\n          var _s30 = 0;\n          for (var _t81 = 0; _t81 < e.length; _t81++) _s30 += ls(_i52, e[_t81]) + _i52[3] >= 0;\n          if (0 === _s30) return 0;\n          _s30 !== e.length && (r = !1);\n        }\n        if (r) return 2;\n        for (var _e82 = 0; _e82 < 3; _e82++) {\n          var _r80 = Number.MAX_VALUE,\n            _n54 = -Number.MAX_VALUE;\n          for (var _i53 = 0; _i53 < t.points.length; _i53++) {\n            var _s31 = t.points[_i53][_e82] - this.min[_e82];\n            _r80 = Math.min(_r80, _s31), _n54 = Math.max(_n54, _s31);\n          }\n          if (_n54 < 0 || _r80 > this.max[_e82] - this.min[_e82]) return 0;\n        }\n        return 1;\n      }\n    }]);\n    return Aabb;\n  }();\n  var ms = Ni / Math.PI / 2,\n    gs = -ms,\n    xs = ms,\n    vs = [new Aabb([gs, gs, gs], [xs, xs, xs]), new Aabb([gs, gs, gs], [0, 0, xs]), new Aabb([0, gs, gs], [xs, 0, xs]), new Aabb([gs, 0, gs], [0, xs, xs]), new Aabb([0, 0, gs], [xs, xs, xs])];\n  function bs(t) {\n    return t * ms / zs;\n  }\n  function ws(t, e, r) {\n    var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n    var i = ss([], t._camera.position, t.worldSize),\n      s = [e, r, 1, 1];\n    ps(s, s, t.pixelMatrixInverse), function (t, e, r) {\n      t[0] = e[0] * r, t[1] = e[1] * r, t[2] = e[2] * r, t[3] = e[3] * r;\n    }(s, s, 1 / s[3]);\n    var a = os([], hs([], s, i)),\n      o = t.globeMatrix,\n      c = [o[12], o[13], o[14]],\n      h = hs([], c, i),\n      p = ts(h),\n      d = os([], h),\n      f = t.worldSize / (2 * Math.PI),\n      y = ls(d, a),\n      m = Math.asin(f / p);\n    if (m < Math.acos(y)) {\n      if (!n) return null;\n      var _t82 = [],\n        _e83 = [];\n      ss(_t82, a, p / y), os(_e83, hs(_e83, _t82, h)), os(a, rs(a, h, ss(a, _e83, Math.tan(m) * p)));\n    }\n    var g = [];\n    new Ray(i, a).closestPointOnSphere(c, f, g);\n    var x = os([], T(o, 0)),\n      v = os([], T(o, 1)),\n      b = os([], T(o, 2)),\n      w = ls(x, g),\n      _ = ls(v, g),\n      S = ls(b, g),\n      A = l(Math.asin(-_ / f));\n    var k = l(Math.atan2(w, S));\n    k = t.center.lng + function (t, e) {\n      var r = (e - t + 180) % 360 - 180;\n      return r < -180 ? r + 360 : r;\n    }(t.center.lng, k);\n    var I = Vs(k),\n      M = u(Fs(A), 0, 1);\n    return new MercatorCoordinate(I, M);\n  }\n  function _s(t) {\n    if (t.z <= 1) return vs[t.z + 2 * t.y + t.x];\n    var e = ks(As(t));\n    return Aabb.fromPoints(e);\n  }\n  function Ss(t, e, r) {\n    return ss(t, t, 1 - r), as(t, t, e, r);\n  }\n  function As(_ref113) {\n    var t = _ref113.x,\n      e = _ref113.y,\n      r = _ref113.z;\n    var n = 1 / (1 << r),\n      i = new LngLat(js(t * n), Os((e + 1) * n)),\n      s = new LngLat(js((t + 1) * n), Os(e * n));\n    return new LngLatBounds(i, s);\n  }\n  function ks(t) {\n    var e = o(t.getNorth()),\n      r = o(t.getSouth()),\n      n = Math.cos(e),\n      i = Math.cos(r),\n      s = Math.sin(e),\n      a = Math.sin(r),\n      l = t.getWest(),\n      u = t.getEast();\n    return [Is(i, a, l), Is(i, a, u), Is(n, s, u), Is(n, s, l)];\n  }\n  function Is(t, e, r) {\n    var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ms;\n    return r = o(r), [t * Math.sin(r) * n, -e * n, t * Math.cos(r) * n];\n  }\n  function Ms(t, e, r) {\n    return Is(Math.cos(o(t)), Math.sin(o(t)), e, r);\n  }\n  function Ps(t, e, r, n) {\n    var i = 1 << r.z,\n      s = (t / Ni + r.x) / i;\n    return Ms(Os((e / Ni + r.y) / i), js(s), n);\n  }\n  function Ts(_ref114) {\n    var t = _ref114.min,\n      e = _ref114.max;\n    return 16383 / Math.max(e[0] - t[0], e[1] - t[1], e[2] - t[2]);\n  }\n  var Cs = new Float64Array(16);\n  function Es(t) {\n    var e = Ts(t),\n      r = function (t, e) {\n        return t[0] = e[0], t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = e[1], t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = e[2], t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n      }(Cs, [e, e, e]);\n    return Ji(r, r, function (t, e) {\n      return t[0] = -e[0], t[1] = -e[1], t[2] = -e[2], t;\n    }([], t.min));\n  }\n  function Ds(t) {\n    return (e = u(((e = t) - 5) / 1, 0, 1)) * e * (3 - 2 * e);\n    var e;\n  }\n  var zs = 6371008.8,\n    Bs = 2 * Math.PI * zs;\n  var LngLat = /*#__PURE__*/function () {\n    function LngLat(t, e) {\n      _classCallCheck(this, LngLat);\n      if (isNaN(t) || isNaN(e)) throw new Error(\"Invalid LngLat object: (\".concat(t, \", \").concat(e, \")\"));\n      if (this.lng = +t, this.lat = +e, this.lat > 90 || this.lat < -90) throw new Error(\"Invalid LngLat latitude value: must be between -90 and 90\");\n    }\n    _createClass(LngLat, [{\n      key: \"wrap\",\n      value: function wrap() {\n        return new LngLat(c(this.lng, -180, 180), this.lat);\n      }\n    }, {\n      key: \"toArray\",\n      value: function toArray() {\n        return [this.lng, this.lat];\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return \"LngLat(\".concat(this.lng, \", \").concat(this.lat, \")\");\n      }\n    }, {\n      key: \"distanceTo\",\n      value: function distanceTo(t) {\n        var e = Math.PI / 180,\n          r = this.lat * e,\n          n = t.lat * e,\n          i = Math.sin(r) * Math.sin(n) + Math.cos(r) * Math.cos(n) * Math.cos((t.lng - this.lng) * e);\n        return zs * Math.acos(Math.min(i, 1));\n      }\n    }, {\n      key: \"toBounds\",\n      value: function toBounds() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var e = 360 * t / 40075017,\n          r = e / Math.cos(Math.PI / 180 * this.lat);\n        return new LngLatBounds(new LngLat(this.lng - r, this.lat - e), new LngLat(this.lng + r, this.lat + e));\n      }\n    }, {\n      key: \"toEcef\",\n      value: function toEcef(t) {\n        var e = bs(t);\n        return Ms(this.lat, this.lng, ms + e);\n      }\n    }], [{\n      key: \"convert\",\n      value: function convert(t) {\n        if (t instanceof LngLat) return t;\n        if (Array.isArray(t) && (2 === t.length || 3 === t.length)) return new LngLat(Number(t[0]), Number(t[1]));\n        if (!Array.isArray(t) && \"object\" == typeof t && null !== t) return new LngLat(Number(\"lng\" in t ? t.lng : t.lon), Number(t.lat));\n        throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\");\n      }\n    }]);\n    return LngLat;\n  }();\n  function Ls(t) {\n    return Bs * Math.cos(t * Math.PI / 180);\n  }\n  function Vs(t) {\n    return (180 + t) / 360;\n  }\n  function Fs(t) {\n    return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360))) / 360;\n  }\n  function Rs(t, e) {\n    return t / Ls(e);\n  }\n  function js(t) {\n    return 360 * t - 180;\n  }\n  function Os(t) {\n    return 360 / Math.PI * Math.atan(Math.exp((180 - 360 * t) * Math.PI / 180)) - 90;\n  }\n  var $s = 85.051129;\n  var MercatorCoordinate = /*#__PURE__*/function () {\n    function MercatorCoordinate(t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      _classCallCheck(this, MercatorCoordinate);\n      this.x = +t, this.y = +e, this.z = +r;\n    }\n    _createClass(MercatorCoordinate, [{\n      key: \"toLngLat\",\n      value: function toLngLat() {\n        return new LngLat(js(this.x), Os(this.y));\n      }\n    }, {\n      key: \"toAltitude\",\n      value: function toAltitude() {\n        return this.z * Ls(Os(this.y));\n      }\n    }, {\n      key: \"meterInMercatorCoordinateUnits\",\n      value: function meterInMercatorCoordinateUnits() {\n        return 1 / Bs * (t = Os(this.y), 1 / Math.cos(t * Math.PI / 180));\n        var t;\n      }\n    }], [{\n      key: \"fromLngLat\",\n      value: function fromLngLat(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var r = LngLat.convert(t);\n        return new MercatorCoordinate(Vs(r.lng), Fs(r.lat), Rs(e, r.lat));\n      }\n    }]);\n    return MercatorCoordinate;\n  }();\n  function Us(t, e, n, i, s, a, o, l, u) {\n    var c = (e + i) / 2,\n      h = (n + s) / 2,\n      p = new r(c, h);\n    l(p), function (t, e, r, n, i, s) {\n      var a = r - i,\n        o = n - s;\n      return Math.abs((n - e) * a - (r - t) * o) / Math.hypot(a, o);\n    }(p.x, p.y, a.x, a.y, o.x, o.y) >= u ? (Us(t, e, n, c, h, a, p, l, u), Us(t, c, h, i, s, p, o, l, u)) : t.push(o);\n  }\n  function qs(t, e, r) {\n    var n = t[0],\n      i = n.x,\n      s = n.y;\n    e(n);\n    var a = [n];\n    for (var _o12 = 1; _o12 < t.length; _o12++) {\n      var _l10 = t[_o12],\n        _u10 = _l10.x,\n        _c6 = _l10.y;\n      e(_l10), Us(a, i, s, _u10, _c6, n, _l10, e, r), i = _u10, s = _c6, n = _l10;\n    }\n    return a;\n  }\n  function Ns(t, e, r, n) {\n    if (n(e, r)) {\n      var _i54 = e.add(r)._mult(.5);\n      Ns(t, e, _i54, n), Ns(t, _i54, r, n);\n    } else t.push(r);\n  }\n  function Gs(t, e) {\n    var r = t[0];\n    var n = [r];\n    for (var _i55 = 1; _i55 < t.length; _i55++) {\n      var _s32 = t[_i55];\n      Ns(n, r, _s32, e), r = _s32;\n    }\n    return n;\n  }\n  var Zs = Math.pow(2, 14) - 1,\n    Xs = -Zs - 1;\n  function Ys(t, e) {\n    var r = Math.round(t.x * e),\n      n = Math.round(t.y * e);\n    return t.x = u(r, Xs, Zs), t.y = u(n, Xs, Zs), (r < t.x || r > t.x + 1 || n < t.y || n > t.y + 1) && w(\"Geometry exceeds allowed extent, reduce your vector tile buffer size\"), t;\n  }\n  function Ws(t, e, r) {\n    var n = t.loadGeometry(),\n      i = t.extent,\n      s = Ni / i;\n    if (e && r && r.projection.isReprojectedInTileSpace) {\n      var _s33 = 1 << e.z,\n        _a30 = r.scale,\n        _o13 = r.x,\n        _l11 = r.y,\n        _u11 = r.projection,\n        _c7 = function _c7(t) {\n          var r = js((e.x + t.x / i) / _s33),\n            n = Os((e.y + t.y / i) / _s33),\n            c = _u11.project(r, n);\n          t.x = (c.x * _a30 - _o13) * i, t.y = (c.y * _a30 - _l11) * i;\n        };\n      for (var _e84 = 0; _e84 < n.length; _e84++) if (1 !== t.type) n[_e84] = qs(n[_e84], _c7, 1);else {\n        var _t83 = [];\n        var _iterator63 = _createForOfIteratorHelper(n[_e84]),\n          _step63;\n        try {\n          for (_iterator63.s(); !(_step63 = _iterator63.n()).done;) {\n            var _r81 = _step63.value;\n            _r81.x < 0 || _r81.x >= i || _r81.y < 0 || _r81.y >= i || (_c7(_r81), _t83.push(_r81));\n          }\n        } catch (err) {\n          _iterator63.e(err);\n        } finally {\n          _iterator63.f();\n        }\n        n[_e84] = _t83;\n      }\n    }\n    var _iterator64 = _createForOfIteratorHelper(n),\n      _step64;\n    try {\n      for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {\n        var _t84 = _step64.value;\n        var _iterator65 = _createForOfIteratorHelper(_t84),\n          _step65;\n        try {\n          for (_iterator65.s(); !(_step65 = _iterator65.n()).done;) {\n            var _e85 = _step65.value;\n            Ys(_e85, s);\n          }\n        } catch (err) {\n          _iterator65.e(err);\n        } finally {\n          _iterator65.f();\n        }\n      }\n    } catch (err) {\n      _iterator64.e(err);\n    } finally {\n      _iterator64.f();\n    }\n    return n;\n  }\n  function Js(t, e) {\n    return {\n      type: t.type,\n      id: t.id,\n      properties: t.properties,\n      geometry: e ? Ws(t) : []\n    };\n  }\n  function Ks(t, e, r, n, i) {\n    t.emplaceBack(2 * e + (n + 1) / 2, 2 * r + (i + 1) / 2);\n  }\n  function Hs(t, e, r) {\n    var n = 16384;\n    t.emplaceBack(e.x, e.y, e.z, r[0] * n, r[1] * n, r[2] * n);\n  }\n  var CircleBucket = /*#__PURE__*/function () {\n    function CircleBucket(t) {\n      _classCallCheck(this, CircleBucket);\n      this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n        return t.id;\n      }), this.index = t.index, this.hasPattern = !1, this.projection = t.projection, this.layoutVertexArray = new StructArrayLayout2i4(), this.indexArray = new StructArrayLayout3ui6(), this.segments = new SegmentVector(), this.programConfigurations = new ProgramConfigurationSet(t.layers, t.zoom), this.stateDependentLayerIds = this.layers.filter(function (t) {\n        return t.isStateDependent();\n      }).map(function (t) {\n        return t.id;\n      });\n    }\n    _createClass(CircleBucket, [{\n      key: \"populate\",\n      value: function populate(t, e, r, n) {\n        var i = this.layers[0],\n          s = [];\n        var a = null;\n        \"circle\" === i.type && (a = i.layout.get(\"circle-sort-key\"));\n        var _iterator66 = _createForOfIteratorHelper(t),\n          _step66;\n        try {\n          for (_iterator66.s(); !(_step66 = _iterator66.n()).done;) {\n            var _step66$value = _step66.value,\n              _e86 = _step66$value.feature,\n              _i58 = _step66$value.id,\n              _o14 = _step66$value.index,\n              _l13 = _step66$value.sourceLayerIndex;\n            var _t85 = this.layers[0]._featureFilter.needGeometry,\n              _u12 = Js(_e86, _t85);\n            if (!this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom), _u12, r)) continue;\n            var _c8 = a ? a.evaluate(_u12, {}, r) : void 0,\n              _h4 = {\n                id: _i58,\n                properties: _e86.properties,\n                type: _e86.type,\n                sourceLayerIndex: _l13,\n                index: _o14,\n                geometry: _t85 ? _u12.geometry : Ws(_e86, r, n),\n                patterns: {},\n                sortKey: _c8\n              };\n            s.push(_h4);\n          }\n        } catch (err) {\n          _iterator66.e(err);\n        } finally {\n          _iterator66.f();\n        }\n        a && s.sort(function (t, e) {\n          return t.sortKey - e.sortKey;\n        });\n        var o = null;\n        \"globe\" === n.projection.name && (this.globeExtVertexArray = new StructArrayLayout6i12(), o = n.projection);\n        for (var _i56 = 0, _s34 = s; _i56 < _s34.length; _i56++) {\n          var _n55 = _s34[_i56];\n          var _i57 = _n55.geometry,\n            _s35 = _n55.index,\n            _a31 = _n55.sourceLayerIndex,\n            _l12 = t[_s35].feature;\n          this.addFeature(_n55, _i57, _s35, e.availableImages, r, o), e.featureIndex.insert(_l12, _i57, _s35, _a31, this.index);\n        }\n      }\n    }, {\n      key: \"update\",\n      value: function update(t, e, r, n) {\n        this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r, n);\n      }\n    }, {\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return 0 === this.layoutVertexArray.length;\n      }\n    }, {\n      key: \"uploadPending\",\n      value: function uploadPending() {\n        return !this.uploaded || this.programConfigurations.needsUpload;\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Ui.members), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.globeExtVertexArray && (this.globeExtVertexBuffer = t.createVertexBuffer(this.globeExtVertexArray, qi.members))), this.programConfigurations.upload(t), this.uploaded = !0;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.globeExtVertexBuffer && this.globeExtVertexBuffer.destroy());\n      }\n    }, {\n      key: \"addFeature\",\n      value: function addFeature(t, e, r, n, i, s) {\n        var _iterator67 = _createForOfIteratorHelper(e),\n          _step67;\n        try {\n          for (_iterator67.s(); !(_step67 = _iterator67.n()).done;) {\n            var _r82 = _step67.value;\n            var _iterator68 = _createForOfIteratorHelper(_r82),\n              _step68;\n            try {\n              for (_iterator68.s(); !(_step68 = _iterator68.n()).done;) {\n                var _e87 = _step68.value;\n                var _r83 = _e87.x,\n                  _n56 = _e87.y;\n                if (_r83 < 0 || _r83 >= Ni || _n56 < 0 || _n56 >= Ni) continue;\n                if (s) {\n                  var _t86 = s.projectTilePoint(_r83, _n56, i),\n                    _e88 = s.upVector(i, _r83, _n56),\n                    _a32 = this.globeExtVertexArray;\n                  Hs(_a32, _t86, _e88), Hs(_a32, _t86, _e88), Hs(_a32, _t86, _e88), Hs(_a32, _t86, _e88);\n                }\n                var _a33 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray, t.sortKey),\n                  _o15 = _a33.vertexLength;\n                Ks(this.layoutVertexArray, _r83, _n56, -1, -1), Ks(this.layoutVertexArray, _r83, _n56, 1, -1), Ks(this.layoutVertexArray, _r83, _n56, 1, 1), Ks(this.layoutVertexArray, _r83, _n56, -1, 1), this.indexArray.emplaceBack(_o15, _o15 + 1, _o15 + 2), this.indexArray.emplaceBack(_o15, _o15 + 2, _o15 + 3), _a33.vertexLength += 4, _a33.primitiveLength += 2;\n              }\n            } catch (err) {\n              _iterator68.e(err);\n            } finally {\n              _iterator68.f();\n            }\n          }\n        } catch (err) {\n          _iterator67.e(err);\n        } finally {\n          _iterator67.f();\n        }\n        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, {}, n, i);\n      }\n    }]);\n    return CircleBucket;\n  }();\n  function Qs(t, e) {\n    for (var _r84 = 0; _r84 < t.length; _r84++) if (la(e, t[_r84])) return !0;\n    for (var _r85 = 0; _r85 < e.length; _r85++) if (la(t, e[_r85])) return !0;\n    return !!na(t, e);\n  }\n  function ta(t, e, r) {\n    return !!la(t, e) || !!sa(e, t, r);\n  }\n  function ea(t, e) {\n    if (1 === t.length) return oa(e, t[0]);\n    for (var _r86 = 0; _r86 < e.length; _r86++) {\n      var _n57 = e[_r86];\n      for (var _e89 = 0; _e89 < _n57.length; _e89++) if (la(t, _n57[_e89])) return !0;\n    }\n    for (var _r87 = 0; _r87 < t.length; _r87++) if (oa(e, t[_r87])) return !0;\n    for (var _r88 = 0; _r88 < e.length; _r88++) if (na(t, e[_r88])) return !0;\n    return !1;\n  }\n  function ra(t, e, r) {\n    if (t.length > 1) {\n      if (na(t, e)) return !0;\n      for (var _n58 = 0; _n58 < e.length; _n58++) if (sa(e[_n58], t, r)) return !0;\n    }\n    for (var _n59 = 0; _n59 < t.length; _n59++) if (sa(t[_n59], e, r)) return !0;\n    return !1;\n  }\n  function na(t, e) {\n    if (0 === t.length || 0 === e.length) return !1;\n    for (var _r89 = 0; _r89 < t.length - 1; _r89++) {\n      var _n60 = t[_r89],\n        _i59 = t[_r89 + 1];\n      for (var _t87 = 0; _t87 < e.length - 1; _t87++) if (ia(_n60, _i59, e[_t87], e[_t87 + 1])) return !0;\n    }\n    return !1;\n  }\n  function ia(t, e, r, n) {\n    return _(t, r, n) !== _(e, r, n) && _(t, e, r) !== _(t, e, n);\n  }\n  function sa(t, e, r) {\n    var n = r * r;\n    if (1 === e.length) return t.distSqr(e[0]) < n;\n    for (var _r90 = 1; _r90 < e.length; _r90++) if (aa(t, e[_r90 - 1], e[_r90]) < n) return !0;\n    return !1;\n  }\n  function aa(t, e, r) {\n    var n = e.distSqr(r);\n    if (0 === n) return t.distSqr(e);\n    var i = ((t.x - e.x) * (r.x - e.x) + (t.y - e.y) * (r.y - e.y)) / n;\n    return t.distSqr(i < 0 ? e : i > 1 ? r : r.sub(e)._mult(i)._add(e));\n  }\n  function oa(t, e) {\n    var r,\n      n,\n      i,\n      s = !1;\n    for (var _a34 = 0; _a34 < t.length; _a34++) {\n      r = t[_a34];\n      for (var _t88 = 0, _a35 = r.length - 1; _t88 < r.length; _a35 = _t88++) n = r[_t88], i = r[_a35], n.y > e.y != i.y > e.y && e.x < (i.x - n.x) * (e.y - n.y) / (i.y - n.y) + n.x && (s = !s);\n    }\n    return s;\n  }\n  function la(t, e) {\n    var r = !1;\n    for (var _n61 = 0, _i60 = t.length - 1; _n61 < t.length; _i60 = _n61++) {\n      var _s36 = t[_n61],\n        _a36 = t[_i60];\n      _s36.y > e.y != _a36.y > e.y && e.x < (_a36.x - _s36.x) * (e.y - _s36.y) / (_a36.y - _s36.y) + _s36.x && (r = !r);\n    }\n    return r;\n  }\n  function ua(t, e, r) {\n    var n = r[0],\n      i = r[2];\n    if (t.x < n.x && e.x < n.x || t.x > i.x && e.x > i.x || t.y < n.y && e.y < n.y || t.y > i.y && e.y > i.y) return !1;\n    var s = _(t, e, r[0]);\n    return s !== _(t, e, r[1]) || s !== _(t, e, r[2]) || s !== _(t, e, r[3]);\n  }\n  function ca(t, e, r) {\n    var n = e.paint.get(t).value;\n    return \"constant\" === n.kind ? n.value : r.programConfigurations.get(e.id).getMaxValue(t);\n  }\n  function ha(t) {\n    return Math.sqrt(t[0] * t[0] + t[1] * t[1]);\n  }\n  function pa(t, e, n, i, s) {\n    if (!e[0] && !e[1]) return t;\n    var a = r.convert(e)._mult(s);\n    \"viewport\" === n && a._rotate(-i);\n    var o = [];\n    for (var _e90 = 0; _e90 < t.length; _e90++) o.push(t[_e90].sub(a));\n    return o;\n  }\n  function da(t, e, n, i) {\n    var s = r.convert(t)._mult(i);\n    return \"viewport\" === e && s._rotate(-n), s;\n  }\n  Er(CircleBucket, \"CircleBucket\", {\n    omit: [\"layers\"]\n  });\n  var fa = new Properties({\n    \"circle-sort-key\": new DataDrivenProperty(Rr.layout_circle[\"circle-sort-key\"])\n  });\n  var ya = {\n    paint: new Properties({\n      \"circle-radius\": new DataDrivenProperty(Rr.paint_circle[\"circle-radius\"]),\n      \"circle-color\": new DataDrivenProperty(Rr.paint_circle[\"circle-color\"]),\n      \"circle-blur\": new DataDrivenProperty(Rr.paint_circle[\"circle-blur\"]),\n      \"circle-opacity\": new DataDrivenProperty(Rr.paint_circle[\"circle-opacity\"]),\n      \"circle-translate\": new DataConstantProperty(Rr.paint_circle[\"circle-translate\"]),\n      \"circle-translate-anchor\": new DataConstantProperty(Rr.paint_circle[\"circle-translate-anchor\"]),\n      \"circle-pitch-scale\": new DataConstantProperty(Rr.paint_circle[\"circle-pitch-scale\"]),\n      \"circle-pitch-alignment\": new DataConstantProperty(Rr.paint_circle[\"circle-pitch-alignment\"]),\n      \"circle-stroke-width\": new DataDrivenProperty(Rr.paint_circle[\"circle-stroke-width\"]),\n      \"circle-stroke-color\": new DataDrivenProperty(Rr.paint_circle[\"circle-stroke-color\"]),\n      \"circle-stroke-opacity\": new DataDrivenProperty(Rr.paint_circle[\"circle-stroke-opacity\"])\n    }),\n    layout: fa\n  };\n  function ma(t, e, r, n, i, s, a, o, l) {\n    if (s && t.queryGeometry.isAboveHorizon) return !1;\n    s && (l *= t.pixelToTileUnitsFactor);\n    var u = t.tileID.canonical,\n      c = r.projection.upVectorScale(u, r.center.lat, r.worldSize).metersToTile;\n    var _iterator69 = _createForOfIteratorHelper(e),\n      _step69;\n    try {\n      for (_iterator69.s(); !(_step69 = _iterator69.n()).done;) {\n        var _h5 = _step69.value;\n        var _iterator70 = _createForOfIteratorHelper(_h5),\n          _step70;\n        try {\n          var _loop2 = function _loop2() {\n            var e = _step70.value;\n            var h = e.add(o),\n              p = i && r.elevation ? r.elevation.exaggeration() * i.getElevationAt(h.x, h.y, !0) : 0,\n              d = r.projection.projectTilePoint(h.x, h.y, u);\n            if (p > 0) {\n              var _t89 = r.projection.upVector(u, h.x, h.y);\n              d.x += _t89[0] * c * p, d.y += _t89[1] * c * p, d.z += _t89[2] * c * p;\n            }\n            var f = s ? h : ga(d.x, d.y, d.z, n),\n              y = s ? t.tilespaceRays.map(function (t) {\n                return ba(t, p);\n              }) : t.queryGeometry.screenGeometry,\n              m = ps([], [d.x, d.y, d.z, 1], n);\n            if (!a && s ? l *= m[3] / r.cameraToCenterDistance : a && !s && (l *= r.cameraToCenterDistance / m[3]), s) {\n              var _t90 = Os((e.y / Ni + u.y) / (1 << u.z));\n              l /= r.projection.pixelsPerMeter(_t90, 1) / Rs(1, _t90);\n            }\n            if (ta(y, f, l)) return {\n              v: !0\n            };\n          };\n          for (_iterator70.s(); !(_step70 = _iterator70.n()).done;) {\n            var _ret = _loop2();\n            if (typeof _ret === \"object\") return _ret.v;\n          }\n        } catch (err) {\n          _iterator70.e(err);\n        } finally {\n          _iterator70.f();\n        }\n      }\n    } catch (err) {\n      _iterator69.e(err);\n    } finally {\n      _iterator69.f();\n    }\n    return !1;\n  }\n  function ga(t, e, n, i) {\n    var s = ps([], [t, e, n, 1], i);\n    return new r(s[0] / s[3], s[1] / s[3]);\n  }\n  var xa = es(0, 0, 0),\n    va = es(0, 0, 1);\n  function ba(t, e) {\n    var n = Hi();\n    return xa[2] = e, t.intersectsPlane(xa, va, n), new r(n[0], n[1]);\n  }\n  var HeatmapBucket = /*#__PURE__*/function (_CircleBucket) {\n    _inherits(HeatmapBucket, _CircleBucket);\n    function HeatmapBucket() {\n      _classCallCheck(this, HeatmapBucket);\n      return _possibleConstructorReturn(this, _getPrototypeOf(HeatmapBucket).apply(this, arguments));\n    }\n    return HeatmapBucket;\n  }(CircleBucket);\n  function wa(t, _ref115, n, i) {\n    var e = _ref115.width,\n      r = _ref115.height;\n    if (i) {\n      if (i instanceof Uint8ClampedArray) i = new Uint8Array(i.buffer);else if (i.length !== e * r * n) throw new RangeError(\"mismatched image size\");\n    } else i = new Uint8Array(e * r * n);\n    return t.width = e, t.height = r, t.data = i, t;\n  }\n  function _a(t, e, r) {\n    var n = e.width,\n      i = e.height;\n    n === t.width && i === t.height || (Sa(t, e, {\n      x: 0,\n      y: 0\n    }, {\n      x: 0,\n      y: 0\n    }, {\n      width: Math.min(t.width, n),\n      height: Math.min(t.height, i)\n    }, r), t.width = n, t.height = i, t.data = e.data);\n  }\n  function Sa(t, e, r, n, i, s) {\n    if (0 === i.width || 0 === i.height) return e;\n    if (i.width > t.width || i.height > t.height || r.x > t.width - i.width || r.y > t.height - i.height) throw new RangeError(\"out of range source coordinates for image copy\");\n    if (i.width > e.width || i.height > e.height || n.x > e.width - i.width || n.y > e.height - i.height) throw new RangeError(\"out of range destination coordinates for image copy\");\n    var a = t.data,\n      o = e.data;\n    for (var _l14 = 0; _l14 < i.height; _l14++) {\n      var _u13 = ((r.y + _l14) * t.width + r.x) * s,\n        _c9 = ((n.y + _l14) * e.width + n.x) * s;\n      for (var _t91 = 0; _t91 < i.width * s; _t91++) o[_c9 + _t91] = a[_u13 + _t91];\n    }\n    return e;\n  }\n  Er(HeatmapBucket, \"HeatmapBucket\", {\n    omit: [\"layers\"]\n  });\n  var AlphaImage = /*#__PURE__*/function () {\n    function AlphaImage(t, e) {\n      _classCallCheck(this, AlphaImage);\n      wa(this, t, 1, e);\n    }\n    _createClass(AlphaImage, [{\n      key: \"resize\",\n      value: function resize(t) {\n        _a(this, new AlphaImage(t), 1);\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        return new AlphaImage({\n          width: this.width,\n          height: this.height\n        }, new Uint8Array(this.data));\n      }\n    }], [{\n      key: \"copy\",\n      value: function copy(t, e, r, n, i) {\n        Sa(t, e, r, n, i, 1);\n      }\n    }]);\n    return AlphaImage;\n  }();\n  var RGBAImage = /*#__PURE__*/function () {\n    function RGBAImage(t, e) {\n      _classCallCheck(this, RGBAImage);\n      wa(this, t, 4, e);\n    }\n    _createClass(RGBAImage, [{\n      key: \"resize\",\n      value: function resize(t) {\n        _a(this, new RGBAImage(t), 4);\n      }\n    }, {\n      key: \"replace\",\n      value: function replace(t, e) {\n        e ? this.data.set(t) : this.data = t instanceof Uint8ClampedArray ? new Uint8Array(t.buffer) : t;\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        return new RGBAImage({\n          width: this.width,\n          height: this.height\n        }, new Uint8Array(this.data));\n      }\n    }], [{\n      key: \"copy\",\n      value: function copy(t, e, r, n, i) {\n        Sa(t, e, r, n, i, 4);\n      }\n    }]);\n    return RGBAImage;\n  }();\n  Er(AlphaImage, \"AlphaImage\"), Er(RGBAImage, \"RGBAImage\");\n  var Aa = {\n    paint: new Properties({\n      \"heatmap-radius\": new DataDrivenProperty(Rr.paint_heatmap[\"heatmap-radius\"]),\n      \"heatmap-weight\": new DataDrivenProperty(Rr.paint_heatmap[\"heatmap-weight\"]),\n      \"heatmap-intensity\": new DataConstantProperty(Rr.paint_heatmap[\"heatmap-intensity\"]),\n      \"heatmap-color\": new ColorRampProperty(Rr.paint_heatmap[\"heatmap-color\"]),\n      \"heatmap-opacity\": new DataConstantProperty(Rr.paint_heatmap[\"heatmap-opacity\"])\n    })\n  };\n  function ka(t) {\n    var e = {},\n      r = t.resolution || 256,\n      n = t.clips ? t.clips.length : 1,\n      i = t.image || new RGBAImage({\n        width: r,\n        height: n\n      }),\n      s = function s(r, n, _s37) {\n        e[t.evaluationKey] = _s37;\n        var a = t.expression.evaluate(e);\n        i.data[r + n + 0] = Math.floor(255 * a.r / a.a), i.data[r + n + 1] = Math.floor(255 * a.g / a.a), i.data[r + n + 2] = Math.floor(255 * a.b / a.a), i.data[r + n + 3] = Math.floor(255 * a.a);\n      };\n    if (t.clips) for (var _e91 = 0, _i61 = 0; _e91 < n; ++_e91, _i61 += 4 * r) for (var _n62 = 0, _a37 = 0; _n62 < r; _n62++, _a37 += 4) {\n      var _o16 = _n62 / (r - 1),\n        _t$clips$_e = t.clips[_e91],\n        _l15 = _t$clips$_e.start,\n        _u14 = _t$clips$_e.end;\n      s(_i61, _a37, _l15 * (1 - _o16) + _u14 * _o16);\n    } else for (var _t92 = 0, _e92 = 0; _t92 < r; _t92++, _e92 += 4) s(0, _e92, _t92 / (r - 1));\n    return i;\n  }\n  var Ia = {\n    paint: new Properties({\n      \"hillshade-illumination-direction\": new DataConstantProperty(Rr.paint_hillshade[\"hillshade-illumination-direction\"]),\n      \"hillshade-illumination-anchor\": new DataConstantProperty(Rr.paint_hillshade[\"hillshade-illumination-anchor\"]),\n      \"hillshade-exaggeration\": new DataConstantProperty(Rr.paint_hillshade[\"hillshade-exaggeration\"]),\n      \"hillshade-shadow-color\": new DataConstantProperty(Rr.paint_hillshade[\"hillshade-shadow-color\"]),\n      \"hillshade-highlight-color\": new DataConstantProperty(Rr.paint_hillshade[\"hillshade-highlight-color\"]),\n      \"hillshade-accent-color\": new DataConstantProperty(Rr.paint_hillshade[\"hillshade-accent-color\"])\n    })\n  };\n  var Ma = _i([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }], 4),\n    Pa = Ma.members;\n  var Ta = {};\n  function Ca(t, e, r) {\n    r = r || 2;\n    var n,\n      i,\n      s,\n      a,\n      o,\n      l,\n      u,\n      c = e && e.length,\n      h = c ? e[0] * r : t.length,\n      p = Ea(t, 0, h, r, !0),\n      d = [];\n    if (!p || p.next === p.prev) return d;\n    if (c && (p = function (t, e, r, n) {\n      var i,\n        s,\n        a,\n        o = [];\n      for (i = 0, s = e.length; i < s; i++) (a = Ea(t, e[i] * n, i < s - 1 ? e[i + 1] * n : t.length, n, !1)) === a.next && (a.steiner = !0), o.push(Ua(a));\n      for (o.sort(Ra), i = 0; i < o.length; i++) r = ja(o[i], r);\n      return r;\n    }(t, e, p, r)), t.length > 80 * r) {\n      n = s = t[0], i = a = t[1];\n      for (var f = r; f < h; f += r) (o = t[f]) < n && (n = o), (l = t[f + 1]) < i && (i = l), o > s && (s = o), l > a && (a = l);\n      u = 0 !== (u = Math.max(s - n, a - i)) ? 32767 / u : 0;\n    }\n    return za(p, d, r, n, i, u, 0), d;\n  }\n  function Ea(t, e, r, n, i) {\n    var s, a;\n    if (i === eo(t, e, r, n) > 0) for (s = e; s < r; s += n) a = Ha(s, t[s], t[s + 1], a);else for (s = r - n; s >= e; s -= n) a = Ha(s, t[s], t[s + 1], a);\n    return a && Za(a, a.next) && (Qa(a), a = a.next), a;\n  }\n  function Da(t, e) {\n    if (!t) return t;\n    e || (e = t);\n    var r,\n      n = t;\n    do {\n      if (r = !1, n.steiner || !Za(n, n.next) && 0 !== Ga(n.prev, n, n.next)) n = n.next;else {\n        if (Qa(n), (n = e = n.prev) === n.next) break;\n        r = !0;\n      }\n    } while (r || n !== e);\n    return e;\n  }\n  function za(t, e, r, n, i, s, a) {\n    if (t) {\n      !a && s && function (t, e, r, n) {\n        var i = t;\n        do {\n          0 === i.z && (i.z = $a(i.x, i.y, e, r, n)), i.prevZ = i.prev, i.nextZ = i.next, i = i.next;\n        } while (i !== t);\n        i.prevZ.nextZ = null, i.prevZ = null, function (t) {\n          var e,\n            r,\n            n,\n            i,\n            s,\n            a,\n            o,\n            l,\n            u = 1;\n          do {\n            for (r = t, t = null, s = null, a = 0; r;) {\n              for (a++, n = r, o = 0, e = 0; e < u && (o++, n = n.nextZ); e++);\n              for (l = u; o > 0 || l > 0 && n;) 0 !== o && (0 === l || !n || r.z <= n.z) ? (i = r, r = r.nextZ, o--) : (i = n, n = n.nextZ, l--), s ? s.nextZ = i : t = i, i.prevZ = s, s = i;\n              r = n;\n            }\n            s.nextZ = null, u *= 2;\n          } while (a > 1);\n        }(i);\n      }(t, n, i, s);\n      for (var o, l, u = t; t.prev !== t.next;) if (o = t.prev, l = t.next, s ? La(t, n, i, s) : Ba(t)) e.push(o.i / r | 0), e.push(t.i / r | 0), e.push(l.i / r | 0), Qa(t), t = l.next, u = l.next;else if ((t = l) === u) {\n        a ? 1 === a ? za(t = Va(Da(t), e, r), e, r, n, i, s, 2) : 2 === a && Fa(t, e, r, n, i, s) : za(Da(t), e, r, n, i, s, 1);\n        break;\n      }\n    }\n  }\n  function Ba(t) {\n    var e = t.prev,\n      r = t,\n      n = t.next;\n    if (Ga(e, r, n) >= 0) return !1;\n    for (var i = e.x, s = r.x, a = n.x, o = e.y, l = r.y, u = n.y, c = i < s ? i < a ? i : a : s < a ? s : a, h = o < l ? o < u ? o : u : l < u ? l : u, p = i > s ? i > a ? i : a : s > a ? s : a, d = o > l ? o > u ? o : u : l > u ? l : u, f = n.next; f !== e;) {\n      if (f.x >= c && f.x <= p && f.y >= h && f.y <= d && qa(i, o, s, l, a, u, f.x, f.y) && Ga(f.prev, f, f.next) >= 0) return !1;\n      f = f.next;\n    }\n    return !0;\n  }\n  function La(t, e, r, n) {\n    var i = t.prev,\n      s = t,\n      a = t.next;\n    if (Ga(i, s, a) >= 0) return !1;\n    for (var o = i.x, l = s.x, u = a.x, c = i.y, h = s.y, p = a.y, d = o < l ? o < u ? o : u : l < u ? l : u, f = c < h ? c < p ? c : p : h < p ? h : p, y = o > l ? o > u ? o : u : l > u ? l : u, m = c > h ? c > p ? c : p : h > p ? h : p, g = $a(d, f, e, r, n), x = $a(y, m, e, r, n), v = t.prevZ, b = t.nextZ; v && v.z >= g && b && b.z <= x;) {\n      if (v.x >= d && v.x <= y && v.y >= f && v.y <= m && v !== i && v !== a && qa(o, c, l, h, u, p, v.x, v.y) && Ga(v.prev, v, v.next) >= 0) return !1;\n      if (v = v.prevZ, b.x >= d && b.x <= y && b.y >= f && b.y <= m && b !== i && b !== a && qa(o, c, l, h, u, p, b.x, b.y) && Ga(b.prev, b, b.next) >= 0) return !1;\n      b = b.nextZ;\n    }\n    for (; v && v.z >= g;) {\n      if (v.x >= d && v.x <= y && v.y >= f && v.y <= m && v !== i && v !== a && qa(o, c, l, h, u, p, v.x, v.y) && Ga(v.prev, v, v.next) >= 0) return !1;\n      v = v.prevZ;\n    }\n    for (; b && b.z <= x;) {\n      if (b.x >= d && b.x <= y && b.y >= f && b.y <= m && b !== i && b !== a && qa(o, c, l, h, u, p, b.x, b.y) && Ga(b.prev, b, b.next) >= 0) return !1;\n      b = b.nextZ;\n    }\n    return !0;\n  }\n  function Va(t, e, r) {\n    var n = t;\n    do {\n      var i = n.prev,\n        s = n.next.next;\n      !Za(i, s) && Xa(i, n, n.next, s) && Ja(i, s) && Ja(s, i) && (e.push(i.i / r | 0), e.push(n.i / r | 0), e.push(s.i / r | 0), Qa(n), Qa(n.next), n = t = s), n = n.next;\n    } while (n !== t);\n    return Da(n);\n  }\n  function Fa(t, e, r, n, i, s) {\n    var a = t;\n    do {\n      for (var o = a.next.next; o !== a.prev;) {\n        if (a.i !== o.i && Na(a, o)) {\n          var l = Ka(a, o);\n          return a = Da(a, a.next), l = Da(l, l.next), za(a, e, r, n, i, s, 0), void za(l, e, r, n, i, s, 0);\n        }\n        o = o.next;\n      }\n      a = a.next;\n    } while (a !== t);\n  }\n  function Ra(t, e) {\n    return t.x - e.x;\n  }\n  function ja(t, e) {\n    var r = function (t, e) {\n      var r,\n        n = e,\n        i = t.x,\n        s = t.y,\n        a = -1 / 0;\n      do {\n        if (s <= n.y && s >= n.next.y && n.next.y !== n.y) {\n          var o = n.x + (s - n.y) * (n.next.x - n.x) / (n.next.y - n.y);\n          if (o <= i && o > a && (a = o, r = n.x < n.next.x ? n : n.next, o === i)) return r;\n        }\n        n = n.next;\n      } while (n !== e);\n      if (!r) return null;\n      var l,\n        u = r,\n        c = r.x,\n        h = r.y,\n        p = 1 / 0;\n      n = r;\n      do {\n        i >= n.x && n.x >= c && i !== n.x && qa(s < h ? i : a, s, c, h, s < h ? a : i, s, n.x, n.y) && (l = Math.abs(s - n.y) / (i - n.x), Ja(n, t) && (l < p || l === p && (n.x > r.x || n.x === r.x && Oa(r, n))) && (r = n, p = l)), n = n.next;\n      } while (n !== u);\n      return r;\n    }(t, e);\n    if (!r) return e;\n    var n = Ka(r, t);\n    return Da(n, n.next), Da(r, r.next);\n  }\n  function Oa(t, e) {\n    return Ga(t.prev, t, e.prev) < 0 && Ga(e.next, t, t.next) < 0;\n  }\n  function $a(t, e, r, n, i) {\n    return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = (t - r) * i | 0) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = (e - n) * i | 0) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1;\n  }\n  function Ua(t) {\n    var e = t,\n      r = t;\n    do {\n      (e.x < r.x || e.x === r.x && e.y < r.y) && (r = e), e = e.next;\n    } while (e !== t);\n    return r;\n  }\n  function qa(t, e, r, n, i, s, a, o) {\n    return (i - a) * (e - o) >= (t - a) * (s - o) && (t - a) * (n - o) >= (r - a) * (e - o) && (r - a) * (s - o) >= (i - a) * (n - o);\n  }\n  function Na(t, e) {\n    return t.next.i !== e.i && t.prev.i !== e.i && !function (t, e) {\n      var r = t;\n      do {\n        if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && Xa(r, r.next, t, e)) return !0;\n        r = r.next;\n      } while (r !== t);\n      return !1;\n    }(t, e) && (Ja(t, e) && Ja(e, t) && function (t, e) {\n      var r = t,\n        n = !1,\n        i = (t.x + e.x) / 2,\n        s = (t.y + e.y) / 2;\n      do {\n        r.y > s != r.next.y > s && r.next.y !== r.y && i < (r.next.x - r.x) * (s - r.y) / (r.next.y - r.y) + r.x && (n = !n), r = r.next;\n      } while (r !== t);\n      return n;\n    }(t, e) && (Ga(t.prev, t, e.prev) || Ga(t, e.prev, e)) || Za(t, e) && Ga(t.prev, t, t.next) > 0 && Ga(e.prev, e, e.next) > 0);\n  }\n  function Ga(t, e, r) {\n    return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y);\n  }\n  function Za(t, e) {\n    return t.x === e.x && t.y === e.y;\n  }\n  function Xa(t, e, r, n) {\n    var i = Wa(Ga(t, e, r)),\n      s = Wa(Ga(t, e, n)),\n      a = Wa(Ga(r, n, t)),\n      o = Wa(Ga(r, n, e));\n    return i !== s && a !== o || !(0 !== i || !Ya(t, r, e)) || !(0 !== s || !Ya(t, n, e)) || !(0 !== a || !Ya(r, t, n)) || !(0 !== o || !Ya(r, e, n));\n  }\n  function Ya(t, e, r) {\n    return e.x <= Math.max(t.x, r.x) && e.x >= Math.min(t.x, r.x) && e.y <= Math.max(t.y, r.y) && e.y >= Math.min(t.y, r.y);\n  }\n  function Wa(t) {\n    return t > 0 ? 1 : t < 0 ? -1 : 0;\n  }\n  function Ja(t, e) {\n    return Ga(t.prev, t, t.next) < 0 ? Ga(t, e, t.next) >= 0 && Ga(t, t.prev, e) >= 0 : Ga(t, e, t.prev) < 0 || Ga(t, t.next, e) < 0;\n  }\n  function Ka(t, e) {\n    var r = new to(t.i, t.x, t.y),\n      n = new to(e.i, e.x, e.y),\n      i = t.next,\n      s = e.prev;\n    return t.next = e, e.prev = t, r.next = i, i.prev = r, n.next = r, r.prev = n, s.next = n, n.prev = s, n;\n  }\n  function Ha(t, e, r, n) {\n    var i = new to(t, e, r);\n    return n ? (i.next = n.next, i.prev = n, n.next.prev = i, n.next = i) : (i.prev = i, i.next = i), i;\n  }\n  function Qa(t) {\n    t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ);\n  }\n  function to(t, e, r) {\n    this.i = t, this.x = e, this.y = r, this.prev = null, this.next = null, this.z = 0, this.prevZ = null, this.nextZ = null, this.steiner = !1;\n  }\n  function eo(t, e, r, n) {\n    for (var i = 0, s = e, a = r - n; s < r; s += n) i += (t[a] - t[s]) * (t[s + 1] + t[a + 1]), a = s;\n    return i;\n  }\n  function ro(t, e, r, n, i) {\n    no(t, e, r || 0, n || t.length - 1, i || so);\n  }\n  function no(t, e, r, n, i) {\n    for (; n > r;) {\n      if (n - r > 600) {\n        var s = n - r + 1,\n          a = e - r + 1,\n          o = Math.log(s),\n          l = .5 * Math.exp(2 * o / 3),\n          u = .5 * Math.sqrt(o * l * (s - l) / s) * (a - s / 2 < 0 ? -1 : 1);\n        no(t, e, Math.max(r, Math.floor(e - a * l / s + u)), Math.min(n, Math.floor(e + (s - a) * l / s + u)), i);\n      }\n      var c = t[e],\n        h = r,\n        p = n;\n      for (io(t, r, e), i(t[n], c) > 0 && io(t, r, n); h < p;) {\n        for (io(t, h, p), h++, p--; i(t[h], c) < 0;) h++;\n        for (; i(t[p], c) > 0;) p--;\n      }\n      0 === i(t[r], c) ? io(t, r, p) : io(t, ++p, n), p <= e && (r = p + 1), e <= p && (n = p - 1);\n    }\n  }\n  function io(t, e, r) {\n    var n = t[e];\n    t[e] = t[r], t[r] = n;\n  }\n  function so(t, e) {\n    return t < e ? -1 : t > e ? 1 : 0;\n  }\n  function ao(t, e) {\n    var r = t.length;\n    if (r <= 1) return [t];\n    var n = [];\n    var i, s;\n    for (var _e93 = 0; _e93 < r; _e93++) {\n      var _r91 = S(t[_e93]);\n      0 !== _r91 && (t[_e93].area = Math.abs(_r91), void 0 === s && (s = _r91 < 0), s === _r91 < 0 ? (i && n.push(i), i = [t[_e93]]) : i.push(t[_e93]));\n    }\n    if (i && n.push(i), e > 1) for (var _t93 = 0; _t93 < n.length; _t93++) n[_t93].length <= e || (ro(n[_t93], e, 1, n[_t93].length - 1, oo), n[_t93] = n[_t93].slice(0, e));\n    return n;\n  }\n  function oo(t, e) {\n    return e.area - t.area;\n  }\n  function lo(t, e, r) {\n    var n = r.patternDependencies;\n    var i = !1;\n    var _iterator71 = _createForOfIteratorHelper(e),\n      _step71;\n    try {\n      for (_iterator71.s(); !(_step71 = _iterator71.n()).done;) {\n        var _r92 = _step71.value;\n        var _e94 = _r92.paint.get(\"\".concat(t, \"-pattern\"));\n        _e94.isConstant() || (i = !0);\n        var _s38 = _e94.constantOr(null);\n        _s38 && (i = !0, n[_s38] = !0);\n      }\n    } catch (err) {\n      _iterator71.e(err);\n    } finally {\n      _iterator71.f();\n    }\n    return i;\n  }\n  function uo(t, e, r, n, i) {\n    var s = i.patternDependencies;\n    var _iterator72 = _createForOfIteratorHelper(e),\n      _step72;\n    try {\n      for (_iterator72.s(); !(_step72 = _iterator72.n()).done;) {\n        var _a38 = _step72.value;\n        var _e95 = _a38.paint.get(\"\".concat(t, \"-pattern\")).value;\n        if (\"constant\" !== _e95.kind) {\n          var _t94 = _e95.evaluate({\n            zoom: n\n          }, r, {}, i.availableImages);\n          _t94 = _t94 && _t94.name ? _t94.name : _t94, s[_t94] = !0, r.patterns[_a38.id] = _t94;\n        }\n      }\n    } catch (err) {\n      _iterator72.e(err);\n    } finally {\n      _iterator72.f();\n    }\n    return r;\n  }\n  ({\n    get exports() {\n      return Ta;\n    },\n    set exports(t) {\n      Ta = t;\n    }\n  }).exports = Ca, Ta.default = Ca, Ca.deviation = function (t, e, r, n) {\n    var i = e && e.length,\n      s = Math.abs(eo(t, 0, i ? e[0] * r : t.length, r));\n    if (i) for (var a = 0, o = e.length; a < o; a++) s -= Math.abs(eo(t, e[a] * r, a < o - 1 ? e[a + 1] * r : t.length, r));\n    var l = 0;\n    for (a = 0; a < n.length; a += 3) {\n      var u = n[a] * r,\n        c = n[a + 1] * r,\n        h = n[a + 2] * r;\n      l += Math.abs((t[u] - t[h]) * (t[c + 1] - t[u + 1]) - (t[u] - t[c]) * (t[h + 1] - t[u + 1]));\n    }\n    return 0 === s && 0 === l ? 0 : Math.abs((l - s) / s);\n  }, Ca.flatten = function (t) {\n    for (var e = t[0][0].length, r = {\n        vertices: [],\n        holes: [],\n        dimensions: e\n      }, n = 0, i = 0; i < t.length; i++) {\n      for (var s = 0; s < t[i].length; s++) for (var a = 0; a < e; a++) r.vertices.push(t[i][s][a]);\n      i > 0 && r.holes.push(n += t[i - 1].length);\n    }\n    return r;\n  };\n  var FillBucket = /*#__PURE__*/function () {\n    function FillBucket(t) {\n      _classCallCheck(this, FillBucket);\n      this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n        return t.id;\n      }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.layoutVertexArray = new StructArrayLayout2i4(), this.indexArray = new StructArrayLayout3ui6(), this.indexArray2 = new StructArrayLayout2ui4(), this.programConfigurations = new ProgramConfigurationSet(t.layers, t.zoom), this.segments = new SegmentVector(), this.segments2 = new SegmentVector(), this.stateDependentLayerIds = this.layers.filter(function (t) {\n        return t.isStateDependent();\n      }).map(function (t) {\n        return t.id;\n      }), this.projection = t.projection;\n    }\n    _createClass(FillBucket, [{\n      key: \"populate\",\n      value: function populate(t, e, r, n) {\n        this.hasPattern = lo(\"fill\", this.layers, e);\n        var i = this.layers[0].layout.get(\"fill-sort-key\"),\n          s = [];\n        var _iterator73 = _createForOfIteratorHelper(t),\n          _step73;\n        try {\n          for (_iterator73.s(); !(_step73 = _iterator73.n()).done;) {\n            var _step73$value = _step73.value,\n              _a40 = _step73$value.feature,\n              _o17 = _step73$value.id,\n              _l16 = _step73$value.index,\n              _u15 = _step73$value.sourceLayerIndex;\n            var _t96 = this.layers[0]._featureFilter.needGeometry,\n              _c10 = Js(_a40, _t96);\n            if (!this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom), _c10, r)) continue;\n            var _h6 = i ? i.evaluate(_c10, {}, r, e.availableImages) : void 0,\n              _p2 = {\n                id: _o17,\n                properties: _a40.properties,\n                type: _a40.type,\n                sourceLayerIndex: _u15,\n                index: _l16,\n                geometry: _t96 ? _c10.geometry : Ws(_a40, r, n),\n                patterns: {},\n                sortKey: _h6\n              };\n            s.push(_p2);\n          }\n        } catch (err) {\n          _iterator73.e(err);\n        } finally {\n          _iterator73.f();\n        }\n        i && s.sort(function (t, e) {\n          return t.sortKey - e.sortKey;\n        });\n        for (var _i62 = 0, _s39 = s; _i62 < _s39.length; _i62++) {\n          var _n63 = _s39[_i62];\n          var _i63 = _n63.geometry,\n            _s40 = _n63.index,\n            _a39 = _n63.sourceLayerIndex;\n          if (this.hasPattern) {\n            var _t95 = uo(\"fill\", this.layers, _n63, this.zoom, e);\n            this.patternFeatures.push(_t95);\n          } else this.addFeature(_n63, _i63, _s40, r, {}, e.availableImages);\n          e.featureIndex.insert(t[_s40].feature, _i63, _s40, _a39, this.index);\n        }\n      }\n    }, {\n      key: \"update\",\n      value: function update(t, e, r, n) {\n        this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r, n);\n      }\n    }, {\n      key: \"addFeatures\",\n      value: function addFeatures(t, e, r, n, i) {\n        var _iterator74 = _createForOfIteratorHelper(this.patternFeatures),\n          _step74;\n        try {\n          for (_iterator74.s(); !(_step74 = _iterator74.n()).done;) {\n            var _t97 = _step74.value;\n            this.addFeature(_t97, _t97.geometry, _t97.index, e, r, n);\n          }\n        } catch (err) {\n          _iterator74.e(err);\n        } finally {\n          _iterator74.f();\n        }\n      }\n    }, {\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return 0 === this.layoutVertexArray.length;\n      }\n    }, {\n      key: \"uploadPending\",\n      value: function uploadPending() {\n        return !this.uploaded || this.programConfigurations.needsUpload;\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Pa), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.indexBuffer2 = t.createIndexBuffer(this.indexArray2)), this.programConfigurations.upload(t), this.uploaded = !0;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());\n      }\n    }, {\n      key: \"addFeature\",\n      value: function addFeature(t, e, r, n, i) {\n        var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];\n        var _iterator75 = _createForOfIteratorHelper(ao(e, 500)),\n          _step75;\n        try {\n          for (_iterator75.s(); !(_step75 = _iterator75.n()).done;) {\n            var _t98 = _step75.value;\n            var _e96 = 0;\n            var _iterator76 = _createForOfIteratorHelper(_t98),\n              _step76;\n            try {\n              for (_iterator76.s(); !(_step76 = _iterator76.n()).done;) {\n                var _r94 = _step76.value;\n                _e96 += _r94.length;\n              }\n            } catch (err) {\n              _iterator76.e(err);\n            } finally {\n              _iterator76.f();\n            }\n            var _r93 = this.segments.prepareSegment(_e96, this.layoutVertexArray, this.indexArray),\n              _n64 = _r93.vertexLength,\n              _i64 = [],\n              _s41 = [];\n            var _iterator77 = _createForOfIteratorHelper(_t98),\n              _step77;\n            try {\n              for (_iterator77.s(); !(_step77 = _iterator77.n()).done;) {\n                var _e97 = _step77.value;\n                if (0 === _e97.length) continue;\n                _e97 !== _t98[0] && _s41.push(_i64.length / 2);\n                var _r95 = this.segments2.prepareSegment(_e97.length, this.layoutVertexArray, this.indexArray2),\n                  _n65 = _r95.vertexLength;\n                this.layoutVertexArray.emplaceBack(_e97[0].x, _e97[0].y), this.indexArray2.emplaceBack(_n65 + _e97.length - 1, _n65), _i64.push(_e97[0].x), _i64.push(_e97[0].y);\n                for (var _t100 = 1; _t100 < _e97.length; _t100++) this.layoutVertexArray.emplaceBack(_e97[_t100].x, _e97[_t100].y), this.indexArray2.emplaceBack(_n65 + _t100 - 1, _n65 + _t100), _i64.push(_e97[_t100].x), _i64.push(_e97[_t100].y);\n                _r95.vertexLength += _e97.length, _r95.primitiveLength += _e97.length;\n              }\n            } catch (err) {\n              _iterator77.e(err);\n            } finally {\n              _iterator77.f();\n            }\n            var _a41 = Ta(_i64, _s41);\n            for (var _t99 = 0; _t99 < _a41.length; _t99 += 3) this.indexArray.emplaceBack(_n64 + _a41[_t99], _n64 + _a41[_t99 + 1], _n64 + _a41[_t99 + 2]);\n            _r93.vertexLength += _e96, _r93.primitiveLength += _a41.length / 3;\n          }\n        } catch (err) {\n          _iterator75.e(err);\n        } finally {\n          _iterator75.f();\n        }\n        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, i, s, n);\n      }\n    }]);\n    return FillBucket;\n  }();\n  Er(FillBucket, \"FillBucket\", {\n    omit: [\"layers\", \"patternFeatures\"]\n  });\n  var co = new Properties({\n    \"fill-sort-key\": new DataDrivenProperty(Rr.layout_fill[\"fill-sort-key\"])\n  });\n  var ho = {\n    paint: new Properties({\n      \"fill-antialias\": new DataConstantProperty(Rr.paint_fill[\"fill-antialias\"]),\n      \"fill-opacity\": new DataDrivenProperty(Rr.paint_fill[\"fill-opacity\"]),\n      \"fill-color\": new DataDrivenProperty(Rr.paint_fill[\"fill-color\"]),\n      \"fill-outline-color\": new DataDrivenProperty(Rr.paint_fill[\"fill-outline-color\"]),\n      \"fill-translate\": new DataConstantProperty(Rr.paint_fill[\"fill-translate\"]),\n      \"fill-translate-anchor\": new DataConstantProperty(Rr.paint_fill[\"fill-translate-anchor\"]),\n      \"fill-pattern\": new DataDrivenProperty(Rr.paint_fill[\"fill-pattern\"])\n    }),\n    layout: co\n  };\n  var po = _i([{\n      name: \"a_pos_normal_ed\",\n      components: 4,\n      type: \"Int16\"\n    }]),\n    fo = _i([{\n      name: \"a_centroid_pos\",\n      components: 2,\n      type: \"Uint16\"\n    }]),\n    yo = _i([{\n      name: \"a_pos_3\",\n      components: 3,\n      type: \"Int16\"\n    }, {\n      name: \"a_pos_normal_3\",\n      components: 3,\n      type: \"Int16\"\n    }]),\n    mo = po.members;\n  var go = {},\n    xo = r,\n    vo = bo;\n  function bo(t, e, r, n, i) {\n    this.properties = {}, this.extent = r, this.type = 0, this._pbf = t, this._geometry = -1, this._keys = n, this._values = i, t.readFields(wo, this, e);\n  }\n  function wo(t, e, r) {\n    1 == t ? e.id = r.readVarint() : 2 == t ? function (t, e) {\n      for (var r = t.readVarint() + t.pos; t.pos < r;) {\n        var n = e._keys[t.readVarint()],\n          i = e._values[t.readVarint()];\n        e.properties[n] = i;\n      }\n    }(r, e) : 3 == t ? e.type = r.readVarint() : 4 == t && (e._geometry = r.pos);\n  }\n  function _o(t) {\n    for (var e, r, n = 0, i = 0, s = t.length, a = s - 1; i < s; a = i++) n += ((r = t[a]).x - (e = t[i]).x) * (e.y + r.y);\n    return n;\n  }\n  bo.types = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"], bo.prototype.loadGeometry = function () {\n    var t = this._pbf;\n    t.pos = this._geometry;\n    for (var e, r = t.readVarint() + t.pos, n = 1, i = 0, s = 0, a = 0, o = []; t.pos < r;) {\n      if (i <= 0) {\n        var l = t.readVarint();\n        n = 7 & l, i = l >> 3;\n      }\n      if (i--, 1 === n || 2 === n) s += t.readSVarint(), a += t.readSVarint(), 1 === n && (e && o.push(e), e = []), e.push(new xo(s, a));else {\n        if (7 !== n) throw new Error(\"unknown command \" + n);\n        e && e.push(e[0].clone());\n      }\n    }\n    return e && o.push(e), o;\n  }, bo.prototype.bbox = function () {\n    var t = this._pbf;\n    t.pos = this._geometry;\n    for (var e = t.readVarint() + t.pos, r = 1, n = 0, i = 0, s = 0, a = 1 / 0, o = -1 / 0, l = 1 / 0, u = -1 / 0; t.pos < e;) {\n      if (n <= 0) {\n        var c = t.readVarint();\n        r = 7 & c, n = c >> 3;\n      }\n      if (n--, 1 === r || 2 === r) (i += t.readSVarint()) < a && (a = i), i > o && (o = i), (s += t.readSVarint()) < l && (l = s), s > u && (u = s);else if (7 !== r) throw new Error(\"unknown command \" + r);\n    }\n    return [a, l, o, u];\n  }, bo.prototype.toGeoJSON = function (t, e, r) {\n    var n,\n      i,\n      s = this.extent * Math.pow(2, r),\n      a = this.extent * t,\n      o = this.extent * e,\n      l = this.loadGeometry(),\n      u = bo.types[this.type];\n    function c(t) {\n      for (var e = 0; e < t.length; e++) {\n        var r = t[e];\n        t[e] = [360 * (r.x + a) / s - 180, 360 / Math.PI * Math.atan(Math.exp((180 - 360 * (r.y + o) / s) * Math.PI / 180)) - 90];\n      }\n    }\n    switch (this.type) {\n      case 1:\n        var h = [];\n        for (n = 0; n < l.length; n++) h[n] = l[n][0];\n        c(l = h);\n        break;\n      case 2:\n        for (n = 0; n < l.length; n++) c(l[n]);\n        break;\n      case 3:\n        for (l = function (t) {\n          var e = t.length;\n          if (e <= 1) return [t];\n          for (var r, n, i = [], s = 0; s < e; s++) {\n            var a = _o(t[s]);\n            0 !== a && (void 0 === n && (n = a < 0), n === a < 0 ? (r && i.push(r), r = [t[s]]) : r.push(t[s]));\n          }\n          return r && i.push(r), i;\n        }(l), n = 0; n < l.length; n++) for (i = 0; i < l[n].length; i++) c(l[n][i]);\n    }\n    1 === l.length ? l = l[0] : u = \"Multi\" + u;\n    var p = {\n      type: \"Feature\",\n      geometry: {\n        type: u,\n        coordinates: l\n      },\n      properties: this.properties\n    };\n    return \"id\" in this && (p.id = this.id), p;\n  };\n  var So = vo,\n    Ao = ko;\n  function ko(t, e) {\n    this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t, this._keys = [], this._values = [], this._features = [], t.readFields(Io, this, e), this.length = this._features.length;\n  }\n  function Io(t, e, r) {\n    15 === t ? e.version = r.readVarint() : 1 === t ? e.name = r.readString() : 5 === t ? e.extent = r.readVarint() : 2 === t ? e._features.push(r.pos) : 3 === t ? e._keys.push(r.readString()) : 4 === t && e._values.push(function (t) {\n      for (var e = null, r = t.readVarint() + t.pos; t.pos < r;) {\n        var n = t.readVarint() >> 3;\n        e = 1 === n ? t.readString() : 2 === n ? t.readFloat() : 3 === n ? t.readDouble() : 4 === n ? t.readVarint64() : 5 === n ? t.readVarint() : 6 === n ? t.readSVarint() : 7 === n ? t.readBoolean() : null;\n      }\n      return e;\n    }(r));\n  }\n  ko.prototype.feature = function (t) {\n    if (t < 0 || t >= this._features.length) throw new Error(\"feature index out of bounds\");\n    this._pbf.pos = this._features[t];\n    var e = this._pbf.readVarint() + this._pbf.pos;\n    return new So(this._pbf, e, this.extent, this._keys, this._values);\n  };\n  var Mo = Ao;\n  function Po(t, e, r) {\n    if (3 === t) {\n      var n = new Mo(r, r.readVarint() + r.pos);\n      n.length && (e[n.name] = n);\n    }\n  }\n  var To = go.VectorTile = function (t, e) {\n      this.layers = t.readFields(Po, {}, e);\n    },\n    Co = go.VectorTileFeature = vo;\n  function Eo(t, e, n, i) {\n    var s = [],\n      a = 0 === i ? function (t, e, n, i, s, a) {\n        t.push(new r(a, n + (a - e) / (i - e) * (s - n)));\n      } : function (t, e, n, i, s, a) {\n        t.push(new r(e + (a - n) / (s - n) * (i - e), a));\n      };\n    var _iterator78 = _createForOfIteratorHelper(t),\n      _step78;\n    try {\n      for (_iterator78.s(); !(_step78 = _iterator78.n()).done;) {\n        var _r96 = _step78.value;\n        var _t101 = [];\n        var _iterator79 = _createForOfIteratorHelper(_r96),\n          _step79;\n        try {\n          for (_iterator79.s(); !(_step79 = _iterator79.n()).done;) {\n            var _s42 = _step79.value;\n            if (_s42.length <= 2) continue;\n            var _r97 = [];\n            for (var _t102 = 0; _t102 < _s42.length - 1; _t102++) {\n              var _o18 = _s42[_t102].x,\n                _l17 = _s42[_t102].y,\n                _u16 = _s42[_t102 + 1].x,\n                _c11 = _s42[_t102 + 1].y,\n                _h7 = 0 === i ? _o18 : _l17,\n                _p3 = 0 === i ? _u16 : _c11;\n              _h7 < e ? _p3 > e && a(_r97, _o18, _l17, _u16, _c11, e) : _h7 > n ? _p3 < n && a(_r97, _o18, _l17, _u16, _c11, n) : _r97.push(_s42[_t102]), _p3 < e && _h7 >= e && a(_r97, _o18, _l17, _u16, _c11, e), _p3 > n && _h7 <= n && a(_r97, _o18, _l17, _u16, _c11, n);\n            }\n            var _o19 = _s42[_s42.length - 1];\n            var _l18 = 0 === i ? _o19.x : _o19.y;\n            _l18 >= e && _l18 <= n && _r97.push(_o19), _r97.length && (_o19 = _r97[_r97.length - 1], _r97[0].x === _o19.x && _r97[0].y === _o19.y || _r97.push(_r97[0]), _t101.push(_r97));\n          }\n        } catch (err) {\n          _iterator79.e(err);\n        } finally {\n          _iterator79.f();\n        }\n        _t101.length && s.push(_t101);\n      }\n    } catch (err) {\n      _iterator78.e(err);\n    } finally {\n      _iterator78.f();\n    }\n    return s;\n  }\n  go.VectorTileLayer = Ao;\n  var Do = Co.types,\n    zo = Math.pow(2, 13);\n  function Bo(t, e, r, n, i, s, a, o) {\n    t.emplaceBack((e << 1) + a, (r << 1) + s, (Math.floor(n * zo) << 1) + i, Math.round(o));\n  }\n  function Lo(t, e, r) {\n    var n = 16384;\n    t.emplaceBack(e.x, e.y, e.z, r[0] * n, r[1] * n, r[2] * n);\n  }\n  var PartMetadata = /*#__PURE__*/function () {\n    function PartMetadata() {\n      _classCallCheck(this, PartMetadata);\n      this.acc = new r(0, 0), this.polyCount = [];\n    }\n    _createClass(PartMetadata, [{\n      key: \"startRing\",\n      value: function startRing(t) {\n        this.currentPolyCount = {\n          edges: 0,\n          top: 0\n        }, this.polyCount.push(this.currentPolyCount), this.min || (this.min = new r(t.x, t.y), this.max = new r(t.x, t.y));\n      }\n    }, {\n      key: \"append\",\n      value: function append(t, e) {\n        this.currentPolyCount.edges++, this.acc._add(t);\n        var r = this.min,\n          n = this.max;\n        t.x < r.x ? r.x = t.x : t.x > n.x && (n.x = t.x), t.y < r.y ? r.y = t.y : t.y > n.y && (n.y = t.y), ((0 === t.x || t.x === Ni) && t.x === e.x) != ((0 === t.y || t.y === Ni) && t.y === e.y) && this.processBorderOverlap(t, e), e.x < 0 != t.x < 0 && this.addBorderIntersection(0, qt(e.y, t.y, (0 - e.x) / (t.x - e.x))), e.x > Ni != t.x > Ni && this.addBorderIntersection(1, qt(e.y, t.y, (Ni - e.x) / (t.x - e.x))), e.y < 0 != t.y < 0 && this.addBorderIntersection(2, qt(e.x, t.x, (0 - e.y) / (t.y - e.y))), e.y > Ni != t.y > Ni && this.addBorderIntersection(3, qt(e.x, t.x, (Ni - e.y) / (t.y - e.y)));\n      }\n    }, {\n      key: \"addBorderIntersection\",\n      value: function addBorderIntersection(t, e) {\n        this.borders || (this.borders = [[Number.MAX_VALUE, -Number.MAX_VALUE], [Number.MAX_VALUE, -Number.MAX_VALUE], [Number.MAX_VALUE, -Number.MAX_VALUE], [Number.MAX_VALUE, -Number.MAX_VALUE]]);\n        var r = this.borders[t];\n        e < r[0] && (r[0] = e), e > r[1] && (r[1] = e);\n      }\n    }, {\n      key: \"processBorderOverlap\",\n      value: function processBorderOverlap(t, e) {\n        if (t.x === e.x) {\n          if (t.y === e.y) return;\n          var _r98 = 0 === t.x ? 0 : 1;\n          this.addBorderIntersection(_r98, e.y), this.addBorderIntersection(_r98, t.y);\n        } else {\n          var _r99 = 0 === t.y ? 2 : 3;\n          this.addBorderIntersection(_r99, e.x), this.addBorderIntersection(_r99, t.x);\n        }\n      }\n    }, {\n      key: \"centroid\",\n      value: function centroid() {\n        var t = this.polyCount.reduce(function (t, e) {\n          return t + e.edges;\n        }, 0);\n        return 0 !== t ? this.acc.div(t)._round() : new r(0, 0);\n      }\n    }, {\n      key: \"span\",\n      value: function span() {\n        return new r(this.max.x - this.min.x, this.max.y - this.min.y);\n      }\n    }, {\n      key: \"intersectsCount\",\n      value: function intersectsCount() {\n        return this.borders.reduce(function (t, e) {\n          return t + +(e[0] !== Number.MAX_VALUE);\n        }, 0);\n      }\n    }]);\n    return PartMetadata;\n  }();\n  var FillExtrusionBucket = /*#__PURE__*/function () {\n    function FillExtrusionBucket(t) {\n      _classCallCheck(this, FillExtrusionBucket);\n      this.zoom = t.zoom, this.canonical = t.canonical, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n        return t.id;\n      }), this.index = t.index, this.hasPattern = !1, this.edgeRadius = 0, this.projection = t.projection, this.layoutVertexArray = new StructArrayLayout4i8(), this.centroidVertexArray = new FillExtrusionCentroidArray(), this.indexArray = new StructArrayLayout3ui6(), this.programConfigurations = new ProgramConfigurationSet(t.layers, t.zoom), this.segments = new SegmentVector(), this.stateDependentLayerIds = this.layers.filter(function (t) {\n        return t.isStateDependent();\n      }).map(function (t) {\n        return t.id;\n      }), this.enableTerrain = t.enableTerrain;\n    }\n    _createClass(FillExtrusionBucket, [{\n      key: \"populate\",\n      value: function populate(t, e, r, n) {\n        this.features = [], this.hasPattern = lo(\"fill-extrusion\", this.layers, e), this.featuresOnBorder = [], this.borders = [[], [], [], []], this.borderDoneWithNeighborZ = [-1, -1, -1, -1], this.tileToMeter = function (t) {\n          var e = Math.exp(Math.PI * (1 - t.y / (1 << t.z) * 2));\n          return 80150034 * e / (e * e + 1) / Ni / (1 << t.z);\n        }(r), this.edgeRadius = this.layers[0].layout.get(\"fill-extrusion-edge-radius\") / this.tileToMeter;\n        var _iterator80 = _createForOfIteratorHelper(t),\n          _step80;\n        try {\n          for (_iterator80.s(); !(_step80 = _iterator80.n()).done;) {\n            var _step80$value = _step80.value,\n              _i65 = _step80$value.feature,\n              _s43 = _step80$value.id,\n              _a42 = _step80$value.index,\n              _o20 = _step80$value.sourceLayerIndex;\n            var _t103 = this.layers[0]._featureFilter.needGeometry,\n              _l19 = Js(_i65, _t103);\n            if (!this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom), _l19, r)) continue;\n            var _u17 = {\n                id: _s43,\n                sourceLayerIndex: _o20,\n                index: _a42,\n                geometry: _t103 ? _l19.geometry : Ws(_i65, r, n),\n                properties: _i65.properties,\n                type: _i65.type,\n                patterns: {}\n              },\n              _c12 = this.layoutVertexArray.length;\n            this.hasPattern ? this.features.push(uo(\"fill-extrusion\", this.layers, _u17, this.zoom, e)) : this.addFeature(_u17, _u17.geometry, _a42, r, {}, e.availableImages, n), e.featureIndex.insert(_i65, _u17.geometry, _a42, _o20, this.index, _c12);\n          }\n        } catch (err) {\n          _iterator80.e(err);\n        } finally {\n          _iterator80.f();\n        }\n        this.sortBorders();\n      }\n    }, {\n      key: \"addFeatures\",\n      value: function addFeatures(t, e, r, n, i) {\n        var _iterator81 = _createForOfIteratorHelper(this.features),\n          _step81;\n        try {\n          for (_iterator81.s(); !(_step81 = _iterator81.n()).done;) {\n            var _t104 = _step81.value;\n            var _s44 = _t104.geometry;\n            this.addFeature(_t104, _s44, _t104.index, e, r, n, i);\n          }\n        } catch (err) {\n          _iterator81.e(err);\n        } finally {\n          _iterator81.f();\n        }\n        this.sortBorders();\n      }\n    }, {\n      key: \"update\",\n      value: function update(t, e, r, n) {\n        this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r, n);\n      }\n    }, {\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return 0 === this.layoutVertexArray.length;\n      }\n    }, {\n      key: \"uploadPending\",\n      value: function uploadPending() {\n        return !this.uploaded || this.programConfigurations.needsUpload;\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, mo), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.layoutVertexExtArray && (this.layoutVertexExtBuffer = t.createVertexBuffer(this.layoutVertexExtArray, yo.members, !0))), this.programConfigurations.upload(t), this.uploaded = !0;\n      }\n    }, {\n      key: \"uploadCentroid\",\n      value: function uploadCentroid(t) {\n        0 !== this.centroidVertexArray.length && (this.centroidVertexBuffer ? this.needsCentroidUpdate && this.centroidVertexBuffer.updateData(this.centroidVertexArray) : this.centroidVertexBuffer = t.createVertexBuffer(this.centroidVertexArray, fo.members, !0), this.needsCentroidUpdate = !1);\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.centroidVertexBuffer && this.centroidVertexBuffer.destroy(), this.layoutVertexExtBuffer && this.layoutVertexExtBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n      }\n    }, {\n      key: \"addFeature\",\n      value: function addFeature(t, e, n, i, s, a, o) {\n        var l = [new r(0, 0), new r(Ni, Ni)],\n          u = o.projection,\n          c = \"globe\" === u.name,\n          h = this.enableTerrain && !c ? new PartMetadata() : null,\n          p = \"Polygon\" === Do[t.type];\n        c && !this.layoutVertexExtArray && (this.layoutVertexExtArray = new StructArrayLayout6i12());\n        var d = ao(e, 500);\n        for (var _t105 = d.length - 1; _t105 >= 0; _t105--) {\n          var _e98 = d[_t105];\n          (0 === _e98.length || (f = _e98[0]).every(function (t) {\n            return t.x <= 0;\n          }) || f.every(function (t) {\n            return t.x >= Ni;\n          }) || f.every(function (t) {\n            return t.y <= 0;\n          }) || f.every(function (t) {\n            return t.y >= Ni;\n          })) && d.splice(_t105, 1);\n        }\n        var f;\n        var y;\n        if (c) y = Uo(d, l, i);else {\n          y = [];\n          var _iterator82 = _createForOfIteratorHelper(d),\n            _step82;\n          try {\n            for (_iterator82.s(); !(_step82 = _iterator82.n()).done;) {\n              var _t106 = _step82.value;\n              y.push({\n                polygon: _t106,\n                bounds: l\n              });\n            }\n          } catch (err) {\n            _iterator82.e(err);\n          } finally {\n            _iterator82.f();\n          }\n        }\n        var m = p ? this.edgeRadius : 0;\n        var _iterator83 = _createForOfIteratorHelper(y),\n          _step83;\n        try {\n          for (_iterator83.s(); !(_step83 = _iterator83.n()).done;) {\n            var _step83$value = _step83.value,\n              _t108 = _step83$value.polygon,\n              _e100 = _step83$value.bounds;\n            var _r101 = 0,\n              _n66 = 0;\n            var _iterator84 = _createForOfIteratorHelper(_t108),\n              _step84;\n            try {\n              for (_iterator84.s(); !(_step84 = _iterator84.n()).done;) {\n                var _e103 = _step84.value;\n                p && !_e103[0].equals(_e103[_e103.length - 1]) && _e103.push(_e103[0]), _n66 += p ? _e103.length - 1 : _e103.length;\n              }\n            } catch (err) {\n              _iterator84.e(err);\n            } finally {\n              _iterator84.f();\n            }\n            var _s45 = this.segments.prepareSegment((p ? 5 : 4) * _n66, this.layoutVertexArray, this.indexArray);\n            if (p) {\n              var _e101 = [],\n                _n67 = [];\n              _r101 = _s45.vertexLength;\n              var _iterator85 = _createForOfIteratorHelper(_t108),\n                _step85;\n              try {\n                for (_iterator85.s(); !(_step85 = _iterator85.n()).done;) {\n                  var _r102 = _step85.value;\n                  var _a44 = void 0,\n                    _o21 = void 0;\n                  _r102.length && _r102 !== _t108[0] && _n67.push(_e101.length / 2), _a44 = _r102[1].sub(_r102[0])._perp()._unit();\n                  for (var _t110 = 1; _t110 < _r102.length; _t110++) {\n                    var _n68 = _r102[_t110],\n                      _l20 = _r102[_t110 === _r102.length - 1 ? 1 : _t110 + 1];\n                    var _h8 = _n68.x,\n                      _p4 = _n68.y;\n                    if (m) {\n                      _o21 = _l20.sub(_n68)._perp()._unit();\n                      var _t111 = _a44.add(_o21)._unit(),\n                        _e102 = m * Math.min(4, 1 / (_a44.x * _t111.x + _a44.y * _t111.y));\n                      _h8 += _e102 * _t111.x, _p4 += _e102 * _t111.y, _a44 = _o21;\n                    }\n                    Bo(this.layoutVertexArray, _h8, _p4, 0, 0, 1, 1, 0), _s45.vertexLength++, _e101.push(_n68.x, _n68.y), c && Lo(this.layoutVertexExtArray, u.projectTilePoint(_h8, _p4, i), u.upVector(i, _h8, _p4));\n                  }\n                }\n              } catch (err) {\n                _iterator85.e(err);\n              } finally {\n                _iterator85.f();\n              }\n              var _a43 = Ta(_e101, _n67);\n              for (var _t109 = 0; _t109 < _a43.length; _t109 += 3) this.indexArray.emplaceBack(_r101 + _a43[_t109], _r101 + _a43[_t109 + 2], _r101 + _a43[_t109 + 1]), _s45.primitiveLength++;\n            }\n            var _iterator86 = _createForOfIteratorHelper(_t108),\n              _step86;\n            try {\n              for (_iterator86.s(); !(_step86 = _iterator86.n()).done;) {\n                var _n69 = _step86.value;\n                h && _n69.length && h.startRing(_n69[0]);\n                var _t112 = void 0,\n                  _a45 = void 0,\n                  _o22 = void 0,\n                  _l21 = _n69.length > 4 && Oo(_n69[_n69.length - 2], _n69[0], _n69[1]),\n                  _d2 = m ? Fo(_n69[_n69.length - 2], _n69[0], _n69[1], m) : 0;\n                _a45 = _n69[1].sub(_n69[0])._perp()._unit();\n                var _f = !0;\n                for (var _y = 1, _g = 0; _y < _n69.length; _y++) {\n                  var _x = _n69[_y - 1],\n                    _v = _n69[_y];\n                  var _b = _n69[_y === _n69.length - 1 ? 1 : _y + 1];\n                  if (h && p && h.currentPolyCount.top++, jo(_v, _x, _e100)) {\n                    m && (_a45 = _b.sub(_v)._perp()._unit(), _f = !_f);\n                    continue;\n                  }\n                  h && h.append(_v, _x);\n                  var _w = _v.sub(_x)._perp(),\n                    _2 = _w.x / (Math.abs(_w.x) + Math.abs(_w.y)),\n                    _S = _w.y > 0 ? 1 : 0,\n                    _A = _x.dist(_v);\n                  if (_g + _A > 32768 && (_g = 0), m) {\n                    _o22 = _b.sub(_v)._perp()._unit();\n                    var _t113 = Ro(_x, _v, _b, Vo(_a45, _o22), m);\n                    isNaN(_t113) && (_t113 = 0);\n                    var _e104 = _v.sub(_x)._unit();\n                    _x = _x.add(_e104.mult(_d2))._round(), _v = _v.add(_e104.mult(-_t113))._round(), _d2 = _t113, _a45 = _o22;\n                  }\n                  var _k = _s45.vertexLength,\n                    _I = _n69.length > 4 && Oo(_x, _v, _b);\n                  var _M = $o(_g, _l21, _f);\n                  if (Bo(this.layoutVertexArray, _x.x, _x.y, _2, _S, 0, 0, _M), Bo(this.layoutVertexArray, _x.x, _x.y, _2, _S, 0, 1, _M), _g += _A, _M = $o(_g, _I, !_f), _l21 = _I, Bo(this.layoutVertexArray, _v.x, _v.y, _2, _S, 0, 0, _M), Bo(this.layoutVertexArray, _v.x, _v.y, _2, _S, 0, 1, _M), _s45.vertexLength += 4, this.indexArray.emplaceBack(_k + 0, _k + 1, _k + 2), this.indexArray.emplaceBack(_k + 1, _k + 3, _k + 2), _s45.primitiveLength += 2, m) {\n                    var _i66 = _r101 + (1 === _y ? _n69.length - 2 : _y - 2),\n                      _a46 = 1 === _y ? _r101 : _i66 + 1;\n                    if (this.indexArray.emplaceBack(_k + 1, _i66, _k + 3), this.indexArray.emplaceBack(_i66, _a46, _k + 3), _s45.primitiveLength += 2, void 0 === _t112 && (_t112 = _k), !jo(_b, _n69[_y], _e100)) {\n                      var _e105 = _y === _n69.length - 1 ? _t112 : _s45.vertexLength;\n                      this.indexArray.emplaceBack(_k + 2, _k + 3, _e105), this.indexArray.emplaceBack(_k + 3, _e105 + 1, _e105), this.indexArray.emplaceBack(_k + 3, _a46, _e105 + 1), _s45.primitiveLength += 3;\n                    }\n                    _f = !_f;\n                  }\n                  if (c) {\n                    var _t114 = this.layoutVertexExtArray,\n                      _e106 = u.projectTilePoint(_x.x, _x.y, i),\n                      _r103 = u.projectTilePoint(_v.x, _v.y, i),\n                      _n70 = u.upVector(i, _x.x, _x.y),\n                      _s46 = u.upVector(i, _v.x, _v.y);\n                    Lo(_t114, _e106, _n70), Lo(_t114, _e106, _n70), Lo(_t114, _r103, _s46), Lo(_t114, _r103, _s46);\n                  }\n                }\n                p && (_r101 += _n69.length - 1);\n              }\n            } catch (err) {\n              _iterator86.e(err);\n            } finally {\n              _iterator86.f();\n            }\n          }\n        } catch (err) {\n          _iterator83.e(err);\n        } finally {\n          _iterator83.f();\n        }\n        if (h && h.polyCount.length > 0) {\n          if (h.borders) {\n            h.vertexArrayOffset = this.centroidVertexArray.length;\n            var _t107 = h.borders,\n              _e99 = this.featuresOnBorder.push(h) - 1;\n            for (var _r100 = 0; _r100 < 4; _r100++) _t107[_r100][0] !== Number.MAX_VALUE && this.borders[_r100].push(_e99);\n          }\n          this.encodeCentroid(h.borders ? void 0 : h.centroid(), h);\n        }\n        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, n, s, a, i);\n      }\n    }, {\n      key: \"sortBorders\",\n      value: function sortBorders() {\n        var _this24 = this;\n        var _loop3 = function _loop3(_t115) {\n          _this24.borders[_t115].sort(function (e, r) {\n            return _this24.featuresOnBorder[e].borders[_t115][0] - _this24.featuresOnBorder[r].borders[_t115][0];\n          });\n        };\n        for (var _t115 = 0; _t115 < 4; _t115++) {\n          _loop3(_t115);\n        }\n      }\n    }, {\n      key: \"encodeCentroid\",\n      value: function encodeCentroid(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n        var n, i;\n        if (t) {\n          if (0 !== t.y) {\n            var _r104 = e.span()._mult(this.tileToMeter);\n            n = (Math.max(t.x, 1) << 3) + Math.min(7, Math.round(_r104.x / 10)), i = (Math.max(t.y, 1) << 3) + Math.min(7, Math.round(_r104.y / 10));\n          } else n = Math.ceil(7 * (t.x + 450)), i = 0;\n        } else n = 0, i = +r;\n        var s = r ? this.centroidVertexArray.length : e.vertexArrayOffset;\n        var _iterator87 = _createForOfIteratorHelper(e.polyCount),\n          _step87;\n        try {\n          for (_iterator87.s(); !(_step87 = _iterator87.n()).done;) {\n            var _t116 = _step87.value;\n            r && this.centroidVertexArray.resize(this.centroidVertexArray.length + 4 * _t116.edges + _t116.top);\n            for (var _e107 = 0; _e107 < _t116.top; _e107++) this.centroidVertexArray.emplace(s++, n, i);\n            for (var _e108 = 0; _e108 < 2 * _t116.edges; _e108++) this.centroidVertexArray.emplace(s++, 0, i), this.centroidVertexArray.emplace(s++, n, i);\n          }\n        } catch (err) {\n          _iterator87.e(err);\n        } finally {\n          _iterator87.f();\n        }\n      }\n    }]);\n    return FillExtrusionBucket;\n  }();\n  function Vo(t, e) {\n    var r = t.add(e)._unit();\n    return t.x * r.x + t.y * r.y;\n  }\n  function Fo(t, e, r, n) {\n    var i = e.sub(t)._perp()._unit(),\n      s = r.sub(e)._perp()._unit();\n    return Ro(t, e, r, Vo(i, s), n);\n  }\n  function Ro(t, e, r, n, i) {\n    var s = Math.sqrt(1 - n * n);\n    return Math.min(t.dist(e) / 3, e.dist(r) / 3, i * s / n);\n  }\n  function jo(t, e, r) {\n    return t.x < r[0].x && e.x < r[0].x || t.x > r[1].x && e.x > r[1].x || t.y < r[0].y && e.y < r[0].y || t.y > r[1].y && e.y > r[1].y;\n  }\n  function Oo(t, e, r) {\n    if (t.x < 0 || t.x >= Ni || e.x < 0 || e.x >= Ni || r.x < 0 || r.x >= Ni) return !1;\n    var n = r.sub(e),\n      i = n.perp(),\n      s = t.sub(e);\n    return (n.x * s.x + n.y * s.y) / Math.sqrt((n.x * n.x + n.y * n.y) * (s.x * s.x + s.y * s.y)) > -.866 && i.x * s.x + i.y * s.y < 0;\n  }\n  function $o(t, e, r) {\n    var n = e ? 2 | t : -3 & t;\n    return r ? 1 | n : -2 & n;\n  }\n  function Uo(t, e, n) {\n    var i = 1 << n.z,\n      s = js(n.x / i),\n      a = js((n.x + 1) / i),\n      o = Os(n.y / i),\n      l = Os((n.y + 1) / i);\n    return function (t, e, n, i) {\n      var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n      var a = arguments.length > 5 ? arguments[5] : undefined;\n      var o = [];\n      if (!t.length || !n || !i) return o;\n      var l = function l(t, e) {\n          var _iterator88 = _createForOfIteratorHelper(t),\n            _step88;\n          try {\n            for (_iterator88.s(); !(_step88 = _iterator88.n()).done;) {\n              var _r105 = _step88.value;\n              o.push({\n                polygon: _r105,\n                bounds: e\n              });\n            }\n          } catch (err) {\n            _iterator88.e(err);\n          } finally {\n            _iterator88.f();\n          }\n        },\n        u = Math.ceil(Math.log2(n)),\n        c = Math.ceil(Math.log2(i)),\n        h = u - c,\n        p = [];\n      for (var _t117 = 0; _t117 < Math.abs(h); _t117++) p.push(h > 0 ? 0 : 1);\n      for (var _t118 = 0; _t118 < Math.min(u, c); _t118++) p.push(0), p.push(1);\n      var d = t;\n      if (d = Eo(d, e[0].y - s, e[1].y + s, 1), d = Eo(d, e[0].x - s, e[1].x + s, 0), !d.length) return o;\n      var f = [];\n      for (p.length ? f.push({\n        polygons: d,\n        bounds: e,\n        depth: 0\n      }) : l(d, e); f.length;) {\n        var _t119 = f.pop(),\n          _e109 = _t119.depth,\n          _n71 = p[_e109],\n          _i67 = _t119.bounds[0],\n          _o23 = _t119.bounds[1],\n          _u18 = 0 === _n71 ? _i67.x : _i67.y,\n          _c13 = 0 === _n71 ? _o23.x : _o23.y,\n          _h9 = a ? a(_n71, _u18, _c13) : .5 * (_u18 + _c13),\n          _d3 = Eo(_t119.polygons, _u18 - s, _h9 + s, _n71),\n          _y2 = Eo(_t119.polygons, _h9 - s, _c13 + s, _n71);\n        if (_d3.length) {\n          var _t120 = [_i67, new r(0 === _n71 ? _h9 : _o23.x, 1 === _n71 ? _h9 : _o23.y)];\n          p.length > _e109 + 1 ? f.push({\n            polygons: _d3,\n            bounds: _t120,\n            depth: _e109 + 1\n          }) : l(_d3, _t120);\n        }\n        if (_y2.length) {\n          var _t121 = [new r(0 === _n71 ? _h9 : _i67.x, 1 === _n71 ? _h9 : _i67.y), _o23];\n          p.length > _e109 + 1 ? f.push({\n            polygons: _y2,\n            bounds: _t121,\n            depth: _e109 + 1\n          }) : l(_y2, _t121);\n        }\n      }\n      return o;\n    }(t, e, Math.ceil((a - s) / 11.25), Math.ceil((o - l) / 11.25), 1, function (t, e, r) {\n      if (0 === t) return .5 * (e + r);\n      {\n        var _t122 = Os((n.y + e / Ni) / i);\n        return (Fs(.5 * (Os((n.y + r / Ni) / i) + _t122)) * i - n.y) * Ni;\n      }\n    });\n  }\n  Er(FillExtrusionBucket, \"FillExtrusionBucket\", {\n    omit: [\"layers\", \"features\"]\n  }), Er(PartMetadata, \"PartMetadata\");\n  var qo = new Properties({\n    \"fill-extrusion-edge-radius\": new DataConstantProperty(Rr[\"layout_fill-extrusion\"][\"fill-extrusion-edge-radius\"])\n  });\n  var No = {\n    paint: new Properties({\n      \"fill-extrusion-opacity\": new DataConstantProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-opacity\"]),\n      \"fill-extrusion-color\": new DataDrivenProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-color\"]),\n      \"fill-extrusion-translate\": new DataConstantProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-translate\"]),\n      \"fill-extrusion-translate-anchor\": new DataConstantProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-translate-anchor\"]),\n      \"fill-extrusion-pattern\": new DataDrivenProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-pattern\"]),\n      \"fill-extrusion-height\": new DataDrivenProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-height\"]),\n      \"fill-extrusion-base\": new DataDrivenProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-base\"]),\n      \"fill-extrusion-vertical-gradient\": new DataConstantProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-vertical-gradient\"]),\n      \"fill-extrusion-ambient-occlusion-intensity\": new DataConstantProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-ambient-occlusion-intensity\"]),\n      \"fill-extrusion-ambient-occlusion-radius\": new DataConstantProperty(Rr[\"paint_fill-extrusion\"][\"fill-extrusion-ambient-occlusion-radius\"])\n    }),\n    layout: qo\n  };\n  function Go(t, e, r) {\n    var n = 2 * Math.PI * 6378137 / 256 / Math.pow(2, r);\n    return [t * n - 2 * Math.PI * 6378137 / 2, e * n - 2 * Math.PI * 6378137 / 2];\n  }\n  var CanonicalTileID = /*#__PURE__*/function () {\n    function CanonicalTileID(t, e, r) {\n      _classCallCheck(this, CanonicalTileID);\n      this.z = t, this.x = e, this.y = r, this.key = Zo(0, t, t, e, r);\n    }\n    _createClass(CanonicalTileID, [{\n      key: \"equals\",\n      value: function equals(t) {\n        return this.z === t.z && this.x === t.x && this.y === t.y;\n      }\n    }, {\n      key: \"url\",\n      value: function url(t, e) {\n        var r = function (t, e, r) {\n            var n = Go(256 * t, 256 * (e = Math.pow(2, r) - e - 1), r),\n              i = Go(256 * (t + 1), 256 * (e + 1), r);\n            return n[0] + \",\" + n[1] + \",\" + i[0] + \",\" + i[1];\n          }(this.x, this.y, this.z),\n          n = function (t, e, r) {\n            var n,\n              i = \"\";\n            for (var _s47 = t; _s47 > 0; _s47--) n = 1 << _s47 - 1, i += (e & n ? 1 : 0) + (r & n ? 2 : 0);\n            return i;\n          }(this.z, this.x, this.y);\n        return t[(this.x + this.y) % t.length].replace(\"{prefix}\", (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace(/{z}/g, String(this.z)).replace(/{x}/g, String(this.x)).replace(/{y}/g, String(\"tms\" === e ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace(\"{quadkey}\", n).replace(\"{bbox-epsg-3857}\", r);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return \"\".concat(this.z, \"/\").concat(this.x, \"/\").concat(this.y);\n      }\n    }]);\n    return CanonicalTileID;\n  }();\n  var UnwrappedTileID = function UnwrappedTileID(t, e) {\n    _classCallCheck(this, UnwrappedTileID);\n    this.wrap = t, this.canonical = e, this.key = Zo(t, e.z, e.z, e.x, e.y);\n  };\n  var OverscaledTileID = /*#__PURE__*/function () {\n    function OverscaledTileID(t, e, r, n, i) {\n      _classCallCheck(this, OverscaledTileID);\n      this.overscaledZ = t, this.wrap = e, this.canonical = new CanonicalTileID(r, +n, +i), this.key = 0 === e && t === r ? this.canonical.key : Zo(e, t, r, n, i);\n    }\n    _createClass(OverscaledTileID, [{\n      key: \"equals\",\n      value: function equals(t) {\n        return this.overscaledZ === t.overscaledZ && this.wrap === t.wrap && this.canonical.equals(t.canonical);\n      }\n    }, {\n      key: \"scaledTo\",\n      value: function scaledTo(t) {\n        var e = this.canonical.z - t;\n        return t > this.canonical.z ? new OverscaledTileID(t, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y) : new OverscaledTileID(t, this.wrap, t, this.canonical.x >> e, this.canonical.y >> e);\n      }\n    }, {\n      key: \"calculateScaledKey\",\n      value: function calculateScaledKey(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n        if (this.overscaledZ === t && e) return this.key;\n        if (t > this.canonical.z) return Zo(this.wrap * +e, t, this.canonical.z, this.canonical.x, this.canonical.y);\n        {\n          var _r106 = this.canonical.z - t;\n          return Zo(this.wrap * +e, t, t, this.canonical.x >> _r106, this.canonical.y >> _r106);\n        }\n      }\n    }, {\n      key: \"isChildOf\",\n      value: function isChildOf(t) {\n        if (t.wrap !== this.wrap) return !1;\n        var e = this.canonical.z - t.canonical.z;\n        return 0 === t.overscaledZ || t.overscaledZ < this.overscaledZ && t.canonical.x === this.canonical.x >> e && t.canonical.y === this.canonical.y >> e;\n      }\n    }, {\n      key: \"children\",\n      value: function children(t) {\n        if (this.overscaledZ >= t) return [new OverscaledTileID(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];\n        var e = this.canonical.z + 1,\n          r = 2 * this.canonical.x,\n          n = 2 * this.canonical.y;\n        return [new OverscaledTileID(e, this.wrap, e, r, n), new OverscaledTileID(e, this.wrap, e, r + 1, n), new OverscaledTileID(e, this.wrap, e, r, n + 1), new OverscaledTileID(e, this.wrap, e, r + 1, n + 1)];\n      }\n    }, {\n      key: \"isLessThan\",\n      value: function isLessThan(t) {\n        return this.wrap < t.wrap || !(this.wrap > t.wrap) && (this.overscaledZ < t.overscaledZ || !(this.overscaledZ > t.overscaledZ) && (this.canonical.x < t.canonical.x || !(this.canonical.x > t.canonical.x) && this.canonical.y < t.canonical.y));\n      }\n    }, {\n      key: \"wrapped\",\n      value: function wrapped() {\n        return new OverscaledTileID(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y);\n      }\n    }, {\n      key: \"unwrapTo\",\n      value: function unwrapTo(t) {\n        return new OverscaledTileID(this.overscaledZ, t, this.canonical.z, this.canonical.x, this.canonical.y);\n      }\n    }, {\n      key: \"overscaleFactor\",\n      value: function overscaleFactor() {\n        return Math.pow(2, this.overscaledZ - this.canonical.z);\n      }\n    }, {\n      key: \"toUnwrapped\",\n      value: function toUnwrapped() {\n        return new UnwrappedTileID(this.wrap, this.canonical);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return \"\".concat(this.overscaledZ, \"/\").concat(this.canonical.x, \"/\").concat(this.canonical.y);\n      }\n    }]);\n    return OverscaledTileID;\n  }();\n  function Zo(t, e, r, n, i) {\n    var s = 1 << Math.min(r, 22);\n    var a = s * (i % s) + n % s;\n    return t && r < 22 && (a += s * s * ((t < 0 ? -2 * t - 1 : 2 * t) % (1 << 2 * (22 - r)))), 16 * (32 * a + r) + (e - r);\n  }\n  Er(CanonicalTileID, \"CanonicalTileID\"), Er(OverscaledTileID, \"OverscaledTileID\", {\n    omit: [\"projMatrix\"]\n  });\n  var Point3D = /*#__PURE__*/function (_r107) {\n    _inherits(Point3D, _r107);\n    function Point3D(t, e, r) {\n      var _this25;\n      _classCallCheck(this, Point3D);\n      _this25 = _possibleConstructorReturn(this, _getPrototypeOf(Point3D).call(this, t, e)), _this25.z = r;\n      return _this25;\n    }\n    return Point3D;\n  }(r);\n  function Xo(t, e) {\n    return t.x * e.x + t.y * e.y;\n  }\n  function Yo(t, e) {\n    if (1 === t.length) {\n      var _r108 = 0;\n      var _n72 = e[_r108++];\n      var _i68;\n      for (; !_i68 || _n72.equals(_i68);) if (_i68 = e[_r108++], !_i68) return 1 / 0;\n      for (; _r108 < e.length; _r108++) {\n        var _s48 = e[_r108],\n          _a47 = t[0],\n          _o24 = _i68.sub(_n72),\n          _l22 = _s48.sub(_n72),\n          _u19 = _a47.sub(_n72),\n          _c14 = Xo(_o24, _o24),\n          _h10 = Xo(_o24, _l22),\n          _p5 = Xo(_l22, _l22),\n          _d4 = Xo(_u19, _o24),\n          _f2 = Xo(_u19, _l22),\n          _y3 = _c14 * _p5 - _h10 * _h10,\n          _m = (_p5 * _d4 - _h10 * _f2) / _y3,\n          _g2 = (_c14 * _f2 - _h10 * _d4) / _y3,\n          _x2 = _n72.z * (1 - _m - _g2) + _i68.z * _m + _s48.z * _g2;\n        if (isFinite(_x2)) return _x2;\n      }\n      return 1 / 0;\n    }\n    {\n      var _t123 = 1 / 0;\n      var _iterator89 = _createForOfIteratorHelper(e),\n        _step89;\n      try {\n        for (_iterator89.s(); !(_step89 = _iterator89.n()).done;) {\n          var _r109 = _step89.value;\n          _t123 = Math.min(_t123, _r109.z);\n        }\n      } catch (err) {\n        _iterator89.e(err);\n      } finally {\n        _iterator89.f();\n      }\n      return _t123;\n    }\n  }\n  function Wo(t, e, r, n, i, s, a, o) {\n    var l = a * i.getElevationAt(t, e, !0, !0),\n      u = 0 !== s[0],\n      c = u ? 0 === s[1] ? a * (s[0] / 7 - 450) : a * function (t, e, r) {\n        var n = Math.floor(e[0] / 8),\n          i = Math.floor(e[1] / 8),\n          s = 10 * (e[0] - 8 * n),\n          a = 10 * (e[1] - 8 * i),\n          o = t.getElevationAt(n, i, !0, !0),\n          l = t.getMeterToDEM(r),\n          u = Math.floor(.5 * (s * l - 1)),\n          c = Math.floor(.5 * (a * l - 1)),\n          h = t.tileCoordToPixel(n, i),\n          p = 2 * u + 1,\n          d = 2 * c + 1,\n          f = function (t, e, r, n, i) {\n            return [t.getElevationAtPixel(e, r, !0), t.getElevationAtPixel(e + i, r, !0), t.getElevationAtPixel(e, r + i, !0), t.getElevationAtPixel(e + n, r + i, !0)];\n          }(t, h.x - u, h.y - c, p, d),\n          y = Math.abs(f[0] - f[1]),\n          m = Math.abs(f[2] - f[3]),\n          g = Math.abs(f[0] - f[2]) + Math.abs(f[1] - f[3]),\n          x = Math.min(.25, .5 * l * (y + m) / p),\n          v = Math.min(.25, .5 * l * g / d);\n        return o + Math.max(x * s, v * a);\n      }(i, s, o) : l;\n    return {\n      base: l + (0 === r) ? -1 : r,\n      top: u ? Math.max(c + n, l + r + 2) : l + n\n    };\n  }\n  var Jo = _i([{\n      name: \"a_pos_normal\",\n      components: 2,\n      type: \"Int16\"\n    }, {\n      name: \"a_data\",\n      components: 4,\n      type: \"Uint8\"\n    }, {\n      name: \"a_linesofar\",\n      components: 1,\n      type: \"Float32\"\n    }], 4),\n    Ko = Jo.members,\n    Ho = _i([{\n      name: \"a_packed\",\n      components: 4,\n      type: \"Float32\"\n    }]),\n    Qo = Ho.members,\n    tl = Co.types,\n    el = Math.cos(Math.PI / 180 * 37.5);\n  var LineBucket = /*#__PURE__*/function () {\n    function LineBucket(t) {\n      var _this26 = this;\n      _classCallCheck(this, LineBucket);\n      this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n        return t.id;\n      }), this.index = t.index, this.projection = t.projection, this.hasPattern = !1, this.patternFeatures = [], this.lineClipsArray = [], this.gradients = {}, this.layers.forEach(function (t) {\n        _this26.gradients[t.id] = {};\n      }), this.layoutVertexArray = new StructArrayLayout2i4ub1f12(), this.layoutVertexArray2 = new StructArrayLayout4f16(), this.indexArray = new StructArrayLayout3ui6(), this.programConfigurations = new ProgramConfigurationSet(t.layers, t.zoom), this.segments = new SegmentVector(), this.maxLineLength = 0, this.stateDependentLayerIds = this.layers.filter(function (t) {\n        return t.isStateDependent();\n      }).map(function (t) {\n        return t.id;\n      });\n    }\n    _createClass(LineBucket, [{\n      key: \"populate\",\n      value: function populate(t, e, r, n) {\n        this.hasPattern = lo(\"line\", this.layers, e);\n        var i = this.layers[0].layout.get(\"line-sort-key\"),\n          s = [];\n        var _iterator90 = _createForOfIteratorHelper(t),\n          _step90;\n        try {\n          for (_iterator90.s(); !(_step90 = _iterator90.n()).done;) {\n            var _step90$value = _step90.value,\n              _e110 = _step90$value.feature,\n              _a48 = _step90$value.id,\n              _o25 = _step90$value.index,\n              _l23 = _step90$value.sourceLayerIndex;\n            var _t125 = this.layers[0]._featureFilter.needGeometry,\n              _u21 = Js(_e110, _t125);\n            if (!this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom), _u21, r)) continue;\n            var _c15 = i ? i.evaluate(_u21, {}, r) : void 0,\n              _h11 = {\n                id: _a48,\n                properties: _e110.properties,\n                type: _e110.type,\n                sourceLayerIndex: _l23,\n                index: _o25,\n                geometry: _t125 ? _u21.geometry : Ws(_e110, r, n),\n                patterns: {},\n                sortKey: _c15\n              };\n            s.push(_h11);\n          }\n        } catch (err) {\n          _iterator90.e(err);\n        } finally {\n          _iterator90.f();\n        }\n        i && s.sort(function (t, e) {\n          return t.sortKey - e.sortKey;\n        });\n        var a = e.lineAtlas,\n          o = e.featureIndex,\n          l = this.addConstantDashes(a);\n        for (var _i69 = 0, _s49 = s; _i69 < _s49.length; _i69++) {\n          var _n73 = _s49[_i69];\n          var _i70 = _n73.geometry,\n            _s50 = _n73.index,\n            _u20 = _n73.sourceLayerIndex;\n          if (l && this.addFeatureDashes(_n73, a), this.hasPattern) {\n            var _t124 = uo(\"line\", this.layers, _n73, this.zoom, e);\n            this.patternFeatures.push(_t124);\n          } else this.addFeature(_n73, _i70, _s50, r, a.positions, e.availableImages);\n          o.insert(t[_s50].feature, _i70, _s50, _u20, this.index);\n        }\n      }\n    }, {\n      key: \"addConstantDashes\",\n      value: function addConstantDashes(t) {\n        var e = !1;\n        var _iterator91 = _createForOfIteratorHelper(this.layers),\n          _step91;\n        try {\n          for (_iterator91.s(); !(_step91 = _iterator91.n()).done;) {\n            var _r110 = _step91.value;\n            var _n74 = _r110.paint.get(\"line-dasharray\").value,\n              _i71 = _r110.layout.get(\"line-cap\").value;\n            if (\"constant\" !== _n74.kind || \"constant\" !== _i71.kind) e = !0;else {\n              var _e111 = _i71.value,\n                _r111 = _n74.value;\n              if (!_r111) continue;\n              t.addDash(_r111, _e111);\n            }\n          }\n        } catch (err) {\n          _iterator91.e(err);\n        } finally {\n          _iterator91.f();\n        }\n        return e;\n      }\n    }, {\n      key: \"addFeatureDashes\",\n      value: function addFeatureDashes(t, e) {\n        var r = this.zoom;\n        var _iterator92 = _createForOfIteratorHelper(this.layers),\n          _step92;\n        try {\n          for (_iterator92.s(); !(_step92 = _iterator92.n()).done;) {\n            var _n75 = _step92.value;\n            var _i72 = _n75.paint.get(\"line-dasharray\").value,\n              _s51 = _n75.layout.get(\"line-cap\").value;\n            if (\"constant\" === _i72.kind && \"constant\" === _s51.kind) continue;\n            var _a49 = void 0,\n              _o26 = void 0;\n            if (\"constant\" === _i72.kind) {\n              if (_a49 = _i72.value, !_a49) continue;\n            } else _a49 = _i72.evaluate({\n              zoom: r\n            }, t);\n            _o26 = \"constant\" === _s51.kind ? _s51.value : _s51.evaluate({\n              zoom: r\n            }, t), e.addDash(_a49, _o26), t.patterns[_n75.id] = e.getKey(_a49, _o26);\n          }\n        } catch (err) {\n          _iterator92.e(err);\n        } finally {\n          _iterator92.f();\n        }\n      }\n    }, {\n      key: \"update\",\n      value: function update(t, e, r, n) {\n        this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r, n);\n      }\n    }, {\n      key: \"addFeatures\",\n      value: function addFeatures(t, e, r, n, i) {\n        var _iterator93 = _createForOfIteratorHelper(this.patternFeatures),\n          _step93;\n        try {\n          for (_iterator93.s(); !(_step93 = _iterator93.n()).done;) {\n            var _t126 = _step93.value;\n            this.addFeature(_t126, _t126.geometry, _t126.index, e, r, n);\n          }\n        } catch (err) {\n          _iterator93.e(err);\n        } finally {\n          _iterator93.f();\n        }\n      }\n    }, {\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return 0 === this.layoutVertexArray.length;\n      }\n    }, {\n      key: \"uploadPending\",\n      value: function uploadPending() {\n        return !this.uploaded || this.programConfigurations.needsUpload;\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        this.uploaded || (0 !== this.layoutVertexArray2.length && (this.layoutVertexBuffer2 = t.createVertexBuffer(this.layoutVertexArray2, Qo)), this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Ko), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n      }\n    }, {\n      key: \"lineFeatureClips\",\n      value: function lineFeatureClips(t) {\n        if (t.properties && t.properties.hasOwnProperty(\"mapbox_clip_start\") && t.properties.hasOwnProperty(\"mapbox_clip_end\")) return {\n          start: +t.properties.mapbox_clip_start,\n          end: +t.properties.mapbox_clip_end\n        };\n      }\n    }, {\n      key: \"addFeature\",\n      value: function addFeature(t, e, r, n, i, s) {\n        var a = this.layers[0].layout,\n          o = a.get(\"line-join\").evaluate(t, {}),\n          l = a.get(\"line-cap\").evaluate(t, {}),\n          u = a.get(\"line-miter-limit\"),\n          c = a.get(\"line-round-limit\");\n        this.lineClips = this.lineFeatureClips(t);\n        var _iterator94 = _createForOfIteratorHelper(e),\n          _step94;\n        try {\n          for (_iterator94.s(); !(_step94 = _iterator94.n()).done;) {\n            var _r112 = _step94.value;\n            this.addLine(_r112, t, o, l, u, c);\n          }\n        } catch (err) {\n          _iterator94.e(err);\n        } finally {\n          _iterator94.f();\n        }\n        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, i, s, n);\n      }\n    }, {\n      key: \"addLine\",\n      value: function addLine(t, e, r, n, i, s) {\n        if (this.distance = 0, this.scaledDistance = 0, this.totalDistance = 0, this.lineSoFar = 0, this.lineClips) {\n          this.lineClipsArray.push(this.lineClips);\n          for (var _e112 = 0; _e112 < t.length - 1; _e112++) this.totalDistance += t[_e112].dist(t[_e112 + 1]);\n          this.updateScaledDistance(), this.maxLineLength = Math.max(this.maxLineLength, this.totalDistance);\n        }\n        var a = \"Polygon\" === tl[e.type];\n        var o = t.length;\n        for (; o >= 2 && t[o - 1].equals(t[o - 2]);) o--;\n        var l = 0;\n        for (; l < o - 1 && t[l].equals(t[l + 1]);) l++;\n        if (o < (a ? 3 : 2)) return;\n        \"bevel\" === r && (i = 1.05);\n        var u = this.overscaling <= 16 ? 122880 / (512 * this.overscaling) : 0,\n          c = this.segments.prepareSegment(10 * o, this.layoutVertexArray, this.indexArray);\n        var h, p, d, f, y;\n        this.e1 = this.e2 = -1, a && (h = t[o - 2], y = t[l].sub(h)._unit()._perp());\n        for (var _e113 = l; _e113 < o; _e113++) {\n          if (d = _e113 === o - 1 ? a ? t[l + 1] : void 0 : t[_e113 + 1], d && t[_e113].equals(d)) continue;\n          y && (f = y), h && (p = h), h = t[_e113], y = d ? d.sub(h)._unit()._perp() : f, f = f || y;\n          var _m2 = f.add(y);\n          0 === _m2.x && 0 === _m2.y || _m2._unit();\n          var _g3 = f.x * y.x + f.y * y.y,\n            _x3 = _m2.x * y.x + _m2.y * y.y,\n            _v2 = 0 !== _x3 ? 1 / _x3 : 1 / 0,\n            _b2 = 2 * Math.sqrt(2 - 2 * _x3),\n            _w2 = _x3 < el && p && d,\n            _3 = f.x * y.y - f.y * y.x > 0;\n          if (_w2 && _e113 > l) {\n            var _t127 = h.dist(p);\n            if (_t127 > 2 * u) {\n              var _e114 = h.sub(h.sub(p)._mult(u / _t127)._round());\n              this.updateDistance(p, _e114), this.addCurrentVertex(_e114, f, 0, 0, c), p = _e114;\n            }\n          }\n          var _S2 = p && d;\n          var _A2 = _S2 ? r : a ? \"butt\" : n;\n          if (_S2 && \"round\" === _A2 && (_v2 < s ? _A2 = \"miter\" : _v2 <= 2 && (_A2 = \"fakeround\")), \"miter\" === _A2 && _v2 > i && (_A2 = \"bevel\"), \"bevel\" === _A2 && (_v2 > 2 && (_A2 = \"flipbevel\"), _v2 < i && (_A2 = \"miter\")), p && this.updateDistance(p, h), \"miter\" === _A2) _m2._mult(_v2), this.addCurrentVertex(h, _m2, 0, 0, c);else if (\"flipbevel\" === _A2) {\n            if (_v2 > 100) _m2 = y.mult(-1);else {\n              var _t128 = _v2 * f.add(y).mag() / f.sub(y).mag();\n              _m2._perp()._mult(_t128 * (_3 ? -1 : 1));\n            }\n            this.addCurrentVertex(h, _m2, 0, 0, c), this.addCurrentVertex(h, _m2.mult(-1), 0, 0, c);\n          } else if (\"bevel\" === _A2 || \"fakeround\" === _A2) {\n            var _t129 = -Math.sqrt(_v2 * _v2 - 1),\n              _e115 = _3 ? _t129 : 0,\n              _r113 = _3 ? 0 : _t129;\n            if (p && this.addCurrentVertex(h, f, _e115, _r113, c), \"fakeround\" === _A2) {\n              var _t130 = Math.round(180 * _b2 / Math.PI / 20);\n              for (var _e116 = 1; _e116 < _t130; _e116++) {\n                var _r114 = _e116 / _t130;\n                if (.5 !== _r114) {\n                  var _t131 = _r114 - .5;\n                  _r114 += _r114 * _t131 * (_r114 - 1) * ((1.0904 + _g3 * (_g3 * (3.55645 - 1.43519 * _g3) - 3.2452)) * _t131 * _t131 + (.848013 + _g3 * (.215638 * _g3 - 1.06021)));\n                }\n                var _n76 = y.sub(f)._mult(_r114)._add(f)._unit()._mult(_3 ? -1 : 1);\n                this.addHalfVertex(h, _n76.x, _n76.y, !1, _3, 0, c);\n              }\n            }\n            d && this.addCurrentVertex(h, y, -_e115, -_r113, c);\n          } else if (\"butt\" === _A2) this.addCurrentVertex(h, _m2, 0, 0, c);else if (\"square\" === _A2) {\n            var _t132 = p ? 1 : -1;\n            p || this.addCurrentVertex(h, _m2, _t132, _t132, c), this.addCurrentVertex(h, _m2, 0, 0, c), p && this.addCurrentVertex(h, _m2, _t132, _t132, c);\n          } else \"round\" === _A2 && (p && (this.addCurrentVertex(h, f, 0, 0, c), this.addCurrentVertex(h, f, 1, 1, c, !0)), d && (this.addCurrentVertex(h, y, -1, -1, c, !0), this.addCurrentVertex(h, y, 0, 0, c)));\n          if (_w2 && _e113 < o - 1) {\n            var _t133 = h.dist(d);\n            if (_t133 > 2 * u) {\n              var _e117 = h.add(d.sub(h)._mult(u / _t133)._round());\n              this.updateDistance(h, _e117), this.addCurrentVertex(_e117, y, 0, 0, c), h = _e117;\n            }\n          }\n        }\n      }\n    }, {\n      key: \"addCurrentVertex\",\n      value: function addCurrentVertex(t, e, r, n, i) {\n        var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;\n        var a = e.y * n - e.x,\n          o = -e.y - e.x * n;\n        this.addHalfVertex(t, e.x + e.y * r, e.y - e.x * r, s, !1, r, i), this.addHalfVertex(t, a, o, s, !0, -n, i);\n      }\n    }, {\n      key: \"addHalfVertex\",\n      value: function addHalfVertex(_ref116, r, n, i, s, a, o) {\n        var t = _ref116.x,\n          e = _ref116.y;\n        this.layoutVertexArray.emplaceBack((t << 1) + (i ? 1 : 0), (e << 1) + (s ? 1 : 0), Math.round(63 * r) + 128, Math.round(63 * n) + 128, 1 + (0 === a ? 0 : a < 0 ? -1 : 1), 0, this.lineSoFar), this.lineClips && this.layoutVertexArray2.emplaceBack(this.scaledDistance, this.lineClipsArray.length, this.lineClips.start, this.lineClips.end);\n        var l = o.vertexLength++;\n        this.e1 >= 0 && this.e2 >= 0 && (this.indexArray.emplaceBack(this.e1, this.e2, l), o.primitiveLength++), s ? this.e2 = l : this.e1 = l;\n      }\n    }, {\n      key: \"updateScaledDistance\",\n      value: function updateScaledDistance() {\n        if (this.lineClips) {\n          var _t134 = this.totalDistance / (this.lineClips.end - this.lineClips.start);\n          this.scaledDistance = this.distance / this.totalDistance, this.lineSoFar = _t134 * this.lineClips.start + this.distance;\n        } else this.lineSoFar = this.distance;\n      }\n    }, {\n      key: \"updateDistance\",\n      value: function updateDistance(t, e) {\n        this.distance += t.dist(e), this.updateScaledDistance();\n      }\n    }]);\n    return LineBucket;\n  }();\n  Er(LineBucket, \"LineBucket\", {\n    omit: [\"layers\", \"patternFeatures\"]\n  });\n  var rl = new Properties({\n    \"line-cap\": new DataDrivenProperty(Rr.layout_line[\"line-cap\"]),\n    \"line-join\": new DataDrivenProperty(Rr.layout_line[\"line-join\"]),\n    \"line-miter-limit\": new DataConstantProperty(Rr.layout_line[\"line-miter-limit\"]),\n    \"line-round-limit\": new DataConstantProperty(Rr.layout_line[\"line-round-limit\"]),\n    \"line-sort-key\": new DataDrivenProperty(Rr.layout_line[\"line-sort-key\"])\n  });\n  var nl = {\n    paint: new Properties({\n      \"line-opacity\": new DataDrivenProperty(Rr.paint_line[\"line-opacity\"]),\n      \"line-color\": new DataDrivenProperty(Rr.paint_line[\"line-color\"]),\n      \"line-translate\": new DataConstantProperty(Rr.paint_line[\"line-translate\"]),\n      \"line-translate-anchor\": new DataConstantProperty(Rr.paint_line[\"line-translate-anchor\"]),\n      \"line-width\": new DataDrivenProperty(Rr.paint_line[\"line-width\"]),\n      \"line-gap-width\": new DataDrivenProperty(Rr.paint_line[\"line-gap-width\"]),\n      \"line-offset\": new DataDrivenProperty(Rr.paint_line[\"line-offset\"]),\n      \"line-blur\": new DataDrivenProperty(Rr.paint_line[\"line-blur\"]),\n      \"line-dasharray\": new DataDrivenProperty(Rr.paint_line[\"line-dasharray\"]),\n      \"line-pattern\": new DataDrivenProperty(Rr.paint_line[\"line-pattern\"]),\n      \"line-gradient\": new ColorRampProperty(Rr.paint_line[\"line-gradient\"]),\n      \"line-trim-offset\": new DataConstantProperty(Rr.paint_line[\"line-trim-offset\"])\n    }),\n    layout: rl\n  };\n  var il = new ( /*#__PURE__*/function (_DataDrivenProperty) {\n    _inherits(LineFloorwidthProperty, _DataDrivenProperty);\n    function LineFloorwidthProperty() {\n      _classCallCheck(this, LineFloorwidthProperty);\n      return _possibleConstructorReturn(this, _getPrototypeOf(LineFloorwidthProperty).apply(this, arguments));\n    }\n    _createClass(LineFloorwidthProperty, [{\n      key: \"possiblyEvaluate\",\n      value: function possiblyEvaluate(t, e) {\n        return e = new EvaluationParameters(Math.floor(e.zoom), {\n          now: e.now,\n          fadeDuration: e.fadeDuration,\n          transition: e.transition\n        }), _get(_getPrototypeOf(LineFloorwidthProperty.prototype), \"possiblyEvaluate\", this).call(this, t, e);\n      }\n    }, {\n      key: \"evaluate\",\n      value: function evaluate(t, e, r, n) {\n        return e = p({}, e, {\n          zoom: Math.floor(e.zoom)\n        }), _get(_getPrototypeOf(LineFloorwidthProperty.prototype), \"evaluate\", this).call(this, t, e, r, n);\n      }\n    }]);\n    return LineFloorwidthProperty;\n  }(DataDrivenProperty))(nl.paint.properties[\"line-width\"].specification);\n  function sl(t, e) {\n    return e > 0 ? e + 2 * t : t;\n  }\n  il.useIntegerZoom = !0;\n  var al = _i([{\n      name: \"a_pos_offset\",\n      components: 4,\n      type: \"Int16\"\n    }, {\n      name: \"a_tex_size\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixeloffset\",\n      components: 4,\n      type: \"Int16\"\n    }], 4),\n    ol = _i([{\n      name: \"a_globe_anchor\",\n      components: 3,\n      type: \"Int16\"\n    }, {\n      name: \"a_globe_normal\",\n      components: 3,\n      type: \"Float32\"\n    }], 4),\n    ll = _i([{\n      name: \"a_projected_pos\",\n      components: 4,\n      type: \"Float32\"\n    }], 4);\n  _i([{\n    name: \"a_fade_opacity\",\n    components: 1,\n    type: \"Uint32\"\n  }], 4);\n  var ul = _i([{\n      name: \"a_placed\",\n      components: 2,\n      type: \"Uint8\"\n    }, {\n      name: \"a_shift\",\n      components: 2,\n      type: \"Float32\"\n    }]),\n    cl = _i([{\n      name: \"a_size_scale\",\n      components: 1,\n      type: \"Float32\"\n    }, {\n      name: \"a_padding\",\n      components: 2,\n      type: \"Float32\"\n    }]);\n  _i([{\n    type: \"Int16\",\n    name: \"projectedAnchorX\"\n  }, {\n    type: \"Int16\",\n    name: \"projectedAnchorY\"\n  }, {\n    type: \"Int16\",\n    name: \"projectedAnchorZ\"\n  }, {\n    type: \"Int16\",\n    name: \"tileAnchorX\"\n  }, {\n    type: \"Int16\",\n    name: \"tileAnchorY\"\n  }, {\n    type: \"Float32\",\n    name: \"x1\"\n  }, {\n    type: \"Float32\",\n    name: \"y1\"\n  }, {\n    type: \"Float32\",\n    name: \"x2\"\n  }, {\n    type: \"Float32\",\n    name: \"y2\"\n  }, {\n    type: \"Int16\",\n    name: \"padding\"\n  }, {\n    type: \"Uint32\",\n    name: \"featureIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"sourceLayerIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"bucketIndex\"\n  }]);\n  var hl = _i([{\n    name: \"a_pos\",\n    components: 3,\n    type: \"Int16\"\n  }, {\n    name: \"a_anchor_pos\",\n    components: 2,\n    type: \"Int16\"\n  }, {\n    name: \"a_extrude\",\n    components: 2,\n    type: \"Int16\"\n  }], 4);\n  _i([{\n    name: \"a_pos_2f\",\n    components: 2,\n    type: \"Float32\"\n  }, {\n    name: \"a_radius\",\n    components: 1,\n    type: \"Float32\"\n  }, {\n    name: \"a_flags\",\n    components: 2,\n    type: \"Int16\"\n  }], 4), _i([{\n    name: \"triangle\",\n    components: 3,\n    type: \"Uint16\"\n  }]), _i([{\n    type: \"Int16\",\n    name: \"projectedAnchorX\"\n  }, {\n    type: \"Int16\",\n    name: \"projectedAnchorY\"\n  }, {\n    type: \"Int16\",\n    name: \"projectedAnchorZ\"\n  }, {\n    type: \"Float32\",\n    name: \"tileAnchorX\"\n  }, {\n    type: \"Float32\",\n    name: \"tileAnchorY\"\n  }, {\n    type: \"Uint16\",\n    name: \"glyphStartIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"numGlyphs\"\n  }, {\n    type: \"Uint32\",\n    name: \"vertexStartIndex\"\n  }, {\n    type: \"Uint32\",\n    name: \"lineStartIndex\"\n  }, {\n    type: \"Uint32\",\n    name: \"lineLength\"\n  }, {\n    type: \"Uint16\",\n    name: \"segment\"\n  }, {\n    type: \"Uint16\",\n    name: \"lowerSize\"\n  }, {\n    type: \"Uint16\",\n    name: \"upperSize\"\n  }, {\n    type: \"Float32\",\n    name: \"lineOffsetX\"\n  }, {\n    type: \"Float32\",\n    name: \"lineOffsetY\"\n  }, {\n    type: \"Uint8\",\n    name: \"writingMode\"\n  }, {\n    type: \"Uint8\",\n    name: \"placedOrientation\"\n  }, {\n    type: \"Uint8\",\n    name: \"hidden\"\n  }, {\n    type: \"Uint32\",\n    name: \"crossTileID\"\n  }, {\n    type: \"Int16\",\n    name: \"associatedIconIndex\"\n  }, {\n    type: \"Uint8\",\n    name: \"flipState\"\n  }]), _i([{\n    type: \"Int16\",\n    name: \"projectedAnchorX\"\n  }, {\n    type: \"Int16\",\n    name: \"projectedAnchorY\"\n  }, {\n    type: \"Int16\",\n    name: \"projectedAnchorZ\"\n  }, {\n    type: \"Float32\",\n    name: \"tileAnchorX\"\n  }, {\n    type: \"Float32\",\n    name: \"tileAnchorY\"\n  }, {\n    type: \"Int16\",\n    name: \"rightJustifiedTextSymbolIndex\"\n  }, {\n    type: \"Int16\",\n    name: \"centerJustifiedTextSymbolIndex\"\n  }, {\n    type: \"Int16\",\n    name: \"leftJustifiedTextSymbolIndex\"\n  }, {\n    type: \"Int16\",\n    name: \"verticalPlacedTextSymbolIndex\"\n  }, {\n    type: \"Int16\",\n    name: \"placedIconSymbolIndex\"\n  }, {\n    type: \"Int16\",\n    name: \"verticalPlacedIconSymbolIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"key\"\n  }, {\n    type: \"Uint16\",\n    name: \"textBoxStartIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"textBoxEndIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"verticalTextBoxStartIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"verticalTextBoxEndIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"iconBoxStartIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"iconBoxEndIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"verticalIconBoxStartIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"verticalIconBoxEndIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"featureIndex\"\n  }, {\n    type: \"Uint16\",\n    name: \"numHorizontalGlyphVertices\"\n  }, {\n    type: \"Uint16\",\n    name: \"numVerticalGlyphVertices\"\n  }, {\n    type: \"Uint16\",\n    name: \"numIconVertices\"\n  }, {\n    type: \"Uint16\",\n    name: \"numVerticalIconVertices\"\n  }, {\n    type: \"Uint16\",\n    name: \"useRuntimeCollisionCircles\"\n  }, {\n    type: \"Uint32\",\n    name: \"crossTileID\"\n  }, {\n    type: \"Float32\",\n    components: 2,\n    name: \"textOffset\"\n  }, {\n    type: \"Float32\",\n    name: \"collisionCircleDiameter\"\n  }]), _i([{\n    type: \"Float32\",\n    name: \"offsetX\"\n  }]), _i([{\n    type: \"Int16\",\n    name: \"x\"\n  }, {\n    type: \"Int16\",\n    name: \"y\"\n  }]);\n  var pl = 24;\n  var dl = 128;\n  function fl(t, e) {\n    var r = e.expression;\n    if (\"constant\" === r.kind) return {\n      kind: \"constant\",\n      layoutSize: r.evaluate(new EvaluationParameters(t + 1))\n    };\n    if (\"source\" === r.kind) return {\n      kind: \"source\"\n    };\n    {\n      var _e118 = r.zoomStops,\n        _n77 = r.interpolationType;\n      var _i73 = 0;\n      for (; _i73 < _e118.length && _e118[_i73] <= t;) _i73++;\n      _i73 = Math.max(0, _i73 - 1);\n      var _s52 = _i73;\n      for (; _s52 < _e118.length && _e118[_s52] < t + 1;) _s52++;\n      _s52 = Math.min(_e118.length - 1, _s52);\n      var _a50 = _e118[_i73],\n        _o27 = _e118[_s52];\n      return \"composite\" === r.kind ? {\n        kind: \"composite\",\n        minZoom: _a50,\n        maxZoom: _o27,\n        interpolationType: _n77\n      } : {\n        kind: \"camera\",\n        minZoom: _a50,\n        maxZoom: _o27,\n        minSize: r.evaluate(new EvaluationParameters(_a50)),\n        maxSize: r.evaluate(new EvaluationParameters(_o27)),\n        interpolationType: _n77\n      };\n    }\n  }\n  function yl(t, _ref117, _ref118) {\n    var e = _ref117.uSize,\n      r = _ref117.uSizeT;\n    var n = _ref118.lowerSize,\n      i = _ref118.upperSize;\n    return \"source\" === t.kind ? n / dl : \"composite\" === t.kind ? qt(n / dl, i / dl, r) : e;\n  }\n  function ml(t, e) {\n    var r = 0,\n      n = 0;\n    if (\"constant\" === t.kind) n = t.layoutSize;else if (\"source\" !== t.kind) {\n      var _i74 = t.interpolationType,\n        _s53 = t.minZoom,\n        _a51 = t.maxZoom,\n        _o28 = _i74 ? u(ue.interpolationFactor(_i74, e, _s53, _a51), 0, 1) : 0;\n      \"camera\" === t.kind ? n = qt(t.minSize, t.maxSize, _o28) : r = _o28;\n    }\n    return {\n      uSizeT: r,\n      uSize: n\n    };\n  }\n  function gl(t, e, r) {\n    return t.sections.forEach(function (t) {\n      t.text = function (t, e, r) {\n        var n = e.layout.get(\"text-transform\").evaluate(r, {});\n        return \"uppercase\" === n ? t = t.toLocaleUpperCase() : \"lowercase\" === n && (t = t.toLocaleLowerCase()), vi.applyArabicShaping && (t = vi.applyArabicShaping(t)), t;\n      }(t.text, e, r);\n    }), t;\n  }\n  var xl = {\n    \"!\": \"︕\",\n    \"#\": \"＃\",\n    $: \"＄\",\n    \"%\": \"％\",\n    \"&\": \"＆\",\n    \"(\": \"︵\",\n    \")\": \"︶\",\n    \"*\": \"＊\",\n    \"+\": \"＋\",\n    \",\": \"︐\",\n    \"-\": \"︲\",\n    \".\": \"・\",\n    \"/\": \"／\",\n    \":\": \"︓\",\n    \";\": \"︔\",\n    \"<\": \"︿\",\n    \"=\": \"＝\",\n    \">\": \"﹀\",\n    \"?\": \"︖\",\n    \"@\": \"＠\",\n    \"[\": \"﹇\",\n    \"\\\\\": \"＼\",\n    \"]\": \"﹈\",\n    \"^\": \"＾\",\n    _: \"︳\",\n    \"`\": \"｀\",\n    \"{\": \"︷\",\n    \"|\": \"―\",\n    \"}\": \"︸\",\n    \"~\": \"～\",\n    \"¢\": \"￠\",\n    \"£\": \"￡\",\n    \"¥\": \"￥\",\n    \"¦\": \"￤\",\n    \"¬\": \"￢\",\n    \"¯\": \"￣\",\n    \"–\": \"︲\",\n    \"—\": \"︱\",\n    \"‘\": \"﹃\",\n    \"’\": \"﹄\",\n    \"“\": \"﹁\",\n    \"”\": \"﹂\",\n    \"…\": \"︙\",\n    \"‧\": \"・\",\n    \"₩\": \"￦\",\n    \"、\": \"︑\",\n    \"。\": \"︒\",\n    \"〈\": \"︿\",\n    \"〉\": \"﹀\",\n    \"《\": \"︽\",\n    \"》\": \"︾\",\n    \"「\": \"﹁\",\n    \"」\": \"﹂\",\n    \"『\": \"﹃\",\n    \"』\": \"﹄\",\n    \"【\": \"︻\",\n    \"】\": \"︼\",\n    \"〔\": \"︹\",\n    \"〕\": \"︺\",\n    \"〖\": \"︗\",\n    \"〗\": \"︘\",\n    \"！\": \"︕\",\n    \"（\": \"︵\",\n    \"）\": \"︶\",\n    \"，\": \"︐\",\n    \"－\": \"︲\",\n    \"．\": \"・\",\n    \"：\": \"︓\",\n    \"；\": \"︔\",\n    \"＜\": \"︿\",\n    \"＞\": \"﹀\",\n    \"？\": \"︖\",\n    \"［\": \"﹇\",\n    \"］\": \"﹈\",\n    \"＿\": \"︳\",\n    \"｛\": \"︷\",\n    \"｜\": \"―\",\n    \"｝\": \"︸\",\n    \"｟\": \"︵\",\n    \"｠\": \"︶\",\n    \"｡\": \"︒\",\n    \"｢\": \"﹁\",\n    \"｣\": \"﹂\",\n    \"←\": \"↑\",\n    \"→\": \"↓\"\n  };\n  function vl(t) {\n    return \"︶\" === t || \"﹈\" === t || \"︸\" === t || \"﹄\" === t || \"﹂\" === t || \"︾\" === t || \"︼\" === t || \"︺\" === t || \"︘\" === t || \"﹀\" === t || \"︐\" === t || \"︓\" === t || \"︔\" === t || \"｀\" === t || \"￣\" === t || \"︑\" === t || \"︒\" === t;\n  }\n  function bl(t) {\n    return \"︵\" === t || \"﹇\" === t || \"︷\" === t || \"﹃\" === t || \"﹁\" === t || \"︽\" === t || \"︻\" === t || \"︹\" === t || \"︗\" === t || \"︿\" === t;\n  }\n  var wl = Al,\n    _l = function _l(t, e, r, n, i) {\n      var s,\n        a,\n        o = 8 * i - n - 1,\n        l = (1 << o) - 1,\n        u = l >> 1,\n        c = -7,\n        h = r ? i - 1 : 0,\n        p = r ? -1 : 1,\n        d = t[e + h];\n      for (h += p, s = d & (1 << -c) - 1, d >>= -c, c += o; c > 0; s = 256 * s + t[e + h], h += p, c -= 8);\n      for (a = s & (1 << -c) - 1, s >>= -c, c += n; c > 0; a = 256 * a + t[e + h], h += p, c -= 8);\n      if (0 === s) s = 1 - u;else {\n        if (s === l) return a ? NaN : 1 / 0 * (d ? -1 : 1);\n        a += Math.pow(2, n), s -= u;\n      }\n      return (d ? -1 : 1) * a * Math.pow(2, s - n);\n    },\n    Sl = function Sl(t, e, r, n, i, s) {\n      var a,\n        o,\n        l,\n        u = 8 * s - i - 1,\n        c = (1 << u) - 1,\n        h = c >> 1,\n        p = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,\n        d = n ? 0 : s - 1,\n        f = n ? 1 : -1,\n        y = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;\n      for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (o = isNaN(e) ? 1 : 0, a = c) : (a = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -a)) < 1 && (a--, l *= 2), (e += a + h >= 1 ? p / l : p * Math.pow(2, 1 - h)) * l >= 2 && (a++, l /= 2), a + h >= c ? (o = 0, a = c) : a + h >= 1 ? (o = (e * l - 1) * Math.pow(2, i), a += h) : (o = e * Math.pow(2, h - 1) * Math.pow(2, i), a = 0)); i >= 8; t[r + d] = 255 & o, d += f, o /= 256, i -= 8);\n      for (a = a << i | o, u += i; u > 0; t[r + d] = 255 & a, d += f, a /= 256, u -= 8);\n      t[r + d - f] |= 128 * y;\n    };\n  /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\n  function Al(t) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;\n  }\n  Al.Varint = 0, Al.Fixed64 = 1, Al.Bytes = 2, Al.Fixed32 = 5;\n  var kl = 4294967296,\n    Il = 1 / kl,\n    Ml = \"undefined\" == typeof TextDecoder ? null : new TextDecoder(\"utf8\");\n  function Pl(t) {\n    return t.type === Al.Bytes ? t.readVarint() + t.pos : t.pos + 1;\n  }\n  function Tl(t, e, r) {\n    return r ? 4294967296 * e + (t >>> 0) : 4294967296 * (e >>> 0) + (t >>> 0);\n  }\n  function Cl(t, e, r) {\n    var n = e <= 16383 ? 1 : e <= 2097151 ? 2 : e <= 268435455 ? 3 : Math.floor(Math.log(e) / (7 * Math.LN2));\n    r.realloc(n);\n    for (var i = r.pos - 1; i >= t; i--) r.buf[i + n] = r.buf[i];\n  }\n  function El(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeVarint(t[r]);\n  }\n  function Dl(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeSVarint(t[r]);\n  }\n  function zl(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeFloat(t[r]);\n  }\n  function Bl(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeDouble(t[r]);\n  }\n  function Ll(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeBoolean(t[r]);\n  }\n  function Vl(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeFixed32(t[r]);\n  }\n  function Fl(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeSFixed32(t[r]);\n  }\n  function Rl(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeFixed64(t[r]);\n  }\n  function jl(t, e) {\n    for (var r = 0; r < t.length; r++) e.writeSFixed64(t[r]);\n  }\n  function Ol(t, e) {\n    return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + 16777216 * t[e + 3];\n  }\n  function $l(t, e, r) {\n    t[r] = e, t[r + 1] = e >>> 8, t[r + 2] = e >>> 16, t[r + 3] = e >>> 24;\n  }\n  function Ul(t, e) {\n    return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + (t[e + 3] << 24);\n  }\n  function ql(t) {\n    var e = 0,\n      r = 0;\n    var _iterator95 = _createForOfIteratorHelper(t),\n      _step95;\n    try {\n      for (_iterator95.s(); !(_step95 = _iterator95.n()).done;) {\n        var _n78 = _step95.value;\n        e += _n78.w * _n78.h, r = Math.max(r, _n78.w);\n      }\n    } catch (err) {\n      _iterator95.e(err);\n    } finally {\n      _iterator95.f();\n    }\n    t.sort(function (t, e) {\n      return e.h - t.h;\n    });\n    var n = [{\n      x: 0,\n      y: 0,\n      w: Math.max(Math.ceil(Math.sqrt(e / .95)), r),\n      h: 1 / 0\n    }];\n    var i = 0,\n      s = 0;\n    var _iterator96 = _createForOfIteratorHelper(t),\n      _step96;\n    try {\n      for (_iterator96.s(); !(_step96 = _iterator96.n()).done;) {\n        var _e119 = _step96.value;\n        for (var _t135 = n.length - 1; _t135 >= 0; _t135--) {\n          var _r115 = n[_t135];\n          if (!(_e119.w > _r115.w || _e119.h > _r115.h)) {\n            if (_e119.x = _r115.x, _e119.y = _r115.y, s = Math.max(s, _e119.y + _e119.h), i = Math.max(i, _e119.x + _e119.w), _e119.w === _r115.w && _e119.h === _r115.h) {\n              var _e120 = n.pop();\n              _t135 < n.length && (n[_t135] = _e120);\n            } else _e119.h === _r115.h ? (_r115.x += _e119.w, _r115.w -= _e119.w) : _e119.w === _r115.w ? (_r115.y += _e119.h, _r115.h -= _e119.h) : (n.push({\n              x: _r115.x + _e119.w,\n              y: _r115.y,\n              w: _r115.w - _e119.w,\n              h: _e119.h\n            }), _r115.y += _e119.h, _r115.h -= _e119.h);\n            break;\n          }\n        }\n      }\n    } catch (err) {\n      _iterator96.e(err);\n    } finally {\n      _iterator96.f();\n    }\n    return {\n      w: i,\n      h: s,\n      fill: e / (i * s) || 0\n    };\n  }\n  Al.prototype = {\n    destroy: function destroy() {\n      this.buf = null;\n    },\n    readFields: function readFields(t, e, r) {\n      for (r = r || this.length; this.pos < r;) {\n        var n = this.readVarint(),\n          i = n >> 3,\n          s = this.pos;\n        this.type = 7 & n, t(i, e, this), this.pos === s && this.skip(n);\n      }\n      return e;\n    },\n    readMessage: function readMessage(t, e) {\n      return this.readFields(t, e, this.readVarint() + this.pos);\n    },\n    readFixed32: function readFixed32() {\n      var t = Ol(this.buf, this.pos);\n      return this.pos += 4, t;\n    },\n    readSFixed32: function readSFixed32() {\n      var t = Ul(this.buf, this.pos);\n      return this.pos += 4, t;\n    },\n    readFixed64: function readFixed64() {\n      var t = Ol(this.buf, this.pos) + Ol(this.buf, this.pos + 4) * kl;\n      return this.pos += 8, t;\n    },\n    readSFixed64: function readSFixed64() {\n      var t = Ol(this.buf, this.pos) + Ul(this.buf, this.pos + 4) * kl;\n      return this.pos += 8, t;\n    },\n    readFloat: function readFloat() {\n      var t = _l(this.buf, this.pos, !0, 23, 4);\n      return this.pos += 4, t;\n    },\n    readDouble: function readDouble() {\n      var t = _l(this.buf, this.pos, !0, 52, 8);\n      return this.pos += 8, t;\n    },\n    readVarint: function readVarint(t) {\n      var e,\n        r,\n        n = this.buf;\n      return e = 127 & (r = n[this.pos++]), r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 7, r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 14, r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 21, r < 128 ? e : function (t, e, r) {\n        var n,\n          i,\n          s = r.buf;\n        if (n = (112 & (i = s[r.pos++])) >> 4, i < 128) return Tl(t, n, e);\n        if (n |= (127 & (i = s[r.pos++])) << 3, i < 128) return Tl(t, n, e);\n        if (n |= (127 & (i = s[r.pos++])) << 10, i < 128) return Tl(t, n, e);\n        if (n |= (127 & (i = s[r.pos++])) << 17, i < 128) return Tl(t, n, e);\n        if (n |= (127 & (i = s[r.pos++])) << 24, i < 128) return Tl(t, n, e);\n        if (n |= (1 & (i = s[r.pos++])) << 31, i < 128) return Tl(t, n, e);\n        throw new Error(\"Expected varint not more than 10 bytes\");\n      }(e |= (15 & (r = n[this.pos])) << 28, t, this))));\n    },\n    readVarint64: function readVarint64() {\n      return this.readVarint(!0);\n    },\n    readSVarint: function readSVarint() {\n      var t = this.readVarint();\n      return t % 2 == 1 ? (t + 1) / -2 : t / 2;\n    },\n    readBoolean: function readBoolean() {\n      return Boolean(this.readVarint());\n    },\n    readString: function readString() {\n      var t = this.readVarint() + this.pos,\n        e = this.pos;\n      return this.pos = t, t - e >= 12 && Ml ? function (t, e, r) {\n        return Ml.decode(t.subarray(e, r));\n      }(this.buf, e, t) : function (t, e, r) {\n        for (var n = \"\", i = e; i < r;) {\n          var s,\n            a,\n            o,\n            l = t[i],\n            u = null,\n            c = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1;\n          if (i + c > r) break;\n          1 === c ? l < 128 && (u = l) : 2 === c ? 128 == (192 & (s = t[i + 1])) && (u = (31 & l) << 6 | 63 & s) <= 127 && (u = null) : 3 === c ? (a = t[i + 2], 128 == (192 & (s = t[i + 1])) && 128 == (192 & a) && ((u = (15 & l) << 12 | (63 & s) << 6 | 63 & a) <= 2047 || u >= 55296 && u <= 57343) && (u = null)) : 4 === c && (a = t[i + 2], o = t[i + 3], 128 == (192 & (s = t[i + 1])) && 128 == (192 & a) && 128 == (192 & o) && ((u = (15 & l) << 18 | (63 & s) << 12 | (63 & a) << 6 | 63 & o) <= 65535 || u >= 1114112) && (u = null)), null === u ? (u = 65533, c = 1) : u > 65535 && (u -= 65536, n += String.fromCharCode(u >>> 10 & 1023 | 55296), u = 56320 | 1023 & u), n += String.fromCharCode(u), i += c;\n        }\n        return n;\n      }(this.buf, e, t);\n    },\n    readBytes: function readBytes() {\n      var t = this.readVarint() + this.pos,\n        e = this.buf.subarray(this.pos, t);\n      return this.pos = t, e;\n    },\n    readPackedVarint: function readPackedVarint(t, e) {\n      if (this.type !== Al.Bytes) return t.push(this.readVarint(e));\n      var r = Pl(this);\n      for (t = t || []; this.pos < r;) t.push(this.readVarint(e));\n      return t;\n    },\n    readPackedSVarint: function readPackedSVarint(t) {\n      if (this.type !== Al.Bytes) return t.push(this.readSVarint());\n      var e = Pl(this);\n      for (t = t || []; this.pos < e;) t.push(this.readSVarint());\n      return t;\n    },\n    readPackedBoolean: function readPackedBoolean(t) {\n      if (this.type !== Al.Bytes) return t.push(this.readBoolean());\n      var e = Pl(this);\n      for (t = t || []; this.pos < e;) t.push(this.readBoolean());\n      return t;\n    },\n    readPackedFloat: function readPackedFloat(t) {\n      if (this.type !== Al.Bytes) return t.push(this.readFloat());\n      var e = Pl(this);\n      for (t = t || []; this.pos < e;) t.push(this.readFloat());\n      return t;\n    },\n    readPackedDouble: function readPackedDouble(t) {\n      if (this.type !== Al.Bytes) return t.push(this.readDouble());\n      var e = Pl(this);\n      for (t = t || []; this.pos < e;) t.push(this.readDouble());\n      return t;\n    },\n    readPackedFixed32: function readPackedFixed32(t) {\n      if (this.type !== Al.Bytes) return t.push(this.readFixed32());\n      var e = Pl(this);\n      for (t = t || []; this.pos < e;) t.push(this.readFixed32());\n      return t;\n    },\n    readPackedSFixed32: function readPackedSFixed32(t) {\n      if (this.type !== Al.Bytes) return t.push(this.readSFixed32());\n      var e = Pl(this);\n      for (t = t || []; this.pos < e;) t.push(this.readSFixed32());\n      return t;\n    },\n    readPackedFixed64: function readPackedFixed64(t) {\n      if (this.type !== Al.Bytes) return t.push(this.readFixed64());\n      var e = Pl(this);\n      for (t = t || []; this.pos < e;) t.push(this.readFixed64());\n      return t;\n    },\n    readPackedSFixed64: function readPackedSFixed64(t) {\n      if (this.type !== Al.Bytes) return t.push(this.readSFixed64());\n      var e = Pl(this);\n      for (t = t || []; this.pos < e;) t.push(this.readSFixed64());\n      return t;\n    },\n    skip: function skip(t) {\n      var e = 7 & t;\n      if (e === Al.Varint) for (; this.buf[this.pos++] > 127;);else if (e === Al.Bytes) this.pos = this.readVarint() + this.pos;else if (e === Al.Fixed32) this.pos += 4;else {\n        if (e !== Al.Fixed64) throw new Error(\"Unimplemented type: \" + e);\n        this.pos += 8;\n      }\n    },\n    writeTag: function writeTag(t, e) {\n      this.writeVarint(t << 3 | e);\n    },\n    realloc: function realloc(t) {\n      for (var e = this.length || 16; e < this.pos + t;) e *= 2;\n      if (e !== this.length) {\n        var r = new Uint8Array(e);\n        r.set(this.buf), this.buf = r, this.length = e;\n      }\n    },\n    finish: function finish() {\n      return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length);\n    },\n    writeFixed32: function writeFixed32(t) {\n      this.realloc(4), $l(this.buf, t, this.pos), this.pos += 4;\n    },\n    writeSFixed32: function writeSFixed32(t) {\n      this.realloc(4), $l(this.buf, t, this.pos), this.pos += 4;\n    },\n    writeFixed64: function writeFixed64(t) {\n      this.realloc(8), $l(this.buf, -1 & t, this.pos), $l(this.buf, Math.floor(t * Il), this.pos + 4), this.pos += 8;\n    },\n    writeSFixed64: function writeSFixed64(t) {\n      this.realloc(8), $l(this.buf, -1 & t, this.pos), $l(this.buf, Math.floor(t * Il), this.pos + 4), this.pos += 8;\n    },\n    writeVarint: function writeVarint(t) {\n      (t = +t || 0) > 268435455 || t < 0 ? function (t, e) {\n        var r, n;\n        if (t >= 0 ? (r = t % 4294967296 | 0, n = t / 4294967296 | 0) : (n = ~(-t / 4294967296), 4294967295 ^ (r = ~(-t % 4294967296)) ? r = r + 1 | 0 : (r = 0, n = n + 1 | 0)), t >= 0x10000000000000000 || t < -0x10000000000000000) throw new Error(\"Given varint doesn't fit into 10 bytes\");\n        e.realloc(10), function (t, e, r) {\n          r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, r.buf[r.pos] = 127 & (t >>>= 7);\n        }(r, 0, e), function (t, e) {\n          var r = (7 & t) << 4;\n          e.buf[e.pos++] |= r | ((t >>>= 3) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t)))));\n        }(n, e);\n      }(t, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = t >>> 7 & 127))));\n    },\n    writeSVarint: function writeSVarint(t) {\n      this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t);\n    },\n    writeBoolean: function writeBoolean(t) {\n      this.writeVarint(Boolean(t));\n    },\n    writeString: function writeString(t) {\n      t = String(t), this.realloc(4 * t.length), this.pos++;\n      var e = this.pos;\n      this.pos = function (t, e, r) {\n        for (var n, i, s = 0; s < e.length; s++) {\n          if ((n = e.charCodeAt(s)) > 55295 && n < 57344) {\n            if (!i) {\n              n > 56319 || s + 1 === e.length ? (t[r++] = 239, t[r++] = 191, t[r++] = 189) : i = n;\n              continue;\n            }\n            if (n < 56320) {\n              t[r++] = 239, t[r++] = 191, t[r++] = 189, i = n;\n              continue;\n            }\n            n = i - 55296 << 10 | n - 56320 | 65536, i = null;\n          } else i && (t[r++] = 239, t[r++] = 191, t[r++] = 189, i = null);\n          n < 128 ? t[r++] = n : (n < 2048 ? t[r++] = n >> 6 | 192 : (n < 65536 ? t[r++] = n >> 12 | 224 : (t[r++] = n >> 18 | 240, t[r++] = n >> 12 & 63 | 128), t[r++] = n >> 6 & 63 | 128), t[r++] = 63 & n | 128);\n        }\n        return r;\n      }(this.buf, t, this.pos);\n      var r = this.pos - e;\n      r >= 128 && Cl(e, r, this), this.pos = e - 1, this.writeVarint(r), this.pos += r;\n    },\n    writeFloat: function writeFloat(t) {\n      this.realloc(4), Sl(this.buf, t, this.pos, !0, 23, 4), this.pos += 4;\n    },\n    writeDouble: function writeDouble(t) {\n      this.realloc(8), Sl(this.buf, t, this.pos, !0, 52, 8), this.pos += 8;\n    },\n    writeBytes: function writeBytes(t) {\n      var e = t.length;\n      this.writeVarint(e), this.realloc(e);\n      for (var r = 0; r < e; r++) this.buf[this.pos++] = t[r];\n    },\n    writeRawMessage: function writeRawMessage(t, e) {\n      this.pos++;\n      var r = this.pos;\n      t(e, this);\n      var n = this.pos - r;\n      n >= 128 && Cl(r, n, this), this.pos = r - 1, this.writeVarint(n), this.pos += n;\n    },\n    writeMessage: function writeMessage(t, e, r) {\n      this.writeTag(t, Al.Bytes), this.writeRawMessage(e, r);\n    },\n    writePackedVarint: function writePackedVarint(t, e) {\n      e.length && this.writeMessage(t, El, e);\n    },\n    writePackedSVarint: function writePackedSVarint(t, e) {\n      e.length && this.writeMessage(t, Dl, e);\n    },\n    writePackedBoolean: function writePackedBoolean(t, e) {\n      e.length && this.writeMessage(t, Ll, e);\n    },\n    writePackedFloat: function writePackedFloat(t, e) {\n      e.length && this.writeMessage(t, zl, e);\n    },\n    writePackedDouble: function writePackedDouble(t, e) {\n      e.length && this.writeMessage(t, Bl, e);\n    },\n    writePackedFixed32: function writePackedFixed32(t, e) {\n      e.length && this.writeMessage(t, Vl, e);\n    },\n    writePackedSFixed32: function writePackedSFixed32(t, e) {\n      e.length && this.writeMessage(t, Fl, e);\n    },\n    writePackedFixed64: function writePackedFixed64(t, e) {\n      e.length && this.writeMessage(t, Rl, e);\n    },\n    writePackedSFixed64: function writePackedSFixed64(t, e) {\n      e.length && this.writeMessage(t, jl, e);\n    },\n    writeBytesField: function writeBytesField(t, e) {\n      this.writeTag(t, Al.Bytes), this.writeBytes(e);\n    },\n    writeFixed32Field: function writeFixed32Field(t, e) {\n      this.writeTag(t, Al.Fixed32), this.writeFixed32(e);\n    },\n    writeSFixed32Field: function writeSFixed32Field(t, e) {\n      this.writeTag(t, Al.Fixed32), this.writeSFixed32(e);\n    },\n    writeFixed64Field: function writeFixed64Field(t, e) {\n      this.writeTag(t, Al.Fixed64), this.writeFixed64(e);\n    },\n    writeSFixed64Field: function writeSFixed64Field(t, e) {\n      this.writeTag(t, Al.Fixed64), this.writeSFixed64(e);\n    },\n    writeVarintField: function writeVarintField(t, e) {\n      this.writeTag(t, Al.Varint), this.writeVarint(e);\n    },\n    writeSVarintField: function writeSVarintField(t, e) {\n      this.writeTag(t, Al.Varint), this.writeSVarint(e);\n    },\n    writeStringField: function writeStringField(t, e) {\n      this.writeTag(t, Al.Bytes), this.writeString(e);\n    },\n    writeFloatField: function writeFloatField(t, e) {\n      this.writeTag(t, Al.Fixed32), this.writeFloat(e);\n    },\n    writeDoubleField: function writeDoubleField(t, e) {\n      this.writeTag(t, Al.Fixed64), this.writeDouble(e);\n    },\n    writeBooleanField: function writeBooleanField(t, e) {\n      this.writeVarintField(t, Boolean(e));\n    }\n  };\n  var ImagePosition = /*#__PURE__*/function () {\n    function ImagePosition(t, _ref119) {\n      var e = _ref119.pixelRatio,\n        r = _ref119.version,\n        n = _ref119.stretchX,\n        i = _ref119.stretchY,\n        s = _ref119.content;\n      _classCallCheck(this, ImagePosition);\n      this.paddedRect = t, this.pixelRatio = e, this.stretchX = n, this.stretchY = i, this.content = s, this.version = r;\n    }\n    _createClass(ImagePosition, [{\n      key: \"tl\",\n      get: function get() {\n        return [this.paddedRect.x + 1, this.paddedRect.y + 1];\n      }\n    }, {\n      key: \"br\",\n      get: function get() {\n        return [this.paddedRect.x + this.paddedRect.w - 1, this.paddedRect.y + this.paddedRect.h - 1];\n      }\n    }, {\n      key: \"displaySize\",\n      get: function get() {\n        return [(this.paddedRect.w - 2) / this.pixelRatio, (this.paddedRect.h - 2) / this.pixelRatio];\n      }\n    }]);\n    return ImagePosition;\n  }();\n  var ImageAtlas = /*#__PURE__*/function () {\n    function ImageAtlas(t, e) {\n      _classCallCheck(this, ImageAtlas);\n      var r = {},\n        n = {};\n      this.haveRenderCallbacks = [];\n      var i = [];\n      this.addImages(t, r, i), this.addImages(e, n, i);\n      var _ql = ql(i),\n        s = _ql.w,\n        a = _ql.h,\n        o = new RGBAImage({\n          width: s || 1,\n          height: a || 1\n        });\n      for (var _e121 in t) {\n        var _n79 = t[_e121],\n          _i75 = r[_e121].paddedRect;\n        RGBAImage.copy(_n79.data, o, {\n          x: 0,\n          y: 0\n        }, {\n          x: _i75.x + 1,\n          y: _i75.y + 1\n        }, _n79.data);\n      }\n      for (var _t136 in e) {\n        var _r116 = e[_t136],\n          _i76 = n[_t136].paddedRect,\n          _s54 = _i76.x + 1,\n          _a52 = _i76.y + 1,\n          _l24 = _r116.data.width,\n          _u22 = _r116.data.height;\n        RGBAImage.copy(_r116.data, o, {\n          x: 0,\n          y: 0\n        }, {\n          x: _s54,\n          y: _a52\n        }, _r116.data), RGBAImage.copy(_r116.data, o, {\n          x: 0,\n          y: _u22 - 1\n        }, {\n          x: _s54,\n          y: _a52 - 1\n        }, {\n          width: _l24,\n          height: 1\n        }), RGBAImage.copy(_r116.data, o, {\n          x: 0,\n          y: 0\n        }, {\n          x: _s54,\n          y: _a52 + _u22\n        }, {\n          width: _l24,\n          height: 1\n        }), RGBAImage.copy(_r116.data, o, {\n          x: _l24 - 1,\n          y: 0\n        }, {\n          x: _s54 - 1,\n          y: _a52\n        }, {\n          width: 1,\n          height: _u22\n        }), RGBAImage.copy(_r116.data, o, {\n          x: 0,\n          y: 0\n        }, {\n          x: _s54 + _l24,\n          y: _a52\n        }, {\n          width: 1,\n          height: _u22\n        });\n      }\n      this.image = o, this.iconPositions = r, this.patternPositions = n;\n    }\n    _createClass(ImageAtlas, [{\n      key: \"addImages\",\n      value: function addImages(t, e, r) {\n        for (var _n80 in t) {\n          var _i77 = t[_n80],\n            _s55 = {\n              x: 0,\n              y: 0,\n              w: _i77.data.width + 2,\n              h: _i77.data.height + 2\n            };\n          r.push(_s55), e[_n80] = new ImagePosition(_s55, _i77), _i77.hasRenderCallback && this.haveRenderCallbacks.push(_n80);\n        }\n      }\n    }, {\n      key: \"patchUpdatedImages\",\n      value: function patchUpdatedImages(t, e) {\n        this.haveRenderCallbacks = this.haveRenderCallbacks.filter(function (e) {\n          return t.hasImage(e);\n        }), t.dispatchRenderCallbacks(this.haveRenderCallbacks);\n        for (var _r117 in t.updatedImages) this.patchUpdatedImage(this.iconPositions[_r117], t.getImage(_r117), e), this.patchUpdatedImage(this.patternPositions[_r117], t.getImage(_r117), e);\n      }\n    }, {\n      key: \"patchUpdatedImage\",\n      value: function patchUpdatedImage(t, e, r) {\n        if (!t || !e) return;\n        if (t.version === e.version) return;\n        t.version = e.version;\n        var _t$tl = _slicedToArray(t.tl, 2),\n          n = _t$tl[0],\n          i = _t$tl[1];\n        r.update(e.data, void 0, {\n          x: n,\n          y: i\n        });\n      }\n    }]);\n    return ImageAtlas;\n  }();\n  Er(ImagePosition, \"ImagePosition\"), Er(ImageAtlas, \"ImageAtlas\");\n  var Nl = {\n    horizontal: 1,\n    vertical: 2,\n    horizontalOnly: 3\n  };\n  var SectionOptions = /*#__PURE__*/function () {\n    function SectionOptions() {\n      _classCallCheck(this, SectionOptions);\n      this.scale = 1, this.fontStack = \"\", this.imageName = null;\n    }\n    _createClass(SectionOptions, null, [{\n      key: \"forText\",\n      value: function forText(t, e) {\n        var r = new SectionOptions();\n        return r.scale = t || 1, r.fontStack = e, r;\n      }\n    }, {\n      key: \"forImage\",\n      value: function forImage(t) {\n        var e = new SectionOptions();\n        return e.imageName = t, e;\n      }\n    }]);\n    return SectionOptions;\n  }();\n  var TaggedString = /*#__PURE__*/function () {\n    function TaggedString() {\n      _classCallCheck(this, TaggedString);\n      this.text = \"\", this.sectionIndex = [], this.sections = [], this.imageSectionID = null;\n    }\n    _createClass(TaggedString, [{\n      key: \"length\",\n      value: function length() {\n        return this.text.length;\n      }\n    }, {\n      key: \"getSection\",\n      value: function getSection(t) {\n        return this.sections[this.sectionIndex[t]];\n      }\n    }, {\n      key: \"getSections\",\n      value: function getSections() {\n        return this.sections;\n      }\n    }, {\n      key: \"getSectionIndex\",\n      value: function getSectionIndex(t) {\n        return this.sectionIndex[t];\n      }\n    }, {\n      key: \"getCharCode\",\n      value: function getCharCode(t) {\n        return this.text.charCodeAt(t);\n      }\n    }, {\n      key: \"verticalizePunctuation\",\n      value: function verticalizePunctuation(t) {\n        this.text = function (t, e) {\n          var r = \"\";\n          for (var _n81 = 0; _n81 < t.length; _n81++) {\n            var _i78 = t.charCodeAt(_n81 + 1) || null,\n              _s56 = t.charCodeAt(_n81 - 1) || null;\n            r += !e && (_i78 && ri(_i78) && !xl[t[_n81 + 1]] || _s56 && ri(_s56) && !xl[t[_n81 - 1]]) || !xl[t[_n81]] ? t[_n81] : xl[t[_n81]];\n          }\n          return r;\n        }(this.text, t);\n      }\n    }, {\n      key: \"trim\",\n      value: function trim() {\n        var t = 0;\n        for (var _e122 = 0; _e122 < this.text.length && Zl[this.text.charCodeAt(_e122)]; _e122++) t++;\n        var e = this.text.length;\n        for (var _r118 = this.text.length - 1; _r118 >= 0 && _r118 >= t && Zl[this.text.charCodeAt(_r118)]; _r118--) e--;\n        this.text = this.text.substring(t, e), this.sectionIndex = this.sectionIndex.slice(t, e);\n      }\n    }, {\n      key: \"substring\",\n      value: function substring(t, e) {\n        var r = new TaggedString();\n        return r.text = this.text.substring(t, e), r.sectionIndex = this.sectionIndex.slice(t, e), r.sections = this.sections, r;\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return this.text;\n      }\n    }, {\n      key: \"getMaxScale\",\n      value: function getMaxScale() {\n        var _this27 = this;\n        return this.sectionIndex.reduce(function (t, e) {\n          return Math.max(t, _this27.sections[e].scale);\n        }, 0);\n      }\n    }, {\n      key: \"addTextSection\",\n      value: function addTextSection(t, e) {\n        this.text += t.text, this.sections.push(SectionOptions.forText(t.scale, t.fontStack || e));\n        var r = this.sections.length - 1;\n        for (var _e123 = 0; _e123 < t.text.length; ++_e123) this.sectionIndex.push(r);\n      }\n    }, {\n      key: \"addImageSection\",\n      value: function addImageSection(t) {\n        var e = t.image ? t.image.name : \"\";\n        if (0 === e.length) return void w(\"Can't add FormattedSection with an empty image.\");\n        var r = this.getNextImageSectionCharCode();\n        r ? (this.text += String.fromCharCode(r), this.sections.push(SectionOptions.forImage(e)), this.sectionIndex.push(this.sections.length - 1)) : w(\"Reached maximum number of images 6401\");\n      }\n    }, {\n      key: \"getNextImageSectionCharCode\",\n      value: function getNextImageSectionCharCode() {\n        return this.imageSectionID ? this.imageSectionID >= 63743 ? null : ++this.imageSectionID : (this.imageSectionID = 57344, this.imageSectionID);\n      }\n    }], [{\n      key: \"fromFeature\",\n      value: function fromFeature(t, e) {\n        var r = new TaggedString();\n        for (var _n82 = 0; _n82 < t.sections.length; _n82++) {\n          var _i79 = t.sections[_n82];\n          _i79.image ? r.addImageSection(_i79) : r.addTextSection(_i79, e);\n        }\n        return r;\n      }\n    }]);\n    return TaggedString;\n  }();\n  function Gl(t, e, r, n, i, s, a, o, l, u, c, h, p, d, f) {\n    var y = TaggedString.fromFeature(t, i);\n    h === Nl.vertical && y.verticalizePunctuation(p);\n    var m = [];\n    var g = function (t, e, r, n, i, s) {\n        if (!t) return [];\n        var a = [],\n          o = function (t, e, r, n, i, s) {\n            var a = 0;\n            for (var _r119 = 0; _r119 < t.length(); _r119++) {\n              var _o29 = t.getSection(_r119);\n              a += Yl(t.getCharCode(_r119), _o29, n, i, e, s);\n            }\n            return a / Math.max(1, Math.ceil(a / r));\n          }(t, e, r, n, i, s),\n          l = t.text.indexOf(\"​\") >= 0;\n        var u = 0;\n        for (var _r120 = 0; _r120 < t.length(); _r120++) {\n          var _h12 = t.getSection(_r120),\n            _p6 = t.getCharCode(_r120);\n          if (Zl[_p6] || (u += Yl(_p6, _h12, n, i, e, s)), _r120 < t.length() - 1) {\n            var _e124 = !((c = _p6) < 11904 || !(Vn(c) || Ln(c) || Yn(c) || Gn(c) || On(c) || Tn(c) || Fn(c) || Dn(c) || $n(c) || Un(c) || jn(c) || Kn(c) || zn(c) || En(c) || Cn(c) || Rn(c) || Bn(c) || Xn(c) || Nn(c) || qn(c)));\n            (Xl[_p6] || _e124 || _h12.imageName) && a.push(Kl(_r120 + 1, u, o, a, Jl(_p6, t.getCharCode(_r120 + 1), _e124 && l), !1));\n          }\n        }\n        var c;\n        return Hl(Kl(t.length(), u, o, a, 0, !0));\n      }(y, u, s, e, n, d),\n      x = vi.processBidirectionalText,\n      v = vi.processStyledBidirectionalText;\n    if (x && 1 === y.sections.length) {\n      var _t137 = x(y.toString(), g);\n      var _iterator97 = _createForOfIteratorHelper(_t137),\n        _step97;\n      try {\n        for (_iterator97.s(); !(_step97 = _iterator97.n()).done;) {\n          var _e125 = _step97.value;\n          var _t138 = new TaggedString();\n          _t138.text = _e125, _t138.sections = y.sections;\n          for (var _r121 = 0; _r121 < _e125.length; _r121++) _t138.sectionIndex.push(0);\n          m.push(_t138);\n        }\n      } catch (err) {\n        _iterator97.e(err);\n      } finally {\n        _iterator97.f();\n      }\n    } else if (v) {\n      var _t139 = v(y.text, y.sectionIndex, g);\n      var _iterator98 = _createForOfIteratorHelper(_t139),\n        _step98;\n      try {\n        for (_iterator98.s(); !(_step98 = _iterator98.n()).done;) {\n          var _e126 = _step98.value;\n          var _t140 = new TaggedString();\n          _t140.text = _e126[0], _t140.sectionIndex = _e126[1], _t140.sections = y.sections, m.push(_t140);\n        }\n      } catch (err) {\n        _iterator98.e(err);\n      } finally {\n        _iterator98.f();\n      }\n    } else m = function (t, e) {\n      var r = [],\n        n = t.text;\n      var i = 0;\n      var _iterator99 = _createForOfIteratorHelper(e),\n        _step99;\n      try {\n        for (_iterator99.s(); !(_step99 = _iterator99.n()).done;) {\n          var _n83 = _step99.value;\n          r.push(t.substring(i, _n83)), i = _n83;\n        }\n      } catch (err) {\n        _iterator99.e(err);\n      } finally {\n        _iterator99.f();\n      }\n      return i < n.length && r.push(t.substring(i, n.length)), r;\n    }(y, g);\n    var b = [],\n      w = {\n        positionedLines: b,\n        text: y.toString(),\n        top: c[1],\n        bottom: c[1],\n        left: c[0],\n        right: c[0],\n        writingMode: h,\n        iconsInText: !1,\n        verticalizable: !1,\n        hasBaseline: !1\n      };\n    return function (t, e, r, n, i, s, a, o, l, u, c, h) {\n      var p = 0,\n        d = 0,\n        f = 0;\n      var y = \"right\" === o ? 1 : \"left\" === o ? 0 : .5;\n      var m = !1;\n      var _iterator100 = _createForOfIteratorHelper(i),\n        _step100;\n      try {\n        for (_iterator100.s(); !(_step100 = _iterator100.n()).done;) {\n          var _t142 = _step100.value;\n          var _r122 = _t142.getSections();\n          var _iterator104 = _createForOfIteratorHelper(_r122),\n            _step104;\n          try {\n            for (_iterator104.s(); !(_step104 = _iterator104.n()).done;) {\n              var _t143 = _step104.value;\n              if (_t143.imageName) continue;\n              var _r123 = e[_t143.fontStack];\n              if (_r123 && (m = void 0 !== _r123.ascender && void 0 !== _r123.descender, !m)) break;\n            }\n          } catch (err) {\n            _iterator104.e(err);\n          } finally {\n            _iterator104.f();\n          }\n          if (!m) break;\n        }\n      } catch (err) {\n        _iterator100.e(err);\n      } finally {\n        _iterator100.f();\n      }\n      var g = 0;\n      var _iterator101 = _createForOfIteratorHelper(i),\n        _step101;\n      try {\n        for (_iterator101.s(); !(_step101 = _iterator101.n()).done;) {\n          var _a53 = _step101.value;\n          _a53.trim();\n          var _i80 = _a53.getMaxScale(),\n            _o30 = (_i80 - 1) * pl,\n            _v3 = {\n              positionedGlyphs: [],\n              lineOffset: 0\n            };\n          t.positionedLines[g] = _v3;\n          var _b3 = _v3.positionedGlyphs;\n          var _w3 = 0;\n          if (!_a53.length()) {\n            d += s, ++g;\n            continue;\n          }\n          var _4 = 0,\n            _S3 = 0;\n          for (var _s57 = 0; _s57 < _a53.length(); _s57++) {\n            var _o31 = _a53.getSection(_s57),\n              _f3 = _a53.getSectionIndex(_s57),\n              _y4 = _a53.getCharCode(_s57);\n            var _g4 = _o31.scale,\n              _v4 = null,\n              _A3 = null,\n              _k2 = null,\n              _I2 = pl,\n              _M2 = 0;\n            var _P = !(l === Nl.horizontal || !c && !ei(_y4) || c && (Zl[_y4] || (x = _y4, kn(x) || Mn(x) || Pn(x) || Zn(x) || Jn(x))));\n            if (_o31.imageName) {\n              var _e128 = n[_o31.imageName];\n              if (!_e128) continue;\n              _k2 = _o31.imageName, t.iconsInText = t.iconsInText || !0, _A3 = _e128.paddedRect;\n              var _r124 = _e128.displaySize;\n              _g4 = _g4 * pl / h, _v4 = {\n                width: _r124[0],\n                height: _r124[1],\n                left: 1,\n                top: -3,\n                advance: _P ? _r124[1] : _r124[0],\n                localGlyph: !1\n              }, _M2 = m ? -_v4.height * _g4 : _i80 * pl - 17 - _r124[1] * _g4, _I2 = _v4.advance;\n              var _s58 = (_P ? _r124[0] : _r124[1]) * _g4 - pl * _i80;\n              _s58 > 0 && _s58 > _w3 && (_w3 = _s58);\n            } else {\n              var _t144 = r[_o31.fontStack];\n              if (!_t144) continue;\n              _t144[_y4] && (_A3 = _t144[_y4]);\n              var _n84 = e[_o31.fontStack];\n              if (!_n84) continue;\n              var _s59 = _n84.glyphs[_y4];\n              if (!_s59) continue;\n              if (_v4 = _s59.metrics, _I2 = 8203 !== _y4 ? pl : 0, m) {\n                var _t145 = void 0 !== _n84.ascender ? Math.abs(_n84.ascender) : 0,\n                  _e129 = void 0 !== _n84.descender ? Math.abs(_n84.descender) : 0,\n                  _r125 = (_t145 + _e129) * _g4;\n                _4 < _r125 && (_4 = _r125, _S3 = (_t145 - _e129) / 2 * _g4), _M2 = -_t145 * _g4;\n              } else _M2 = (_i80 - _g4) * pl - 17;\n            }\n            _P ? (t.verticalizable = !0, _b3.push({\n              glyph: _y4,\n              imageName: _k2,\n              x: p,\n              y: d + _M2,\n              vertical: _P,\n              scale: _g4,\n              localGlyph: _v4.localGlyph,\n              fontStack: _o31.fontStack,\n              sectionIndex: _f3,\n              metrics: _v4,\n              rect: _A3\n            }), p += _I2 * _g4 + u) : (_b3.push({\n              glyph: _y4,\n              imageName: _k2,\n              x: p,\n              y: d + _M2,\n              vertical: _P,\n              scale: _g4,\n              localGlyph: _v4.localGlyph,\n              fontStack: _o31.fontStack,\n              sectionIndex: _f3,\n              metrics: _v4,\n              rect: _A3\n            }), p += _v4.advance * _g4 + u);\n          }\n          0 !== _b3.length && (f = Math.max(p - u, f), m ? tu(_b3, y, _w3, _S3, s * _i80 / 2) : tu(_b3, y, _w3, 0, s / 2)), p = 0;\n          var _A4 = s * _i80 + _w3;\n          _v3.lineOffset = Math.max(_w3, _o30), d += _A4, ++g;\n        }\n      } catch (err) {\n        _iterator101.e(err);\n      } finally {\n        _iterator101.f();\n      }\n      var x;\n      var v = d,\n        _Ql = Ql(a),\n        b = _Ql.horizontalAlign,\n        w = _Ql.verticalAlign;\n      (function (t, e, r, n, i, s) {\n        var a = (e - r) * i,\n          o = -s * n;\n        var _iterator102 = _createForOfIteratorHelper(t),\n          _step102;\n        try {\n          for (_iterator102.s(); !(_step102 = _iterator102.n()).done;) {\n            var _e127 = _step102.value;\n            var _iterator103 = _createForOfIteratorHelper(_e127.positionedGlyphs),\n              _step103;\n            try {\n              for (_iterator103.s(); !(_step103 = _iterator103.n()).done;) {\n                var _t141 = _step103.value;\n                _t141.x += a, _t141.y += o;\n              }\n            } catch (err) {\n              _iterator103.e(err);\n            } finally {\n              _iterator103.f();\n            }\n          }\n        } catch (err) {\n          _iterator102.e(err);\n        } finally {\n          _iterator102.f();\n        }\n      })(t.positionedLines, y, b, w, f, v), t.top += -w * v, t.bottom = t.top + v, t.left += -b * f, t.right = t.left + f, t.hasBaseline = m;\n    }(w, e, r, n, m, a, o, l, h, u, p, f), !function (t) {\n      var _iterator105 = _createForOfIteratorHelper(t),\n        _step105;\n      try {\n        for (_iterator105.s(); !(_step105 = _iterator105.n()).done;) {\n          var _e130 = _step105.value;\n          if (0 !== _e130.positionedGlyphs.length) return !1;\n        }\n      } catch (err) {\n        _iterator105.e(err);\n      } finally {\n        _iterator105.f();\n      }\n      return !0;\n    }(b) && w;\n  }\n  var Zl = {\n      9: !0,\n      10: !0,\n      11: !0,\n      12: !0,\n      13: !0,\n      32: !0\n    },\n    Xl = {\n      10: !0,\n      32: !0,\n      38: !0,\n      40: !0,\n      41: !0,\n      43: !0,\n      45: !0,\n      47: !0,\n      173: !0,\n      183: !0,\n      8203: !0,\n      8208: !0,\n      8211: !0,\n      8231: !0\n    };\n  function Yl(t, e, r, n, i, s) {\n    if (e.imageName) {\n      var _t146 = n[e.imageName];\n      return _t146 ? _t146.displaySize[0] * e.scale * pl / s + i : 0;\n    }\n    {\n      var _n85 = r[e.fontStack],\n        _s60 = _n85 && _n85.glyphs[t];\n      return _s60 ? _s60.metrics.advance * e.scale + i : 0;\n    }\n  }\n  function Wl(t, e, r, n) {\n    var i = Math.pow(t - e, 2);\n    return n ? t < e ? i / 2 : 2 * i : i + Math.abs(r) * r;\n  }\n  function Jl(t, e, r) {\n    var n = 0;\n    return 10 === t && (n -= 1e4), r && (n += 150), 40 !== t && 65288 !== t || (n += 50), 41 !== e && 65289 !== e || (n += 50), n;\n  }\n  function Kl(t, e, r, n, i, s) {\n    var a = null,\n      o = Wl(e, r, i, s);\n    var _iterator106 = _createForOfIteratorHelper(n),\n      _step106;\n    try {\n      for (_iterator106.s(); !(_step106 = _iterator106.n()).done;) {\n        var _t147 = _step106.value;\n        var _n86 = Wl(e - _t147.x, r, i, s) + _t147.badness;\n        _n86 <= o && (a = _t147, o = _n86);\n      }\n    } catch (err) {\n      _iterator106.e(err);\n    } finally {\n      _iterator106.f();\n    }\n    return {\n      index: t,\n      x: e,\n      priorBreak: a,\n      badness: o\n    };\n  }\n  function Hl(t) {\n    return t ? Hl(t.priorBreak).concat(t.index) : [];\n  }\n  function Ql(t) {\n    var e = .5,\n      r = .5;\n    switch (t) {\n      case \"right\":\n      case \"top-right\":\n      case \"bottom-right\":\n        e = 1;\n        break;\n      case \"left\":\n      case \"top-left\":\n      case \"bottom-left\":\n        e = 0;\n    }\n    switch (t) {\n      case \"bottom\":\n      case \"bottom-right\":\n      case \"bottom-left\":\n        r = 1;\n        break;\n      case \"top\":\n      case \"top-right\":\n      case \"top-left\":\n        r = 0;\n    }\n    return {\n      horizontalAlign: e,\n      verticalAlign: r\n    };\n  }\n  function tu(t, e, r, n, i) {\n    if (!(e || r || n || i)) return;\n    var s = t.length - 1,\n      a = t[s],\n      o = (a.x + a.metrics.advance * a.scale) * e;\n    for (var _e131 = 0; _e131 <= s; _e131++) t[_e131].x -= o, t[_e131].y += r + n + i;\n  }\n  function eu(t, e, r) {\n    var _Ql2 = Ql(r),\n      n = _Ql2.horizontalAlign,\n      i = _Ql2.verticalAlign,\n      s = e[0] - t.displaySize[0] * n,\n      a = e[1] - t.displaySize[1] * i;\n    return {\n      image: t,\n      top: a,\n      bottom: a + t.displaySize[1],\n      left: s,\n      right: s + t.displaySize[0]\n    };\n  }\n  function ru(t, e, r, n, i, s) {\n    var a = t.image;\n    var o;\n    if (a.content) {\n      var _t148 = a.content,\n        _e132 = a.pixelRatio || 1;\n      o = [_t148[0] / _e132, _t148[1] / _e132, a.displaySize[0] - _t148[2] / _e132, a.displaySize[1] - _t148[3] / _e132];\n    }\n    var l = e.left * s,\n      u = e.right * s;\n    var c, h, p, d;\n    \"width\" === r || \"both\" === r ? (d = i[0] + l - n[3], h = i[0] + u + n[1]) : (d = i[0] + (l + u - a.displaySize[0]) / 2, h = d + a.displaySize[0]);\n    var f = e.top * s,\n      y = e.bottom * s;\n    return \"height\" === r || \"both\" === r ? (c = i[1] + f - n[0], p = i[1] + y + n[2]) : (c = i[1] + (f + y - a.displaySize[1]) / 2, p = c + a.displaySize[1]), {\n      image: a,\n      top: c,\n      right: h,\n      bottom: p,\n      left: d,\n      collisionPadding: o\n    };\n  }\n  var Anchor = /*#__PURE__*/function (_r126) {\n    _inherits(Anchor, _r126);\n    function Anchor(t, e, r, n, i) {\n      var _this28;\n      _classCallCheck(this, Anchor);\n      _this28 = _possibleConstructorReturn(this, _getPrototypeOf(Anchor).call(this, t, e)), _this28.angle = n, _this28.z = r, void 0 !== i && (_this28.segment = i);\n      return _this28;\n    }\n    _createClass(Anchor, [{\n      key: \"clone\",\n      value: function clone() {\n        return new Anchor(this.x, this.y, this.z, this.angle, this.segment);\n      }\n    }]);\n    return Anchor;\n  }(r);\n  function nu(t, e, r, n, i) {\n    if (void 0 === e.segment) return !0;\n    var s = e,\n      a = e.segment + 1,\n      o = 0;\n    for (; o > -r / 2;) {\n      if (a--, a < 0) return !1;\n      o -= t[a].dist(s), s = t[a];\n    }\n    o += t[a].dist(t[a + 1]), a++;\n    var l = [];\n    var u = 0;\n    for (; o < r / 2;) {\n      var _e133 = t[a],\n        _r127 = t[a + 1];\n      if (!_r127) return !1;\n      var _s61 = t[a - 1].angleTo(_e133) - _e133.angleTo(_r127);\n      for (_s61 = Math.abs((_s61 + 3 * Math.PI) % (2 * Math.PI) - Math.PI), l.push({\n        distance: o,\n        angleDelta: _s61\n      }), u += _s61; o - l[0].distance > n;) u -= l.shift().angleDelta;\n      if (u > i) return !1;\n      a++, o += _e133.dist(_r127);\n    }\n    return !0;\n  }\n  function iu(t) {\n    var e = 0;\n    for (var _r128 = 0; _r128 < t.length - 1; _r128++) e += t[_r128].dist(t[_r128 + 1]);\n    return e;\n  }\n  function su(t, e, r) {\n    return t ? .6 * e * r : 0;\n  }\n  function au(t, e) {\n    return Math.max(t ? t.right - t.left : 0, e ? e.right - e.left : 0);\n  }\n  function ou(t, e, r, n, i, s) {\n    var a = su(r, i, s),\n      o = au(r, n) * s;\n    var l = 0;\n    var u = iu(t) / 2;\n    for (var _r129 = 0; _r129 < t.length - 1; _r129++) {\n      var _n87 = t[_r129],\n        _i81 = t[_r129 + 1],\n        _s62 = _n87.dist(_i81);\n      if (l + _s62 > u) {\n        var _c16 = (u - l) / _s62,\n          _h13 = qt(_n87.x, _i81.x, _c16),\n          _p7 = qt(_n87.y, _i81.y, _c16),\n          _d5 = new Anchor(_h13, _p7, 0, _i81.angleTo(_n87), _r129);\n        return !a || nu(t, _d5, o, a, e) ? _d5 : void 0;\n      }\n      l += _s62;\n    }\n  }\n  function lu(t, e, r, n, i, s, a, o, l) {\n    var u = su(n, s, a),\n      c = au(n, i),\n      h = c * a,\n      p = 0 === t[0].x || t[0].x === l || 0 === t[0].y || t[0].y === l;\n    return e - h < e / 4 && (e = h + e / 4), uu(t, p ? e / 2 * o % e : (c / 2 + 2 * s) * a * o % e, e, u, r, h, p, !1, l);\n  }\n  function uu(t, e, r, n, i, s, a, o, l) {\n    var u = s / 2,\n      c = iu(t);\n    var h = 0,\n      p = e - r,\n      d = [];\n    for (var _e134 = 0; _e134 < t.length - 1; _e134++) {\n      var _a54 = t[_e134],\n        _o32 = t[_e134 + 1],\n        _f4 = _a54.dist(_o32),\n        _y5 = _o32.angleTo(_a54);\n      for (; p + r < h + _f4;) {\n        p += r;\n        var _m3 = (p - h) / _f4,\n          _g5 = qt(_a54.x, _o32.x, _m3),\n          _x4 = qt(_a54.y, _o32.y, _m3);\n        if (_g5 >= 0 && _g5 < l && _x4 >= 0 && _x4 < l && p - u >= 0 && p + u <= c) {\n          var _r130 = new Anchor(_g5, _x4, 0, _y5, _e134);\n          _r130._round(), n && !nu(t, _r130, s, n, i) || d.push(_r130);\n        }\n      }\n      h += _f4;\n    }\n    return o || d.length || a || (d = uu(t, h / 2, r, n, i, s, a, !0, l)), d;\n  }\n  function cu(t, e, n, i) {\n    var s = [],\n      a = t.image,\n      o = a.pixelRatio,\n      l = a.paddedRect.w - 2,\n      u = a.paddedRect.h - 2,\n      c = t.right - t.left,\n      h = t.bottom - t.top,\n      p = a.stretchX || [[0, l]],\n      d = a.stretchY || [[0, u]],\n      f = function f(t, e) {\n        return t + e[1] - e[0];\n      },\n      y = p.reduce(f, 0),\n      m = d.reduce(f, 0),\n      g = l - y,\n      x = u - m;\n    var v = 0,\n      b = y,\n      w = 0,\n      _ = m,\n      S = 0,\n      A = g,\n      k = 0,\n      I = x;\n    if (a.content && i) {\n      var _t149 = a.content;\n      v = hu(p, 0, _t149[0]), w = hu(d, 0, _t149[1]), b = hu(p, _t149[0], _t149[2]), _ = hu(d, _t149[1], _t149[3]), S = _t149[0] - v, k = _t149[1] - w, A = _t149[2] - _t149[0] - b, I = _t149[3] - _t149[1] - _;\n    }\n    var M = function M(i, s, l, u) {\n      var p = du(i.stretch - v, b, c, t.left),\n        d = fu(i.fixed - S, A, i.stretch, y),\n        f = du(s.stretch - w, _, h, t.top),\n        g = fu(s.fixed - k, I, s.stretch, m),\n        x = du(l.stretch - v, b, c, t.left),\n        M = fu(l.fixed - S, A, l.stretch, y),\n        P = du(u.stretch - w, _, h, t.top),\n        T = fu(u.fixed - k, I, u.stretch, m),\n        C = new r(p, f),\n        E = new r(x, f),\n        D = new r(x, P),\n        z = new r(p, P),\n        B = new r(d / o, g / o),\n        L = new r(M / o, T / o),\n        V = e * Math.PI / 180;\n      if (V) {\n        var _t150 = Math.sin(V),\n          _e135 = Math.cos(V),\n          _r131 = [_e135, -_t150, _t150, _e135];\n        C._matMult(_r131), E._matMult(_r131), z._matMult(_r131), D._matMult(_r131);\n      }\n      var F = i.stretch + i.fixed,\n        R = s.stretch + s.fixed;\n      return {\n        tl: C,\n        tr: E,\n        bl: z,\n        br: D,\n        tex: {\n          x: a.paddedRect.x + 1 + F,\n          y: a.paddedRect.y + 1 + R,\n          w: l.stretch + l.fixed - F,\n          h: u.stretch + u.fixed - R\n        },\n        writingMode: void 0,\n        glyphOffset: [0, 0],\n        sectionIndex: 0,\n        pixelOffsetTL: B,\n        pixelOffsetBR: L,\n        minFontScaleX: A / o / c,\n        minFontScaleY: I / o / h,\n        isSDF: n\n      };\n    };\n    if (i && (a.stretchX || a.stretchY)) {\n      var _t151 = pu(p, g, y),\n        _e136 = pu(d, x, m);\n      for (var _r132 = 0; _r132 < _t151.length - 1; _r132++) {\n        var _n88 = _t151[_r132],\n          _i82 = _t151[_r132 + 1];\n        for (var _t152 = 0; _t152 < _e136.length - 1; _t152++) s.push(M(_n88, _e136[_t152], _i82, _e136[_t152 + 1]));\n      }\n    } else s.push(M({\n      fixed: 0,\n      stretch: -1\n    }, {\n      fixed: 0,\n      stretch: -1\n    }, {\n      fixed: 0,\n      stretch: l + 1\n    }, {\n      fixed: 0,\n      stretch: u + 1\n    }));\n    return s;\n  }\n  function hu(t, e, r) {\n    var n = 0;\n    var _iterator107 = _createForOfIteratorHelper(t),\n      _step107;\n    try {\n      for (_iterator107.s(); !(_step107 = _iterator107.n()).done;) {\n        var _i83 = _step107.value;\n        n += Math.max(e, Math.min(r, _i83[1])) - Math.max(e, Math.min(r, _i83[0]));\n      }\n    } catch (err) {\n      _iterator107.e(err);\n    } finally {\n      _iterator107.f();\n    }\n    return n;\n  }\n  function pu(t, e, r) {\n    var n = [{\n      fixed: -1,\n      stretch: 0\n    }];\n    var _iterator108 = _createForOfIteratorHelper(t),\n      _step108;\n    try {\n      for (_iterator108.s(); !(_step108 = _iterator108.n()).done;) {\n        var _step108$value = _slicedToArray(_step108.value, 2),\n          _e137 = _step108$value[0],\n          _r133 = _step108$value[1];\n        var _t153 = n[n.length - 1];\n        n.push({\n          fixed: _e137 - _t153.stretch,\n          stretch: _t153.stretch\n        }), n.push({\n          fixed: _e137 - _t153.stretch,\n          stretch: _t153.stretch + (_r133 - _e137)\n        });\n      }\n    } catch (err) {\n      _iterator108.e(err);\n    } finally {\n      _iterator108.f();\n    }\n    return n.push({\n      fixed: e + 1,\n      stretch: r\n    }), n;\n  }\n  function du(t, e, r, n) {\n    return t / e * r + n;\n  }\n  function fu(t, e, r, n) {\n    return t - e * r / n;\n  }\n  function yu(t, e, r, n) {\n    var i = e + t.positionedLines[n].lineOffset;\n    return 0 === n ? r + i / 2 : r + (i + (e + t.positionedLines[n - 1].lineOffset)) / 2;\n  }\n  Er(Anchor, \"Anchor\");\n  var TinyQueue = /*#__PURE__*/function () {\n    function TinyQueue() {\n      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : mu;\n      _classCallCheck(this, TinyQueue);\n      if (this.data = t, this.length = this.data.length, this.compare = e, this.length > 0) for (var _t154 = (this.length >> 1) - 1; _t154 >= 0; _t154--) this._down(_t154);\n    }\n    _createClass(TinyQueue, [{\n      key: \"push\",\n      value: function push(t) {\n        this.data.push(t), this.length++, this._up(this.length - 1);\n      }\n    }, {\n      key: \"pop\",\n      value: function pop() {\n        if (0 === this.length) return;\n        var t = this.data[0],\n          e = this.data.pop();\n        return this.length--, this.length > 0 && (this.data[0] = e, this._down(0)), t;\n      }\n    }, {\n      key: \"peek\",\n      value: function peek() {\n        return this.data[0];\n      }\n    }, {\n      key: \"_up\",\n      value: function _up(t) {\n        var e = this.data,\n          r = this.compare,\n          n = e[t];\n        for (; t > 0;) {\n          var _i84 = t - 1 >> 1,\n            _s63 = e[_i84];\n          if (r(n, _s63) >= 0) break;\n          e[t] = _s63, t = _i84;\n        }\n        e[t] = n;\n      }\n    }, {\n      key: \"_down\",\n      value: function _down(t) {\n        var e = this.data,\n          r = this.compare,\n          n = this.length >> 1,\n          i = e[t];\n        for (; t < n;) {\n          var _n89 = 1 + (t << 1),\n            _s64 = e[_n89];\n          var _a55 = _n89 + 1;\n          if (_a55 < this.length && r(e[_a55], _s64) < 0 && (_n89 = _a55, _s64 = e[_a55]), r(_s64, i) >= 0) break;\n          e[t] = _s64, t = _n89;\n        }\n        e[t] = i;\n      }\n    }]);\n    return TinyQueue;\n  }();\n  function mu(t, e) {\n    return t < e ? -1 : t > e ? 1 : 0;\n  }\n  function gu(t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    var i = 1 / 0,\n      s = 1 / 0,\n      a = -1 / 0,\n      o = -1 / 0;\n    var l = t[0];\n    for (var _t155 = 0; _t155 < l.length; _t155++) {\n      var _e138 = l[_t155];\n      (!_t155 || _e138.x < i) && (i = _e138.x), (!_t155 || _e138.y < s) && (s = _e138.y), (!_t155 || _e138.x > a) && (a = _e138.x), (!_t155 || _e138.y > o) && (o = _e138.y);\n    }\n    var u = Math.min(a - i, o - s);\n    var c = u / 2;\n    var h = new TinyQueue([], xu);\n    if (0 === u) return new r(i, s);\n    for (var _e139 = i; _e139 < a; _e139 += u) for (var _r134 = s; _r134 < o; _r134 += u) h.push(new Cell(_e139 + c, _r134 + c, c, t));\n    var p = function (t) {\n        var e = 0,\n          r = 0,\n          n = 0;\n        var i = t[0];\n        for (var _t156 = 0, _s65 = i.length, _a56 = _s65 - 1; _t156 < _s65; _a56 = _t156++) {\n          var _s66 = i[_t156],\n            _o33 = i[_a56],\n            _l25 = _s66.x * _o33.y - _o33.x * _s66.y;\n          r += (_s66.x + _o33.x) * _l25, n += (_s66.y + _o33.y) * _l25, e += 3 * _l25;\n        }\n        return new Cell(r / e, n / e, 0, t);\n      }(t),\n      d = h.length;\n    for (; h.length;) {\n      var _r135 = h.pop();\n      (_r135.d > p.d || !p.d) && (p = _r135, n && console.log(\"found best %d after %d probes\", Math.round(1e4 * _r135.d) / 1e4, d)), _r135.max - p.d <= e || (c = _r135.h / 2, h.push(new Cell(_r135.p.x - c, _r135.p.y - c, c, t)), h.push(new Cell(_r135.p.x + c, _r135.p.y - c, c, t)), h.push(new Cell(_r135.p.x - c, _r135.p.y + c, c, t)), h.push(new Cell(_r135.p.x + c, _r135.p.y + c, c, t)), d += 4);\n    }\n    return n && (console.log(\"num probes: \".concat(d)), console.log(\"best distance: \".concat(p.d))), p.p;\n  }\n  function xu(t, e) {\n    return e.max - t.max;\n  }\n  var Cell = function Cell(t, e, n, i) {\n    _classCallCheck(this, Cell);\n    this.p = new r(t, e), this.h = n, this.d = function (t, e) {\n      var r = !1,\n        n = 1 / 0;\n      for (var _i85 = 0; _i85 < e.length; _i85++) {\n        var _s67 = e[_i85];\n        for (var _e140 = 0, _i86 = _s67.length, _a57 = _i86 - 1; _e140 < _i86; _a57 = _e140++) {\n          var _i87 = _s67[_e140],\n            _o34 = _s67[_a57];\n          _i87.y > t.y != _o34.y > t.y && t.x < (_o34.x - _i87.x) * (t.y - _i87.y) / (_o34.y - _i87.y) + _i87.x && (r = !r), n = Math.min(n, aa(t, _i87, _o34));\n        }\n      }\n      return (r ? 1 : -1) * Math.sqrt(n);\n    }(this.p, i), this.max = this.d + this.h * Math.SQRT2;\n  };\n  var vu = Number.POSITIVE_INFINITY,\n    bu = Math.sqrt(2);\n  function wu(t, _ref120) {\n    var _ref121 = _slicedToArray(_ref120, 2),\n      e = _ref121[0],\n      r = _ref121[1];\n    var n = 0,\n      i = 0;\n    if (r === vu) {\n      e < 0 && (e = 0);\n      var _r136 = e / bu;\n      switch (t) {\n        case \"top-right\":\n        case \"top-left\":\n          i = _r136 - 7;\n          break;\n        case \"bottom-right\":\n        case \"bottom-left\":\n          i = 7 - _r136;\n          break;\n        case \"bottom\":\n          i = 7 - e;\n          break;\n        case \"top\":\n          i = e - 7;\n      }\n      switch (t) {\n        case \"top-right\":\n        case \"bottom-right\":\n          n = -_r136;\n          break;\n        case \"top-left\":\n        case \"bottom-left\":\n          n = _r136;\n          break;\n        case \"left\":\n          n = e;\n          break;\n        case \"right\":\n          n = -e;\n      }\n    } else {\n      switch (e = Math.abs(e), r = Math.abs(r), t) {\n        case \"top-right\":\n        case \"top-left\":\n        case \"top\":\n          i = r - 7;\n          break;\n        case \"bottom-right\":\n        case \"bottom-left\":\n        case \"bottom\":\n          i = 7 - r;\n      }\n      switch (t) {\n        case \"top-right\":\n        case \"bottom-right\":\n        case \"right\":\n          n = -e;\n          break;\n        case \"top-left\":\n        case \"bottom-left\":\n        case \"left\":\n          n = e;\n      }\n    }\n    return [n, i];\n  }\n  function _u(t, e, r, n, i, s, a, o, l, u) {\n    t.createArrays(), t.tilePixelRatio = Ni / (512 * t.overscaling), t.compareText = {}, t.iconsNeedLinear = !1;\n    var c = t.layers[0].layout,\n      h = t.layers[0]._unevaluatedLayout._values,\n      p = {};\n    if (\"composite\" === t.textSizeData.kind) {\n      var _t$textSizeData = t.textSizeData,\n        _e141 = _t$textSizeData.minZoom,\n        _r137 = _t$textSizeData.maxZoom;\n      p.compositeTextSizes = [h[\"text-size\"].possiblyEvaluate(new EvaluationParameters(_e141), o), h[\"text-size\"].possiblyEvaluate(new EvaluationParameters(_r137), o)];\n    }\n    if (\"composite\" === t.iconSizeData.kind) {\n      var _t$iconSizeData = t.iconSizeData,\n        _e142 = _t$iconSizeData.minZoom,\n        _r138 = _t$iconSizeData.maxZoom;\n      p.compositeIconSizes = [h[\"icon-size\"].possiblyEvaluate(new EvaluationParameters(_e142), o), h[\"icon-size\"].possiblyEvaluate(new EvaluationParameters(_r138), o)];\n    }\n    p.layoutTextSize = h[\"text-size\"].possiblyEvaluate(new EvaluationParameters(l + 1), o), p.layoutIconSize = h[\"icon-size\"].possiblyEvaluate(new EvaluationParameters(l + 1), o), p.textMaxSize = h[\"text-size\"].possiblyEvaluate(new EvaluationParameters(18), o);\n    var d = \"map\" === c.get(\"text-rotation-alignment\") && \"point\" !== c.get(\"symbol-placement\"),\n      f = c.get(\"text-size\");\n    var _iterator109 = _createForOfIteratorHelper(t.features),\n      _step109;\n    try {\n      var _loop4 = function _loop4() {\n        var s = _step109.value;\n        var l = c.get(\"text-font\").evaluate(s, {}, o).join(\",\"),\n          h = f.evaluate(s, {}, o),\n          y = p.layoutTextSize.evaluate(s, {}, o),\n          m = (p.layoutIconSize.evaluate(s, {}, o), {\n            horizontal: {},\n            vertical: void 0\n          }),\n          g = s.text;\n        var x,\n          v = [0, 0];\n        if (g) {\n          var _n90 = g.toString(),\n            _a58 = c.get(\"text-letter-spacing\").evaluate(s, {}, o) * pl,\n            _u23 = c.get(\"text-line-height\").evaluate(s, {}, o) * pl,\n            _p8 = Qn(_n90) ? _a58 : 0,\n            _f5 = c.get(\"text-anchor\").evaluate(s, {}, o),\n            _x5 = c.get(\"text-variable-anchor\");\n          if (!_x5) {\n            var _t157 = c.get(\"text-radial-offset\").evaluate(s, {}, o);\n            v = _t157 ? wu(_f5, [_t157 * pl, vu]) : c.get(\"text-offset\").evaluate(s, {}, o).map(function (t) {\n              return t * pl;\n            });\n          }\n          var _b4 = d ? \"center\" : c.get(\"text-justify\").evaluate(s, {}, o);\n          var _w4 = \"point\" === c.get(\"symbol-placement\"),\n            _5 = _w4 ? c.get(\"text-max-width\").evaluate(s, {}, o) * pl : 1 / 0,\n            _S4 = function _S4(s) {\n              t.allowVerticalPlacement && Hn(_n90) && (m.vertical = Gl(g, e, r, i, l, _5, _u23, _f5, s, _p8, v, Nl.vertical, !0, y, h));\n            };\n          if (!d && _x5) {\n            var _t158 = \"auto\" === _b4 ? _x5.map(function (t) {\n              return Su(t);\n            }) : [_b4];\n            var _n91 = !1;\n            for (var _s68 = 0; _s68 < _t158.length; _s68++) {\n              var _a59 = _t158[_s68];\n              if (!m.horizontal[_a59]) if (_n91) m.horizontal[_a59] = m.horizontal[0];else {\n                var _t159 = Gl(g, e, r, i, l, _5, _u23, \"center\", _a59, _p8, v, Nl.horizontal, !1, y, h);\n                _t159 && (m.horizontal[_a59] = _t159, _n91 = 1 === _t159.positionedLines.length);\n              }\n            }\n            _S4(\"left\");\n          } else {\n            if (\"auto\" === _b4 && (_b4 = Su(_f5)), _w4 || c.get(\"text-writing-mode\").indexOf(\"horizontal\") >= 0 || !Hn(_n90)) {\n              var _t160 = Gl(g, e, r, i, l, _5, _u23, _f5, _b4, _p8, v, Nl.horizontal, !1, y, h);\n              _t160 && (m.horizontal[_b4] = _t160);\n            }\n            _S4(_w4 ? \"left\" : _b4);\n          }\n        }\n        var b = !1;\n        if (s.icon && s.icon.name) {\n          var _e143 = n[s.icon.name];\n          _e143 && (x = eu(i[s.icon.name], c.get(\"icon-offset\").evaluate(s, {}, o), c.get(\"icon-anchor\").evaluate(s, {}, o)), b = _e143.sdf, void 0 === t.sdfIcons ? t.sdfIcons = _e143.sdf : t.sdfIcons !== _e143.sdf && w(\"Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer\"), (_e143.pixelRatio !== t.pixelRatio || 0 !== c.get(\"icon-rotate\").constantOr(1)) && (t.iconsNeedLinear = !0));\n        }\n        var _ = Mu(m.horizontal) || m.vertical;\n        t.iconsInText || (t.iconsInText = !!_ && _.iconsInText), (_ || x) && Au(t, s, m, x, n, p, y, 0, v, b, a, o, u);\n      };\n      for (_iterator109.s(); !(_step109 = _iterator109.n()).done;) {\n        _loop4();\n      }\n    } catch (err) {\n      _iterator109.e(err);\n    } finally {\n      _iterator109.f();\n    }\n    s && t.generateCollisionDebugBuffers(l, t.collisionBoxArray);\n  }\n  function Su(t) {\n    switch (t) {\n      case \"right\":\n      case \"top-right\":\n      case \"bottom-right\":\n        return \"right\";\n      case \"left\":\n      case \"top-left\":\n      case \"bottom-left\":\n        return \"left\";\n    }\n    return \"center\";\n  }\n  function Au(t, e, n, i, s, a, l, u, c, h, p, d, f) {\n    var y = a.textMaxSize.evaluate(e, {}, d);\n    void 0 === y && (y = l);\n    var m = t.layers[0].layout,\n      g = m.get(\"icon-offset\").evaluate(e, {}, d),\n      x = Mu(n.horizontal) || n.vertical,\n      v = \"globe\" === f.name,\n      b = l / 24,\n      _ = t.tilePixelRatio * y / 24,\n      S = (E = t.overscaling, t.zoom > 18 && E > 2 && (E >>= 1), Math.max(Ni / (512 * E), 1) * m.get(\"symbol-spacing\")),\n      A = m.get(\"text-padding\") * t.tilePixelRatio,\n      k = m.get(\"icon-padding\") * t.tilePixelRatio,\n      I = o(m.get(\"text-max-angle\")),\n      M = \"map\" === m.get(\"text-rotation-alignment\") && \"point\" !== m.get(\"symbol-placement\"),\n      P = \"map\" === m.get(\"icon-rotation-alignment\") && \"point\" !== m.get(\"symbol-placement\"),\n      T = m.get(\"symbol-placement\"),\n      C = S / 2;\n    var E;\n    var D = m.get(\"icon-text-fit\");\n    var z;\n    i && \"none\" !== D && (t.allowVerticalPlacement && n.vertical && (z = ru(i, n.vertical, D, m.get(\"icon-text-fit-padding\"), g, b)), x && (i = ru(i, x, D, m.get(\"icon-text-fit-padding\"), g, b)));\n    var B = function B(r, o, l) {\n      if (o.x < 0 || o.x >= Ni || o.y < 0 || o.y >= Ni) return;\n      var u = null;\n      if (v) {\n        var _f$projectTilePoint = f.projectTilePoint(o.x, o.y, l),\n          _t161 = _f$projectTilePoint.x,\n          _e144 = _f$projectTilePoint.y,\n          _r139 = _f$projectTilePoint.z;\n        u = {\n          anchor: new Anchor(_t161, _e144, _r139, 0, void 0),\n          up: f.upVector(l, o.x, o.y)\n        };\n      }\n      !function (t, e, r, n, i, s, a, o, l, u, c, h, p, d, f, y, m, g, x, v, b, _, S, A, k) {\n        var _l$layout$get$evaluat, _l$layout$get$evaluat2;\n        var I = t.addToLineVertexArray(e, n);\n        var M,\n          P,\n          T,\n          C,\n          E,\n          D,\n          z,\n          B = 0,\n          L = 0,\n          V = 0,\n          F = 0,\n          R = -1,\n          j = -1;\n        var O = {};\n        var $ = Ii(\"\");\n        var U = r ? r.anchor : e;\n        var q = 0,\n          N = 0;\n        if (void 0 === l._unevaluatedLayout.getValue(\"text-radial-offset\") ? (_l$layout$get$evaluat = l.layout.get(\"text-offset\").evaluate(b, {}, k).map(function (t) {\n          return t * pl;\n        }), _l$layout$get$evaluat2 = _slicedToArray(_l$layout$get$evaluat, 2), q = _l$layout$get$evaluat2[0], N = _l$layout$get$evaluat2[1], _l$layout$get$evaluat) : (q = l.layout.get(\"text-radial-offset\").evaluate(b, {}, k) * pl, N = vu), t.allowVerticalPlacement && i.vertical) {\n          var _t162 = i.vertical;\n          if (f) D = Tu(_t162), o && (z = Tu(o));else {\n            var _r140 = l.layout.get(\"text-rotate\").evaluate(b, {}, k) + 90;\n            T = Pu(u, U, e, c, h, p, _t162, d, _r140, y), o && (C = Pu(u, U, e, c, h, p, o, g, _r140));\n          }\n        }\n        if (s) {\n          var _n92 = l.layout.get(\"icon-rotate\").evaluate(b, {}, k),\n            _i88 = \"none\" !== l.layout.get(\"icon-text-fit\"),\n            _a60 = cu(s, _n92, S, _i88),\n            _d6 = o ? cu(o, _n92, S, _i88) : void 0;\n          P = Pu(u, U, e, c, h, p, s, g, _n92), B = 4 * _a60.length;\n          var _f6 = t.iconSizeData;\n          var _y6 = null;\n          \"source\" === _f6.kind ? (_y6 = [dl * l.layout.get(\"icon-size\").evaluate(b, {}, k)], _y6[0] > ku && w(\"\".concat(t.layerIds[0], \": Value for \\\"icon-size\\\" is >= 255. Reduce your \\\"icon-size\\\".\"))) : \"composite\" === _f6.kind && (_y6 = [dl * _.compositeIconSizes[0].evaluate(b, {}, k), dl * _.compositeIconSizes[1].evaluate(b, {}, k)], (_y6[0] > ku || _y6[1] > ku) && w(\"\".concat(t.layerIds[0], \": Value for \\\"icon-size\\\" is >= 255. Reduce your \\\"icon-size\\\".\"))), t.addSymbols(t.icon, _a60, _y6, v, x, b, !1, r, e, I.lineStartIndex, I.lineLength, -1, A, k), R = t.icon.placedSymbolArray.length - 1, _d6 && (L = 4 * _d6.length, t.addSymbols(t.icon, _d6, _y6, v, x, b, Nl.vertical, r, e, I.lineStartIndex, I.lineLength, -1, A, k), j = t.icon.placedSymbolArray.length - 1);\n        }\n        for (var _n93 in i.horizontal) {\n          var _s69 = i.horizontal[_n93];\n          M || ($ = Ii(_s69.text), f ? E = Tu(_s69) : M = Pu(u, U, e, c, h, p, _s69, d, l.layout.get(\"text-rotate\").evaluate(b, {}, k), y));\n          var _o35 = 1 === _s69.positionedLines.length;\n          if (V += Iu(t, r, e, _s69, a, l, f, b, y, I, i.vertical ? Nl.horizontal : Nl.horizontalOnly, _o35 ? Object.keys(i.horizontal) : [_n93], O, R, _, A, k), _o35) break;\n        }\n        i.vertical && (F += Iu(t, r, e, i.vertical, a, l, f, b, y, I, Nl.vertical, [\"vertical\"], O, j, _, A, k));\n        var G = -1;\n        var Z = function Z(t, e) {\n          return t ? Math.max(t, e) : e;\n        };\n        G = Z(E, G), G = Z(D, G), G = Z(z, G);\n        var X = G > -1 ? 1 : 0;\n        t.glyphOffsetArray.length >= SymbolBucket.MAX_GLYPHS && w(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\"), void 0 !== b.sortKey && t.addToSortKeyRanges(t.symbolInstances.length, b.sortKey), t.symbolInstances.emplaceBack(U.x, U.y, U.z, e.x, e.y, O.right >= 0 ? O.right : -1, O.center >= 0 ? O.center : -1, O.left >= 0 ? O.left : -1, O.vertical >= 0 ? O.vertical : -1, R, j, $, void 0 !== M ? M : t.collisionBoxArray.length, void 0 !== M ? M + 1 : t.collisionBoxArray.length, void 0 !== T ? T : t.collisionBoxArray.length, void 0 !== T ? T + 1 : t.collisionBoxArray.length, void 0 !== P ? P : t.collisionBoxArray.length, void 0 !== P ? P + 1 : t.collisionBoxArray.length, C || t.collisionBoxArray.length, C ? C + 1 : t.collisionBoxArray.length, c, V, F, B, L, X, 0, q, N, G);\n      }(t, o, u, r, n, i, s, z, t.layers[0], t.collisionBoxArray, e.index, e.sourceLayerIndex, t.index, A, M, c, 0, k, P, g, e, a, h, p, d);\n    };\n    if (\"line\" === T) {\n      var _iterator110 = _createForOfIteratorHelper(function (t, e, n, i, s) {\n          var a = [];\n          for (var _e145 = 0; _e145 < t.length; _e145++) {\n            var _n94 = t[_e145];\n            var _o36 = void 0;\n            for (var _t163 = 0; _t163 < _n94.length - 1; _t163++) {\n              var _e146 = _n94[_t163],\n                _l26 = _n94[_t163 + 1];\n              _e146.x < 0 && _l26.x < 0 || (_e146.x < 0 ? _e146 = new r(0, _e146.y + (0 - _e146.x) / (_l26.x - _e146.x) * (_l26.y - _e146.y))._round() : _l26.x < 0 && (_l26 = new r(0, _e146.y + (0 - _e146.x) / (_l26.x - _e146.x) * (_l26.y - _e146.y))._round()), _e146.y < 0 && _l26.y < 0 || (_e146.y < 0 ? _e146 = new r(_e146.x + (0 - _e146.y) / (_l26.y - _e146.y) * (_l26.x - _e146.x), 0)._round() : _l26.y < 0 && (_l26 = new r(_e146.x + (0 - _e146.y) / (_l26.y - _e146.y) * (_l26.x - _e146.x), 0)._round()), _e146.x >= i && _l26.x >= i || (_e146.x >= i ? _e146 = new r(i, _e146.y + (i - _e146.x) / (_l26.x - _e146.x) * (_l26.y - _e146.y))._round() : _l26.x >= i && (_l26 = new r(i, _e146.y + (i - _e146.x) / (_l26.x - _e146.x) * (_l26.y - _e146.y))._round()), _e146.y >= s && _l26.y >= s || (_e146.y >= s ? _e146 = new r(_e146.x + (s - _e146.y) / (_l26.y - _e146.y) * (_l26.x - _e146.x), s)._round() : _l26.y >= s && (_l26 = new r(_e146.x + (s - _e146.y) / (_l26.y - _e146.y) * (_l26.x - _e146.x), s)._round()), _o36 && _e146.equals(_o36[_o36.length - 1]) || (_o36 = [_e146], a.push(_o36)), _o36.push(_l26)))));\n            }\n          }\n          return a;\n        }(e.geometry, 0, 0, Ni, Ni)),\n        _step110;\n      try {\n        for (_iterator110.s(); !(_step110 = _iterator110.n()).done;) {\n          var _s70 = _step110.value;\n          var _e147 = lu(_s70, S, I, n.vertical || x, i, 24, _, t.overscaling, Ni);\n          var _iterator111 = _createForOfIteratorHelper(_e147),\n            _step111;\n          try {\n            for (_iterator111.s(); !(_step111 = _iterator111.n()).done;) {\n              var _r141 = _step111.value;\n              var _e148 = x;\n              _e148 && Cu(t, _e148.text, C, _r141) || B(_s70, _r141, d);\n            }\n          } catch (err) {\n            _iterator111.e(err);\n          } finally {\n            _iterator111.f();\n          }\n        }\n      } catch (err) {\n        _iterator110.e(err);\n      } finally {\n        _iterator110.f();\n      }\n    } else if (\"line-center\" === T) {\n      var _iterator112 = _createForOfIteratorHelper(e.geometry),\n        _step112;\n      try {\n        for (_iterator112.s(); !(_step112 = _iterator112.n()).done;) {\n          var _t164 = _step112.value;\n          if (_t164.length > 1) {\n            var _e149 = ou(_t164, I, n.vertical || x, i, 24, _);\n            _e149 && B(_t164, _e149, d);\n          }\n        }\n      } catch (err) {\n        _iterator112.e(err);\n      } finally {\n        _iterator112.f();\n      }\n    } else if (\"Polygon\" === e.type) {\n      var _iterator113 = _createForOfIteratorHelper(ao(e.geometry, 0)),\n        _step113;\n      try {\n        for (_iterator113.s(); !(_step113 = _iterator113.n()).done;) {\n          var _t165 = _step113.value;\n          var _e150 = gu(_t165, 16);\n          B(_t165[0], new Anchor(_e150.x, _e150.y, 0, 0, void 0), d);\n        }\n      } catch (err) {\n        _iterator113.e(err);\n      } finally {\n        _iterator113.f();\n      }\n    } else if (\"LineString\" === e.type) {\n      var _iterator114 = _createForOfIteratorHelper(e.geometry),\n        _step114;\n      try {\n        for (_iterator114.s(); !(_step114 = _iterator114.n()).done;) {\n          var _t166 = _step114.value;\n          B(_t166, new Anchor(_t166[0].x, _t166[0].y, 0, 0, void 0), d);\n        }\n      } catch (err) {\n        _iterator114.e(err);\n      } finally {\n        _iterator114.f();\n      }\n    } else if (\"Point\" === e.type) {\n      var _iterator115 = _createForOfIteratorHelper(e.geometry),\n        _step115;\n      try {\n        for (_iterator115.s(); !(_step115 = _iterator115.n()).done;) {\n          var _t167 = _step115.value;\n          var _iterator116 = _createForOfIteratorHelper(_t167),\n            _step116;\n          try {\n            for (_iterator116.s(); !(_step116 = _iterator116.n()).done;) {\n              var _e151 = _step116.value;\n              B([_e151], new Anchor(_e151.x, _e151.y, 0, 0, void 0), d);\n            }\n          } catch (err) {\n            _iterator116.e(err);\n          } finally {\n            _iterator116.f();\n          }\n        }\n      } catch (err) {\n        _iterator115.e(err);\n      } finally {\n        _iterator115.f();\n      }\n    }\n  }\n  var ku = 32640;\n  function Iu(t, e, n, i, s, a, o, l, u, c, h, p, d, f, y, m, g) {\n    var x = function (t, e, n, i, s, a, o, l) {\n        var u = [];\n        if (0 === e.positionedLines.length) return u;\n        var c = i.layout.get(\"text-rotate\").evaluate(a, {}) * Math.PI / 180,\n          h = function (t) {\n            var e = t[0],\n              r = t[1],\n              n = e * r;\n            return n > 0 ? [e, -r] : n < 0 ? [-e, r] : 0 === e ? [r, e] : [r, -e];\n          }(n);\n        var p = Math.abs(e.top - e.bottom);\n        var _iterator117 = _createForOfIteratorHelper(e.positionedLines),\n          _step117;\n        try {\n          for (_iterator117.s(); !(_step117 = _iterator117.n()).done;) {\n            var _t171 = _step117.value;\n            p -= _t171.lineOffset;\n          }\n        } catch (err) {\n          _iterator117.e(err);\n        } finally {\n          _iterator117.f();\n        }\n        var d = e.positionedLines.length,\n          f = p / d;\n        var y = e.top - n[1];\n        for (var _t168 = 0; _t168 < d; ++_t168) {\n          var _i89 = e.positionedLines[_t168];\n          y = yu(e, f, y, _t168);\n          var _iterator118 = _createForOfIteratorHelper(_i89.positionedGlyphs),\n            _step118;\n          try {\n            for (_iterator118.s(); !(_step118 = _iterator118.n()).done;) {\n              var _t169 = _step118.value;\n              if (!_t169.rect) continue;\n              var _i90 = _t169.rect || {};\n              var _a61 = 4,\n                _p9 = !0,\n                _d7 = 1,\n                _f7 = 0;\n              if (_t169.imageName) {\n                var _e152 = o[_t169.imageName];\n                if (!_e152) continue;\n                if (_e152.sdf) {\n                  w(\"SDF images are not supported in formatted text and will be ignored.\");\n                  continue;\n                }\n                _p9 = !1, _d7 = _e152.pixelRatio, _a61 = 1 / _d7;\n              }\n              var _m4 = (s || l) && _t169.vertical,\n                _g6 = _t169.metrics.advance * _t169.scale / 2,\n                _x6 = _t169.metrics,\n                _v5 = _t169.rect;\n              if (null === _v5) continue;\n              l && e.verticalizable && (_f7 = _t169.imageName ? _g6 - _t169.metrics.width * _t169.scale / 2 : 0);\n              var _b5 = s ? [_t169.x + _g6, _t169.y] : [0, 0];\n              var _6 = [0, 0],\n                _S5 = [0, 0],\n                _A5 = !1;\n              s || (_m4 ? (_S5 = [_t169.x + _g6 + h[0], _t169.y + h[1] - _f7], _A5 = !0) : _6 = [_t169.x + _g6 + n[0], _t169.y + n[1] - _f7]);\n              var _k3 = _v5.w * _t169.scale / (_d7 * (_t169.localGlyph ? 2 : 1)),\n                _I3 = _v5.h * _t169.scale / (_d7 * (_t169.localGlyph ? 2 : 1));\n              var _M3 = void 0,\n                _P2 = void 0,\n                _T = void 0,\n                _C = void 0;\n              if (_m4) {\n                var _e153 = _t169.y - y,\n                  _n95 = new r(-_g6, _g6 - _e153),\n                  _i91 = -Math.PI / 2,\n                  _s71 = _construct(r, _toConsumableArray(_S5));\n                _M3 = new r(-_g6 + _6[0], _6[1]), _M3._rotateAround(_i91, _n95)._add(_s71), _M3.x += -_e153 + _g6, _M3.y -= (_x6.left - _a61) * _t169.scale;\n                var _o37 = _t169.imageName ? _x6.advance * _t169.scale : pl * _t169.scale,\n                  _l27 = String.fromCharCode(_t169.glyph);\n                vl(_l27) ? _M3.x += (1 - _a61) * _t169.scale : bl(_l27) ? _M3.x += _o37 - _x6.height * _t169.scale + (-_a61 - 1) * _t169.scale : _M3.x += _t169.imageName || _x6.width + 2 * _a61 === _v5.w && _x6.height + 2 * _a61 === _v5.h ? (_o37 - _I3) / 2 : (_o37 - (_x6.height + 2 * _a61) * _t169.scale) / 2, _P2 = new r(_M3.x, _M3.y - _k3), _T = new r(_M3.x + _I3, _M3.y), _C = new r(_M3.x + _I3, _M3.y - _k3);\n              } else {\n                var _e154 = (_x6.left - _a61) * _t169.scale - _g6 + _6[0],\n                  _n96 = (-_x6.top - _a61) * _t169.scale + _6[1],\n                  _i92 = _e154 + _k3,\n                  _s72 = _n96 + _I3;\n                _M3 = new r(_e154, _n96), _P2 = new r(_i92, _n96), _T = new r(_e154, _s72), _C = new r(_i92, _s72);\n              }\n              if (c) {\n                var _t170 = void 0;\n                _t170 = s ? new r(0, 0) : _A5 ? new r(h[0], h[1]) : new r(n[0], n[1]), _M3._rotateAround(c, _t170), _P2._rotateAround(c, _t170), _T._rotateAround(c, _t170), _C._rotateAround(c, _t170);\n              }\n              var _E = new r(0, 0),\n                _D = new r(0, 0);\n              u.push({\n                tl: _M3,\n                tr: _P2,\n                bl: _T,\n                br: _C,\n                tex: _i90,\n                writingMode: e.writingMode,\n                glyphOffset: _b5,\n                sectionIndex: _t169.sectionIndex,\n                isSDF: _p9,\n                pixelOffsetTL: _E,\n                pixelOffsetBR: _D,\n                minFontScaleX: 0,\n                minFontScaleY: 0\n              });\n            }\n          } catch (err) {\n            _iterator118.e(err);\n          } finally {\n            _iterator118.f();\n          }\n        }\n        return u;\n      }(0, i, u, a, o, l, s, t.allowVerticalPlacement),\n      v = t.textSizeData;\n    var b = null;\n    \"source\" === v.kind ? (b = [dl * a.layout.get(\"text-size\").evaluate(l, {}, g)], b[0] > ku && w(\"\".concat(t.layerIds[0], \": Value for \\\"text-size\\\" is >= 255. Reduce your \\\"text-size\\\".\"))) : \"composite\" === v.kind && (b = [dl * y.compositeTextSizes[0].evaluate(l, {}, g), dl * y.compositeTextSizes[1].evaluate(l, {}, g)], (b[0] > ku || b[1] > ku) && w(\"\".concat(t.layerIds[0], \": Value for \\\"text-size\\\" is >= 255. Reduce your \\\"text-size\\\".\"))), t.addSymbols(t.text, x, b, u, o, l, h, e, n, c.lineStartIndex, c.lineLength, f, m, g);\n    var _iterator119 = _createForOfIteratorHelper(p),\n      _step119;\n    try {\n      for (_iterator119.s(); !(_step119 = _iterator119.n()).done;) {\n        var _e155 = _step119.value;\n        d[_e155] = t.text.placedSymbolArray.length - 1;\n      }\n    } catch (err) {\n      _iterator119.e(err);\n    } finally {\n      _iterator119.f();\n    }\n    return 4 * x.length;\n  }\n  function Mu(t) {\n    for (var _e156 in t) return t[_e156];\n    return null;\n  }\n  function Pu(t, e, n, i, s, a, l, u, c, h) {\n    var p = l.top,\n      d = l.bottom,\n      f = l.left,\n      y = l.right;\n    var m = l.collisionPadding;\n    if (m && (f -= m[0], p -= m[1], y += m[2], d += m[3]), c) {\n      var _t172 = new r(f, p),\n        _e157 = new r(y, p),\n        _n97 = new r(f, d),\n        _i93 = new r(y, d),\n        _s73 = o(c);\n      var _a62 = new r(0, 0);\n      h && (_a62 = new r(h[0], h[1])), _t172._rotateAround(_s73, _a62), _e157._rotateAround(_s73, _a62), _n97._rotateAround(_s73, _a62), _i93._rotateAround(_s73, _a62), f = Math.min(_t172.x, _e157.x, _n97.x, _i93.x), y = Math.max(_t172.x, _e157.x, _n97.x, _i93.x), p = Math.min(_t172.y, _e157.y, _n97.y, _i93.y), d = Math.max(_t172.y, _e157.y, _n97.y, _i93.y);\n    }\n    return t.emplaceBack(e.x, e.y, e.z, n.x, n.y, f, p, y, d, u, i, s, a), t.length - 1;\n  }\n  function Tu(t) {\n    t.collisionPadding && (t.top -= t.collisionPadding[1], t.bottom += t.collisionPadding[3]);\n    var e = t.bottom - t.top;\n    return e > 0 ? Math.max(10, e) : null;\n  }\n  function Cu(t, e, r, n) {\n    var i = t.compareText;\n    if (e in i) {\n      var _t173 = i[e];\n      for (var _e158 = _t173.length - 1; _e158 >= 0; _e158--) if (n.dist(_t173[_e158]) < r) return !0;\n    } else i[e] = [];\n    return i[e].push(n), !1;\n  }\n  function Eu(t, e) {\n    var r = t.fovAboveCenter,\n      n = t.elevation ? t.elevation.getMinElevationBelowMSL() * e : 0,\n      i = (t._camera.position[2] * t.worldSize - n) / Math.cos(t._pitch),\n      s = Math.sin(r) * i / Math.sin(Math.max(Math.PI / 2 - t._pitch - r, .01)),\n      a = Math.sin(t._pitch) * s + i;\n    return Math.min(1.01 * a, i * (1 / t._horizonShift));\n  }\n  function Du(t, e) {\n    if (!e.isReprojectedInTileSpace) return {\n      scale: 1 << t.z,\n      x: t.x,\n      y: t.y,\n      x2: t.x + 1,\n      y2: t.y + 1,\n      projection: e\n    };\n    var r = Math.pow(2, -t.z),\n      n = t.x * r,\n      i = (t.x + 1) * r,\n      s = t.y * r,\n      a = (t.y + 1) * r,\n      o = js(n),\n      l = js(i),\n      u = Os(s),\n      c = Os(a),\n      h = e.project(o, u),\n      p = e.project(l, u),\n      d = e.project(l, c),\n      f = e.project(o, c);\n    var y = Math.min(h.x, p.x, d.x, f.x),\n      m = Math.min(h.y, p.y, d.y, f.y),\n      g = Math.max(h.x, p.x, d.x, f.x),\n      x = Math.max(h.y, p.y, d.y, f.y);\n    var v = r / 16;\n    function b(t, r, n, i, s, a) {\n      var o = (n + s) / 2,\n        l = (i + a) / 2,\n        u = e.project(js(o), Os(l)),\n        c = Math.max(0, y - u.x, m - u.y, u.x - g, u.y - x);\n      y = Math.min(y, u.x), g = Math.max(g, u.x), m = Math.min(m, u.y), x = Math.max(x, u.y), c > v && (b(t, u, n, i, o, l), b(u, r, o, l, s, a));\n    }\n    b(h, p, n, s, i, s), b(p, d, i, s, i, a), b(d, f, i, a, n, a), b(f, h, n, a, n, s), y -= v, m -= v, g += v, x += v;\n    var w = 1 / Math.max(g - y, x - m);\n    return {\n      scale: w,\n      x: y * w,\n      y: m * w,\n      x2: g * w,\n      y2: x * w,\n      projection: e\n    };\n  }\n  var zu = Xi(new Float32Array(16));\n  var Projection = /*#__PURE__*/function () {\n    function Projection(t) {\n      _classCallCheck(this, Projection);\n      this.spec = t, this.name = t.name, this.wrap = !1, this.requiresDraping = !1, this.supportsWorldCopies = !1, this.supportsTerrain = !1, this.supportsFog = !1, this.supportsFreeCamera = !1, this.zAxisUnit = \"meters\", this.isReprojectedInTileSpace = !0, this.unsupportedLayers = [\"custom\"], this.center = [0, 0], this.range = [3.5, 7];\n    }\n    _createClass(Projection, [{\n      key: \"project\",\n      value: function project(t, e) {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        return new LngLat(0, 0);\n      }\n    }, {\n      key: \"projectTilePoint\",\n      value: function projectTilePoint(t, e, r) {\n        return {\n          x: t,\n          y: e,\n          z: 0\n        };\n      }\n    }, {\n      key: \"locationPoint\",\n      value: function locationPoint(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n        return t._coordinatePoint(t.locationCoordinate(e), r);\n      }\n    }, {\n      key: \"pixelsPerMeter\",\n      value: function pixelsPerMeter(t, e) {\n        return Rs(1, t) * e;\n      }\n    }, {\n      key: \"pixelSpaceConversion\",\n      value: function pixelSpaceConversion(t, e, r) {\n        return 1;\n      }\n    }, {\n      key: \"farthestPixelDistance\",\n      value: function farthestPixelDistance(t) {\n        return Eu(t, t.pixelsPerMeter);\n      }\n    }, {\n      key: \"pointCoordinate\",\n      value: function pointCoordinate(t, e, n, i) {\n        var s = t.horizonLineFromTop(!1),\n          a = new r(e, Math.max(s, n));\n        return t.rayIntersectionCoordinate(t.pointRayIntersection(a, i));\n      }\n    }, {\n      key: \"pointCoordinate3D\",\n      value: function pointCoordinate3D(t, e, n) {\n        var i = new r(e, n);\n        if (t.elevation) return t.elevation.pointCoordinate(i);\n        {\n          var _e159 = this.pointCoordinate(t, i.x, i.y, 0);\n          return [_e159.x, _e159.y, _e159.z];\n        }\n      }\n    }, {\n      key: \"isPointAboveHorizon\",\n      value: function isPointAboveHorizon(t, e) {\n        if (t.elevation) return !this.pointCoordinate3D(t, e.x, e.y);\n        var r = t.horizonLineFromTop();\n        return e.y < r;\n      }\n    }, {\n      key: \"createInversionMatrix\",\n      value: function createInversionMatrix(t, e) {\n        return zu;\n      }\n    }, {\n      key: \"createTileMatrix\",\n      value: function createTileMatrix(t, e, r) {\n        var n, i, s;\n        var a = r.canonical,\n          o = Xi(new Float64Array(16));\n        if (this.isReprojectedInTileSpace) {\n          var _l28 = Du(a, this);\n          n = 1, i = _l28.x + r.wrap * _l28.scale, s = _l28.y, Ki(o, o, [n / _l28.scale, n / _l28.scale, t.pixelsPerMeter / e]);\n        } else n = e / t.zoomScale(a.z), i = (a.x + Math.pow(2, a.z) * r.wrap) * n, s = a.y * n;\n        return Ji(o, o, [i, s, 0]), Ki(o, o, [n / Ni, n / Ni, 1]), o;\n      }\n    }, {\n      key: \"upVector\",\n      value: function upVector(t, e, r) {\n        return [0, 0, 1];\n      }\n    }, {\n      key: \"upVectorScale\",\n      value: function upVectorScale(t, e, r) {\n        return {\n          metersToTile: 1\n        };\n      }\n    }]);\n    return Projection;\n  }();\n  var Albers = /*#__PURE__*/function (_Projection) {\n    _inherits(Albers, _Projection);\n    function Albers(t) {\n      var _this29;\n      _classCallCheck(this, Albers);\n      _this29 = _possibleConstructorReturn(this, _getPrototypeOf(Albers).call(this, t)), _this29.range = [4, 7], _this29.center = t.center || [-96, 37.5];\n      var _this29$parallels = _this29.parallels = t.parallels || [29.5, 45.5],\n        _this29$parallels2 = _slicedToArray(_this29$parallels, 2),\n        e = _this29$parallels2[0],\n        r = _this29$parallels2[1],\n        n = Math.sin(o(e));\n      _this29.n = (n + Math.sin(o(r))) / 2, _this29.c = 1 + n * (2 * _this29.n - n), _this29.r0 = Math.sqrt(_this29.c) / _this29.n;\n      return _this29;\n    }\n    _createClass(Albers, [{\n      key: \"project\",\n      value: function project(t, e) {\n        var r = this.n,\n          n = this.c,\n          i = this.r0,\n          s = o(t - this.center[0]),\n          a = o(e),\n          l = Math.sqrt(n - 2 * r * Math.sin(a)) / r;\n        return {\n          x: l * Math.sin(s * r),\n          y: l * Math.cos(s * r) - i,\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        var r = this.n,\n          n = this.c,\n          i = this.r0,\n          s = i + e;\n        var a = Math.atan2(t, Math.abs(s)) * Math.sign(s);\n        s * r < 0 && (a -= Math.PI * Math.sign(t) * Math.sign(s));\n        var h = o(this.center[0]) * r;\n        a = c(a, -Math.PI - h, Math.PI - h);\n        var p = u(l(a / r) + this.center[0], -180, 180),\n          d = Math.asin(u((n - (t * t + s * s) * r * r) / (2 * r), -1, 1)),\n          f = u(l(d), -85.051129, $s);\n        return new LngLat(p, f);\n      }\n    }]);\n    return Albers;\n  }(Projection);\n  var Bu = 1.340264,\n    Lu = -.081106,\n    Vu = 893e-6,\n    Fu = .003796,\n    Ru = Math.sqrt(3) / 2;\n  var EqualEarth = /*#__PURE__*/function (_Projection2) {\n    _inherits(EqualEarth, _Projection2);\n    function EqualEarth() {\n      _classCallCheck(this, EqualEarth);\n      return _possibleConstructorReturn(this, _getPrototypeOf(EqualEarth).apply(this, arguments));\n    }\n    _createClass(EqualEarth, [{\n      key: \"project\",\n      value: function project(t, e) {\n        e = e / 180 * Math.PI, t = t / 180 * Math.PI;\n        var r = Math.asin(Ru * Math.sin(e)),\n          n = r * r,\n          i = n * n * n;\n        return {\n          x: .5 * (t * Math.cos(r) / (Ru * (Bu + 3 * Lu * n + i * (7 * Vu + 9 * Fu * n))) / Math.PI + .5),\n          y: 1 - .5 * (r * (Bu + Lu * n + i * (Vu + Fu * n)) / Math.PI + 1),\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        t = (2 * t - .5) * Math.PI;\n        var r = e = (2 * (1 - e) - 1) * Math.PI,\n          n = r * r,\n          i = n * n * n;\n        for (var _t174, _s74, _a63, _o38 = 0; _o38 < 12 && (_s74 = r * (Bu + Lu * n + i * (Vu + Fu * n)) - e, _a63 = Bu + 3 * Lu * n + i * (7 * Vu + 9 * Fu * n), _t174 = _s74 / _a63, r = u(r - _t174, -Math.PI / 3, Math.PI / 3), n = r * r, i = n * n * n, !(Math.abs(_t174) < 1e-12)); ++_o38);\n        var s = Ru * t * (Bu + 3 * Lu * n + i * (7 * Vu + 9 * Fu * n)) / Math.cos(r),\n          a = Math.asin(Math.sin(r) / Ru),\n          o = u(180 * s / Math.PI, -180, 180),\n          l = u(180 * a / Math.PI, -85.051129, $s);\n        return new LngLat(o, l);\n      }\n    }]);\n    return EqualEarth;\n  }(Projection);\n  var Equirectangular = /*#__PURE__*/function (_Projection3) {\n    _inherits(Equirectangular, _Projection3);\n    function Equirectangular(t) {\n      var _this30;\n      _classCallCheck(this, Equirectangular);\n      _this30 = _possibleConstructorReturn(this, _getPrototypeOf(Equirectangular).call(this, t)), _this30.wrap = !0, _this30.supportsWorldCopies = !0;\n      return _this30;\n    }\n    _createClass(Equirectangular, [{\n      key: \"project\",\n      value: function project(t, e) {\n        return {\n          x: .5 + t / 360,\n          y: .5 - e / 360,\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        var r = 360 * (t - .5),\n          n = u(360 * (.5 - e), -85.051129, $s);\n        return new LngLat(r, n);\n      }\n    }]);\n    return Equirectangular;\n  }(Projection);\n  var ju = Math.PI / 2;\n  function Ou(t) {\n    return Math.tan((ju + t) / 2);\n  }\n  var LambertConformalConic = /*#__PURE__*/function (_Projection4) {\n    _inherits(LambertConformalConic, _Projection4);\n    function LambertConformalConic(t) {\n      var _this31;\n      _classCallCheck(this, LambertConformalConic);\n      _this31 = _possibleConstructorReturn(this, _getPrototypeOf(LambertConformalConic).call(this, t)), _this31.center = t.center || [0, 30];\n      var _this31$parallels = _this31.parallels = t.parallels || [30, 30],\n        _this31$parallels2 = _slicedToArray(_this31$parallels, 2),\n        e = _this31$parallels2[0],\n        r = _this31$parallels2[1];\n      var n = o(e),\n        i = o(r);\n      _this31.southernCenter = n + i < 0, _this31.southernCenter && (n = -n, i = -i);\n      var s = Math.cos(n),\n        a = Ou(n);\n      _this31.n = n === i ? Math.sin(n) : Math.log(s / Math.cos(i)) / Math.log(Ou(i) / a), _this31.f = s * Math.pow(Ou(n), _this31.n) / _this31.n;\n      return _this31;\n    }\n    _createClass(LambertConformalConic, [{\n      key: \"project\",\n      value: function project(t, e) {\n        e = o(e), this.southernCenter && (e = -e), t = o(t - this.center[0]);\n        var r = 1e-6,\n          n = this.n,\n          i = this.f;\n        i > 0 ? e < -ju + r && (e = -ju + r) : e > ju - r && (e = ju - r);\n        var s = i / Math.pow(Ou(e), n);\n        var a = s * Math.sin(n * t),\n          l = i - s * Math.cos(n * t);\n        return a = .5 * (a / Math.PI + .5), l = .5 * (l / Math.PI + .5), {\n          x: a,\n          y: this.southernCenter ? l : 1 - l,\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        t = (2 * t - .5) * Math.PI, this.southernCenter && (e = 1 - e), e = (2 * (1 - e) - .5) * Math.PI;\n        var r = this.n,\n          n = this.f,\n          i = n - e,\n          s = Math.sign(i),\n          a = Math.sign(r) * Math.sqrt(t * t + i * i);\n        var o = Math.atan2(t, Math.abs(i)) * s;\n        i * r < 0 && (o -= Math.PI * Math.sign(t) * s);\n        var c = u(l(o / r) + this.center[0], -180, 180),\n          h = u(l(2 * Math.atan(Math.pow(n / a, 1 / r)) - ju), -85.051129, $s);\n        return new LngLat(c, this.southernCenter ? -h : h);\n      }\n    }]);\n    return LambertConformalConic;\n  }(Projection);\n  var Mercator = /*#__PURE__*/function (_Projection5) {\n    _inherits(Mercator, _Projection5);\n    function Mercator(t) {\n      var _this32;\n      _classCallCheck(this, Mercator);\n      _this32 = _possibleConstructorReturn(this, _getPrototypeOf(Mercator).call(this, t)), _this32.wrap = !0, _this32.supportsWorldCopies = !0, _this32.supportsTerrain = !0, _this32.supportsFog = !0, _this32.supportsFreeCamera = !0, _this32.isReprojectedInTileSpace = !1, _this32.unsupportedLayers = [], _this32.range = null;\n      return _this32;\n    }\n    _createClass(Mercator, [{\n      key: \"project\",\n      value: function project(t, e) {\n        return {\n          x: Vs(t),\n          y: Fs(e),\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        var r = js(t),\n          n = Os(e);\n        return new LngLat(r, n);\n      }\n    }]);\n    return Mercator;\n  }(Projection);\n  var $u = o($s);\n  var NaturalEarth = /*#__PURE__*/function (_Projection6) {\n    _inherits(NaturalEarth, _Projection6);\n    function NaturalEarth() {\n      _classCallCheck(this, NaturalEarth);\n      return _possibleConstructorReturn(this, _getPrototypeOf(NaturalEarth).apply(this, arguments));\n    }\n    _createClass(NaturalEarth, [{\n      key: \"project\",\n      value: function project(t, e) {\n        var r = (e = o(e)) * e,\n          n = r * r;\n        return {\n          x: .5 * ((t = o(t)) * (.8707 - .131979 * r + n * (n * (.003971 * r - .001529 * n) - .013791)) / Math.PI + .5),\n          y: 1 - .5 * (e * (1.007226 + r * (.015085 + n * (.028874 * r - .044475 - .005916 * n))) / Math.PI + 1),\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        t = (2 * t - .5) * Math.PI;\n        var r = e = (2 * (1 - e) - 1) * Math.PI,\n          n = 25,\n          i = 0,\n          s = r * r;\n        do {\n          s = r * r;\n          var _t175 = s * s;\n          i = (r * (1.007226 + s * (.015085 + _t175 * (.028874 * s - .044475 - .005916 * _t175))) - e) / (1.007226 + s * (.045255 + _t175 * (.259866 * s - .311325 - .005916 * 11 * _t175))), r = u(r - i, -$u, $u);\n        } while (Math.abs(i) > 1e-6 && --n > 0);\n        s = r * r;\n        var a = u(l(t / (.8707 + s * (s * (s * s * s * (.003971 - .001529 * s) - .013791) - .131979))), -180, 180),\n          o = l(r);\n        return new LngLat(a, o);\n      }\n    }]);\n    return NaturalEarth;\n  }(Projection);\n  var Uu = o($s);\n  var WinkelTripel = /*#__PURE__*/function (_Projection7) {\n    _inherits(WinkelTripel, _Projection7);\n    function WinkelTripel() {\n      _classCallCheck(this, WinkelTripel);\n      return _possibleConstructorReturn(this, _getPrototypeOf(WinkelTripel).apply(this, arguments));\n    }\n    _createClass(WinkelTripel, [{\n      key: \"project\",\n      value: function project(t, e) {\n        e = o(e), t = o(t);\n        var r = Math.cos(e),\n          n = 2 / Math.PI,\n          i = Math.acos(r * Math.cos(t / 2)),\n          s = Math.sin(i) / i,\n          a = .5 * (t * n + 2 * r * Math.sin(t / 2) / s) || 0,\n          l = .5 * (e + Math.sin(e) / s) || 0;\n        return {\n          x: .5 * (a / Math.PI + .5),\n          y: 1 - .5 * (l / Math.PI + 1),\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        var r = t = (2 * t - .5) * Math.PI,\n          n = e = (2 * (1 - e) - 1) * Math.PI,\n          i = 25;\n        var s = 1e-6;\n        var a = 0,\n          o = 0;\n        do {\n          var _i94 = Math.cos(n),\n            _s75 = Math.sin(n),\n            _l29 = 2 * _s75 * _i94,\n            _c17 = _s75 * _s75,\n            _h14 = _i94 * _i94,\n            _p10 = Math.cos(r / 2),\n            _d8 = Math.sin(r / 2),\n            _f8 = 2 * _p10 * _d8,\n            _y7 = _d8 * _d8,\n            _m5 = 1 - _h14 * _p10 * _p10,\n            _g7 = _m5 ? 1 / _m5 : 0,\n            _x7 = _m5 ? Math.acos(_i94 * _p10) * Math.sqrt(1 / _m5) : 0,\n            _v6 = .5 * (2 * _x7 * _i94 * _d8 + 2 * r / Math.PI) - t,\n            _b6 = .5 * (_x7 * _s75 + n) - e,\n            _w5 = .5 * _g7 * (_h14 * _y7 + _x7 * _i94 * _p10 * _c17) + 1 / Math.PI,\n            _7 = _g7 * (_f8 * _l29 / 4 - _x7 * _s75 * _d8),\n            _S6 = .125 * _g7 * (_l29 * _d8 - _x7 * _s75 * _h14 * _f8),\n            _A6 = .5 * _g7 * (_c17 * _p10 + _x7 * _y7 * _i94) + .5,\n            _k4 = _7 * _S6 - _A6 * _w5;\n          a = (_b6 * _7 - _v6 * _A6) / _k4, o = (_v6 * _S6 - _b6 * _w5) / _k4, r = u(r - a, -Math.PI, Math.PI), n = u(n - o, -Uu, Uu);\n        } while ((Math.abs(a) > s || Math.abs(o) > s) && --i > 0);\n        return new LngLat(l(r), l(n));\n      }\n    }]);\n    return WinkelTripel;\n  }(Projection);\n  var CylindricalEqualArea = /*#__PURE__*/function (_Projection8) {\n    _inherits(CylindricalEqualArea, _Projection8);\n    function CylindricalEqualArea(t) {\n      var _this33;\n      _classCallCheck(this, CylindricalEqualArea);\n      _this33 = _possibleConstructorReturn(this, _getPrototypeOf(CylindricalEqualArea).call(this, t)), _this33.center = t.center || [0, 0], _this33.parallels = t.parallels || [0, 0], _this33.cosPhi = Math.max(.01, Math.cos(o(_this33.parallels[0]))), _this33.scale = 1 / (2 * Math.max(Math.PI * _this33.cosPhi, 1 / _this33.cosPhi)), _this33.wrap = !0, _this33.supportsWorldCopies = !0;\n      return _this33;\n    }\n    _createClass(CylindricalEqualArea, [{\n      key: \"project\",\n      value: function project(t, e) {\n        var r = this.scale,\n          n = this.cosPhi;\n        return {\n          x: o(t) * n * r + .5,\n          y: -Math.sin(o(e)) / n * r + .5,\n          z: 0\n        };\n      }\n    }, {\n      key: \"unproject\",\n      value: function unproject(t, e) {\n        var r = this.scale,\n          n = this.cosPhi,\n          i = -(e - .5) / r,\n          s = u(l((t - .5) / r) / n, -180, 180),\n          a = Math.asin(u(i * n, -1, 1)),\n          o = u(l(a), -85.051129, $s);\n        return new LngLat(s, o);\n      }\n    }]);\n    return CylindricalEqualArea;\n  }(Projection);\n  var Globe = /*#__PURE__*/function (_Mercator) {\n    _inherits(Globe, _Mercator);\n    function Globe(t) {\n      var _this34;\n      _classCallCheck(this, Globe);\n      _this34 = _possibleConstructorReturn(this, _getPrototypeOf(Globe).call(this, t)), _this34.requiresDraping = !0, _this34.supportsWorldCopies = !1, _this34.supportsFog = !0, _this34.zAxisUnit = \"pixels\", _this34.unsupportedLayers = [\"debug\"], _this34.range = [3, 5];\n      return _this34;\n    }\n    _createClass(Globe, [{\n      key: \"projectTilePoint\",\n      value: function projectTilePoint(t, e, r) {\n        var n = Ps(t, e, r);\n        return us(n, n, Es(_s(r))), {\n          x: n[0],\n          y: n[1],\n          z: n[2]\n        };\n      }\n    }, {\n      key: \"locationPoint\",\n      value: function locationPoint(t, e) {\n        var n = Ms(e.lat, e.lng),\n          i = os([], n),\n          s = t.elevation ? t.elevation.getAtPointOrZero(t.locationCoordinate(e), t._centerAltitude) : t._centerAltitude;\n        as(n, n, i, Rs(1, 0) * Ni * s);\n        var a = Xi(new Float64Array(16));\n        return Wi(a, t.pixelMatrix, t.globeMatrix), us(n, n, a), new r(n[0], n[1]);\n      }\n    }, {\n      key: \"pixelsPerMeter\",\n      value: function pixelsPerMeter(t, e) {\n        return Rs(1, 0) * e;\n      }\n    }, {\n      key: \"pixelSpaceConversion\",\n      value: function pixelSpaceConversion(t, e, r) {\n        var n = Rs(1, t) * e,\n          i = qt(Rs(1, 45) * e, n, r);\n        return this.pixelsPerMeter(t, e) / i;\n      }\n    }, {\n      key: \"createTileMatrix\",\n      value: function createTileMatrix(t, e, r) {\n        var n = function (t) {\n          var e = function (t, e) {\n              return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = e[0], t[13] = e[1], t[14] = e[2], t[15] = 1, t;\n            }(Cs, t.min),\n            r = 1 / Ts(t);\n          return Ki(e, e, [r, r, r]);\n        }(_s(r.canonical));\n        return Wi(new Float64Array(16), t.globeMatrix, n);\n      }\n    }, {\n      key: \"createInversionMatrix\",\n      value: function createInversionMatrix(t, e) {\n        var r = t.center,\n          n = Es(_s(e));\n        return function (t, e, r) {\n          var n = Math.sin(r),\n            i = Math.cos(r),\n            s = e[0],\n            a = e[1],\n            o = e[2],\n            l = e[3],\n            u = e[8],\n            c = e[9],\n            h = e[10],\n            p = e[11];\n          e !== t && (t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[0] = s * i - u * n, t[1] = a * i - c * n, t[2] = o * i - h * n, t[3] = l * i - p * n, t[8] = s * n + u * i, t[9] = a * n + c * i, t[10] = o * n + h * i, t[11] = l * n + p * i;\n        }(n, n, o(r.lng)), function (t, e, r) {\n          var n = Math.sin(r),\n            i = Math.cos(r),\n            s = e[4],\n            a = e[5],\n            o = e[6],\n            l = e[7],\n            u = e[8],\n            c = e[9],\n            h = e[10],\n            p = e[11];\n          e !== t && (t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[4] = s * i + u * n, t[5] = a * i + c * n, t[6] = o * i + h * n, t[7] = l * i + p * n, t[8] = u * i - s * n, t[9] = c * i - a * n, t[10] = h * i - o * n, t[11] = p * i - l * n;\n        }(n, n, o(r.lat)), Ki(n, n, [t._pixelsPerMercatorPixel, t._pixelsPerMercatorPixel, 1]), Float32Array.from(n);\n      }\n    }, {\n      key: \"pointCoordinate\",\n      value: function pointCoordinate(t, e, r, n) {\n        return ws(t, e, r, !0) || new MercatorCoordinate(0, 0);\n      }\n    }, {\n      key: \"pointCoordinate3D\",\n      value: function pointCoordinate3D(t, e, r) {\n        var n = this.pointCoordinate(t, e, r, 0);\n        return [n.x, n.y, n.z];\n      }\n    }, {\n      key: \"isPointAboveHorizon\",\n      value: function isPointAboveHorizon(t, e) {\n        return !ws(t, e.x, e.y, !1);\n      }\n    }, {\n      key: \"farthestPixelDistance\",\n      value: function farthestPixelDistance(t) {\n        var e = function (t, e) {\n            var r = t.cameraToCenterDistance,\n              n = t._centerAltitude * e,\n              i = t._camera,\n              s = t._camera.forward(),\n              a = rs([], ss([], s, -r), [0, 0, n]),\n              o = t.worldSize / (2 * Math.PI),\n              l = [0, 0, -o],\n              u = t.width / t.height,\n              c = Math.tan(t.fovAboveCenter),\n              h = ss([], i.up(), c),\n              p = ss([], i.right(), c * u),\n              d = os([], rs([], rs([], s, h), p)),\n              f = [];\n            var y;\n            if (new Ray(a, d).closestPointOnSphere(l, o, f)) {\n              var _e160 = rs([], f, l),\n                _r142 = hs([], _e160, a);\n              y = Math.cos(t.fovAboveCenter) * ts(_r142);\n            } else {\n              var _t176 = hs([], a, l),\n                _e161 = hs([], l, a);\n              os(_e161, _e161);\n              var _r143 = ts(_t176) - o;\n              y = Math.sqrt(_r143 * (_r143 + 2 * o));\n              var _n98 = Math.acos(y / (o + _r143)) - Math.acos(ls(s, _e161));\n              y *= Math.cos(_n98);\n            }\n            return 1.01 * y;\n          }(t, this.pixelsPerMeter(t.center.lat, t.worldSize)),\n          r = Ds(t.zoom);\n        if (r > 0) {\n          var _n99 = Eu(t, Rs(1, t.center.lat) * t.worldSize),\n            _i95 = t.worldSize / (2 * Math.PI),\n            _s76 = Math.max(t.width, t.height) / t.worldSize * Math.PI;\n          return qt(e, _n99 + _i95 * (1 - Math.cos(_s76)), Math.pow(r, 10));\n        }\n        return e;\n      }\n    }, {\n      key: \"upVector\",\n      value: function upVector(t, e, r) {\n        return Ps(e, r, t, 1);\n      }\n    }, {\n      key: \"upVectorScale\",\n      value: function upVectorScale(t) {\n        return {\n          metersToTile: bs(Ts(_s(t)))\n        };\n      }\n    }]);\n    return Globe;\n  }(Mercator);\n  function qu(t) {\n    var e = t.parallels,\n      r = !!e && Math.abs(e[0] + e[1]) < .01;\n    switch (t.name) {\n      case \"mercator\":\n        return new Mercator(t);\n      case \"equirectangular\":\n        return new Equirectangular(t);\n      case \"naturalEarth\":\n        return new NaturalEarth(t);\n      case \"equalEarth\":\n        return new EqualEarth(t);\n      case \"winkelTripel\":\n        return new WinkelTripel(t);\n      case \"albers\":\n        return r ? new CylindricalEqualArea(t) : new Albers(t);\n      case \"lambertConformalConic\":\n        return r ? new CylindricalEqualArea(t) : new LambertConformalConic(t);\n      case \"globe\":\n        return new Globe(t);\n    }\n    throw new Error(\"Invalid projection name: \".concat(t.name));\n  }\n  var Nu = Co.types,\n    Gu = [{\n      name: \"a_fade_opacity\",\n      components: 1,\n      type: \"Uint8\",\n      offset: 0\n    }];\n  function Zu(t, e, r, n, i, s, a, o, l, u, c, h, p) {\n    var d = o ? Math.min(ku, Math.round(o[0])) : 0,\n      f = o ? Math.min(ku, Math.round(o[1])) : 0;\n    t.emplaceBack(e, r, Math.round(32 * n), Math.round(32 * i), s, a, (d << 1) + (l ? 1 : 0), f, 16 * u, 16 * c, 256 * h, 256 * p);\n  }\n  function Xu(t, e, r, n, i, s, a) {\n    t.emplaceBack(e, r, n, i, s, a);\n  }\n  function Yu(t, e, r, n, i) {\n    t.emplaceBack(e, r, n, i), t.emplaceBack(e, r, n, i), t.emplaceBack(e, r, n, i), t.emplaceBack(e, r, n, i);\n  }\n  function Wu(t) {\n    var _iterator120 = _createForOfIteratorHelper(t.sections),\n      _step120;\n    try {\n      for (_iterator120.s(); !(_step120 = _iterator120.n()).done;) {\n        var _e162 = _step120.value;\n        if (si(_e162.text)) return !0;\n      }\n    } catch (err) {\n      _iterator120.e(err);\n    } finally {\n      _iterator120.f();\n    }\n    return !1;\n  }\n  var SymbolBuffers = /*#__PURE__*/function () {\n    function SymbolBuffers(t) {\n      _classCallCheck(this, SymbolBuffers);\n      this.layoutVertexArray = new StructArrayLayout4i4ui4i24(), this.indexArray = new StructArrayLayout3ui6(), this.programConfigurations = t, this.segments = new SegmentVector(), this.dynamicLayoutVertexArray = new StructArrayLayout4f16(), this.opacityVertexArray = new StructArrayLayout1ul4(), this.placedSymbolArray = new PlacedSymbolArray(), this.globeExtVertexArray = new StructArrayLayout3i3f20();\n    }\n    _createClass(SymbolBuffers, [{\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return 0 === this.layoutVertexArray.length && 0 === this.indexArray.length && 0 === this.dynamicLayoutVertexArray.length && 0 === this.opacityVertexArray.length;\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t, e, r, n) {\n        this.isEmpty() || (r && (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, al.members), this.indexBuffer = t.createIndexBuffer(this.indexArray, e), this.dynamicLayoutVertexBuffer = t.createVertexBuffer(this.dynamicLayoutVertexArray, ll.members, !0), this.opacityVertexBuffer = t.createVertexBuffer(this.opacityVertexArray, Gu, !0), this.globeExtVertexArray.length > 0 && (this.globeExtVertexBuffer = t.createVertexBuffer(this.globeExtVertexArray, ol.members, !0)), this.opacityVertexBuffer.itemSize = 1), (r || n) && this.programConfigurations.upload(t));\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy(), this.globeExtVertexBuffer && this.globeExtVertexBuffer.destroy());\n      }\n    }]);\n    return SymbolBuffers;\n  }();\n  Er(SymbolBuffers, \"SymbolBuffers\");\n  var CollisionBuffers = /*#__PURE__*/function () {\n    function CollisionBuffers(t, e, r) {\n      _classCallCheck(this, CollisionBuffers);\n      this.layoutVertexArray = new t(), this.layoutAttributes = e, this.indexArray = new r(), this.segments = new SegmentVector(), this.collisionVertexArray = new StructArrayLayout2ub2f12(), this.collisionVertexArrayExt = new StructArrayLayout3f12();\n    }\n    _createClass(CollisionBuffers, [{\n      key: \"upload\",\n      value: function upload(t) {\n        this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = t.createVertexBuffer(this.collisionVertexArray, ul.members, !0), this.collisionVertexBufferExt = t.createVertexBuffer(this.collisionVertexArrayExt, cl.members, !0);\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy(), this.collisionVertexBufferExt.destroy());\n      }\n    }]);\n    return CollisionBuffers;\n  }();\n  Er(CollisionBuffers, \"CollisionBuffers\");\n  var SymbolBucket = /*#__PURE__*/function () {\n    function SymbolBucket(t) {\n      _classCallCheck(this, SymbolBucket);\n      this.collisionBoxArray = t.collisionBoxArray, this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n        return t.id;\n      }), this.index = t.index, this.pixelRatio = t.pixelRatio, this.sourceLayerIndex = t.sourceLayerIndex, this.hasPattern = !1, this.hasRTLText = !1, this.fullyClipped = !1, this.sortKeyRanges = [], this.collisionCircleArray = [], this.placementInvProjMatrix = Xi([]), this.placementViewportMatrix = Xi([]);\n      var e = this.layers[0]._unevaluatedLayout._values;\n      this.textSizeData = fl(this.zoom, e[\"text-size\"]), this.iconSizeData = fl(this.zoom, e[\"icon-size\"]);\n      var r = this.layers[0].layout,\n        n = r.get(\"symbol-sort-key\"),\n        i = r.get(\"symbol-z-order\");\n      this.canOverlap = r.get(\"text-allow-overlap\") || r.get(\"icon-allow-overlap\") || r.get(\"text-ignore-placement\") || r.get(\"icon-ignore-placement\"), this.sortFeaturesByKey = \"viewport-y\" !== i && void 0 !== n.constantOr(1), this.sortFeaturesByY = (\"viewport-y\" === i || \"auto\" === i && !this.sortFeaturesByKey) && this.canOverlap, this.writingModes = r.get(\"text-writing-mode\").map(function (t) {\n        return Nl[t];\n      }), this.stateDependentLayerIds = this.layers.filter(function (t) {\n        return t.isStateDependent();\n      }).map(function (t) {\n        return t.id;\n      }), this.sourceID = t.sourceID, this.projection = t.projection;\n    }\n    _createClass(SymbolBucket, [{\n      key: \"createArrays\",\n      value: function createArrays() {\n        this.text = new SymbolBuffers(new ProgramConfigurationSet(this.layers, this.zoom, function (t) {\n          return /^text/.test(t);\n        })), this.icon = new SymbolBuffers(new ProgramConfigurationSet(this.layers, this.zoom, function (t) {\n          return /^icon/.test(t);\n        })), this.glyphOffsetArray = new GlyphOffsetArray(), this.lineVertexArray = new SymbolLineVertexArray(), this.symbolInstances = new SymbolInstanceArray();\n      }\n    }, {\n      key: \"calculateGlyphDependencies\",\n      value: function calculateGlyphDependencies(t, e, r, n, i) {\n        for (var _r144 = 0; _r144 < t.length; _r144++) if (e[t.charCodeAt(_r144)] = !0, n && i) {\n          var _n100 = xl[t.charAt(_r144)];\n          _n100 && (e[_n100.charCodeAt(0)] = !0);\n        }\n      }\n    }, {\n      key: \"populate\",\n      value: function populate(t, e, r, n) {\n        var _this35 = this;\n        var i = this.layers[0],\n          s = i.layout,\n          a = \"globe\" === this.projection.name,\n          o = s.get(\"text-font\"),\n          l = s.get(\"text-field\"),\n          u = s.get(\"icon-image\"),\n          c = (\"constant\" !== l.value.kind || l.value.value instanceof Formatted && !l.value.value.isEmpty() || l.value.value.toString().length > 0) && (\"constant\" !== o.value.kind || o.value.value.length > 0),\n          h = \"constant\" !== u.value.kind || !!u.value.value || Object.keys(u.parameters).length > 0,\n          p = s.get(\"symbol-sort-key\");\n        if (this.features = [], !c && !h) return;\n        var d = e.iconDependencies,\n          f = e.glyphDependencies,\n          y = e.availableImages,\n          m = new EvaluationParameters(this.zoom);\n        var _iterator121 = _createForOfIteratorHelper(t),\n          _step121;\n        try {\n          var _loop5 = function _loop5() {\n            var _step121$value = _step121.value,\n              e = _step121$value.feature,\n              l = _step121$value.id,\n              u = _step121$value.index,\n              g = _step121$value.sourceLayerIndex;\n            var t = i._featureFilter.needGeometry,\n              x = Js(e, t);\n            if (!i._featureFilter.filter(m, x, r)) return \"continue\";\n            if (t || (x.geometry = Ws(e, r, n)), a && 1 !== e.type && r.z <= 5) {\n              var _t178 = x.geometry,\n                _e163 = .98078528056,\n                _n101 = function _n101(t, n) {\n                  return ls(Ps(t.x, t.y, r, 1), Ps(n.x, n.y, r, 1)) < _e163;\n                };\n              for (var _e164 = 0; _e164 < _t178.length; _e164++) _t178[_e164] = Gs(_t178[_e164], _n101);\n            }\n            var v, b;\n            if (c) {\n              var _t179 = i.getValueAndResolveTokens(\"text-field\", x, r, y),\n                _e165 = Formatted.factory(_t179);\n              Wu(_e165) && (_this35.hasRTLText = !0), (!_this35.hasRTLText || \"unavailable\" === gi() || _this35.hasRTLText && vi.isParsed()) && (v = gl(_e165, i, x));\n            }\n            if (h) {\n              var _t180 = i.getValueAndResolveTokens(\"icon-image\", x, r, y);\n              b = _t180 instanceof ResolvedImage ? _t180 : ResolvedImage.fromString(_t180);\n            }\n            if (!v && !b) return \"continue\";\n            var w = _this35.sortFeaturesByKey ? p.evaluate(x, {}, r) : void 0;\n            if (_this35.features.push({\n              id: l,\n              text: v,\n              icon: b,\n              index: u,\n              sourceLayerIndex: g,\n              geometry: x.geometry,\n              properties: e.properties,\n              type: Nu[e.type],\n              sortKey: w\n            }), b && (d[b.name] = !0), v) {\n              var _t181 = o.evaluate(x, {}, r).join(\",\"),\n                _e166 = \"map\" === s.get(\"text-rotation-alignment\") && \"point\" !== s.get(\"symbol-placement\");\n              _this35.allowVerticalPlacement = _this35.writingModes && _this35.writingModes.indexOf(Nl.vertical) >= 0;\n              var _iterator122 = _createForOfIteratorHelper(v.sections),\n                _step122;\n              try {\n                for (_iterator122.s(); !(_step122 = _iterator122.n()).done;) {\n                  var _r145 = _step122.value;\n                  if (_r145.image) d[_r145.image.name] = !0;else {\n                    var _n102 = Hn(v.toString()),\n                      _i97 = _r145.fontStack || _t181,\n                      _s77 = f[_i97] = f[_i97] || {};\n                    _this35.calculateGlyphDependencies(_r145.text, _s77, _e166, _this35.allowVerticalPlacement, _n102);\n                  }\n                }\n              } catch (err) {\n                _iterator122.e(err);\n              } finally {\n                _iterator122.f();\n              }\n            }\n          };\n          for (_iterator121.s(); !(_step121 = _iterator121.n()).done;) {\n            var _ret2 = _loop5();\n            if (_ret2 === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator121.e(err);\n        } finally {\n          _iterator121.f();\n        }\n        \"line\" === s.get(\"symbol-placement\") && (this.features = function (t) {\n          var e = {},\n            r = {},\n            n = [];\n          var i = 0;\n          function s(e) {\n            n.push(t[e]), i++;\n          }\n          function a(t, e, i) {\n            var s = r[t];\n            return delete r[t], r[e] = s, n[s].geometry[0].pop(), n[s].geometry[0] = n[s].geometry[0].concat(i[0]), s;\n          }\n          function o(t, r, i) {\n            var s = e[r];\n            return delete e[r], e[t] = s, n[s].geometry[0].shift(), n[s].geometry[0] = i[0].concat(n[s].geometry[0]), s;\n          }\n          function l(t, e, r) {\n            var n = r ? e[0][e[0].length - 1] : e[0][0];\n            return \"\".concat(t, \":\").concat(n.x, \":\").concat(n.y);\n          }\n          for (var _u24 = 0; _u24 < t.length; _u24++) {\n            var _c18 = t[_u24],\n              _h15 = _c18.geometry,\n              _p11 = _c18.text ? _c18.text.toString() : null;\n            if (!_p11) {\n              s(_u24);\n              continue;\n            }\n            var _d9 = l(_p11, _h15),\n              _f9 = l(_p11, _h15, !0);\n            if (_d9 in r && _f9 in e && r[_d9] !== e[_f9]) {\n              var _t177 = o(_d9, _f9, _h15),\n                _i96 = a(_d9, _f9, n[_t177].geometry);\n              delete e[_d9], delete r[_f9], r[l(_p11, n[_i96].geometry, !0)] = _i96, n[_t177].geometry = null;\n            } else _d9 in r ? a(_d9, _f9, _h15) : _f9 in e ? o(_d9, _f9, _h15) : (s(_u24), e[_d9] = i - 1, r[_f9] = i - 1);\n          }\n          return n.filter(function (t) {\n            return t.geometry;\n          });\n        }(this.features)), this.sortFeaturesByKey && this.features.sort(function (t, e) {\n          return t.sortKey - e.sortKey;\n        });\n      }\n    }, {\n      key: \"update\",\n      value: function update(t, e, r, n) {\n        this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t, e, this.layers, r, n), this.icon.programConfigurations.updatePaintArrays(t, e, this.layers, r, n));\n      }\n    }, {\n      key: \"isEmpty\",\n      value: function isEmpty() {\n        return 0 === this.symbolInstances.length && !this.hasRTLText;\n      }\n    }, {\n      key: \"uploadPending\",\n      value: function uploadPending() {\n        return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload;\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        !this.uploaded && this.hasDebugData() && (this.textCollisionBox.upload(t), this.iconCollisionBox.upload(t)), this.text.upload(t, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload), this.icon.upload(t, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload), this.uploaded = !0;\n      }\n    }, {\n      key: \"destroyDebugData\",\n      value: function destroyDebugData() {\n        this.textCollisionBox.destroy(), this.iconCollisionBox.destroy();\n      }\n    }, {\n      key: \"getProjection\",\n      value: function getProjection() {\n        return this.projectionInstance || (this.projectionInstance = qu(this.projection)), this.projectionInstance;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.text.destroy(), this.icon.destroy(), this.hasDebugData() && this.destroyDebugData();\n      }\n    }, {\n      key: \"addToLineVertexArray\",\n      value: function addToLineVertexArray(t, e) {\n        var r = this.lineVertexArray.length;\n        if (void 0 !== t.segment) {\n          var _iterator123 = _createForOfIteratorHelper(e),\n            _step123;\n          try {\n            for (_iterator123.s(); !(_step123 = _iterator123.n()).done;) {\n              var _step123$value = _step123.value,\n                _t182 = _step123$value.x,\n                _r146 = _step123$value.y;\n              this.lineVertexArray.emplaceBack(_t182, _r146);\n            }\n          } catch (err) {\n            _iterator123.e(err);\n          } finally {\n            _iterator123.f();\n          }\n        }\n        return {\n          lineStartIndex: r,\n          lineLength: this.lineVertexArray.length - r\n        };\n      }\n    }, {\n      key: \"addSymbols\",\n      value: function addSymbols(t, e, r, n, i, s, a, o, l, u, c, h, p, d) {\n        var f = t.indexArray,\n          y = t.layoutVertexArray,\n          m = t.globeExtVertexArray,\n          g = t.segments.prepareSegment(4 * e.length, y, f, this.canOverlap ? s.sortKey : void 0),\n          x = this.glyphOffsetArray.length,\n          v = g.vertexLength,\n          b = this.allowVerticalPlacement && a === Nl.vertical ? Math.PI / 2 : 0,\n          w = s.text && s.text.sections;\n        for (var _n103 = 0; _n103 < e.length; _n103++) {\n          var _e$_n = e[_n103],\n            _i98 = _e$_n.tl,\n            _a64 = _e$_n.tr,\n            _u25 = _e$_n.bl,\n            _c19 = _e$_n.br,\n            _h16 = _e$_n.tex,\n            _x8 = _e$_n.pixelOffsetTL,\n            _v7 = _e$_n.pixelOffsetBR,\n            _8 = _e$_n.minFontScaleX,\n            _S7 = _e$_n.minFontScaleY,\n            _A7 = _e$_n.glyphOffset,\n            _k5 = _e$_n.isSDF,\n            _I4 = _e$_n.sectionIndex,\n            _M4 = g.vertexLength,\n            _P3 = _A7[1];\n          if (Zu(y, l.x, l.y, _i98.x, _P3 + _i98.y, _h16.x, _h16.y, r, _k5, _x8.x, _x8.y, _8, _S7), Zu(y, l.x, l.y, _a64.x, _P3 + _a64.y, _h16.x + _h16.w, _h16.y, r, _k5, _v7.x, _x8.y, _8, _S7), Zu(y, l.x, l.y, _u25.x, _P3 + _u25.y, _h16.x, _h16.y + _h16.h, r, _k5, _x8.x, _v7.y, _8, _S7), Zu(y, l.x, l.y, _c19.x, _P3 + _c19.y, _h16.x + _h16.w, _h16.y + _h16.h, r, _k5, _v7.x, _v7.y, _8, _S7), o) {\n            var _o$anchor = o.anchor,\n              _e167 = _o$anchor.x,\n              _r147 = _o$anchor.y,\n              _n104 = _o$anchor.z,\n              _o$up = _slicedToArray(o.up, 3),\n              _i99 = _o$up[0],\n              _s78 = _o$up[1],\n              _a65 = _o$up[2];\n            Xu(m, _e167, _r147, _n104, _i99, _s78, _a65), Xu(m, _e167, _r147, _n104, _i99, _s78, _a65), Xu(m, _e167, _r147, _n104, _i99, _s78, _a65), Xu(m, _e167, _r147, _n104, _i99, _s78, _a65), Yu(t.dynamicLayoutVertexArray, _e167, _r147, _n104, b);\n          } else Yu(t.dynamicLayoutVertexArray, l.x, l.y, l.z, b);\n          f.emplaceBack(_M4, _M4 + 1, _M4 + 2), f.emplaceBack(_M4 + 1, _M4 + 2, _M4 + 3), g.vertexLength += 4, g.primitiveLength += 2, this.glyphOffsetArray.emplaceBack(_A7[0]), _n103 !== e.length - 1 && _I4 === e[_n103 + 1].sectionIndex || t.programConfigurations.populatePaintArrays(y.length, s, s.index, {}, p, d, w && w[_I4]);\n        }\n        var _ = o ? o.anchor : l;\n        t.placedSymbolArray.emplaceBack(_.x, _.y, _.z, l.x, l.y, x, this.glyphOffsetArray.length - x, v, u, c, l.segment, r ? r[0] : 0, r ? r[1] : 0, n[0], n[1], a, 0, !1, 0, h, 0);\n      }\n    }, {\n      key: \"_commitLayoutVertex\",\n      value: function _commitLayoutVertex(t, e, r, n, i, s, a) {\n        t.emplaceBack(e, r, n, i, s, Math.round(a.x), Math.round(a.y));\n      }\n    }, {\n      key: \"_addCollisionDebugVertices\",\n      value: function _addCollisionDebugVertices(t, e, n, i, s, a, o) {\n        var l = n.segments.prepareSegment(4, n.layoutVertexArray, n.indexArray),\n          u = l.vertexLength,\n          c = o.tileAnchorX,\n          h = o.tileAnchorY;\n        for (var _t183 = 0; _t183 < 4; _t183++) n.collisionVertexArray.emplaceBack(0, 0, 0, 0);\n        n.collisionVertexArrayExt.emplaceBack(e, -t.padding, -t.padding), n.collisionVertexArrayExt.emplaceBack(e, t.padding, -t.padding), n.collisionVertexArrayExt.emplaceBack(e, t.padding, t.padding), n.collisionVertexArrayExt.emplaceBack(e, -t.padding, t.padding), this._commitLayoutVertex(n.layoutVertexArray, i, s, a, c, h, new r(t.x1, t.y1)), this._commitLayoutVertex(n.layoutVertexArray, i, s, a, c, h, new r(t.x2, t.y1)), this._commitLayoutVertex(n.layoutVertexArray, i, s, a, c, h, new r(t.x2, t.y2)), this._commitLayoutVertex(n.layoutVertexArray, i, s, a, c, h, new r(t.x1, t.y2)), l.vertexLength += 4;\n        var p = n.indexArray;\n        p.emplaceBack(u, u + 1), p.emplaceBack(u + 1, u + 2), p.emplaceBack(u + 2, u + 3), p.emplaceBack(u + 3, u), l.primitiveLength += 4;\n      }\n    }, {\n      key: \"_addTextDebugCollisionBoxes\",\n      value: function _addTextDebugCollisionBoxes(t, e, r, n, i, s) {\n        for (var _a66 = n; _a66 < i; _a66++) {\n          var _n105 = r.get(_a66),\n            _i100 = this.getSymbolInstanceTextSize(t, s, e, _a66);\n          this._addCollisionDebugVertices(_n105, _i100, this.textCollisionBox, _n105.projectedAnchorX, _n105.projectedAnchorY, _n105.projectedAnchorZ, s);\n        }\n      }\n    }, {\n      key: \"_addIconDebugCollisionBoxes\",\n      value: function _addIconDebugCollisionBoxes(t, e, r, n, i, s) {\n        for (var _a67 = n; _a67 < i; _a67++) {\n          var _n106 = r.get(_a67),\n            _i101 = this.getSymbolInstanceIconSize(t, e, s.placedIconSymbolIndex);\n          this._addCollisionDebugVertices(_n106, _i101, this.iconCollisionBox, _n106.projectedAnchorX, _n106.projectedAnchorY, _n106.projectedAnchorZ, s);\n        }\n      }\n    }, {\n      key: \"generateCollisionDebugBuffers\",\n      value: function generateCollisionDebugBuffers(t, e) {\n        this.hasDebugData() && this.destroyDebugData(), this.textCollisionBox = new CollisionBuffers(StructArrayLayout3i2i2i16, hl.members, StructArrayLayout2ui4), this.iconCollisionBox = new CollisionBuffers(StructArrayLayout3i2i2i16, hl.members, StructArrayLayout2ui4);\n        var r = ml(this.iconSizeData, t),\n          n = ml(this.textSizeData, t);\n        for (var _i102 = 0; _i102 < this.symbolInstances.length; _i102++) {\n          var _s79 = this.symbolInstances.get(_i102);\n          this._addTextDebugCollisionBoxes(n, t, e, _s79.textBoxStartIndex, _s79.textBoxEndIndex, _s79), this._addTextDebugCollisionBoxes(n, t, e, _s79.verticalTextBoxStartIndex, _s79.verticalTextBoxEndIndex, _s79), this._addIconDebugCollisionBoxes(r, t, e, _s79.iconBoxStartIndex, _s79.iconBoxEndIndex, _s79), this._addIconDebugCollisionBoxes(r, t, e, _s79.verticalIconBoxStartIndex, _s79.verticalIconBoxEndIndex, _s79);\n        }\n      }\n    }, {\n      key: \"getSymbolInstanceTextSize\",\n      value: function getSymbolInstanceTextSize(t, e, r, n) {\n        var i = this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex >= 0 ? e.rightJustifiedTextSymbolIndex : e.centerJustifiedTextSymbolIndex >= 0 ? e.centerJustifiedTextSymbolIndex : e.leftJustifiedTextSymbolIndex >= 0 ? e.leftJustifiedTextSymbolIndex : e.verticalPlacedTextSymbolIndex >= 0 ? e.verticalPlacedTextSymbolIndex : n),\n          s = yl(this.textSizeData, t, i) / pl;\n        return this.tilePixelRatio * s;\n      }\n    }, {\n      key: \"getSymbolInstanceIconSize\",\n      value: function getSymbolInstanceIconSize(t, e, r) {\n        var n = this.icon.placedSymbolArray.get(r),\n          i = yl(this.iconSizeData, t, n);\n        return this.tilePixelRatio * i;\n      }\n    }, {\n      key: \"_commitDebugCollisionVertexUpdate\",\n      value: function _commitDebugCollisionVertexUpdate(t, e, r) {\n        t.emplaceBack(e, -r, -r), t.emplaceBack(e, r, -r), t.emplaceBack(e, r, r), t.emplaceBack(e, -r, r);\n      }\n    }, {\n      key: \"_updateTextDebugCollisionBoxes\",\n      value: function _updateTextDebugCollisionBoxes(t, e, r, n, i, s) {\n        for (var _a68 = n; _a68 < i; _a68++) {\n          var _n107 = r.get(_a68),\n            _i103 = this.getSymbolInstanceTextSize(t, s, e, _a68);\n          this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt, _i103, _n107.padding);\n        }\n      }\n    }, {\n      key: \"_updateIconDebugCollisionBoxes\",\n      value: function _updateIconDebugCollisionBoxes(t, e, r, n, i, s) {\n        for (var _a69 = n; _a69 < i; _a69++) {\n          var _n108 = r.get(_a69),\n            _i104 = this.getSymbolInstanceIconSize(t, e, s);\n          this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt, _i104, _n108.padding);\n        }\n      }\n    }, {\n      key: \"updateCollisionDebugBuffers\",\n      value: function updateCollisionDebugBuffers(t, e) {\n        if (!this.hasDebugData()) return;\n        this.hasTextCollisionBoxData() && this.textCollisionBox.collisionVertexArrayExt.clear(), this.hasIconCollisionBoxData() && this.iconCollisionBox.collisionVertexArrayExt.clear();\n        var r = ml(this.iconSizeData, t),\n          n = ml(this.textSizeData, t);\n        for (var _i105 = 0; _i105 < this.symbolInstances.length; _i105++) {\n          var _s80 = this.symbolInstances.get(_i105);\n          this._updateTextDebugCollisionBoxes(n, t, e, _s80.textBoxStartIndex, _s80.textBoxEndIndex, _s80), this._updateTextDebugCollisionBoxes(n, t, e, _s80.verticalTextBoxStartIndex, _s80.verticalTextBoxEndIndex, _s80), this._updateIconDebugCollisionBoxes(r, t, e, _s80.iconBoxStartIndex, _s80.iconBoxEndIndex, _s80.placedIconSymbolIndex), this._updateIconDebugCollisionBoxes(r, t, e, _s80.verticalIconBoxStartIndex, _s80.verticalIconBoxEndIndex, _s80.placedIconSymbolIndex);\n        }\n        this.hasTextCollisionBoxData() && this.textCollisionBox.collisionVertexBufferExt && this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt), this.hasIconCollisionBoxData() && this.iconCollisionBox.collisionVertexBufferExt && this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt);\n      }\n    }, {\n      key: \"_deserializeCollisionBoxesForSymbol\",\n      value: function _deserializeCollisionBoxesForSymbol(t, e, r, n, i, s, a, o, l) {\n        var u = {};\n        if (e < r) {\n          var _t$get = t.get(e),\n            _r148 = _t$get.x1,\n            _n109 = _t$get.y1,\n            _i106 = _t$get.x2,\n            _s81 = _t$get.y2,\n            _a70 = _t$get.padding,\n            _o39 = _t$get.projectedAnchorX,\n            _l30 = _t$get.projectedAnchorY,\n            _c20 = _t$get.projectedAnchorZ,\n            _h17 = _t$get.tileAnchorX,\n            _p12 = _t$get.tileAnchorY,\n            _d10 = _t$get.featureIndex;\n          u.textBox = {\n            x1: _r148,\n            y1: _n109,\n            x2: _i106,\n            y2: _s81,\n            padding: _a70,\n            projectedAnchorX: _o39,\n            projectedAnchorY: _l30,\n            projectedAnchorZ: _c20,\n            tileAnchorX: _h17,\n            tileAnchorY: _p12\n          }, u.textFeatureIndex = _d10;\n        }\n        if (n < i) {\n          var _t$get2 = t.get(n),\n            _e168 = _t$get2.x1,\n            _r149 = _t$get2.y1,\n            _i107 = _t$get2.x2,\n            _s82 = _t$get2.y2,\n            _a71 = _t$get2.padding,\n            _o40 = _t$get2.projectedAnchorX,\n            _l31 = _t$get2.projectedAnchorY,\n            _c21 = _t$get2.projectedAnchorZ,\n            _h18 = _t$get2.tileAnchorX,\n            _p13 = _t$get2.tileAnchorY,\n            _d11 = _t$get2.featureIndex;\n          u.verticalTextBox = {\n            x1: _e168,\n            y1: _r149,\n            x2: _i107,\n            y2: _s82,\n            padding: _a71,\n            projectedAnchorX: _o40,\n            projectedAnchorY: _l31,\n            projectedAnchorZ: _c21,\n            tileAnchorX: _h18,\n            tileAnchorY: _p13\n          }, u.verticalTextFeatureIndex = _d11;\n        }\n        if (s < a) {\n          var _t$get3 = t.get(s),\n            _e169 = _t$get3.x1,\n            _r150 = _t$get3.y1,\n            _n110 = _t$get3.x2,\n            _i108 = _t$get3.y2,\n            _a72 = _t$get3.padding,\n            _o41 = _t$get3.projectedAnchorX,\n            _l32 = _t$get3.projectedAnchorY,\n            _c22 = _t$get3.projectedAnchorZ,\n            _h19 = _t$get3.tileAnchorX,\n            _p14 = _t$get3.tileAnchorY,\n            _d12 = _t$get3.featureIndex;\n          u.iconBox = {\n            x1: _e169,\n            y1: _r150,\n            x2: _n110,\n            y2: _i108,\n            padding: _a72,\n            projectedAnchorX: _o41,\n            projectedAnchorY: _l32,\n            projectedAnchorZ: _c22,\n            tileAnchorX: _h19,\n            tileAnchorY: _p14\n          }, u.iconFeatureIndex = _d12;\n        }\n        if (o < l) {\n          var _t$get4 = t.get(o),\n            _e170 = _t$get4.x1,\n            _r151 = _t$get4.y1,\n            _n111 = _t$get4.x2,\n            _i109 = _t$get4.y2,\n            _s83 = _t$get4.padding,\n            _a73 = _t$get4.projectedAnchorX,\n            _l33 = _t$get4.projectedAnchorY,\n            _c23 = _t$get4.projectedAnchorZ,\n            _h20 = _t$get4.tileAnchorX,\n            _p15 = _t$get4.tileAnchorY,\n            _d13 = _t$get4.featureIndex;\n          u.verticalIconBox = {\n            x1: _e170,\n            y1: _r151,\n            x2: _n111,\n            y2: _i109,\n            padding: _s83,\n            projectedAnchorX: _a73,\n            projectedAnchorY: _l33,\n            projectedAnchorZ: _c23,\n            tileAnchorX: _h20,\n            tileAnchorY: _p15\n          }, u.verticalIconFeatureIndex = _d13;\n        }\n        return u;\n      }\n    }, {\n      key: \"deserializeCollisionBoxes\",\n      value: function deserializeCollisionBoxes(t) {\n        this.collisionArrays = [];\n        for (var _e171 = 0; _e171 < this.symbolInstances.length; _e171++) {\n          var _r152 = this.symbolInstances.get(_e171);\n          this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t, _r152.textBoxStartIndex, _r152.textBoxEndIndex, _r152.verticalTextBoxStartIndex, _r152.verticalTextBoxEndIndex, _r152.iconBoxStartIndex, _r152.iconBoxEndIndex, _r152.verticalIconBoxStartIndex, _r152.verticalIconBoxEndIndex));\n        }\n      }\n    }, {\n      key: \"hasTextData\",\n      value: function hasTextData() {\n        return this.text.segments.get().length > 0;\n      }\n    }, {\n      key: \"hasIconData\",\n      value: function hasIconData() {\n        return this.icon.segments.get().length > 0;\n      }\n    }, {\n      key: \"hasDebugData\",\n      value: function hasDebugData() {\n        return this.textCollisionBox && this.iconCollisionBox;\n      }\n    }, {\n      key: \"hasTextCollisionBoxData\",\n      value: function hasTextCollisionBoxData() {\n        return this.hasDebugData() && this.textCollisionBox.segments.get().length > 0;\n      }\n    }, {\n      key: \"hasIconCollisionBoxData\",\n      value: function hasIconCollisionBoxData() {\n        return this.hasDebugData() && this.iconCollisionBox.segments.get().length > 0;\n      }\n    }, {\n      key: \"addIndicesForPlacedSymbol\",\n      value: function addIndicesForPlacedSymbol(t, e) {\n        var r = t.placedSymbolArray.get(e),\n          n = r.vertexStartIndex + 4 * r.numGlyphs;\n        for (var _e172 = r.vertexStartIndex; _e172 < n; _e172 += 4) t.indexArray.emplaceBack(_e172, _e172 + 1, _e172 + 2), t.indexArray.emplaceBack(_e172 + 1, _e172 + 2, _e172 + 3);\n      }\n    }, {\n      key: \"getSortedSymbolIndexes\",\n      value: function getSortedSymbolIndexes(t) {\n        if (this.sortedAngle === t && void 0 !== this.symbolInstanceIndexes) return this.symbolInstanceIndexes;\n        var e = Math.sin(t),\n          r = Math.cos(t),\n          n = [],\n          i = [],\n          s = [];\n        for (var _t184 = 0; _t184 < this.symbolInstances.length; ++_t184) {\n          s.push(_t184);\n          var _a74 = this.symbolInstances.get(_t184);\n          n.push(0 | Math.round(e * _a74.tileAnchorX + r * _a74.tileAnchorY)), i.push(_a74.featureIndex);\n        }\n        return s.sort(function (t, e) {\n          return n[t] - n[e] || i[e] - i[t];\n        }), s;\n      }\n    }, {\n      key: \"addToSortKeyRanges\",\n      value: function addToSortKeyRanges(t, e) {\n        var r = this.sortKeyRanges[this.sortKeyRanges.length - 1];\n        r && r.sortKey === e ? r.symbolInstanceEnd = t + 1 : this.sortKeyRanges.push({\n          sortKey: e,\n          symbolInstanceStart: t,\n          symbolInstanceEnd: t + 1\n        });\n      }\n    }, {\n      key: \"sortFeatures\",\n      value: function sortFeatures(t) {\n        if (this.sortFeaturesByY && this.sortedAngle !== t && !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1)) {\n          this.symbolInstanceIndexes = this.getSortedSymbolIndexes(t), this.sortedAngle = t, this.text.indexArray.clear(), this.icon.indexArray.clear(), this.featureSortOrder = [];\n          var _iterator124 = _createForOfIteratorHelper(this.symbolInstanceIndexes),\n            _step124;\n          try {\n            for (_iterator124.s(); !(_step124 = _iterator124.n()).done;) {\n              var _t185 = _step124.value;\n              var _e173 = this.symbolInstances.get(_t185);\n              this.featureSortOrder.push(_e173.featureIndex);\n              var _r153 = _e173.rightJustifiedTextSymbolIndex,\n                _n112 = _e173.centerJustifiedTextSymbolIndex,\n                _i110 = _e173.leftJustifiedTextSymbolIndex,\n                _s84 = _e173.verticalPlacedTextSymbolIndex,\n                _a75 = _e173.placedIconSymbolIndex,\n                _o42 = _e173.verticalPlacedIconSymbolIndex;\n              _r153 >= 0 && this.addIndicesForPlacedSymbol(this.text, _r153), _n112 >= 0 && _n112 !== _r153 && this.addIndicesForPlacedSymbol(this.text, _n112), _i110 >= 0 && _i110 !== _n112 && _i110 !== _r153 && this.addIndicesForPlacedSymbol(this.text, _i110), _s84 >= 0 && this.addIndicesForPlacedSymbol(this.text, _s84), _a75 >= 0 && this.addIndicesForPlacedSymbol(this.icon, _a75), _o42 >= 0 && this.addIndicesForPlacedSymbol(this.icon, _o42);\n            }\n          } catch (err) {\n            _iterator124.e(err);\n          } finally {\n            _iterator124.f();\n          }\n          this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);\n        }\n      }\n    }]);\n    return SymbolBucket;\n  }();\n  Er(SymbolBucket, \"SymbolBucket\", {\n    omit: [\"layers\", \"collisionBoxArray\", \"features\", \"compareText\"]\n  }), SymbolBucket.MAX_GLYPHS = 65535, SymbolBucket.addDynamicAttributes = Yu;\n  var Ju = new Properties({\n    \"symbol-placement\": new DataConstantProperty(Rr.layout_symbol[\"symbol-placement\"]),\n    \"symbol-spacing\": new DataConstantProperty(Rr.layout_symbol[\"symbol-spacing\"]),\n    \"symbol-avoid-edges\": new DataConstantProperty(Rr.layout_symbol[\"symbol-avoid-edges\"]),\n    \"symbol-sort-key\": new DataDrivenProperty(Rr.layout_symbol[\"symbol-sort-key\"]),\n    \"symbol-z-order\": new DataConstantProperty(Rr.layout_symbol[\"symbol-z-order\"]),\n    \"icon-allow-overlap\": new DataConstantProperty(Rr.layout_symbol[\"icon-allow-overlap\"]),\n    \"icon-ignore-placement\": new DataConstantProperty(Rr.layout_symbol[\"icon-ignore-placement\"]),\n    \"icon-optional\": new DataConstantProperty(Rr.layout_symbol[\"icon-optional\"]),\n    \"icon-rotation-alignment\": new DataConstantProperty(Rr.layout_symbol[\"icon-rotation-alignment\"]),\n    \"icon-size\": new DataDrivenProperty(Rr.layout_symbol[\"icon-size\"]),\n    \"icon-text-fit\": new DataConstantProperty(Rr.layout_symbol[\"icon-text-fit\"]),\n    \"icon-text-fit-padding\": new DataConstantProperty(Rr.layout_symbol[\"icon-text-fit-padding\"]),\n    \"icon-image\": new DataDrivenProperty(Rr.layout_symbol[\"icon-image\"]),\n    \"icon-rotate\": new DataDrivenProperty(Rr.layout_symbol[\"icon-rotate\"]),\n    \"icon-padding\": new DataConstantProperty(Rr.layout_symbol[\"icon-padding\"]),\n    \"icon-keep-upright\": new DataConstantProperty(Rr.layout_symbol[\"icon-keep-upright\"]),\n    \"icon-offset\": new DataDrivenProperty(Rr.layout_symbol[\"icon-offset\"]),\n    \"icon-anchor\": new DataDrivenProperty(Rr.layout_symbol[\"icon-anchor\"]),\n    \"icon-pitch-alignment\": new DataConstantProperty(Rr.layout_symbol[\"icon-pitch-alignment\"]),\n    \"text-pitch-alignment\": new DataConstantProperty(Rr.layout_symbol[\"text-pitch-alignment\"]),\n    \"text-rotation-alignment\": new DataConstantProperty(Rr.layout_symbol[\"text-rotation-alignment\"]),\n    \"text-field\": new DataDrivenProperty(Rr.layout_symbol[\"text-field\"]),\n    \"text-font\": new DataDrivenProperty(Rr.layout_symbol[\"text-font\"]),\n    \"text-size\": new DataDrivenProperty(Rr.layout_symbol[\"text-size\"]),\n    \"text-max-width\": new DataDrivenProperty(Rr.layout_symbol[\"text-max-width\"]),\n    \"text-line-height\": new DataDrivenProperty(Rr.layout_symbol[\"text-line-height\"]),\n    \"text-letter-spacing\": new DataDrivenProperty(Rr.layout_symbol[\"text-letter-spacing\"]),\n    \"text-justify\": new DataDrivenProperty(Rr.layout_symbol[\"text-justify\"]),\n    \"text-radial-offset\": new DataDrivenProperty(Rr.layout_symbol[\"text-radial-offset\"]),\n    \"text-variable-anchor\": new DataConstantProperty(Rr.layout_symbol[\"text-variable-anchor\"]),\n    \"text-anchor\": new DataDrivenProperty(Rr.layout_symbol[\"text-anchor\"]),\n    \"text-max-angle\": new DataConstantProperty(Rr.layout_symbol[\"text-max-angle\"]),\n    \"text-writing-mode\": new DataConstantProperty(Rr.layout_symbol[\"text-writing-mode\"]),\n    \"text-rotate\": new DataDrivenProperty(Rr.layout_symbol[\"text-rotate\"]),\n    \"text-padding\": new DataConstantProperty(Rr.layout_symbol[\"text-padding\"]),\n    \"text-keep-upright\": new DataConstantProperty(Rr.layout_symbol[\"text-keep-upright\"]),\n    \"text-transform\": new DataDrivenProperty(Rr.layout_symbol[\"text-transform\"]),\n    \"text-offset\": new DataDrivenProperty(Rr.layout_symbol[\"text-offset\"]),\n    \"text-allow-overlap\": new DataConstantProperty(Rr.layout_symbol[\"text-allow-overlap\"]),\n    \"text-ignore-placement\": new DataConstantProperty(Rr.layout_symbol[\"text-ignore-placement\"]),\n    \"text-optional\": new DataConstantProperty(Rr.layout_symbol[\"text-optional\"])\n  });\n  var Ku = {\n    paint: new Properties({\n      \"icon-opacity\": new DataDrivenProperty(Rr.paint_symbol[\"icon-opacity\"]),\n      \"icon-color\": new DataDrivenProperty(Rr.paint_symbol[\"icon-color\"]),\n      \"icon-halo-color\": new DataDrivenProperty(Rr.paint_symbol[\"icon-halo-color\"]),\n      \"icon-halo-width\": new DataDrivenProperty(Rr.paint_symbol[\"icon-halo-width\"]),\n      \"icon-halo-blur\": new DataDrivenProperty(Rr.paint_symbol[\"icon-halo-blur\"]),\n      \"icon-translate\": new DataConstantProperty(Rr.paint_symbol[\"icon-translate\"]),\n      \"icon-translate-anchor\": new DataConstantProperty(Rr.paint_symbol[\"icon-translate-anchor\"]),\n      \"text-opacity\": new DataDrivenProperty(Rr.paint_symbol[\"text-opacity\"]),\n      \"text-color\": new DataDrivenProperty(Rr.paint_symbol[\"text-color\"], {\n        runtimeType: Z,\n        getOverride: function getOverride(t) {\n          return t.textColor;\n        },\n        hasOverride: function hasOverride(t) {\n          return !!t.textColor;\n        }\n      }),\n      \"text-halo-color\": new DataDrivenProperty(Rr.paint_symbol[\"text-halo-color\"]),\n      \"text-halo-width\": new DataDrivenProperty(Rr.paint_symbol[\"text-halo-width\"]),\n      \"text-halo-blur\": new DataDrivenProperty(Rr.paint_symbol[\"text-halo-blur\"]),\n      \"text-translate\": new DataConstantProperty(Rr.paint_symbol[\"text-translate\"]),\n      \"text-translate-anchor\": new DataConstantProperty(Rr.paint_symbol[\"text-translate-anchor\"])\n    }),\n    layout: Ju\n  };\n  var FormatSectionOverride = /*#__PURE__*/function () {\n    function FormatSectionOverride(t) {\n      _classCallCheck(this, FormatSectionOverride);\n      this.type = t.property.overrides ? t.property.overrides.runtimeType : U, this.defaultValue = t;\n    }\n    _createClass(FormatSectionOverride, [{\n      key: \"evaluate\",\n      value: function evaluate(t) {\n        if (t.formattedSection) {\n          var _e174 = this.defaultValue.property.overrides;\n          if (_e174 && _e174.hasOverride(t.formattedSection)) return _e174.getOverride(t.formattedSection);\n        }\n        return t.feature && t.featureState ? this.defaultValue.evaluate(t.feature, t.featureState) : this.defaultValue.property.specification.default;\n      }\n    }, {\n      key: \"eachChild\",\n      value: function eachChild(t) {\n        this.defaultValue.isConstant() || t(this.defaultValue.value._styleExpression.expression);\n      }\n    }, {\n      key: \"outputDefined\",\n      value: function outputDefined() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return null;\n      }\n    }]);\n    return FormatSectionOverride;\n  }();\n  Er(FormatSectionOverride, \"FormatSectionOverride\", {\n    omit: [\"defaultValue\"]\n  });\n  var SymbolStyleLayer = /*#__PURE__*/function (_StyleLayer) {\n    _inherits(SymbolStyleLayer, _StyleLayer);\n    function SymbolStyleLayer(t) {\n      _classCallCheck(this, SymbolStyleLayer);\n      return _possibleConstructorReturn(this, _getPrototypeOf(SymbolStyleLayer).call(this, t, Ku));\n    }\n    _createClass(SymbolStyleLayer, [{\n      key: \"recalculate\",\n      value: function recalculate(t, e) {\n        _get(_getPrototypeOf(SymbolStyleLayer.prototype), \"recalculate\", this).call(this, t, e), \"auto\" === this.layout.get(\"icon-rotation-alignment\") && (this.layout._values[\"icon-rotation-alignment\"] = \"point\" !== this.layout.get(\"symbol-placement\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"text-rotation-alignment\") && (this.layout._values[\"text-rotation-alignment\"] = \"point\" !== this.layout.get(\"symbol-placement\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"text-pitch-alignment\") && (this.layout._values[\"text-pitch-alignment\"] = this.layout.get(\"text-rotation-alignment\")), \"auto\" === this.layout.get(\"icon-pitch-alignment\") && (this.layout._values[\"icon-pitch-alignment\"] = this.layout.get(\"icon-rotation-alignment\"));\n        var r = this.layout.get(\"text-writing-mode\");\n        if (r) {\n          var _t186 = [];\n          var _iterator125 = _createForOfIteratorHelper(r),\n            _step125;\n          try {\n            for (_iterator125.s(); !(_step125 = _iterator125.n()).done;) {\n              var _e175 = _step125.value;\n              _t186.indexOf(_e175) < 0 && _t186.push(_e175);\n            }\n          } catch (err) {\n            _iterator125.e(err);\n          } finally {\n            _iterator125.f();\n          }\n          this.layout._values[\"text-writing-mode\"] = _t186;\n        } else this.layout._values[\"text-writing-mode\"] = \"point\" === this.layout.get(\"symbol-placement\") ? [\"horizontal\"] : [\"horizontal\", \"vertical\"];\n        this._setPaintOverrides();\n      }\n    }, {\n      key: \"getValueAndResolveTokens\",\n      value: function getValueAndResolveTokens(t, e, r, n) {\n        var i = this.layout.get(t).evaluate(e, {}, r, n),\n          s = this._unevaluatedLayout._values[t];\n        return s.isDataDriven() || Xe(s.value) || !i ? i : function (t, e) {\n          return e.replace(/{([^{}]+)}/g, function (e, r) {\n            return r in t ? String(t[r]) : \"\";\n          });\n        }(e.properties, i);\n      }\n    }, {\n      key: \"createBucket\",\n      value: function createBucket(t) {\n        return new SymbolBucket(t);\n      }\n    }, {\n      key: \"queryRadius\",\n      value: function queryRadius() {\n        return 0;\n      }\n    }, {\n      key: \"queryIntersectsFeature\",\n      value: function queryIntersectsFeature() {\n        return !1;\n      }\n    }, {\n      key: \"_setPaintOverrides\",\n      value: function _setPaintOverrides() {\n        var _iterator126 = _createForOfIteratorHelper(Ku.paint.overridableProperties),\n          _step126;\n        try {\n          for (_iterator126.s(); !(_step126 = _iterator126.n()).done;) {\n            var _t187 = _step126.value;\n            if (!SymbolStyleLayer.hasPaintOverride(this.layout, _t187)) continue;\n            var _e176 = this.paint.get(_t187),\n              _r154 = new FormatSectionOverride(_e176),\n              _n113 = new StyleExpression(_r154, _e176.property.specification);\n            var _i111 = null;\n            _i111 = \"constant\" === _e176.value.kind || \"source\" === _e176.value.kind ? new ZoomConstantExpression(\"source\", _n113) : new ZoomDependentExpression(\"composite\", _n113, _e176.value.zoomStops, _e176.value._interpolationType), this.paint._values[_t187] = new PossiblyEvaluatedPropertyValue(_e176.property, _i111, _e176.parameters);\n          }\n        } catch (err) {\n          _iterator126.e(err);\n        } finally {\n          _iterator126.f();\n        }\n      }\n    }, {\n      key: \"_handleOverridablePaintPropertyUpdate\",\n      value: function _handleOverridablePaintPropertyUpdate(t, e, r) {\n        return !(!this.layout || e.isDataDriven() || r.isDataDriven()) && SymbolStyleLayer.hasPaintOverride(this.layout, t);\n      }\n    }, {\n      key: \"getProgramConfiguration\",\n      value: function getProgramConfiguration(t) {\n        return new ProgramConfiguration(this, t);\n      }\n    }], [{\n      key: \"hasPaintOverride\",\n      value: function hasPaintOverride(t, e) {\n        var r = t.get(\"text-field\"),\n          n = Ku.paint.properties[e];\n        var i = !1;\n        var s = function s(t) {\n          var _iterator127 = _createForOfIteratorHelper(t),\n            _step127;\n          try {\n            for (_iterator127.s(); !(_step127 = _iterator127.n()).done;) {\n              var _e177 = _step127.value;\n              if (n.overrides && n.overrides.hasOverride(_e177)) return void (i = !0);\n            }\n          } catch (err) {\n            _iterator127.e(err);\n          } finally {\n            _iterator127.f();\n          }\n        };\n        if (\"constant\" === r.value.kind && r.value.value instanceof Formatted) s(r.value.value.sections);else if (\"source\" === r.value.kind) {\n          var _t188 = function _t188(e) {\n              i || (e instanceof lt && at(e.value) === J ? s(e.value.sections) : e instanceof FormatExpression ? s(e.sections) : e.eachChild(_t188));\n            },\n            _e178 = r.value;\n          _e178._styleExpression && _t188(_e178._styleExpression.expression);\n        }\n        return i;\n      }\n    }]);\n    return SymbolStyleLayer;\n  }(StyleLayer);\n  var Hu = {\n      paint: new Properties({\n        \"background-color\": new DataConstantProperty(Rr.paint_background[\"background-color\"]),\n        \"background-pattern\": new DataConstantProperty(Rr.paint_background[\"background-pattern\"]),\n        \"background-opacity\": new DataConstantProperty(Rr.paint_background[\"background-opacity\"])\n      })\n    },\n    Qu = {\n      paint: new Properties({\n        \"raster-opacity\": new DataConstantProperty(Rr.paint_raster[\"raster-opacity\"]),\n        \"raster-hue-rotate\": new DataConstantProperty(Rr.paint_raster[\"raster-hue-rotate\"]),\n        \"raster-brightness-min\": new DataConstantProperty(Rr.paint_raster[\"raster-brightness-min\"]),\n        \"raster-brightness-max\": new DataConstantProperty(Rr.paint_raster[\"raster-brightness-max\"]),\n        \"raster-saturation\": new DataConstantProperty(Rr.paint_raster[\"raster-saturation\"]),\n        \"raster-contrast\": new DataConstantProperty(Rr.paint_raster[\"raster-contrast\"]),\n        \"raster-resampling\": new DataConstantProperty(Rr.paint_raster[\"raster-resampling\"]),\n        \"raster-fade-duration\": new DataConstantProperty(Rr.paint_raster[\"raster-fade-duration\"])\n      })\n    };\n  var CustomStyleLayer = /*#__PURE__*/function (_StyleLayer2) {\n    _inherits(CustomStyleLayer, _StyleLayer2);\n    function CustomStyleLayer(t) {\n      var _this36;\n      _classCallCheck(this, CustomStyleLayer);\n      _this36 = _possibleConstructorReturn(this, _getPrototypeOf(CustomStyleLayer).call(this, t, {})), _this36.implementation = t;\n      return _this36;\n    }\n    _createClass(CustomStyleLayer, [{\n      key: \"is3D\",\n      value: function is3D() {\n        return \"3d\" === this.implementation.renderingMode;\n      }\n    }, {\n      key: \"hasOffscreenPass\",\n      value: function hasOffscreenPass() {\n        return void 0 !== this.implementation.prerender;\n      }\n    }, {\n      key: \"isLayerDraped\",\n      value: function isLayerDraped() {\n        return void 0 !== this.implementation.renderToTile;\n      }\n    }, {\n      key: \"shouldRedrape\",\n      value: function shouldRedrape() {\n        return !!this.implementation.shouldRerenderTiles && this.implementation.shouldRerenderTiles();\n      }\n    }, {\n      key: \"recalculate\",\n      value: function recalculate() {}\n    }, {\n      key: \"updateTransitions\",\n      value: function updateTransitions() {}\n    }, {\n      key: \"hasTransition\",\n      value: function hasTransition() {\n        return !1;\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {}\n    }, {\n      key: \"onAdd\",\n      value: function onAdd(t) {\n        this.implementation.onAdd && this.implementation.onAdd(t, t.painter.context.gl);\n      }\n    }, {\n      key: \"onRemove\",\n      value: function onRemove(t) {\n        this.implementation.onRemove && this.implementation.onRemove(t, t.painter.context.gl);\n      }\n    }]);\n    return CustomStyleLayer;\n  }(StyleLayer);\n  var tc = {\n    paint: new Properties({\n      \"sky-type\": new DataConstantProperty(Rr.paint_sky[\"sky-type\"]),\n      \"sky-atmosphere-sun\": new DataConstantProperty(Rr.paint_sky[\"sky-atmosphere-sun\"]),\n      \"sky-atmosphere-sun-intensity\": new DataConstantProperty(Rr.paint_sky[\"sky-atmosphere-sun-intensity\"]),\n      \"sky-gradient-center\": new DataConstantProperty(Rr.paint_sky[\"sky-gradient-center\"]),\n      \"sky-gradient-radius\": new DataConstantProperty(Rr.paint_sky[\"sky-gradient-radius\"]),\n      \"sky-gradient\": new ColorRampProperty(Rr.paint_sky[\"sky-gradient\"]),\n      \"sky-atmosphere-halo-color\": new DataConstantProperty(Rr.paint_sky[\"sky-atmosphere-halo-color\"]),\n      \"sky-atmosphere-color\": new DataConstantProperty(Rr.paint_sky[\"sky-atmosphere-color\"]),\n      \"sky-opacity\": new DataConstantProperty(Rr.paint_sky[\"sky-opacity\"])\n    })\n  };\n  function ec(t, e, r) {\n    var n = [0, 0, 1],\n      i = function (t) {\n        return t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 1, t;\n      }([]);\n    return function (t, e, r) {\n      r *= .5;\n      var n = e[0],\n        i = e[1],\n        s = e[2],\n        a = e[3],\n        o = Math.sin(r),\n        l = Math.cos(r);\n      t[0] = n * l - s * o, t[1] = i * l + a * o, t[2] = s * l + n * o, t[3] = a * l - i * o;\n    }(i, i, r ? -o(t) + Math.PI : o(t)), function (t, e, r) {\n      r *= .5;\n      var n = e[0],\n        i = e[1],\n        s = e[2],\n        a = e[3],\n        o = Math.sin(r),\n        l = Math.cos(r);\n      t[0] = n * l + a * o, t[1] = i * l + s * o, t[2] = s * l - i * o, t[3] = a * l - n * o;\n    }(i, i, -o(e)), function (t, e, r) {\n      var n = r[0],\n        i = r[1],\n        s = r[2],\n        a = e[0],\n        o = e[1],\n        l = e[2],\n        u = i * l - s * o,\n        c = s * a - n * l,\n        h = n * o - i * a,\n        p = i * h - s * c,\n        d = s * u - n * h,\n        f = n * c - i * u,\n        y = 2 * r[3];\n      c *= y, h *= y, d *= 2, f *= 2, t[0] = a + (u *= y) + (p *= 2), t[1] = o + c + d, t[2] = l + h + f;\n    }(n, n, i), os(n, n);\n  }\n  var rc = {\n    circle: /*#__PURE__*/function (_StyleLayer3) {\n      _inherits(CircleStyleLayer, _StyleLayer3);\n      function CircleStyleLayer(t) {\n        _classCallCheck(this, CircleStyleLayer);\n        return _possibleConstructorReturn(this, _getPrototypeOf(CircleStyleLayer).call(this, t, ya));\n      }\n      _createClass(CircleStyleLayer, [{\n        key: \"createBucket\",\n        value: function createBucket(t) {\n          return new CircleBucket(t);\n        }\n      }, {\n        key: \"queryRadius\",\n        value: function queryRadius(t) {\n          var e = t;\n          return ca(\"circle-radius\", this, e) + ca(\"circle-stroke-width\", this, e) + ha(this.paint.get(\"circle-translate\"));\n        }\n      }, {\n        key: \"queryIntersectsFeature\",\n        value: function queryIntersectsFeature(t, e, r, n, i, s, a, o) {\n          var l = da(this.paint.get(\"circle-translate\"), this.paint.get(\"circle-translate-anchor\"), s.angle, t.pixelToTileUnitsFactor),\n            u = this.paint.get(\"circle-radius\").evaluate(e, r) + this.paint.get(\"circle-stroke-width\").evaluate(e, r);\n          return ma(t, n, s, a, o, \"map\" === this.paint.get(\"circle-pitch-alignment\"), \"map\" === this.paint.get(\"circle-pitch-scale\"), l, u);\n        }\n      }, {\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          return [\"circle\"];\n        }\n      }, {\n        key: \"getProgramConfiguration\",\n        value: function getProgramConfiguration(t) {\n          return new ProgramConfiguration(this, t);\n        }\n      }]);\n      return CircleStyleLayer;\n    }(StyleLayer),\n    heatmap: /*#__PURE__*/function (_StyleLayer4) {\n      _inherits(HeatmapStyleLayer, _StyleLayer4);\n      _createClass(HeatmapStyleLayer, [{\n        key: \"createBucket\",\n        value: function createBucket(t) {\n          return new HeatmapBucket(t);\n        }\n      }]);\n      function HeatmapStyleLayer(t) {\n        var _this37;\n        _classCallCheck(this, HeatmapStyleLayer);\n        _this37 = _possibleConstructorReturn(this, _getPrototypeOf(HeatmapStyleLayer).call(this, t, Aa)), _this37._updateColorRamp();\n        return _this37;\n      }\n      _createClass(HeatmapStyleLayer, [{\n        key: \"_handleSpecialPaintPropertyUpdate\",\n        value: function _handleSpecialPaintPropertyUpdate(t) {\n          \"heatmap-color\" === t && this._updateColorRamp();\n        }\n      }, {\n        key: \"_updateColorRamp\",\n        value: function _updateColorRamp() {\n          this.colorRamp = ka({\n            expression: this._transitionablePaint._values[\"heatmap-color\"].value.expression,\n            evaluationKey: \"heatmapDensity\",\n            image: this.colorRamp\n          }), this.colorRampTexture = null;\n        }\n      }, {\n        key: \"resize\",\n        value: function resize() {\n          this.heatmapFbo && (this.heatmapFbo.destroy(), this.heatmapFbo = null);\n        }\n      }, {\n        key: \"queryRadius\",\n        value: function queryRadius(t) {\n          return ca(\"heatmap-radius\", this, t);\n        }\n      }, {\n        key: \"queryIntersectsFeature\",\n        value: function queryIntersectsFeature(t, e, n, i, s, a, o, l) {\n          var u = this.paint.get(\"heatmap-radius\").evaluate(e, n);\n          return ma(t, i, a, o, l, !0, !0, new r(0, 0), u);\n        }\n      }, {\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return 0 !== this.paint.get(\"heatmap-opacity\") && \"none\" !== this.visibility;\n        }\n      }, {\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          return [\"heatmap\", \"heatmapTexture\"];\n        }\n      }, {\n        key: \"getProgramConfiguration\",\n        value: function getProgramConfiguration(t) {\n          return new ProgramConfiguration(this, t);\n        }\n      }]);\n      return HeatmapStyleLayer;\n    }(StyleLayer),\n    hillshade: /*#__PURE__*/function (_StyleLayer5) {\n      _inherits(HillshadeStyleLayer, _StyleLayer5);\n      function HillshadeStyleLayer(t) {\n        _classCallCheck(this, HillshadeStyleLayer);\n        return _possibleConstructorReturn(this, _getPrototypeOf(HillshadeStyleLayer).call(this, t, Ia));\n      }\n      _createClass(HillshadeStyleLayer, [{\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return 0 !== this.paint.get(\"hillshade-exaggeration\") && \"none\" !== this.visibility;\n        }\n      }, {\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          return [\"hillshade\", \"hillshadePrepare\"];\n        }\n      }]);\n      return HillshadeStyleLayer;\n    }(StyleLayer),\n    fill: /*#__PURE__*/function (_StyleLayer6) {\n      _inherits(FillStyleLayer, _StyleLayer6);\n      function FillStyleLayer(t) {\n        _classCallCheck(this, FillStyleLayer);\n        return _possibleConstructorReturn(this, _getPrototypeOf(FillStyleLayer).call(this, t, ho));\n      }\n      _createClass(FillStyleLayer, [{\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          var t = this.paint.get(\"fill-pattern\"),\n            e = t && t.constantOr(1),\n            r = [e ? \"fillPattern\" : \"fill\"];\n          return this.paint.get(\"fill-antialias\") && r.push(e && !this.getPaintProperty(\"fill-outline-color\") ? \"fillOutlinePattern\" : \"fillOutline\"), r;\n        }\n      }, {\n        key: \"getProgramConfiguration\",\n        value: function getProgramConfiguration(t) {\n          return new ProgramConfiguration(this, t);\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(t, e) {\n          _get(_getPrototypeOf(FillStyleLayer.prototype), \"recalculate\", this).call(this, t, e);\n          var r = this.paint._values[\"fill-outline-color\"];\n          \"constant\" === r.value.kind && void 0 === r.value.value && (this.paint._values[\"fill-outline-color\"] = this.paint._values[\"fill-color\"]);\n        }\n      }, {\n        key: \"createBucket\",\n        value: function createBucket(t) {\n          return new FillBucket(t);\n        }\n      }, {\n        key: \"queryRadius\",\n        value: function queryRadius() {\n          return ha(this.paint.get(\"fill-translate\"));\n        }\n      }, {\n        key: \"queryIntersectsFeature\",\n        value: function queryIntersectsFeature(t, e, r, n, i, s) {\n          return !t.queryGeometry.isAboveHorizon && ea(pa(t.tilespaceGeometry, this.paint.get(\"fill-translate\"), this.paint.get(\"fill-translate-anchor\"), s.angle, t.pixelToTileUnitsFactor), n);\n        }\n      }, {\n        key: \"isTileClipped\",\n        value: function isTileClipped() {\n          return !0;\n        }\n      }]);\n      return FillStyleLayer;\n    }(StyleLayer),\n    \"fill-extrusion\": /*#__PURE__*/function (_StyleLayer7) {\n      _inherits(FillExtrusionStyleLayer, _StyleLayer7);\n      function FillExtrusionStyleLayer(t) {\n        _classCallCheck(this, FillExtrusionStyleLayer);\n        return _possibleConstructorReturn(this, _getPrototypeOf(FillExtrusionStyleLayer).call(this, t, No));\n      }\n      _createClass(FillExtrusionStyleLayer, [{\n        key: \"createBucket\",\n        value: function createBucket(t) {\n          return new FillExtrusionBucket(t);\n        }\n      }, {\n        key: \"queryRadius\",\n        value: function queryRadius() {\n          return ha(this.paint.get(\"fill-extrusion-translate\"));\n        }\n      }, {\n        key: \"is3D\",\n        value: function is3D() {\n          return !0;\n        }\n      }, {\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          return [this.paint.get(\"fill-extrusion-pattern\").constantOr(1) ? \"fillExtrusionPattern\" : \"fillExtrusion\"];\n        }\n      }, {\n        key: \"getProgramConfiguration\",\n        value: function getProgramConfiguration(t) {\n          return new ProgramConfiguration(this, t);\n        }\n      }, {\n        key: \"queryIntersectsFeature\",\n        value: function queryIntersectsFeature(t, e, n, i, s, a, o, l, u) {\n          var c = da(this.paint.get(\"fill-extrusion-translate\"), this.paint.get(\"fill-extrusion-translate-anchor\"), a.angle, t.pixelToTileUnitsFactor),\n            h = this.paint.get(\"fill-extrusion-height\").evaluate(e, n),\n            p = this.paint.get(\"fill-extrusion-base\").evaluate(e, n),\n            d = [0, 0],\n            f = l && a.elevation,\n            y = a.elevation ? a.elevation.exaggeration() : 1,\n            m = t.tile.getBucket(this);\n          if (f && m instanceof FillExtrusionBucket) {\n            var _t189 = m.centroidVertexArray,\n              _e179 = u + 1;\n            _e179 < _t189.length && (d[0] = _t189.geta_centroid_pos0(_e179), d[1] = _t189.geta_centroid_pos1(_e179));\n          }\n          if (0 === d[0] && 1 === d[1]) return !1;\n          \"globe\" === a.projection.name && (i = Uo([i], [new r(0, 0), new r(Ni, Ni)], t.tileID.canonical).map(function (t) {\n            return t.polygon;\n          }).flat());\n          var g = f ? l : null,\n            _ref122 = function (t, e, r, n, i, s, a, o, l, u, c) {\n              return \"globe\" === t.projection.name ? function (t, e, r, n, i, s, a, o, l, u, c) {\n                var h = [],\n                  p = [],\n                  d = t.projection.upVectorScale(c, t.center.lat, t.worldSize).metersToTile,\n                  f = [0, 0, 0, 1],\n                  y = [0, 0, 0, 1],\n                  m = function m(t, e, r, n) {\n                    t[0] = e, t[1] = r, t[2] = n, t[3] = 1;\n                  },\n                  g = function () {\n                    var t = Math.PI / 32,\n                      e = Math.tan(t),\n                      r = zs;\n                    return r * Math.sqrt(1 + 2 * e * e) - r;\n                  }();\n                r > 0 && (r += g), n += g;\n                var _iterator128 = _createForOfIteratorHelper(e),\n                  _step128;\n                try {\n                  for (_iterator128.s(); !(_step128 = _iterator128.n()).done;) {\n                    var _g8 = _step128.value;\n                    var _e180 = [],\n                      _x9 = [];\n                    var _iterator129 = _createForOfIteratorHelper(_g8),\n                      _step129;\n                    try {\n                      for (_iterator129.s(); !(_step129 = _iterator129.n()).done;) {\n                        var _h21 = _step129.value;\n                        var _p16 = _h21.x + i.x,\n                          _g9 = _h21.y + i.y,\n                          _v8 = t.projection.projectTilePoint(_p16, _g9, c),\n                          _b7 = t.projection.upVector(c, _h21.x, _h21.y);\n                        var _w6 = r,\n                          _9 = n;\n                        if (a) {\n                          var _t190 = Wo(_p16, _g9, r, n, a, o, l, u);\n                          _w6 += _t190.base, _9 += _t190.top;\n                        }\n                        0 !== r ? m(f, _v8.x + _b7[0] * d * _w6, _v8.y + _b7[1] * d * _w6, _v8.z + _b7[2] * d * _w6) : m(f, _v8.x, _v8.y, _v8.z), m(y, _v8.x + _b7[0] * d * _9, _v8.y + _b7[1] * d * _9, _v8.z + _b7[2] * d * _9), us(f, f, s), us(y, y, s), _e180.push(new Point3D(f[0], f[1], f[2])), _x9.push(new Point3D(y[0], y[1], y[2]));\n                      }\n                    } catch (err) {\n                      _iterator129.e(err);\n                    } finally {\n                      _iterator129.f();\n                    }\n                    h.push(_e180), p.push(_x9);\n                  }\n                } catch (err) {\n                  _iterator128.e(err);\n                } finally {\n                  _iterator128.f();\n                }\n                return [h, p];\n              }(t, e, r, n, i, s, a, o, l, u, c) : a ? function (t, e, r, n, i, s, a, o, l) {\n                var u = [],\n                  c = [],\n                  h = [0, 0, 0, 1];\n                var _iterator130 = _createForOfIteratorHelper(t),\n                  _step130;\n                try {\n                  for (_iterator130.s(); !(_step130 = _iterator130.n()).done;) {\n                    var _p17 = _step130.value;\n                    var _t191 = [],\n                      _d14 = [];\n                    var _iterator131 = _createForOfIteratorHelper(_p17),\n                      _step131;\n                    try {\n                      for (_iterator131.s(); !(_step131 = _iterator131.n()).done;) {\n                        var _u26 = _step131.value;\n                        var _c24 = _u26.x + n.x,\n                          _p18 = _u26.y + n.y,\n                          _f10 = Wo(_c24, _p18, e, r, s, a, o, l);\n                        h[0] = _c24, h[1] = _p18, h[2] = _f10.base, h[3] = 1, ps(h, h, i), h[3] = Math.max(h[3], 1e-5);\n                        var _y8 = new Point3D(h[0] / h[3], h[1] / h[3], h[2] / h[3]);\n                        h[0] = _c24, h[1] = _p18, h[2] = _f10.top, h[3] = 1, ps(h, h, i), h[3] = Math.max(h[3], 1e-5);\n                        var _m6 = new Point3D(h[0] / h[3], h[1] / h[3], h[2] / h[3]);\n                        _t191.push(_y8), _d14.push(_m6);\n                      }\n                    } catch (err) {\n                      _iterator131.e(err);\n                    } finally {\n                      _iterator131.f();\n                    }\n                    u.push(_t191), c.push(_d14);\n                  }\n                } catch (err) {\n                  _iterator130.e(err);\n                } finally {\n                  _iterator130.f();\n                }\n                return [u, c];\n              }(e, r, n, i, s, a, o, l, u) : function (t, e, r, n, i) {\n                var s = [],\n                  a = [],\n                  o = i[8] * e,\n                  l = i[9] * e,\n                  u = i[10] * e,\n                  c = i[11] * e,\n                  h = i[8] * r,\n                  p = i[9] * r,\n                  d = i[10] * r,\n                  f = i[11] * r;\n                var _iterator132 = _createForOfIteratorHelper(t),\n                  _step132;\n                try {\n                  for (_iterator132.s(); !(_step132 = _iterator132.n()).done;) {\n                    var _e181 = _step132.value;\n                    var _t192 = [],\n                      _r155 = [];\n                    var _iterator133 = _createForOfIteratorHelper(_e181),\n                      _step133;\n                    try {\n                      for (_iterator133.s(); !(_step133 = _iterator133.n()).done;) {\n                        var _s85 = _step133.value;\n                        var _e182 = _s85.x + n.x,\n                          _a76 = _s85.y + n.y,\n                          _y9 = i[0] * _e182 + i[4] * _a76 + i[12],\n                          _m7 = i[1] * _e182 + i[5] * _a76 + i[13],\n                          _g10 = i[2] * _e182 + i[6] * _a76 + i[14],\n                          _x10 = i[3] * _e182 + i[7] * _a76 + i[15],\n                          _v9 = _y9 + o,\n                          _b8 = _m7 + l,\n                          _w7 = _g10 + u,\n                          _10 = Math.max(_x10 + c, 1e-5),\n                          _S8 = _y9 + h,\n                          _A8 = _m7 + p,\n                          _k6 = _g10 + d,\n                          _I5 = Math.max(_x10 + f, 1e-5);\n                        _t192.push(new Point3D(_v9 / _10, _b8 / _10, _w7 / _10)), _r155.push(new Point3D(_S8 / _I5, _A8 / _I5, _k6 / _I5));\n                      }\n                    } catch (err) {\n                      _iterator133.e(err);\n                    } finally {\n                      _iterator133.f();\n                    }\n                    s.push(_t192), a.push(_r155);\n                  }\n                } catch (err) {\n                  _iterator132.e(err);\n                } finally {\n                  _iterator132.f();\n                }\n                return [s, a];\n              }(e, r, n, i, s);\n            }(a, i, p, h, c, o, g, d, y, a.center.lat, t.tileID.canonical),\n            _ref123 = _slicedToArray(_ref122, 2),\n            x = _ref123[0],\n            v = _ref123[1],\n            b = t.queryGeometry;\n          return function (t, e, r) {\n            var n = 1 / 0;\n            ea(r, e) && (n = Yo(r, e[0]));\n            for (var _i112 = 0; _i112 < e.length; _i112++) {\n              var _s86 = e[_i112],\n                _a77 = t[_i112];\n              for (var _t193 = 0; _t193 < _s86.length - 1; _t193++) {\n                var _e183 = _s86[_t193],\n                  _i113 = [_e183, _s86[_t193 + 1], _a77[_t193 + 1], _a77[_t193], _e183];\n                Qs(r, _i113) && (n = Math.min(n, Yo(r, _i113)));\n              }\n            }\n            return n !== 1 / 0 && n;\n          }(x, v, b.isPointQuery() ? b.screenBounds : b.screenGeometry);\n        }\n      }]);\n      return FillExtrusionStyleLayer;\n    }(StyleLayer),\n    line: /*#__PURE__*/function (_StyleLayer8) {\n      _inherits(LineStyleLayer, _StyleLayer8);\n      function LineStyleLayer(t) {\n        var _this38;\n        _classCallCheck(this, LineStyleLayer);\n        _this38 = _possibleConstructorReturn(this, _getPrototypeOf(LineStyleLayer).call(this, t, nl)), _this38.gradientVersion = 0;\n        return _this38;\n      }\n      _createClass(LineStyleLayer, [{\n        key: \"_handleSpecialPaintPropertyUpdate\",\n        value: function _handleSpecialPaintPropertyUpdate(t) {\n          if (\"line-gradient\" === t) {\n            var _t194 = this._transitionablePaint._values[\"line-gradient\"].value.expression;\n            this.stepInterpolant = _t194._styleExpression && _t194._styleExpression.expression instanceof Ut, this.gradientVersion = (this.gradientVersion + 1) % Number.MAX_SAFE_INTEGER;\n          }\n        }\n      }, {\n        key: \"gradientExpression\",\n        value: function gradientExpression() {\n          return this._transitionablePaint._values[\"line-gradient\"].value.expression;\n        }\n      }, {\n        key: \"widthExpression\",\n        value: function widthExpression() {\n          return this._transitionablePaint._values[\"line-width\"].value.expression;\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(t, e) {\n          _get(_getPrototypeOf(LineStyleLayer.prototype), \"recalculate\", this).call(this, t, e), this.paint._values[\"line-floorwidth\"] = il.possiblyEvaluate(this._transitioningPaint._values[\"line-width\"].value, t);\n        }\n      }, {\n        key: \"createBucket\",\n        value: function createBucket(t) {\n          return new LineBucket(t);\n        }\n      }, {\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          return [this.paint.get(\"line-pattern\").constantOr(1) ? \"linePattern\" : \"line\"];\n        }\n      }, {\n        key: \"getProgramConfiguration\",\n        value: function getProgramConfiguration(t) {\n          return new ProgramConfiguration(this, t);\n        }\n      }, {\n        key: \"queryRadius\",\n        value: function queryRadius(t) {\n          var e = t,\n            r = sl(ca(\"line-width\", this, e), ca(\"line-gap-width\", this, e)),\n            n = ca(\"line-offset\", this, e);\n          return r / 2 + Math.abs(n) + ha(this.paint.get(\"line-translate\"));\n        }\n      }, {\n        key: \"queryIntersectsFeature\",\n        value: function queryIntersectsFeature(t, e, n, i, s, a) {\n          if (t.queryGeometry.isAboveHorizon) return !1;\n          var o = pa(t.tilespaceGeometry, this.paint.get(\"line-translate\"), this.paint.get(\"line-translate-anchor\"), a.angle, t.pixelToTileUnitsFactor),\n            l = t.pixelToTileUnitsFactor / 2 * sl(this.paint.get(\"line-width\").evaluate(e, n), this.paint.get(\"line-gap-width\").evaluate(e, n)),\n            u = this.paint.get(\"line-offset\").evaluate(e, n);\n          return u && (i = function (t, e) {\n            var n = [],\n              i = new r(0, 0);\n            for (var _r156 = 0; _r156 < t.length; _r156++) {\n              var _s87 = t[_r156],\n                _a78 = [];\n              for (var _t195 = 0; _t195 < _s87.length; _t195++) {\n                var _r157 = _s87[_t195 - 1],\n                  _n114 = _s87[_t195],\n                  _o43 = _s87[_t195 + 1],\n                  _l34 = 0 === _t195 ? i : _n114.sub(_r157)._unit()._perp(),\n                  _u27 = _t195 === _s87.length - 1 ? i : _o43.sub(_n114)._unit()._perp(),\n                  _c25 = _l34._add(_u27)._unit();\n                _c25._mult(1 / (_c25.x * _u27.x + _c25.y * _u27.y)), _a78.push(_c25._mult(e)._add(_n114));\n              }\n              n.push(_a78);\n            }\n            return n;\n          }(i, u * t.pixelToTileUnitsFactor)), function (t, e, r) {\n            for (var _n115 = 0; _n115 < e.length; _n115++) {\n              var _i114 = e[_n115];\n              if (t.length >= 3) for (var _e184 = 0; _e184 < _i114.length; _e184++) if (la(t, _i114[_e184])) return !0;\n              if (ra(t, _i114, r)) return !0;\n            }\n            return !1;\n          }(o, i, l);\n        }\n      }, {\n        key: \"isTileClipped\",\n        value: function isTileClipped() {\n          return !0;\n        }\n      }]);\n      return LineStyleLayer;\n    }(StyleLayer),\n    symbol: SymbolStyleLayer,\n    background: /*#__PURE__*/function (_StyleLayer9) {\n      _inherits(BackgroundStyleLayer, _StyleLayer9);\n      function BackgroundStyleLayer(t) {\n        _classCallCheck(this, BackgroundStyleLayer);\n        return _possibleConstructorReturn(this, _getPrototypeOf(BackgroundStyleLayer).call(this, t, Hu));\n      }\n      _createClass(BackgroundStyleLayer, [{\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          return [this.paint.get(\"background-pattern\") ? \"backgroundPattern\" : \"background\"];\n        }\n      }]);\n      return BackgroundStyleLayer;\n    }(StyleLayer),\n    raster: /*#__PURE__*/function (_StyleLayer10) {\n      _inherits(RasterStyleLayer, _StyleLayer10);\n      function RasterStyleLayer(t) {\n        _classCallCheck(this, RasterStyleLayer);\n        return _possibleConstructorReturn(this, _getPrototypeOf(RasterStyleLayer).call(this, t, Qu));\n      }\n      _createClass(RasterStyleLayer, [{\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          return [\"raster\"];\n        }\n      }]);\n      return RasterStyleLayer;\n    }(StyleLayer),\n    sky: /*#__PURE__*/function (_StyleLayer11) {\n      _inherits(SkyLayer, _StyleLayer11);\n      function SkyLayer(t) {\n        var _this39;\n        _classCallCheck(this, SkyLayer);\n        _this39 = _possibleConstructorReturn(this, _getPrototypeOf(SkyLayer).call(this, t, tc)), _this39._updateColorRamp();\n        return _this39;\n      }\n      _createClass(SkyLayer, [{\n        key: \"_handleSpecialPaintPropertyUpdate\",\n        value: function _handleSpecialPaintPropertyUpdate(t) {\n          \"sky-gradient\" === t ? this._updateColorRamp() : \"sky-atmosphere-sun\" !== t && \"sky-atmosphere-halo-color\" !== t && \"sky-atmosphere-color\" !== t && \"sky-atmosphere-sun-intensity\" !== t || (this._skyboxInvalidated = !0);\n        }\n      }, {\n        key: \"_updateColorRamp\",\n        value: function _updateColorRamp() {\n          this.colorRamp = ka({\n            expression: this._transitionablePaint._values[\"sky-gradient\"].value.expression,\n            evaluationKey: \"skyRadialProgress\"\n          }), this.colorRampTexture && (this.colorRampTexture.destroy(), this.colorRampTexture = null);\n        }\n      }, {\n        key: \"needsSkyboxCapture\",\n        value: function needsSkyboxCapture(t) {\n          if (this._skyboxInvalidated || !this.skyboxTexture || !this.skyboxGeometry) return !0;\n          if (!this.paint.get(\"sky-atmosphere-sun\")) {\n            var _e185 = t.style.light.properties.get(\"position\");\n            return this._lightPosition.azimuthal !== _e185.azimuthal || this._lightPosition.polar !== _e185.polar;\n          }\n          return !1;\n        }\n      }, {\n        key: \"getCenter\",\n        value: function getCenter(t, e) {\n          if (\"atmosphere\" === this.paint.get(\"sky-type\")) {\n            var _r158 = this.paint.get(\"sky-atmosphere-sun\"),\n              _n116 = !_r158,\n              _i115 = t.style.light,\n              _s88 = _i115.properties.get(\"position\");\n            return _n116 && \"viewport\" === _i115.properties.get(\"anchor\") && w(\"The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly.\"), _n116 ? ec(_s88.azimuthal, 90 - _s88.polar, e) : ec(_r158[0], 90 - _r158[1], e);\n          }\n          var r = this.paint.get(\"sky-gradient-center\");\n          return ec(r[0], 90 - r[1], e);\n        }\n      }, {\n        key: \"is3D\",\n        value: function is3D() {\n          return !1;\n        }\n      }, {\n        key: \"isSky\",\n        value: function isSky() {\n          return !0;\n        }\n      }, {\n        key: \"markSkyboxValid\",\n        value: function markSkyboxValid(t) {\n          this._skyboxInvalidated = !1, this._lightPosition = t.style.light.properties.get(\"position\");\n        }\n      }, {\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return !0;\n        }\n      }, {\n        key: \"getProgramIds\",\n        value: function getProgramIds() {\n          var t = this.paint.get(\"sky-type\");\n          return \"atmosphere\" === t ? [\"skyboxCapture\", \"skybox\"] : \"gradient\" === t ? [\"skyboxGradient\"] : null;\n        }\n      }]);\n      return SkyLayer;\n    }(StyleLayer)\n  };\n  var nc = [\"type\", \"source\", \"source-layer\", \"minzoom\", \"maxzoom\", \"filter\", \"layout\"];\n  function ic(t) {\n    if (\"number\" == typeof t || \"boolean\" == typeof t || \"string\" == typeof t || null == t) return JSON.stringify(t);\n    if (Array.isArray(t)) {\n      var _e186 = \"[\";\n      var _iterator134 = _createForOfIteratorHelper(t),\n        _step134;\n      try {\n        for (_iterator134.s(); !(_step134 = _iterator134.n()).done;) {\n          var _r159 = _step134.value;\n          _e186 += \"\".concat(ic(_r159), \",\");\n        }\n      } catch (err) {\n        _iterator134.e(err);\n      } finally {\n        _iterator134.f();\n      }\n      return \"\".concat(_e186, \"]\");\n    }\n    var e = \"{\";\n    var _iterator135 = _createForOfIteratorHelper(Object.keys(t).sort()),\n      _step135;\n    try {\n      for (_iterator135.s(); !(_step135 = _iterator135.n()).done;) {\n        var _r160 = _step135.value;\n        e += \"\".concat(_r160, \":\").concat(ic(t[_r160]), \",\");\n      }\n    } catch (err) {\n      _iterator135.e(err);\n    } finally {\n      _iterator135.f();\n    }\n    return \"\".concat(e, \"}\");\n  }\n  function sc(t) {\n    var e = \"\";\n    for (var _i116 = 0, _nc = nc; _i116 < _nc.length; _i116++) {\n      var _r161 = _nc[_i116];\n      e += \"/\".concat(ic(t[_r161]));\n    }\n    return e;\n  }\n  var StyleLayerIndex = /*#__PURE__*/function () {\n    function StyleLayerIndex(t) {\n      _classCallCheck(this, StyleLayerIndex);\n      this.keyCache = {}, t && this.replace(t);\n    }\n    _createClass(StyleLayerIndex, [{\n      key: \"replace\",\n      value: function replace(t) {\n        this._layerConfigs = {}, this._layers = {}, this.update(t, []);\n      }\n    }, {\n      key: \"update\",\n      value: function update(t, e) {\n        var _this40 = this;\n        var _iterator136 = _createForOfIteratorHelper(t),\n          _step136;\n        try {\n          for (_iterator136.s(); !(_step136 = _iterator136.n()).done;) {\n            var _e187 = _step136.value;\n            this._layerConfigs[_e187.id] = _e187, (this._layers[_e187.id] = (r = _e187, \"custom\" === r.type ? new CustomStyleLayer(r) : new rc[r.type](r))).compileFilter(), this.keyCache[_e187.id] && delete this.keyCache[_e187.id];\n          }\n        } catch (err) {\n          _iterator136.e(err);\n        } finally {\n          _iterator136.f();\n        }\n        var r;\n        var _iterator137 = _createForOfIteratorHelper(e),\n          _step137;\n        try {\n          for (_iterator137.s(); !(_step137 = _iterator137.n()).done;) {\n            var _t197 = _step137.value;\n            delete this.keyCache[_t197], delete this._layerConfigs[_t197], delete this._layers[_t197];\n          }\n        } catch (err) {\n          _iterator137.e(err);\n        } finally {\n          _iterator137.f();\n        }\n        this.familiesBySource = {};\n        var n = function (t, e) {\n          var r = {};\n          for (var _n117 = 0; _n117 < t.length; _n117++) {\n            var _i117 = e && e[t[_n117].id] || sc(t[_n117]);\n            e && (e[t[_n117].id] = _i117);\n            var _s89 = r[_i117];\n            _s89 || (_s89 = r[_i117] = []), _s89.push(t[_n117]);\n          }\n          var n = [];\n          for (var _t196 in r) n.push(r[_t196]);\n          return n;\n        }(h(this._layerConfigs), this.keyCache);\n        var _iterator138 = _createForOfIteratorHelper(n),\n          _step138;\n        try {\n          for (_iterator138.s(); !(_step138 = _iterator138.n()).done;) {\n            var _t198 = _step138.value;\n            var _e188 = _t198.map(function (t) {\n                return _this40._layers[t.id];\n              }),\n              _r162 = _e188[0];\n            if (\"none\" === _r162.visibility) continue;\n            var _n118 = _r162.source || \"\";\n            var _i118 = this.familiesBySource[_n118];\n            _i118 || (_i118 = this.familiesBySource[_n118] = {});\n            var _s90 = _r162.sourceLayer || \"_geojsonTileLayer\";\n            var _a79 = _i118[_s90];\n            _a79 || (_a79 = _i118[_s90] = []), _a79.push(_e188);\n          }\n        } catch (err) {\n          _iterator138.e(err);\n        } finally {\n          _iterator138.f();\n        }\n      }\n    }]);\n    return StyleLayerIndex;\n  }();\n  var DictionaryCoder = /*#__PURE__*/function () {\n    function DictionaryCoder(t) {\n      _classCallCheck(this, DictionaryCoder);\n      this._stringToNumber = {}, this._numberToString = [];\n      for (var _e189 = 0; _e189 < t.length; _e189++) {\n        var _r163 = t[_e189];\n        this._stringToNumber[_r163] = _e189, this._numberToString[_e189] = _r163;\n      }\n    }\n    _createClass(DictionaryCoder, [{\n      key: \"encode\",\n      value: function encode(t) {\n        return this._stringToNumber[t];\n      }\n    }, {\n      key: \"decode\",\n      value: function decode(t) {\n        return this._numberToString[t];\n      }\n    }]);\n    return DictionaryCoder;\n  }();\n  var ac = [\"tile\", \"layer\", \"source\", \"sourceLayer\", \"state\"];\n  var Feature = /*#__PURE__*/function () {\n    function Feature(t, e, r, n, i) {\n      _classCallCheck(this, Feature);\n      this.type = \"Feature\", this._vectorTileFeature = t, this._z = e, this._x = r, this._y = n, this.properties = t.properties, this.id = i;\n    }\n    _createClass(Feature, [{\n      key: \"toJSON\",\n      value: function toJSON() {\n        var t = {\n          type: \"Feature\",\n          state: void 0,\n          geometry: this.geometry,\n          properties: this.properties\n        };\n        void 0 !== this.id && (t.id = this.id);\n        for (var _i119 = 0, _ac = ac; _i119 < _ac.length; _i119++) {\n          var _e190 = _ac[_i119];\n          void 0 !== this[_e190] && (t[_e190] = this[_e190]);\n        }\n        return t;\n      }\n    }, {\n      key: \"geometry\",\n      get: function get() {\n        return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._x, this._y, this._z).geometry), this._geometry;\n      },\n      set: function set(t) {\n        this._geometry = t;\n      }\n    }]);\n    return Feature;\n  }();\n  var Texture = /*#__PURE__*/function () {\n    function Texture(t, e, r, n) {\n      _classCallCheck(this, Texture);\n      this.context = t, this.format = r, this.texture = t.gl.createTexture(), this.update(e, n);\n    }\n    _createClass(Texture, [{\n      key: \"update\",\n      value: function update(t, e, r) {\n        var n = t.width,\n          s = t.height,\n          a = this.context,\n          o = a.gl,\n          l = i.HTMLImageElement,\n          u = i.HTMLCanvasElement,\n          c = i.HTMLVideoElement,\n          h = i.ImageData,\n          p = i.ImageBitmap;\n        if (o.bindTexture(o.TEXTURE_2D, this.texture), a.pixelStoreUnpackFlipY.set(!1), a.pixelStoreUnpack.set(1), a.pixelStoreUnpackPremultiplyAlpha.set(this.format === o.RGBA && (!e || !1 !== e.premultiply)), r || this.size && this.size[0] === n && this.size[1] === s) {\n          var _ref124 = r || {\n              x: 0,\n              y: 0\n            },\n            _e191 = _ref124.x,\n            _i120 = _ref124.y;\n          t instanceof l || t instanceof u || t instanceof c || t instanceof h || p && t instanceof p ? o.texSubImage2D(o.TEXTURE_2D, 0, _e191, _i120, o.RGBA, o.UNSIGNED_BYTE, t) : o.texSubImage2D(o.TEXTURE_2D, 0, _e191, _i120, n, s, o.RGBA, o.UNSIGNED_BYTE, t.data);\n        } else this.size = [n, s], t instanceof l || t instanceof u || t instanceof c || t instanceof h || p && t instanceof p ? o.texImage2D(o.TEXTURE_2D, 0, this.format, this.format, o.UNSIGNED_BYTE, t) : o.texImage2D(o.TEXTURE_2D, 0, this.format, n, s, 0, this.format, o.UNSIGNED_BYTE, t.data);\n        this.useMipmap = Boolean(e && e.useMipmap && this.isSizePowerOfTwo()), this.useMipmap && o.generateMipmap(o.TEXTURE_2D);\n      }\n    }, {\n      key: \"bind\",\n      value: function bind(t, e) {\n        var r = this.context,\n          n = r.gl;\n        n.bindTexture(n.TEXTURE_2D, this.texture), t !== this.filter && (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MAG_FILTER, t), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MIN_FILTER, this.useMipmap ? t === n.NEAREST ? n.NEAREST_MIPMAP_NEAREST : n.LINEAR_MIPMAP_NEAREST : t), this.filter = t), e !== this.wrap && (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, e), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, e), this.wrap = e);\n      }\n    }, {\n      key: \"isSizePowerOfTwo\",\n      value: function isSizePowerOfTwo() {\n        return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        var t = this.context.gl;\n        t.deleteTexture(this.texture), this.texture = null;\n      }\n    }]);\n    return Texture;\n  }();\n  var oc = 32,\n    lc = 33,\n    uc = new Uint16Array(8184);\n  for (var _t199 = 0; _t199 < 2046; _t199++) {\n    var _e192 = _t199 + 2,\n      _r164 = 0,\n      _n119 = 0,\n      _i121 = 0,\n      _s91 = 0,\n      _a80 = 0,\n      _o44 = 0;\n    for (1 & _e192 ? _i121 = _s91 = _a80 = oc : _r164 = _n119 = _o44 = oc; (_e192 >>= 1) > 1;) {\n      var _t200 = _r164 + _i121 >> 1,\n        _l35 = _n119 + _s91 >> 1;\n      1 & _e192 ? (_i121 = _r164, _s91 = _n119, _r164 = _a80, _n119 = _o44) : (_r164 = _i121, _n119 = _s91, _i121 = _a80, _s91 = _o44), _a80 = _t200, _o44 = _l35;\n    }\n    var _l36 = 4 * _t199;\n    uc[_l36 + 0] = _r164, uc[_l36 + 1] = _n119, uc[_l36 + 2] = _i121, uc[_l36 + 3] = _s91;\n  }\n  var cc = new Uint16Array(2178),\n    hc = new Uint8Array(1089),\n    pc = new Uint16Array(1089);\n  function dc(t) {\n    return 0 === t ? -.03125 : 32 === t ? .03125 : 0;\n  }\n  var fc = _i([{\n    name: \"a_pos\",\n    type: \"Int16\",\n    components: 2\n  }, {\n    name: \"a_texture_pos\",\n    type: \"Int16\",\n    components: 2\n  }]);\n  var yc = {\n    type: 2,\n    extent: Ni,\n    loadGeometry: function loadGeometry() {\n      return [[new r(0, 0), new r(8193, 0), new r(8193, 8193), new r(0, 8193), new r(0, 0)]];\n    }\n  };\n  var Tile = /*#__PURE__*/function () {\n    function Tile(t, e, r, n, i) {\n      _classCallCheck(this, Tile);\n      this.tileID = t, this.uid = d++, this.uses = 0, this.tileSize = e, this.tileZoom = r, this.buckets = {}, this.expirationTime = null, this.queryPadding = 0, this.hasSymbolBuckets = !1, this.hasRTLText = !1, this.dependencies = {}, this.isRaster = i, this.expiredRequestCount = 0, this.state = \"loading\", n && n.transform && (this.projection = n.transform.projection);\n    }\n    _createClass(Tile, [{\n      key: \"registerFadeDuration\",\n      value: function registerFadeDuration(t) {\n        var e = t + this.timeAdded;\n        e < ci.now() || this.fadeEndTime && e < this.fadeEndTime || (this.fadeEndTime = e);\n      }\n    }, {\n      key: \"wasRequested\",\n      value: function wasRequested() {\n        return \"errored\" === this.state || \"loaded\" === this.state || \"reloading\" === this.state;\n      }\n    }, {\n      key: \"loadVectorData\",\n      value: function loadVectorData(t, e, r) {\n        if (this.unloadVectorData(), this.state = \"loaded\", t) {\n          t.featureIndex && (this.latestFeatureIndex = t.featureIndex, t.rawTileData ? (this.latestRawTileData = t.rawTileData, this.latestFeatureIndex.rawTileData = t.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)), this.collisionBoxArray = t.collisionBoxArray, this.buckets = function (t, e) {\n            var r = {};\n            if (!e) return r;\n            var _iterator139 = _createForOfIteratorHelper(t),\n              _step139;\n            try {\n              var _loop6 = function _loop6() {\n                var n = _step139.value;\n                var t = n.layerIds.map(function (t) {\n                  return e.getLayer(t);\n                }).filter(Boolean);\n                if (0 !== t.length) {\n                  n.layers = t, n.stateDependentLayerIds && (n.stateDependentLayers = n.stateDependentLayerIds.map(function (e) {\n                    return t.filter(function (t) {\n                      return t.id === e;\n                    })[0];\n                  }));\n                  var _iterator140 = _createForOfIteratorHelper(t),\n                    _step140;\n                  try {\n                    for (_iterator140.s(); !(_step140 = _iterator140.n()).done;) {\n                      var _e193 = _step140.value;\n                      r[_e193.id] = n;\n                    }\n                  } catch (err) {\n                    _iterator140.e(err);\n                  } finally {\n                    _iterator140.f();\n                  }\n                }\n              };\n              for (_iterator139.s(); !(_step139 = _iterator139.n()).done;) {\n                _loop6();\n              }\n            } catch (err) {\n              _iterator139.e(err);\n            } finally {\n              _iterator139.f();\n            }\n            return r;\n          }(t.buckets, e.style), this.hasSymbolBuckets = !1;\n          for (var _t201 in this.buckets) {\n            var _e194 = this.buckets[_t201];\n            if (_e194 instanceof SymbolBucket) {\n              if (this.hasSymbolBuckets = !0, !r) break;\n              _e194.justReloaded = !0;\n            }\n          }\n          if (this.hasRTLText = !1, this.hasSymbolBuckets) for (var _t202 in this.buckets) {\n            var _e195 = this.buckets[_t202];\n            if (_e195 instanceof SymbolBucket && _e195.hasRTLText) {\n              this.hasRTLText = !0, vi.isLoading() || vi.isLoaded() || \"deferred\" !== gi() || xi();\n              break;\n            }\n          }\n          this.queryPadding = 0;\n          for (var _t203 in this.buckets) {\n            var _r165 = this.buckets[_t203];\n            this.queryPadding = Math.max(this.queryPadding, e.style.getLayer(_t203).queryRadius(_r165));\n          }\n          t.imageAtlas && (this.imageAtlas = t.imageAtlas), t.glyphAtlasImage && (this.glyphAtlasImage = t.glyphAtlasImage), t.lineAtlas && (this.lineAtlas = t.lineAtlas);\n        } else this.collisionBoxArray = new CollisionBoxArray();\n      }\n    }, {\n      key: \"unloadVectorData\",\n      value: function unloadVectorData() {\n        if (this.hasData()) {\n          for (var _t204 in this.buckets) this.buckets[_t204].destroy();\n          this.buckets = {}, this.imageAtlas && (this.imageAtlas = null), this.lineAtlas && (this.lineAtlas = null), this.imageAtlasTexture && this.imageAtlasTexture.destroy(), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.lineAtlasTexture && this.lineAtlasTexture.destroy(), this._tileBoundsBuffer && (this._tileBoundsBuffer.destroy(), this._tileBoundsIndexBuffer.destroy(), this._tileBoundsSegments.destroy(), this._tileBoundsBuffer = null), this._tileDebugBuffer && (this._tileDebugBuffer.destroy(), this._tileDebugSegments.destroy(), this._tileDebugBuffer = null), this._tileDebugIndexBuffer && (this._tileDebugIndexBuffer.destroy(), this._tileDebugIndexBuffer = null), this._globeTileDebugBorderBuffer && (this._globeTileDebugBorderBuffer.destroy(), this._globeTileDebugBorderBuffer = null), this._tileDebugTextBuffer && (this._tileDebugTextBuffer.destroy(), this._tileDebugTextSegments.destroy(), this._tileDebugTextIndexBuffer.destroy(), this._tileDebugTextBuffer = null), this._globeTileDebugTextBuffer && (this._globeTileDebugTextBuffer.destroy(), this._globeTileDebugTextBuffer = null), this.latestFeatureIndex = null, this.state = \"unloaded\";\n        }\n      }\n    }, {\n      key: \"getBucket\",\n      value: function getBucket(t) {\n        return this.buckets[t.id];\n      }\n    }, {\n      key: \"upload\",\n      value: function upload(t) {\n        for (var _e196 in this.buckets) {\n          var _r166 = this.buckets[_e196];\n          _r166.uploadPending() && _r166.upload(t);\n        }\n        var e = t.gl;\n        this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new Texture(t, this.imageAtlas.image, e.RGBA), this.imageAtlas.uploaded = !0), this.glyphAtlasImage && (this.glyphAtlasTexture = new Texture(t, this.glyphAtlasImage, e.ALPHA), this.glyphAtlasImage = null), this.lineAtlas && !this.lineAtlas.uploaded && (this.lineAtlasTexture = new Texture(t, this.lineAtlas.image, e.ALPHA), this.lineAtlas.uploaded = !0);\n      }\n    }, {\n      key: \"prepare\",\n      value: function prepare(t) {\n        this.imageAtlas && this.imageAtlas.patchUpdatedImages(t, this.imageAtlasTexture);\n      }\n    }, {\n      key: \"queryRenderedFeatures\",\n      value: function queryRenderedFeatures(t, e, r, n, i, s, a, o) {\n        return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({\n          tileResult: n,\n          pixelPosMatrix: a,\n          transform: s,\n          params: i,\n          tileTransform: this.tileTransform\n        }, t, e, r) : {};\n      }\n    }, {\n      key: \"querySourceFeatures\",\n      value: function querySourceFeatures(t, e) {\n        var r = this.latestFeatureIndex;\n        if (!r || !r.rawTileData) return;\n        var n = r.loadVTLayers(),\n          i = e ? e.sourceLayer : \"\",\n          s = n._geojsonTileLayer || n[i];\n        if (!s) return;\n        var a = Kr(e && e.filter),\n          _this$tileID$canonica = this.tileID.canonical,\n          o = _this$tileID$canonica.z,\n          l = _this$tileID$canonica.x,\n          u = _this$tileID$canonica.y,\n          c = {\n            z: o,\n            x: l,\n            y: u\n          };\n        for (var _e197 = 0; _e197 < s.length; _e197++) {\n          var _n120 = s.feature(_e197);\n          if (a.needGeometry) {\n            var _t205 = Js(_n120, !0);\n            if (!a.filter(new EvaluationParameters(this.tileID.overscaledZ), _t205, this.tileID.canonical)) continue;\n          } else if (!a.filter(new EvaluationParameters(this.tileID.overscaledZ), _n120)) continue;\n          var _h22 = r.getId(_n120, i),\n            _p19 = new Feature(_n120, o, l, u, _h22);\n          _p19.tile = c, t.push(_p19);\n        }\n      }\n    }, {\n      key: \"hasData\",\n      value: function hasData() {\n        return \"loaded\" === this.state || \"reloading\" === this.state || \"expired\" === this.state;\n      }\n    }, {\n      key: \"patternsLoaded\",\n      value: function patternsLoaded() {\n        return !!this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length;\n      }\n    }, {\n      key: \"setExpiryData\",\n      value: function setExpiryData(t) {\n        var e = this.expirationTime;\n        if (t.cacheControl) {\n          var _e198 = k(t.cacheControl);\n          _e198[\"max-age\"] && (this.expirationTime = Date.now() + 1e3 * _e198[\"max-age\"]);\n        } else t.expires && (this.expirationTime = new Date(t.expires).getTime());\n        if (this.expirationTime) {\n          var _t206 = Date.now();\n          var _r167 = !1;\n          if (this.expirationTime > _t206) _r167 = !1;else if (e) {\n            if (this.expirationTime < e) _r167 = !0;else {\n              var _n121 = this.expirationTime - e;\n              _n121 ? this.expirationTime = _t206 + Math.max(_n121, 3e4) : _r167 = !0;\n            }\n          } else _r167 = !0;\n          _r167 ? (this.expiredRequestCount++, this.state = \"expired\") : this.expiredRequestCount = 0;\n        }\n      }\n    }, {\n      key: \"getExpiryTimeout\",\n      value: function getExpiryTimeout() {\n        if (this.expirationTime) return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - new Date().getTime(), Math.pow(2, 31) - 1);\n      }\n    }, {\n      key: \"setFeatureState\",\n      value: function setFeatureState(t, e) {\n        if (!this.latestFeatureIndex || !this.latestFeatureIndex.rawTileData || 0 === Object.keys(t).length || !e) return;\n        var r = this.latestFeatureIndex.loadVTLayers(),\n          n = e.style.listImages();\n        for (var _i122 in this.buckets) {\n          if (!e.style.hasLayer(_i122)) continue;\n          var _s92 = this.buckets[_i122],\n            _a81 = _s92.layers[0].sourceLayer || \"_geojsonTileLayer\",\n            _o45 = r[_a81],\n            _l37 = t[_a81];\n          if (!_o45 || !_l37 || 0 === Object.keys(_l37).length) continue;\n          if (_s92.update(_l37, _o45, n, this.imageAtlas && this.imageAtlas.patternPositions || {}), _s92 instanceof LineBucket || _s92 instanceof FillBucket) {\n            var _t207 = e.style._getSourceCache(_s92.layers[0].source);\n            e._terrain && e._terrain.enabled && _t207 && _s92.programConfigurations.needsUpload && e._terrain._clearRenderCacheForTile(_t207.id, this.tileID);\n          }\n          var _u28 = e && e.style && e.style.getLayer(_i122);\n          _u28 && (this.queryPadding = Math.max(this.queryPadding, _u28.queryRadius(_s92)));\n        }\n      }\n    }, {\n      key: \"holdingForFade\",\n      value: function holdingForFade() {\n        return void 0 !== this.symbolFadeHoldUntil;\n      }\n    }, {\n      key: \"symbolFadeFinished\",\n      value: function symbolFadeFinished() {\n        return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < ci.now();\n      }\n    }, {\n      key: \"clearFadeHold\",\n      value: function clearFadeHold() {\n        this.symbolFadeHoldUntil = void 0;\n      }\n    }, {\n      key: \"setHoldDuration\",\n      value: function setHoldDuration(t) {\n        this.symbolFadeHoldUntil = ci.now() + t;\n      }\n    }, {\n      key: \"setTexture\",\n      value: function setTexture(t, e) {\n        var r = e.context,\n          n = r.gl;\n        this.texture = this.texture || e.getTileTexture(t.width), this.texture ? this.texture.update(t, {\n          useMipmap: !0\n        }) : (this.texture = new Texture(r, t, n.RGBA, {\n          useMipmap: !0\n        }), this.texture.bind(n.LINEAR, n.CLAMP_TO_EDGE));\n      }\n    }, {\n      key: \"setDependencies\",\n      value: function setDependencies(t, e) {\n        var r = {};\n        var _iterator141 = _createForOfIteratorHelper(e),\n          _step141;\n        try {\n          for (_iterator141.s(); !(_step141 = _iterator141.n()).done;) {\n            var _t208 = _step141.value;\n            r[_t208] = !0;\n          }\n        } catch (err) {\n          _iterator141.e(err);\n        } finally {\n          _iterator141.f();\n        }\n        this.dependencies[t] = r;\n      }\n    }, {\n      key: \"hasDependency\",\n      value: function hasDependency(t, e) {\n        var _iterator142 = _createForOfIteratorHelper(t),\n          _step142;\n        try {\n          for (_iterator142.s(); !(_step142 = _iterator142.n()).done;) {\n            var _r168 = _step142.value;\n            var _t209 = this.dependencies[_r168];\n            if (_t209) {\n              var _iterator143 = _createForOfIteratorHelper(e),\n                _step143;\n              try {\n                for (_iterator143.s(); !(_step143 = _iterator143.n()).done;) {\n                  var _r169 = _step143.value;\n                  if (_t209[_r169]) return !0;\n                }\n              } catch (err) {\n                _iterator143.e(err);\n              } finally {\n                _iterator143.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator142.e(err);\n        } finally {\n          _iterator142.f();\n        }\n        return !1;\n      }\n    }, {\n      key: \"clearQueryDebugViz\",\n      value: function clearQueryDebugViz() {}\n    }, {\n      key: \"_makeDebugTileBoundsBuffers\",\n      value: function _makeDebugTileBoundsBuffers(t, e) {\n        if (!e || \"mercator\" === e.name || this._tileDebugBuffer) return;\n        var r = Ws(yc, this.tileID.canonical, this.tileTransform)[0],\n          n = new StructArrayLayout2i4(),\n          i = new StructArrayLayout1ui2();\n        for (var _t210 = 0; _t210 < r.length; _t210++) {\n          var _r$_t = r[_t210],\n            _e199 = _r$_t.x,\n            _s93 = _r$_t.y;\n          n.emplaceBack(_e199, _s93), i.emplaceBack(_t210);\n        }\n        i.emplaceBack(0), this._tileDebugIndexBuffer = t.createIndexBuffer(i), this._tileDebugBuffer = t.createVertexBuffer(n, ys.members), this._tileDebugSegments = SegmentVector.simpleSegment(0, 0, n.length, i.length);\n      }\n    }, {\n      key: \"_makeTileBoundsBuffers\",\n      value: function _makeTileBoundsBuffers(t, e) {\n        if (this._tileBoundsBuffer || !e || \"mercator\" === e.name) return;\n        var r = Ws(yc, this.tileID.canonical, this.tileTransform)[0];\n        var n, i;\n        if (this.isRaster) {\n          var _t211 = function (t, e) {\n            var r = Du(t, e),\n              n = Math.pow(2, t.z);\n            for (var _i123 = 0; _i123 < lc; _i123++) for (var _s94 = 0; _s94 < lc; _s94++) {\n              var _a82 = js((t.x + (_s94 + dc(_s94)) / oc) / n),\n                _o46 = Os((t.y + (_i123 + dc(_i123)) / oc) / n),\n                _l38 = e.project(_a82, _o46),\n                _u29 = _i123 * lc + _s94;\n              cc[2 * _u29 + 0] = Math.round((_l38.x * r.scale - r.x) * Ni), cc[2 * _u29 + 1] = Math.round((_l38.y * r.scale - r.y) * Ni);\n            }\n            hc.fill(0), pc.fill(0);\n            for (var _t212 = 2045; _t212 >= 0; _t212--) {\n              var _e200 = 4 * _t212,\n                _r170 = uc[_e200 + 0],\n                _n122 = uc[_e200 + 1],\n                _i124 = uc[_e200 + 2],\n                _s95 = uc[_e200 + 3],\n                _a83 = _r170 + _i124 >> 1,\n                _o47 = _n122 + _s95 >> 1,\n                _l39 = _a83 + _o47 - _n122,\n                _u30 = _o47 + _r170 - _a83,\n                _c26 = _n122 * lc + _r170,\n                _h23 = _s95 * lc + _i124,\n                _p20 = _o47 * lc + _a83,\n                _d15 = Math.hypot((cc[2 * _c26 + 0] + cc[2 * _h23 + 0]) / 2 - cc[2 * _p20 + 0], (cc[2 * _c26 + 1] + cc[2 * _h23 + 1]) / 2 - cc[2 * _p20 + 1]) >= 16;\n              if (hc[_p20] = hc[_p20] || (_d15 ? 1 : 0), _t212 < 1022) {\n                var _t213 = (_n122 + _u30 >> 1) * lc + (_r170 + _l39 >> 1),\n                  _e201 = (_s95 + _u30 >> 1) * lc + (_i124 + _l39 >> 1);\n                hc[_p20] = hc[_p20] || hc[_t213] || hc[_e201];\n              }\n            }\n            var i = new StructArrayLayout4i8(),\n              s = new StructArrayLayout3ui6();\n            var a = 0;\n            function o(t, e) {\n              var r = e * lc + t;\n              return 0 === pc[r] && (i.emplaceBack(cc[2 * r + 0], cc[2 * r + 1], t * Ni / oc, e * Ni / oc), pc[r] = ++a), pc[r] - 1;\n            }\n            function l(t, e, r, n, i, a) {\n              var u = t + r >> 1,\n                c = e + n >> 1;\n              if (Math.abs(t - i) + Math.abs(e - a) > 1 && hc[c * lc + u]) l(i, a, t, e, u, c), l(r, n, i, a, u, c);else {\n                var _l40 = o(t, e),\n                  _u31 = o(r, n),\n                  _c27 = o(i, a);\n                s.emplaceBack(_l40, _u31, _c27);\n              }\n            }\n            return l(0, 0, oc, oc, oc, 0), l(oc, oc, 0, 0, 0, oc), {\n              vertices: i,\n              indices: s\n            };\n          }(this.tileID.canonical, e);\n          n = _t211.vertices, i = _t211.indices;\n        } else {\n          n = new StructArrayLayout4i8(), i = new StructArrayLayout3ui6();\n          var _iterator144 = _createForOfIteratorHelper(r),\n            _step144;\n          try {\n            for (_iterator144.s(); !(_step144 = _iterator144.n()).done;) {\n              var _step144$value = _step144.value,\n                _t215 = _step144$value.x,\n                _e203 = _step144$value.y;\n              n.emplaceBack(_t215, _e203, 0, 0);\n            }\n          } catch (err) {\n            _iterator144.e(err);\n          } finally {\n            _iterator144.f();\n          }\n          var _t214 = Ta(n.int16, void 0, 4);\n          for (var _e202 = 0; _e202 < _t214.length; _e202 += 3) i.emplaceBack(_t214[_e202], _t214[_e202 + 1], _t214[_e202 + 2]);\n        }\n        this._tileBoundsBuffer = t.createVertexBuffer(n, fc.members), this._tileBoundsIndexBuffer = t.createIndexBuffer(i), this._tileBoundsSegments = SegmentVector.simpleSegment(0, 0, n.length, i.length);\n      }\n    }, {\n      key: \"_makeGlobeTileDebugBuffers\",\n      value: function _makeGlobeTileDebugBuffers(t, e) {\n        var r = e.projection;\n        if (!r || \"globe\" !== r.name || e.freezeTileCoverage) return;\n        var n = this.tileID.canonical,\n          i = function (t, e) {\n            var r = Ds(e.zoom);\n            if (0 === r) return _s(t);\n            var n = As(t),\n              i = ks(n),\n              s = Vs(n.getWest()) * e.worldSize,\n              a = Vs(n.getEast()) * e.worldSize,\n              o = Fs(n.getNorth()) * e.worldSize,\n              l = Fs(n.getSouth()) * e.worldSize,\n              u = [s, o, 0],\n              c = [a, o, 0],\n              h = [s, l, 0],\n              p = [a, l, 0],\n              d = Yi([], e.globeMatrix);\n            return us(u, u, d), us(c, c, d), us(h, h, d), us(p, p, d), i[0] = Ss(i[0], h, r), i[1] = Ss(i[1], p, r), i[2] = Ss(i[2], c, r), i[3] = Ss(i[3], u, r), Aabb.fromPoints(i);\n          }(n, e),\n          s = Es(i),\n          a = Ds(e.zoom);\n        var o;\n        a > 0 && (o = Yi(new Float64Array(16), e.globeMatrix)), this._makeGlobeTileDebugBorderBuffer(t, n, e, s, o, a), this._makeGlobeTileDebugTextBuffer(t, n, e, s, o, a);\n      }\n    }, {\n      key: \"_globePoint\",\n      value: function _globePoint(t, e, r, n, i, s, a) {\n        var o = Ps(t, e, r);\n        if (s) {\n          var _i125 = 1 << r.z,\n            _l41 = Vs(n.center.lng),\n            _u32 = Fs(n.center.lat),\n            _c28 = (r.x + .5) / _i125 - _l41;\n          var _h24 = 0;\n          _c28 > .5 ? _h24 = -1 : _c28 < -.5 && (_h24 = 1);\n          var _p21 = (t / Ni + r.x) / _i125 + _h24,\n            _d16 = (e / Ni + r.y) / _i125;\n          _p21 = (_p21 - _l41) * n._pixelsPerMercatorPixel + _l41, _d16 = (_d16 - _u32) * n._pixelsPerMercatorPixel + _u32;\n          var _f11 = [_p21 * n.worldSize, _d16 * n.worldSize, 0];\n          us(_f11, _f11, s), o = Ss(o, _f11, a);\n        }\n        return us(o, o, i);\n      }\n    }, {\n      key: \"_makeGlobeTileDebugBorderBuffer\",\n      value: function _makeGlobeTileDebugBorderBuffer(t, e, r, n, i, s) {\n        var _this41 = this;\n        var a = new StructArrayLayout2i4(),\n          o = new StructArrayLayout1ui2(),\n          l = new StructArrayLayout3i6(),\n          u = function u(t, _u33, c, h, p) {\n            var d = (c - t) / (p - 1),\n              f = (h - _u33) / (p - 1),\n              y = a.length;\n            for (var _c29 = 0; _c29 < p; _c29++) {\n              var _h25 = t + _c29 * d,\n                _p22 = _u33 + _c29 * f;\n              a.emplaceBack(_h25, _p22);\n              var _m8 = _this41._globePoint(_h25, _p22, e, r, n, i, s);\n              l.emplaceBack(_m8[0], _m8[1], _m8[2]), o.emplaceBack(y + _c29);\n            }\n          },\n          c = Ni;\n        u(0, 0, c, 0, 16), u(c, 0, c, c, 16), u(c, c, 0, c, 16), u(0, c, 0, 0, 16), this._tileDebugIndexBuffer = t.createIndexBuffer(o), this._tileDebugBuffer = t.createVertexBuffer(a, ys.members), this._globeTileDebugBorderBuffer = t.createVertexBuffer(l, fs.members), this._tileDebugSegments = SegmentVector.simpleSegment(0, 0, a.length, o.length);\n      }\n    }, {\n      key: \"_makeGlobeTileDebugTextBuffer\",\n      value: function _makeGlobeTileDebugTextBuffer(t, e, r, n, i, s) {\n        var a = new StructArrayLayout2i4(),\n          o = new StructArrayLayout3ui6(),\n          l = new StructArrayLayout3i6(),\n          u = 25;\n        o.reserve(32), a.reserve(u), l.reserve(u);\n        var c = function c(t, e) {\n          return u * t + e;\n        };\n        for (var _t216 = 0; _t216 < u; _t216++) {\n          var _o48 = 2048 * _t216;\n          for (var _t217 = 0; _t217 < u; _t217++) {\n            var _u34 = 2048 * _t217;\n            a.emplaceBack(_u34, _o48);\n            var _c30 = this._globePoint(_u34, _o48, e, r, n, i, s);\n            l.emplaceBack(_c30[0], _c30[1], _c30[2]);\n          }\n        }\n        for (var _t218 = 0; _t218 < 4; _t218++) for (var _e204 = 0; _e204 < 4; _e204++) {\n          var _r171 = c(_t218, _e204),\n            _n123 = c(_t218, _e204 + 1),\n            _i126 = c(_t218 + 1, _e204),\n            _s96 = c(_t218 + 1, _e204 + 1);\n          o.emplaceBack(_r171, _n123, _i126), o.emplaceBack(_i126, _n123, _s96);\n        }\n        this._tileDebugTextIndexBuffer = t.createIndexBuffer(o), this._tileDebugTextBuffer = t.createVertexBuffer(a, ys.members), this._globeTileDebugTextBuffer = t.createVertexBuffer(l, fs.members), this._tileDebugTextSegments = SegmentVector.simpleSegment(0, 0, u, 32);\n      }\n    }, {\n      key: \"tileTransform\",\n      get: function get() {\n        return this._tileTransform || (this._tileTransform = Du(this.tileID.canonical, this.projection)), this._tileTransform;\n      }\n    }]);\n    return Tile;\n  }();\n  var SourceFeatureState = /*#__PURE__*/function () {\n    function SourceFeatureState() {\n      _classCallCheck(this, SourceFeatureState);\n      this.state = {}, this.stateChanges = {}, this.deletedStates = {};\n    }\n    _createClass(SourceFeatureState, [{\n      key: \"updateState\",\n      value: function updateState(t, e, r) {\n        var n = String(e);\n        if (this.stateChanges[t] = this.stateChanges[t] || {}, this.stateChanges[t][n] = this.stateChanges[t][n] || {}, p(this.stateChanges[t][n], r), null === this.deletedStates[t]) {\n          this.deletedStates[t] = {};\n          for (var _e205 in this.state[t]) _e205 !== n && (this.deletedStates[t][_e205] = null);\n        } else if (this.deletedStates[t] && null === this.deletedStates[t][n]) {\n          this.deletedStates[t][n] = {};\n          for (var _e206 in this.state[t][n]) r[_e206] || (this.deletedStates[t][n][_e206] = null);\n        } else for (var _e207 in r) this.deletedStates[t] && this.deletedStates[t][n] && null === this.deletedStates[t][n][_e207] && delete this.deletedStates[t][n][_e207];\n      }\n    }, {\n      key: \"removeFeatureState\",\n      value: function removeFeatureState(t, e, r) {\n        if (null === this.deletedStates[t]) return;\n        var n = String(e);\n        if (this.deletedStates[t] = this.deletedStates[t] || {}, r && void 0 !== e) null !== this.deletedStates[t][n] && (this.deletedStates[t][n] = this.deletedStates[t][n] || {}, this.deletedStates[t][n][r] = null);else if (void 0 !== e) {\n          if (this.stateChanges[t] && this.stateChanges[t][n]) for (r in this.deletedStates[t][n] = {}, this.stateChanges[t][n]) this.deletedStates[t][n][r] = null;else this.deletedStates[t][n] = null;\n        } else this.deletedStates[t] = null;\n      }\n    }, {\n      key: \"getState\",\n      value: function getState(t, e) {\n        var r = String(e),\n          n = p({}, (this.state[t] || {})[r], (this.stateChanges[t] || {})[r]);\n        if (null === this.deletedStates[t]) return {};\n        if (this.deletedStates[t]) {\n          var _r172 = this.deletedStates[t][e];\n          if (null === _r172) return {};\n          for (var _t219 in _r172) delete n[_t219];\n        }\n        return n;\n      }\n    }, {\n      key: \"initializeTileState\",\n      value: function initializeTileState(t, e) {\n        t.setFeatureState(this.state, e);\n      }\n    }, {\n      key: \"coalesceChanges\",\n      value: function coalesceChanges(t, e) {\n        var r = {};\n        for (var _t220 in this.stateChanges) {\n          this.state[_t220] = this.state[_t220] || {};\n          var _e208 = {};\n          for (var _r173 in this.stateChanges[_t220]) this.state[_t220][_r173] || (this.state[_t220][_r173] = {}), p(this.state[_t220][_r173], this.stateChanges[_t220][_r173]), _e208[_r173] = this.state[_t220][_r173];\n          r[_t220] = _e208;\n        }\n        for (var _t221 in this.deletedStates) {\n          this.state[_t221] = this.state[_t221] || {};\n          var _e209 = {};\n          if (null === this.deletedStates[_t221]) for (var _r174 in this.state[_t221]) _e209[_r174] = {}, this.state[_t221][_r174] = {};else for (var _r175 in this.deletedStates[_t221]) {\n            if (null === this.deletedStates[_t221][_r175]) this.state[_t221][_r175] = {};else if (this.state[_t221][_r175]) for (var _i127 = 0, _Object$keys10 = Object.keys(this.deletedStates[_t221][_r175]); _i127 < _Object$keys10.length; _i127++) {\n              var _e210 = _Object$keys10[_i127];\n              delete this.state[_t221][_r175][_e210];\n            }\n            _e209[_r175] = this.state[_t221][_r175];\n          }\n          r[_t221] = r[_t221] || {}, p(r[_t221], _e209);\n        }\n        if (this.stateChanges = {}, this.deletedStates = {}, 0 !== Object.keys(r).length) for (var _n124 in t) t[_n124].setFeatureState(r, e);\n      }\n    }]);\n    return SourceFeatureState;\n  }();\n  var MipLevel = /*#__PURE__*/function () {\n    function MipLevel(t) {\n      _classCallCheck(this, MipLevel);\n      this.size = t, this.minimums = [], this.maximums = [], this.leaves = [];\n    }\n    _createClass(MipLevel, [{\n      key: \"getElevation\",\n      value: function getElevation(t, e) {\n        var r = this.toIdx(t, e);\n        return {\n          min: this.minimums[r],\n          max: this.maximums[r]\n        };\n      }\n    }, {\n      key: \"isLeaf\",\n      value: function isLeaf(t, e) {\n        return this.leaves[this.toIdx(t, e)];\n      }\n    }, {\n      key: \"toIdx\",\n      value: function toIdx(t, e) {\n        return e * this.size + t;\n      }\n    }]);\n    return MipLevel;\n  }();\n  function mc(t, e, r, n) {\n    var i = 0,\n      s = Number.MAX_VALUE;\n    for (var _a84 = 0; _a84 < 3; _a84++) if (Math.abs(n[_a84]) < 1e-15) {\n      if (r[_a84] < t[_a84] || r[_a84] > e[_a84]) return null;\n    } else {\n      var _o49 = 1 / n[_a84];\n      var _l42 = (t[_a84] - r[_a84]) * _o49,\n        _u35 = (e[_a84] - r[_a84]) * _o49;\n      if (_l42 > _u35) {\n        var _t222 = _l42;\n        _l42 = _u35, _u35 = _t222;\n      }\n      if (_l42 > i && (i = _l42), _u35 < s && (s = _u35), i > s) return null;\n    }\n    return i;\n  }\n  function gc(t, e, r, n, i, s, a, o, l, u, c) {\n    var h = n - t,\n      p = i - e,\n      d = s - r,\n      f = a - t,\n      y = o - e,\n      m = l - r,\n      g = c[1] * m - c[2] * y,\n      x = c[2] * f - c[0] * m,\n      v = c[0] * y - c[1] * f,\n      b = h * g + p * x + d * v;\n    if (Math.abs(b) < 1e-15) return null;\n    var w = 1 / b,\n      _ = u[0] - t,\n      S = u[1] - e,\n      A = u[2] - r,\n      k = (_ * g + S * x + A * v) * w;\n    if (k < 0 || k > 1) return null;\n    var I = S * d - A * p,\n      M = A * h - _ * d,\n      P = _ * p - S * h,\n      T = (c[0] * I + c[1] * M + c[2] * P) * w;\n    return T < 0 || k + T > 1 ? null : (f * I + y * M + m * P) * w;\n  }\n  function xc(t, e, r) {\n    return (t - e) / (r - e);\n  }\n  function vc(t, e, r, n, i, s, a, o, l) {\n    var u = 1 << r,\n      c = s - n,\n      h = a - i,\n      p = (t + 1) / u * c + n,\n      d = (e + 0) / u * h + i,\n      f = (e + 1) / u * h + i;\n    o[0] = (t + 0) / u * c + n, o[1] = d, l[0] = p, l[1] = f;\n  }\n  var DemMinMaxQuadTree = /*#__PURE__*/function () {\n    function DemMinMaxQuadTree(t) {\n      _classCallCheck(this, DemMinMaxQuadTree);\n      if (this.maximums = [], this.minimums = [], this.leaves = [], this.childOffsets = [], this.nodeCount = 0, this.dem = t, this._siblingOffset = [[0, 0], [1, 0], [0, 1], [1, 1]], !this.dem) return;\n      var e = function (t) {\n          var e = Math.ceil(Math.log2(t.dim / 8)),\n            r = [];\n          var n = Math.ceil(Math.pow(2, e));\n          var i = 1 / n,\n            s = function s(t, e, r, n, i) {\n              var s = n ? 1 : 0,\n                a = (t + 1) * r - s,\n                o = e * r,\n                l = (e + 1) * r - s;\n              i[0] = t * r, i[1] = o, i[2] = a, i[3] = l;\n            };\n          var a = new MipLevel(n);\n          var o = [];\n          for (var _e211 = 0; _e211 < n * n; _e211++) {\n            s(_e211 % n, Math.floor(_e211 / n), i, !1, o);\n            var _r176 = wc(o[0], o[1], t),\n              _l43 = wc(o[2], o[1], t),\n              _u36 = wc(o[2], o[3], t),\n              _c31 = wc(o[0], o[3], t);\n            a.minimums.push(Math.min(_r176, _l43, _u36, _c31)), a.maximums.push(Math.max(_r176, _l43, _u36, _c31)), a.leaves.push(1);\n          }\n          for (r.push(a), n /= 2; n >= 1; n /= 2) {\n            var _t223 = r[r.length - 1];\n            a = new MipLevel(n);\n            for (var _e212 = 0; _e212 < n * n; _e212++) {\n              s(_e212 % n, Math.floor(_e212 / n), 2, !0, o);\n              var _r177 = _t223.getElevation(o[0], o[1]),\n                _i128 = _t223.getElevation(o[2], o[1]),\n                _l44 = _t223.getElevation(o[2], o[3]),\n                _u37 = _t223.getElevation(o[0], o[3]),\n                _c32 = _t223.isLeaf(o[0], o[1]),\n                _h26 = _t223.isLeaf(o[2], o[1]),\n                _p23 = _t223.isLeaf(o[2], o[3]),\n                _d17 = _t223.isLeaf(o[0], o[3]),\n                _f12 = Math.min(_r177.min, _i128.min, _l44.min, _u37.min),\n                _y10 = Math.max(_r177.max, _i128.max, _l44.max, _u37.max),\n                _m9 = _c32 && _h26 && _p23 && _d17;\n              a.maximums.push(_y10), a.minimums.push(_f12), a.leaves.push(_y10 - _f12 <= 5 && _m9 ? 1 : 0);\n            }\n            r.push(a);\n          }\n          return r;\n        }(this.dem),\n        r = e.length - 1,\n        n = e[r];\n      this._addNode(n.minimums[0], n.maximums[0], n.leaves[0]), this._construct(e, 0, 0, r, 0);\n    }\n    _createClass(DemMinMaxQuadTree, [{\n      key: \"raycastRoot\",\n      value: function raycastRoot(t, e, r, n, i, s) {\n        var a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;\n        return mc([t, e, -100], [r, n, this.maximums[0] * a], i, s);\n      }\n    }, {\n      key: \"raycast\",\n      value: function raycast(t, e, r, n, i, s) {\n        var a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;\n        if (!this.nodeCount) return null;\n        var o = this.raycastRoot(t, e, r, n, i, s, a);\n        if (null == o) return null;\n        var l = [],\n          u = [],\n          c = [],\n          h = [],\n          p = [{\n            idx: 0,\n            t: o,\n            nodex: 0,\n            nodey: 0,\n            depth: 0\n          }];\n        for (; p.length > 0;) {\n          var _p$pop = p.pop(),\n            _o50 = _p$pop.idx,\n            _d18 = _p$pop.t,\n            _f13 = _p$pop.nodex,\n            _y11 = _p$pop.nodey,\n            _m10 = _p$pop.depth;\n          if (this.leaves[_o50]) {\n            vc(_f13, _y11, _m10, t, e, r, n, c, h);\n            var _o51 = 1 << _m10,\n              _l45 = (_f13 + 0) / _o51,\n              _u38 = (_f13 + 1) / _o51,\n              _p24 = (_y11 + 0) / _o51,\n              _g11 = (_y11 + 1) / _o51,\n              _x11 = wc(_l45, _p24, this.dem) * a,\n              _v10 = wc(_u38, _p24, this.dem) * a,\n              _b9 = wc(_u38, _g11, this.dem) * a,\n              _w8 = wc(_l45, _g11, this.dem) * a,\n              _11 = gc(c[0], c[1], _x11, h[0], c[1], _v10, h[0], h[1], _b9, i, s),\n              _S9 = gc(h[0], h[1], _b9, c[0], h[1], _w8, c[0], c[1], _x11, i, s),\n              _A9 = Math.min(null !== _11 ? _11 : Number.MAX_VALUE, null !== _S9 ? _S9 : Number.MAX_VALUE);\n            if (_A9 !== Number.MAX_VALUE) return _A9;\n            {\n              var _t224 = as([], i, s, _d18);\n              if (bc(_x11, _v10, _w8, _b9, xc(_t224[0], c[0], h[0]), xc(_t224[1], c[1], h[1])) >= _t224[2]) return _d18;\n            }\n            continue;\n          }\n          var _g12 = 0;\n          for (var _p25 = 0; _p25 < this._siblingOffset.length; _p25++) {\n            vc((_f13 << 1) + this._siblingOffset[_p25][0], (_y11 << 1) + this._siblingOffset[_p25][1], _m10 + 1, t, e, r, n, c, h), c[2] = -100, h[2] = this.maximums[this.childOffsets[_o50] + _p25] * a;\n            var _d19 = mc(c, h, i, s);\n            if (null != _d19) {\n              var _t225 = _d19;\n              l[_p25] = _t225;\n              var _e213 = !1;\n              for (var _r178 = 0; _r178 < _g12 && !_e213; _r178++) _t225 >= l[u[_r178]] && (u.splice(_r178, 0, _p25), _e213 = !0);\n              _e213 || (u[_g12] = _p25), _g12++;\n            }\n          }\n          for (var _t226 = 0; _t226 < _g12; _t226++) {\n            var _e214 = u[_t226];\n            p.push({\n              idx: this.childOffsets[_o50] + _e214,\n              t: l[_e214],\n              nodex: (_f13 << 1) + this._siblingOffset[_e214][0],\n              nodey: (_y11 << 1) + this._siblingOffset[_e214][1],\n              depth: _m10 + 1\n            });\n          }\n        }\n        return null;\n      }\n    }, {\n      key: \"_addNode\",\n      value: function _addNode(t, e, r) {\n        return this.minimums.push(t), this.maximums.push(e), this.leaves.push(r), this.childOffsets.push(0), this.nodeCount++;\n      }\n    }, {\n      key: \"_construct\",\n      value: function _construct(t, e, r, n, i) {\n        if (1 === t[n].isLeaf(e, r)) return;\n        this.childOffsets[i] || (this.childOffsets[i] = this.nodeCount);\n        var s = n - 1,\n          a = t[s];\n        var o = 0,\n          l = 0;\n        for (var _t227 = 0; _t227 < this._siblingOffset.length; _t227++) {\n          var _n125 = 2 * e + this._siblingOffset[_t227][0],\n            _i129 = 2 * r + this._siblingOffset[_t227][1],\n            _s97 = a.getElevation(_n125, _i129),\n            _u39 = a.isLeaf(_n125, _i129),\n            _c33 = this._addNode(_s97.min, _s97.max, _u39);\n          _u39 && (o |= 1 << _t227), l || (l = _c33);\n        }\n        for (var _n126 = 0; _n126 < this._siblingOffset.length; _n126++) o & 1 << _n126 || this._construct(t, 2 * e + this._siblingOffset[_n126][0], 2 * r + this._siblingOffset[_n126][1], s, l + _n126);\n      }\n    }]);\n    return DemMinMaxQuadTree;\n  }();\n  function bc(t, e, r, n, i, s) {\n    return qt(qt(t, r, s), qt(e, n, s), i);\n  }\n  function wc(t, e, r) {\n    var n = r.dim,\n      i = u(t * n - .5, 0, n - 1),\n      s = u(e * n - .5, 0, n - 1),\n      a = Math.floor(i),\n      o = Math.floor(s),\n      l = Math.min(a + 1, n - 1),\n      c = Math.min(o + 1, n - 1);\n    return bc(r.get(a, o), r.get(l, o), r.get(a, c), r.get(l, c), i - a, s - o);\n  }\n  var _c = {\n    mapbox: [6553.6, 25.6, .1, 1e4],\n    terrarium: [256, 1, 1 / 256, 32768]\n  };\n  function Sc(t, e, r) {\n    return (256 * t * 256 + 256 * e + r) / 10 - 1e4;\n  }\n  function Ac(t, e, r) {\n    return 256 * t + e + r / 256 - 32768;\n  }\n  var DEMData = /*#__PURE__*/function () {\n    _createClass(DEMData, [{\n      key: \"tree\",\n      get: function get() {\n        return this._tree || this._buildQuadTree(), this._tree;\n      }\n    }]);\n    function DEMData(t, e, r) {\n      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n      var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n      _classCallCheck(this, DEMData);\n      if (this.uid = t, e.height !== e.width) throw new RangeError(\"DEM tiles must be square\");\n      if (r && \"mapbox\" !== r && \"terrarium\" !== r) return w(\"\\\"\".concat(r, \"\\\" is not a valid encoding type. Valid types include \\\"mapbox\\\" and \\\"terrarium\\\".\"));\n      this.stride = e.height;\n      var s = this.dim = e.height - 2,\n        a = new Uint32Array(e.data.buffer);\n      if (this.pixels = new Uint8Array(e.data.buffer), this.encoding = r || \"mapbox\", this.borderReady = n, !n) {\n        for (var _t228 = 0; _t228 < s; _t228++) a[this._idx(-1, _t228)] = a[this._idx(0, _t228)], a[this._idx(s, _t228)] = a[this._idx(s - 1, _t228)], a[this._idx(_t228, -1)] = a[this._idx(_t228, 0)], a[this._idx(_t228, s)] = a[this._idx(_t228, s - 1)];\n        a[this._idx(-1, -1)] = a[this._idx(0, 0)], a[this._idx(s, -1)] = a[this._idx(s - 1, 0)], a[this._idx(-1, s)] = a[this._idx(0, s - 1)], a[this._idx(s, s)] = a[this._idx(s - 1, s - 1)], i && this._buildQuadTree();\n      }\n    }\n    _createClass(DEMData, [{\n      key: \"_buildQuadTree\",\n      value: function _buildQuadTree() {\n        this._tree = new DemMinMaxQuadTree(this);\n      }\n    }, {\n      key: \"get\",\n      value: function get(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n        r && (t = u(t, -1, this.dim), e = u(e, -1, this.dim));\n        var n = 4 * this._idx(t, e);\n        return (\"terrarium\" === this.encoding ? Ac : Sc)(this.pixels[n], this.pixels[n + 1], this.pixels[n + 2]);\n      }\n    }, {\n      key: \"_idx\",\n      value: function _idx(t, e) {\n        if (t < -1 || t >= this.dim + 1 || e < -1 || e >= this.dim + 1) throw new RangeError(\"out of range source coordinates for DEM data\");\n        return (e + 1) * this.stride + (t + 1);\n      }\n    }, {\n      key: \"getPixels\",\n      value: function getPixels() {\n        return new RGBAImage({\n          width: this.stride,\n          height: this.stride\n        }, this.pixels);\n      }\n    }, {\n      key: \"backfillBorder\",\n      value: function backfillBorder(t, e, r) {\n        if (this.dim !== t.dim) throw new Error(\"dem dimension mismatch\");\n        var n = e * this.dim,\n          i = e * this.dim + this.dim,\n          s = r * this.dim,\n          a = r * this.dim + this.dim;\n        switch (e) {\n          case -1:\n            n = i - 1;\n            break;\n          case 1:\n            i = n + 1;\n        }\n        switch (r) {\n          case -1:\n            s = a - 1;\n            break;\n          case 1:\n            a = s + 1;\n        }\n        var o = -e * this.dim,\n          l = -r * this.dim;\n        for (var _e215 = s; _e215 < a; _e215++) for (var _r179 = n; _r179 < i; _r179++) {\n          var _n127 = 4 * this._idx(_r179, _e215),\n            _i130 = 4 * this._idx(_r179 + o, _e215 + l);\n          this.pixels[_n127 + 0] = t.pixels[_i130 + 0], this.pixels[_n127 + 1] = t.pixels[_i130 + 1], this.pixels[_n127 + 2] = t.pixels[_i130 + 2], this.pixels[_n127 + 3] = t.pixels[_i130 + 3];\n        }\n      }\n    }, {\n      key: \"onDeserialize\",\n      value: function onDeserialize() {\n        this._tree && (this._tree.dem = this);\n      }\n    }, {\n      key: \"unpackVector\",\n      get: function get() {\n        return _c[this.encoding];\n      }\n    }], [{\n      key: \"getUnpackVector\",\n      value: function getUnpackVector(t) {\n        return _c[t];\n      }\n    }, {\n      key: \"pack\",\n      value: function pack(t, e) {\n        var r = [0, 0, 0, 0],\n          n = DEMData.getUnpackVector(e);\n        var i = Math.floor((t + n[3]) / n[2]);\n        return r[2] = i % 256, i = Math.floor(i / 256), r[1] = i % 256, i = Math.floor(i / 256), r[0] = i, r;\n      }\n    }]);\n    return DEMData;\n  }();\n  Er(DEMData, \"DEMData\"), Er(DemMinMaxQuadTree, \"DemMinMaxQuadTree\", {\n    omit: [\"dem\"]\n  });\n  var TileCache = /*#__PURE__*/function () {\n    function TileCache(t, e) {\n      _classCallCheck(this, TileCache);\n      this.max = t, this.onRemove = e, this.reset();\n    }\n    _createClass(TileCache, [{\n      key: \"reset\",\n      value: function reset() {\n        for (var _t229 in this.data) {\n          var _iterator145 = _createForOfIteratorHelper(this.data[_t229]),\n            _step145;\n          try {\n            for (_iterator145.s(); !(_step145 = _iterator145.n()).done;) {\n              var _e216 = _step145.value;\n              _e216.timeout && clearTimeout(_e216.timeout), this.onRemove(_e216.value);\n            }\n          } catch (err) {\n            _iterator145.e(err);\n          } finally {\n            _iterator145.f();\n          }\n        }\n        return this.data = {}, this.order = [], this;\n      }\n    }, {\n      key: \"add\",\n      value: function add(t, e, r) {\n        var _this42 = this;\n        var n = t.wrapped().key;\n        void 0 === this.data[n] && (this.data[n] = []);\n        var i = {\n          value: e,\n          timeout: void 0\n        };\n        if (void 0 !== r && (i.timeout = setTimeout(function () {\n          _this42.remove(t, i);\n        }, r)), this.data[n].push(i), this.order.push(n), this.order.length > this.max) {\n          var _t230 = this._getAndRemoveByKey(this.order[0]);\n          _t230 && this.onRemove(_t230);\n        }\n        return this;\n      }\n    }, {\n      key: \"has\",\n      value: function has(t) {\n        return t.wrapped().key in this.data;\n      }\n    }, {\n      key: \"getAndRemove\",\n      value: function getAndRemove(t) {\n        return this.has(t) ? this._getAndRemoveByKey(t.wrapped().key) : null;\n      }\n    }, {\n      key: \"_getAndRemoveByKey\",\n      value: function _getAndRemoveByKey(t) {\n        var e = this.data[t].shift();\n        return e.timeout && clearTimeout(e.timeout), 0 === this.data[t].length && delete this.data[t], this.order.splice(this.order.indexOf(t), 1), e.value;\n      }\n    }, {\n      key: \"getByKey\",\n      value: function getByKey(t) {\n        var e = this.data[t];\n        return e ? e[0].value : null;\n      }\n    }, {\n      key: \"get\",\n      value: function get(t) {\n        return this.has(t) ? this.data[t.wrapped().key][0].value : null;\n      }\n    }, {\n      key: \"remove\",\n      value: function remove(t, e) {\n        if (!this.has(t)) return this;\n        var r = t.wrapped().key,\n          n = void 0 === e ? 0 : this.data[r].indexOf(e),\n          i = this.data[r][n];\n        return this.data[r].splice(n, 1), i.timeout && clearTimeout(i.timeout), 0 === this.data[r].length && delete this.data[r], this.onRemove(i.value), this.order.splice(this.order.indexOf(r), 1), this;\n      }\n    }, {\n      key: \"setMaxSize\",\n      value: function setMaxSize(t) {\n        for (this.max = t; this.order.length > this.max;) {\n          var _t231 = this._getAndRemoveByKey(this.order[0]);\n          _t231 && this.onRemove(_t231);\n        }\n        return this;\n      }\n    }, {\n      key: \"filter\",\n      value: function filter(t) {\n        var e = [];\n        for (var _r180 in this.data) {\n          var _iterator146 = _createForOfIteratorHelper(this.data[_r180]),\n            _step146;\n          try {\n            for (_iterator146.s(); !(_step146 = _iterator146.n()).done;) {\n              var _n128 = _step146.value;\n              t(_n128.value) || e.push(_n128);\n            }\n          } catch (err) {\n            _iterator146.e(err);\n          } finally {\n            _iterator146.f();\n          }\n        }\n        for (var _i131 = 0, _e217 = e; _i131 < _e217.length; _i131++) {\n          var _t232 = _e217[_i131];\n          this.remove(_t232.value.tileID, _t232);\n        }\n      }\n    }]);\n    return TileCache;\n  }();\n  var ColorMode = function ColorMode(t, e, r) {\n    _classCallCheck(this, ColorMode);\n    this.blendFunction = t, this.blendColor = e, this.mask = r;\n  };\n  ColorMode.Replace = [1, 0], ColorMode.disabled = new ColorMode(ColorMode.Replace, R.transparent, [!1, !1, !1, !1]), ColorMode.unblended = new ColorMode(ColorMode.Replace, R.transparent, [!0, !0, !0, !0]), ColorMode.alphaBlended = new ColorMode([1, 771], R.transparent, [!0, !0, !0, !0]);\n  var SourceCache = /*#__PURE__*/function (_Evented2) {\n    _inherits(SourceCache, _Evented2);\n    function SourceCache(t, e, r) {\n      var _this43;\n      _classCallCheck(this, SourceCache);\n      _this43 = _possibleConstructorReturn(this, _getPrototypeOf(SourceCache).call(this)), _this43.id = t, _this43._onlySymbols = r, e.on(\"data\", function (t) {\n        \"source\" === t.dataType && \"metadata\" === t.sourceDataType && (_this43._sourceLoaded = !0), _this43._sourceLoaded && !_this43._paused && \"source\" === t.dataType && \"content\" === t.sourceDataType && (_this43.reload(), _this43.transform && _this43.update(_this43.transform));\n      }), e.on(\"error\", function () {\n        _this43._sourceErrored = !0;\n      }), _this43._source = e, _this43._tiles = {}, _this43._cache = new TileCache(0, _this43._unloadTile.bind(_assertThisInitialized(_assertThisInitialized(_this43)))), _this43._timers = {}, _this43._cacheTimers = {}, _this43._minTileCacheSize = e.minTileCacheSize, _this43._maxTileCacheSize = e.maxTileCacheSize, _this43._loadedParentTiles = {}, _this43._coveredTiles = {}, _this43._state = new SourceFeatureState(), _this43._isRaster = \"raster\" === _this43._source.type || \"raster-dem\" === _this43._source.type || \"custom\" === _this43._source.type && \"raster\" === _this43._source._dataType;\n      return _this43;\n    }\n    _createClass(SourceCache, [{\n      key: \"onAdd\",\n      value: function onAdd(t) {\n        this.map = t, this._minTileCacheSize = void 0 === this._minTileCacheSize && t ? t._minTileCacheSize : this._minTileCacheSize, this._maxTileCacheSize = void 0 === this._maxTileCacheSize && t ? t._maxTileCacheSize : this._maxTileCacheSize;\n      }\n    }, {\n      key: \"loaded\",\n      value: function loaded() {\n        if (this._sourceErrored) return !0;\n        if (!this._sourceLoaded) return !1;\n        if (!this._source.loaded()) return !1;\n        for (var _t233 in this._tiles) {\n          var _e218 = this._tiles[_t233];\n          if (\"loaded\" !== _e218.state && \"errored\" !== _e218.state) return !1;\n        }\n        return !0;\n      }\n    }, {\n      key: \"getSource\",\n      value: function getSource() {\n        return this._source;\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this._paused = !0;\n      }\n    }, {\n      key: \"resume\",\n      value: function resume() {\n        if (!this._paused) return;\n        var t = this._shouldReloadOnResume;\n        this._paused = !1, this._shouldReloadOnResume = !1, t && this.reload(), this.transform && this.update(this.transform);\n      }\n    }, {\n      key: \"_loadTile\",\n      value: function _loadTile(t, e) {\n        return t.isSymbolTile = this._onlySymbols, this._source.loadTile(t, e);\n      }\n    }, {\n      key: \"_unloadTile\",\n      value: function _unloadTile(t) {\n        if (this._source.unloadTile) return this._source.unloadTile(t, function () {});\n      }\n    }, {\n      key: \"_abortTile\",\n      value: function _abortTile(t) {\n        if (this._source.abortTile) return this._source.abortTile(t, function () {});\n      }\n    }, {\n      key: \"serialize\",\n      value: function serialize() {\n        return this._source.serialize();\n      }\n    }, {\n      key: \"prepare\",\n      value: function prepare(t) {\n        this._source.prepare && this._source.prepare(), this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null);\n        for (var _e219 in this._tiles) {\n          var _r181 = this._tiles[_e219];\n          _r181.upload(t), _r181.prepare(this.map.style.imageManager);\n        }\n      }\n    }, {\n      key: \"getIds\",\n      value: function getIds() {\n        return h(this._tiles).map(function (t) {\n          return t.tileID;\n        }).sort(kc).map(function (t) {\n          return t.key;\n        });\n      }\n    }, {\n      key: \"getRenderableIds\",\n      value: function getRenderableIds(t) {\n        var _this44 = this;\n        var e = [];\n        for (var _r182 in this._tiles) this._isIdRenderable(+_r182, t) && e.push(this._tiles[_r182]);\n        return t ? e.sort(function (t, e) {\n          var n = t.tileID,\n            i = e.tileID,\n            s = new r(n.canonical.x, n.canonical.y)._rotate(_this44.transform.angle),\n            a = new r(i.canonical.x, i.canonical.y)._rotate(_this44.transform.angle);\n          return n.overscaledZ - i.overscaledZ || a.y - s.y || a.x - s.x;\n        }).map(function (t) {\n          return t.tileID.key;\n        }) : e.map(function (t) {\n          return t.tileID;\n        }).sort(kc).map(function (t) {\n          return t.key;\n        });\n      }\n    }, {\n      key: \"hasRenderableParent\",\n      value: function hasRenderableParent(t) {\n        var e = this.findLoadedParent(t, 0);\n        return !!e && this._isIdRenderable(e.tileID.key);\n      }\n    }, {\n      key: \"_isIdRenderable\",\n      value: function _isIdRenderable(t, e) {\n        return this._tiles[t] && this._tiles[t].hasData() && !this._coveredTiles[t] && (e || !this._tiles[t].holdingForFade());\n      }\n    }, {\n      key: \"reload\",\n      value: function reload() {\n        if (this._paused) this._shouldReloadOnResume = !0;else {\n          this._cache.reset();\n          for (var _t234 in this._tiles) \"errored\" !== this._tiles[_t234].state && this._reloadTile(+_t234, \"reloading\");\n        }\n      }\n    }, {\n      key: \"_reloadTile\",\n      value: function _reloadTile(t, e) {\n        var r = this._tiles[t];\n        r && (\"loading\" !== r.state && (r.state = e), this._loadTile(r, this._tileLoaded.bind(this, r, t, e)));\n      }\n    }, {\n      key: \"_tileLoaded\",\n      value: function _tileLoaded(t, e, r, n) {\n        if (n) {\n          if (t.state = \"errored\", 404 !== n.status) this._source.fire(new ErrorEvent(n, {\n            tile: t\n          }));else if (\"raster-dem\" === this._source.type && this.usedForTerrain && this.map.painter.terrain) {\n            var _t235 = this.map.painter.terrain;\n            this.update(this.transform, _t235.getScaledDemTileSize(), !0), _t235.resetTileLookupCache(this.id);\n          } else this.update(this.transform);\n        } else t.timeAdded = ci.now(), \"expired\" === r && (t.refreshedUponExpiration = !0), this._setTileReloadTimer(e, t), \"raster-dem\" === this._source.type && t.dem && this._backfillDEM(t), this._state.initializeTileState(t, this.map ? this.map.painter : null), this._source.fire(new Event(\"data\", {\n          dataType: \"source\",\n          tile: t,\n          coord: t.tileID,\n          sourceCacheId: this.id\n        }));\n      }\n    }, {\n      key: \"_backfillDEM\",\n      value: function _backfillDEM(t) {\n        var e = this.getRenderableIds();\n        for (var _n129 = 0; _n129 < e.length; _n129++) {\n          var _i132 = e[_n129];\n          if (t.neighboringTiles && t.neighboringTiles[_i132]) {\n            var _e220 = this.getTileByID(_i132);\n            r(t, _e220), r(_e220, t);\n          }\n        }\n        function r(t, e) {\n          if (!t.dem || t.dem.borderReady) return;\n          t.needsHillshadePrepare = !0, t.needsDEMTextureUpload = !0;\n          var r = e.tileID.canonical.x - t.tileID.canonical.x;\n          var n = e.tileID.canonical.y - t.tileID.canonical.y,\n            i = Math.pow(2, t.tileID.canonical.z),\n            s = e.tileID.key;\n          0 === r && 0 === n || Math.abs(n) > 1 || (Math.abs(r) > 1 && (1 === Math.abs(r + i) ? r += i : 1 === Math.abs(r - i) && (r -= i)), e.dem && t.dem && (t.dem.backfillBorder(e.dem, r, n), t.neighboringTiles && t.neighboringTiles[s] && (t.neighboringTiles[s].backfilled = !0)));\n        }\n      }\n    }, {\n      key: \"getTile\",\n      value: function getTile(t) {\n        return this.getTileByID(t.key);\n      }\n    }, {\n      key: \"getTileByID\",\n      value: function getTileByID(t) {\n        return this._tiles[t];\n      }\n    }, {\n      key: \"_retainLoadedChildren\",\n      value: function _retainLoadedChildren(t, e, r, n) {\n        for (var _i133 in this._tiles) {\n          var _s98 = this._tiles[_i133];\n          if (n[_i133] || !_s98.hasData() || _s98.tileID.overscaledZ <= e || _s98.tileID.overscaledZ > r) continue;\n          var _a85 = _s98.tileID;\n          for (; _s98 && _s98.tileID.overscaledZ > e + 1;) {\n            var _t236 = _s98.tileID.scaledTo(_s98.tileID.overscaledZ - 1);\n            _s98 = this._tiles[_t236.key], _s98 && _s98.hasData() && (_a85 = _t236);\n          }\n          var _o52 = _a85;\n          for (; _o52.overscaledZ > e;) if (_o52 = _o52.scaledTo(_o52.overscaledZ - 1), t[_o52.key]) {\n            n[_a85.key] = _a85;\n            break;\n          }\n        }\n      }\n    }, {\n      key: \"findLoadedParent\",\n      value: function findLoadedParent(t, e) {\n        if (t.key in this._loadedParentTiles) {\n          var _r183 = this._loadedParentTiles[t.key];\n          return _r183 && _r183.tileID.overscaledZ >= e ? _r183 : null;\n        }\n        for (var _r184 = t.overscaledZ - 1; _r184 >= e; _r184--) {\n          var _e221 = t.scaledTo(_r184),\n            _n130 = this._getLoadedTile(_e221);\n          if (_n130) return _n130;\n        }\n      }\n    }, {\n      key: \"_getLoadedTile\",\n      value: function _getLoadedTile(t) {\n        var e = this._tiles[t.key];\n        return e && e.hasData() ? e : this._cache.getByKey(this._source.reparseOverscaled ? t.wrapped().key : t.canonical.key);\n      }\n    }, {\n      key: \"updateCacheSize\",\n      value: function updateCacheSize(t, e) {\n        e = e || this._source.tileSize;\n        var r = Math.ceil(t.width / e) + 1,\n          n = Math.ceil(t.height / e) + 1,\n          i = Math.floor(r * n * 5),\n          s = \"number\" == typeof this._minTileCacheSize ? Math.max(this._minTileCacheSize, i) : i,\n          a = \"number\" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, s) : s;\n        this._cache.setMaxSize(a);\n      }\n    }, {\n      key: \"handleWrapJump\",\n      value: function handleWrapJump(t) {\n        var e = Math.round((t - (void 0 === this._prevLng ? t : this._prevLng)) / 360);\n        if (this._prevLng = t, e) {\n          var _t237 = {};\n          for (var _r185 in this._tiles) {\n            var _n131 = this._tiles[_r185];\n            _n131.tileID = _n131.tileID.unwrapTo(_n131.tileID.wrap + e), _t237[_n131.tileID.key] = _n131;\n          }\n          this._tiles = _t237;\n          for (var _t238 in this._timers) clearTimeout(this._timers[_t238]), delete this._timers[_t238];\n          for (var _t239 in this._tiles) this._setTileReloadTimer(+_t239, this._tiles[_t239]);\n        }\n      }\n    }, {\n      key: \"update\",\n      value: function update(t, e, r) {\n        var _this45 = this;\n        if (this.transform = t, !this._sourceLoaded || this._paused || this.transform.freezeTileCoverage) return;\n        if (this.usedForTerrain && !r) return;\n        var n;\n        this.updateCacheSize(t, e), \"globe\" !== this.transform.projection.name && this.handleWrapJump(this.transform.center.lng), this._coveredTiles = {}, this.used || this.usedForTerrain ? this._source.tileID ? n = t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function (t) {\n          return new OverscaledTileID(t.canonical.z, t.wrap, t.canonical.z, t.canonical.x, t.canonical.y);\n        }) : (n = t.coveringTiles({\n          tileSize: e || this._source.tileSize,\n          minzoom: this._source.minzoom,\n          maxzoom: this._source.maxzoom,\n          roundZoom: this._source.roundZoom && !r,\n          reparseOverscaled: this._source.reparseOverscaled,\n          isTerrainDEM: this.usedForTerrain\n        }), this._source.hasTile && (n = n.filter(function (t) {\n          return _this45._source.hasTile(t);\n        }))) : n = [];\n        var i = this._updateRetainedTiles(n);\n        if (Ic(this._source.type) && 0 !== n.length) {\n          var _t240 = {},\n            _e222 = {},\n            _r186 = Object.keys(i);\n          for (var _i134 = 0, _r187 = _r186; _i134 < _r187.length; _i134++) {\n            var _n132 = _r187[_i134];\n            var _r188 = i[_n132],\n              _s99 = this._tiles[_n132];\n            if (!_s99 || _s99.fadeEndTime && _s99.fadeEndTime <= ci.now()) continue;\n            var _a86 = this.findLoadedParent(_r188, Math.max(_r188.overscaledZ - SourceCache.maxOverzooming, this._source.minzoom));\n            _a86 && (this._addTile(_a86.tileID), _t240[_a86.tileID.key] = _a86.tileID), _e222[_n132] = _r188;\n          }\n          var _s100 = n[n.length - 1].overscaledZ;\n          for (var _t241 in this._tiles) {\n            var _r189 = this._tiles[_t241];\n            if (i[_t241] || !_r189.hasData()) continue;\n            var _n133 = _r189.tileID;\n            for (; _n133.overscaledZ > _s100;) {\n              _n133 = _n133.scaledTo(_n133.overscaledZ - 1);\n              var _s101 = this._tiles[_n133.key];\n              if (_s101 && _s101.hasData() && _e222[_n133.key]) {\n                i[_t241] = _r189.tileID;\n                break;\n              }\n            }\n          }\n          for (var _e223 in _t240) i[_e223] || (this._coveredTiles[_e223] = !0, i[_e223] = _t240[_e223]);\n        }\n        for (var _t242 in i) this._tiles[_t242].clearFadeHold();\n        var s = function (t, e) {\n          var r = [];\n          for (var _n134 in t) _n134 in e || r.push(_n134);\n          return r;\n        }(this._tiles, i);\n        var _iterator147 = _createForOfIteratorHelper(s),\n          _step147;\n        try {\n          for (_iterator147.s(); !(_step147 = _iterator147.n()).done;) {\n            var _t243 = _step147.value;\n            var _e224 = this._tiles[_t243];\n            _e224.hasSymbolBuckets && !_e224.holdingForFade() ? _e224.setHoldDuration(this.map._fadeDuration) : _e224.hasSymbolBuckets && !_e224.symbolFadeFinished() || this._removeTile(+_t243);\n          }\n        } catch (err) {\n          _iterator147.e(err);\n        } finally {\n          _iterator147.f();\n        }\n        this._updateLoadedParentTileCache(), this._onlySymbols && this._source.afterUpdate && this._source.afterUpdate();\n      }\n    }, {\n      key: \"releaseSymbolFadeTiles\",\n      value: function releaseSymbolFadeTiles() {\n        for (var _t244 in this._tiles) this._tiles[_t244].holdingForFade() && this._removeTile(+_t244);\n      }\n    }, {\n      key: \"_updateRetainedTiles\",\n      value: function _updateRetainedTiles(t) {\n        var e = {};\n        if (0 === t.length) return e;\n        var r = {},\n          n = t.reduce(function (t, e) {\n            return Math.min(t, e.overscaledZ);\n          }, 1 / 0),\n          i = t[0].overscaledZ,\n          s = Math.max(i - SourceCache.maxOverzooming, this._source.minzoom),\n          a = Math.max(i + SourceCache.maxUnderzooming, this._source.minzoom),\n          o = {};\n        var _iterator148 = _createForOfIteratorHelper(t),\n          _step148;\n        try {\n          for (_iterator148.s(); !(_step148 = _iterator148.n()).done;) {\n            var _r190 = _step148.value;\n            var _t245 = this._addTile(_r190);\n            e[_r190.key] = _r190, _t245.hasData() || n < this._source.maxzoom && (o[_r190.key] = _r190);\n          }\n        } catch (err) {\n          _iterator148.e(err);\n        } finally {\n          _iterator148.f();\n        }\n        this._retainLoadedChildren(o, n, a, e);\n        var _iterator149 = _createForOfIteratorHelper(t),\n          _step149;\n        try {\n          for (_iterator149.s(); !(_step149 = _iterator149.n()).done;) {\n            var _n135 = _step149.value;\n            var _t246 = this._tiles[_n135.key];\n            if (_t246.hasData()) continue;\n            if (_n135.canonical.z >= this._source.maxzoom) {\n              var _t247 = _n135.children(this._source.maxzoom)[0],\n                _r191 = this.getTile(_t247);\n              if (_r191 && _r191.hasData()) {\n                e[_t247.key] = _t247;\n                continue;\n              }\n            } else {\n              var _t248 = _n135.children(this._source.maxzoom);\n              if (e[_t248[0].key] && e[_t248[1].key] && e[_t248[2].key] && e[_t248[3].key]) continue;\n            }\n            var _i135 = _t246.wasRequested();\n            for (var _a87 = _n135.overscaledZ - 1; _a87 >= s; --_a87) {\n              var _s102 = _n135.scaledTo(_a87);\n              if (r[_s102.key]) break;\n              if (r[_s102.key] = !0, _t246 = this.getTile(_s102), !_t246 && _i135 && (_t246 = this._addTile(_s102)), _t246 && (e[_s102.key] = _s102, _i135 = _t246.wasRequested(), _t246.hasData())) break;\n            }\n          }\n        } catch (err) {\n          _iterator149.e(err);\n        } finally {\n          _iterator149.f();\n        }\n        return e;\n      }\n    }, {\n      key: \"_updateLoadedParentTileCache\",\n      value: function _updateLoadedParentTileCache() {\n        this._loadedParentTiles = {};\n        for (var _t249 in this._tiles) {\n          var _e225 = [];\n          var _r192 = void 0,\n            _n136 = this._tiles[_t249].tileID;\n          for (; _n136.overscaledZ > 0;) {\n            if (_n136.key in this._loadedParentTiles) {\n              _r192 = this._loadedParentTiles[_n136.key];\n              break;\n            }\n            _e225.push(_n136.key);\n            var _t250 = _n136.scaledTo(_n136.overscaledZ - 1);\n            if (_r192 = this._getLoadedTile(_t250), _r192) break;\n            _n136 = _t250;\n          }\n          for (var _i136 = 0, _e226 = _e225; _i136 < _e226.length; _i136++) {\n            var _t251 = _e226[_i136];\n            this._loadedParentTiles[_t251] = _r192;\n          }\n        }\n      }\n    }, {\n      key: \"_addTile\",\n      value: function _addTile(t) {\n        var e = this._tiles[t.key];\n        if (e) return e;\n        e = this._cache.getAndRemove(t), e && (this._setTileReloadTimer(t.key, e), e.tileID = t, this._state.initializeTileState(e, this.map ? this.map.painter : null), this._cacheTimers[t.key] && (clearTimeout(this._cacheTimers[t.key]), delete this._cacheTimers[t.key], this._setTileReloadTimer(t.key, e)));\n        var r = Boolean(e);\n        if (!r) {\n          var _r193 = this.map ? this.map.painter : null;\n          e = new Tile(t, this._source.tileSize * t.overscaleFactor(), this.transform.tileZoom, _r193, this._isRaster), this._loadTile(e, this._tileLoaded.bind(this, e, t.key, e.state));\n        }\n        return e ? (e.uses++, this._tiles[t.key] = e, r || this._source.fire(new Event(\"dataloading\", {\n          tile: e,\n          coord: e.tileID,\n          dataType: \"source\"\n        })), e) : null;\n      }\n    }, {\n      key: \"_setTileReloadTimer\",\n      value: function _setTileReloadTimer(t, e) {\n        var _this46 = this;\n        t in this._timers && (clearTimeout(this._timers[t]), delete this._timers[t]);\n        var r = e.getExpiryTimeout();\n        r && (this._timers[t] = setTimeout(function () {\n          _this46._reloadTile(t, \"expired\"), delete _this46._timers[t];\n        }, r));\n      }\n    }, {\n      key: \"_removeTile\",\n      value: function _removeTile(t) {\n        var e = this._tiles[t];\n        e && (e.uses--, delete this._tiles[t], this._timers[t] && (clearTimeout(this._timers[t]), delete this._timers[t]), e.uses > 0 || (e.hasData() && \"reloading\" !== e.state ? this._cache.add(e.tileID, e, e.getExpiryTimeout()) : (e.aborted = !0, this._abortTile(e), this._unloadTile(e))));\n      }\n    }, {\n      key: \"clearTiles\",\n      value: function clearTiles() {\n        this._shouldReloadOnResume = !1, this._paused = !1;\n        for (var _t252 in this._tiles) this._removeTile(+_t252);\n        this._source._clear && this._source._clear(), this._cache.reset(), this.map && this.usedForTerrain && this.map.painter.terrain && this.map.painter.terrain.resetTileLookupCache(this.id);\n      }\n    }, {\n      key: \"tilesIn\",\n      value: function tilesIn(t, e, r) {\n        var n = [],\n          i = this.transform;\n        if (!i) return n;\n        var s = \"globe\" === i.projection.name,\n          a = Vs(i.center.lng);\n        for (var _o53 in this._tiles) {\n          var _l46 = this._tiles[_o53];\n          if (r && _l46.clearQueryDebugViz(), _l46.holdingForFade()) continue;\n          var _c34 = void 0;\n          if (s) {\n            var _t253 = _l46.tileID.canonical;\n            if (0 === _t253.z) {\n              var _e227 = [Math.abs(u.apply(void 0, [a].concat(_toConsumableArray(Mc(_t253, -1)))) - a), Math.abs(u.apply(void 0, [a].concat(_toConsumableArray(Mc(_t253, 1)))) - a)];\n              _c34 = [0, 2 * _e227.indexOf(Math.min.apply(Math, _e227)) - 1];\n            } else {\n              var _e228 = [Math.abs(u.apply(void 0, [a].concat(_toConsumableArray(Mc(_t253, -1)))) - a), Math.abs(u.apply(void 0, [a].concat(_toConsumableArray(Mc(_t253, 0)))) - a), Math.abs(u.apply(void 0, [a].concat(_toConsumableArray(Mc(_t253, 1)))) - a)];\n              _c34 = [_e228.indexOf(Math.min.apply(Math, _e228)) - 1];\n            }\n          } else _c34 = [0];\n          var _iterator150 = _createForOfIteratorHelper(_c34),\n            _step150;\n          try {\n            for (_iterator150.s(); !(_step150 = _iterator150.n()).done;) {\n              var _r194 = _step150.value;\n              var _s103 = t.containsTile(_l46, i, e, _r194);\n              _s103 && n.push(_s103);\n            }\n          } catch (err) {\n            _iterator150.e(err);\n          } finally {\n            _iterator150.f();\n          }\n        }\n        return n;\n      }\n    }, {\n      key: \"getVisibleCoordinates\",\n      value: function getVisibleCoordinates(t) {\n        var _this47 = this;\n        var e = this.getRenderableIds(t).map(function (t) {\n          return _this47._tiles[t].tileID;\n        });\n        var _iterator151 = _createForOfIteratorHelper(e),\n          _step151;\n        try {\n          for (_iterator151.s(); !(_step151 = _iterator151.n()).done;) {\n            var _t254 = _step151.value;\n            _t254.projMatrix = this.transform.calculateProjMatrix(_t254.toUnwrapped());\n          }\n        } catch (err) {\n          _iterator151.e(err);\n        } finally {\n          _iterator151.f();\n        }\n        return e;\n      }\n    }, {\n      key: \"hasTransition\",\n      value: function hasTransition() {\n        if (this._source.hasTransition()) return !0;\n        if (Ic(this._source.type)) for (var _t255 in this._tiles) {\n          var _e229 = this._tiles[_t255];\n          if (void 0 !== _e229.fadeEndTime && _e229.fadeEndTime >= ci.now()) return !0;\n        }\n        return !1;\n      }\n    }, {\n      key: \"setFeatureState\",\n      value: function setFeatureState(t, e, r) {\n        this._state.updateState(t = t || \"_geojsonTileLayer\", e, r);\n      }\n    }, {\n      key: \"removeFeatureState\",\n      value: function removeFeatureState(t, e, r) {\n        this._state.removeFeatureState(t = t || \"_geojsonTileLayer\", e, r);\n      }\n    }, {\n      key: \"getFeatureState\",\n      value: function getFeatureState(t, e) {\n        return this._state.getState(t = t || \"_geojsonTileLayer\", e);\n      }\n    }, {\n      key: \"setDependencies\",\n      value: function setDependencies(t, e, r) {\n        var n = this._tiles[t];\n        n && n.setDependencies(e, r);\n      }\n    }, {\n      key: \"reloadTilesForDependencies\",\n      value: function reloadTilesForDependencies(t, e) {\n        for (var _r195 in this._tiles) this._tiles[_r195].hasDependency(t, e) && this._reloadTile(+_r195, \"reloading\");\n        this._cache.filter(function (r) {\n          return !r.hasDependency(t, e);\n        });\n      }\n    }, {\n      key: \"_preloadTiles\",\n      value: function _preloadTiles(t, e) {\n        var _this48 = this;\n        var r = new Map(),\n          n = Array.isArray(t) ? t : [t],\n          i = this.map.painter.terrain,\n          s = this.usedForTerrain && i ? i.getScaledDemTileSize() : this._source.tileSize;\n        var _iterator152 = _createForOfIteratorHelper(n),\n          _step152;\n        try {\n          for (_iterator152.s(); !(_step152 = _iterator152.n()).done;) {\n            var _t256 = _step152.value;\n            var _e230 = _t256.coveringTiles({\n              tileSize: s,\n              minzoom: this._source.minzoom,\n              maxzoom: this._source.maxzoom,\n              roundZoom: this._source.roundZoom && !this.usedForTerrain,\n              reparseOverscaled: this._source.reparseOverscaled,\n              isTerrainDEM: this.usedForTerrain\n            });\n            var _iterator153 = _createForOfIteratorHelper(_e230),\n              _step153;\n            try {\n              for (_iterator153.s(); !(_step153 = _iterator153.n()).done;) {\n                var _t257 = _step153.value;\n                r.set(_t257.key, _t257);\n              }\n            } catch (err) {\n              _iterator153.e(err);\n            } finally {\n              _iterator153.f();\n            }\n            this.usedForTerrain && _t256.updateElevation(!1);\n          }\n        } catch (err) {\n          _iterator152.e(err);\n        } finally {\n          _iterator152.f();\n        }\n        !function (t, e, r) {\n          if (!t.length) return r(null, []);\n          var n = t.length;\n          var i = new Array(t.length);\n          var s = null;\n          t.forEach(function (t, a) {\n            e(t, function (t, e) {\n              t && (s = t), i[a] = e, 0 == --n && r(s, i);\n            });\n          });\n        }(Array.from(r.values()), function (t, e) {\n          var r = new Tile(t, _this48._source.tileSize * t.overscaleFactor(), _this48.transform.tileZoom, _this48.map.painter, _this48._isRaster);\n          _this48._loadTile(r, function (t) {\n            \"raster-dem\" === _this48._source.type && r.dem && _this48._backfillDEM(r), e(t, r);\n          });\n        }, e);\n      }\n    }]);\n    return SourceCache;\n  }(Evented);\n  function kc(t, e) {\n    var r = Math.abs(2 * t.wrap) - +(t.wrap < 0),\n      n = Math.abs(2 * e.wrap) - +(e.wrap < 0);\n    return t.overscaledZ - e.overscaledZ || n - r || e.canonical.y - t.canonical.y || e.canonical.x - t.canonical.x;\n  }\n  function Ic(t) {\n    return \"raster\" === t || \"image\" === t || \"video\" === t || \"custom\" === t;\n  }\n  function Mc(t, e) {\n    var r = 1 << t.z;\n    return [t.x / r + e, (t.x + 1) / r + e];\n  }\n  SourceCache.maxOverzooming = 10, SourceCache.maxUnderzooming = 3;\n  var DEMSampler = /*#__PURE__*/function () {\n    function DEMSampler(t, e, r) {\n      _classCallCheck(this, DEMSampler);\n      this._demTile = t, this._dem = this._demTile.dem, this._scale = e, this._offset = r;\n    }\n    _createClass(DEMSampler, [{\n      key: \"tileCoordToPixel\",\n      value: function tileCoordToPixel(t, e) {\n        var n = e * this._scale + this._offset[1],\n          i = Math.floor(t * this._scale + this._offset[0]),\n          s = Math.floor(n);\n        return new r(i, s);\n      }\n    }, {\n      key: \"getElevationAt\",\n      value: function getElevationAt(t, e, r, n) {\n        var i = t * this._scale + this._offset[0],\n          s = e * this._scale + this._offset[1],\n          a = Math.floor(i),\n          o = Math.floor(s),\n          l = this._dem;\n        return n = !!n, r ? qt(qt(l.get(a, o, n), l.get(a, o + 1, n), s - o), qt(l.get(a + 1, o, n), l.get(a + 1, o + 1, n), s - o), i - a) : l.get(a, o, n);\n      }\n    }, {\n      key: \"getElevationAtPixel\",\n      value: function getElevationAtPixel(t, e, r) {\n        return this._dem.get(t, e, !!r);\n      }\n    }, {\n      key: \"getMeterToDEM\",\n      value: function getMeterToDEM(t) {\n        return (1 << this._demTile.tileID.canonical.z) * Rs(1, t) * this._dem.stride;\n      }\n    }], [{\n      key: \"create\",\n      value: function create(t, e, r) {\n        var n = r || t.findDEMTileFor(e);\n        if (!n || !n.dem) return;\n        var i = n.dem,\n          s = n.tileID,\n          a = 1 << e.canonical.z - s.canonical.z;\n        return new DEMSampler(n, n.tileSize / Ni / a, [(e.canonical.x / a - s.canonical.x) * i.dim, (e.canonical.y / a - s.canonical.y) * i.dim]);\n      }\n    }]);\n    return DEMSampler;\n  }();\n  var FeatureIndex = /*#__PURE__*/function () {\n    function FeatureIndex(t, e) {\n      _classCallCheck(this, FeatureIndex);\n      this.tileID = t, this.x = t.canonical.x, this.y = t.canonical.y, this.z = t.canonical.z, this.grid = new C(Ni, 16, 0), this.featureIndexArray = new FeatureIndexArray(), this.promoteId = e;\n    }\n    _createClass(FeatureIndex, [{\n      key: \"insert\",\n      value: function insert(t, e, r, n, i) {\n        var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n        var a = this.featureIndexArray.length;\n        this.featureIndexArray.emplaceBack(r, n, i, s);\n        var o = this.grid;\n        for (var _t258 = 0; _t258 < e.length; _t258++) {\n          var _r196 = e[_t258],\n            _n137 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];\n          for (var _t259 = 0; _t259 < _r196.length; _t259++) {\n            var _e231 = _r196[_t259];\n            _n137[0] = Math.min(_n137[0], _e231.x), _n137[1] = Math.min(_n137[1], _e231.y), _n137[2] = Math.max(_n137[2], _e231.x), _n137[3] = Math.max(_n137[3], _e231.y);\n          }\n          _n137[0] < Ni && _n137[1] < Ni && _n137[2] >= 0 && _n137[3] >= 0 && o.insert(a, _n137[0], _n137[1], _n137[2], _n137[3]);\n        }\n      }\n    }, {\n      key: \"loadVTLayers\",\n      value: function loadVTLayers() {\n        if (!this.vtLayers) {\n          this.vtLayers = new To(new wl(this.rawTileData)).layers, this.sourceLayerCoder = new DictionaryCoder(this.vtLayers ? Object.keys(this.vtLayers).sort() : [\"_geojsonTileLayer\"]), this.vtFeatures = {};\n          for (var _t260 in this.vtLayers) this.vtFeatures[_t260] = [];\n        }\n        return this.vtLayers;\n      }\n    }, {\n      key: \"query\",\n      value: function query(t, e, n, i) {\n        var _this49 = this;\n        this.loadVTLayers();\n        var s = t.params || {},\n          a = Kr(s.filter),\n          o = t.tileResult,\n          l = t.transform,\n          u = o.bufferedTilespaceBounds,\n          c = this.grid.query(u.min.x, u.min.y, u.max.x, u.max.y, function (t, e, n, i) {\n            return function (t, e, n, i, s) {\n              var _iterator154 = _createForOfIteratorHelper(t),\n                _step154;\n              try {\n                for (_iterator154.s(); !(_step154 = _iterator154.n()).done;) {\n                  var _r197 = _step154.value;\n                  if (e <= _r197.x && n <= _r197.y && i >= _r197.x && s >= _r197.y) return !0;\n                }\n              } catch (err) {\n                _iterator154.e(err);\n              } finally {\n                _iterator154.f();\n              }\n              var a = [new r(e, n), new r(e, s), new r(i, s), new r(i, n)];\n              if (t.length > 2) {\n                var _iterator155 = _createForOfIteratorHelper(a),\n                  _step155;\n                try {\n                  for (_iterator155.s(); !(_step155 = _iterator155.n()).done;) {\n                    var _e232 = _step155.value;\n                    if (la(t, _e232)) return !0;\n                  }\n                } catch (err) {\n                  _iterator155.e(err);\n                } finally {\n                  _iterator155.f();\n                }\n              }\n              for (var _e233 = 0; _e233 < t.length - 1; _e233++) if (ua(t[_e233], t[_e233 + 1], a)) return !0;\n              return !1;\n            }(o.bufferedTilespaceGeometry, t, e, n, i);\n          });\n        c.sort(Tc);\n        var h = null;\n        l.elevation && c.length > 0 && (h = DEMSampler.create(l.elevation, this.tileID));\n        var p = {};\n        var d;\n        var _loop7 = function _loop7() {\n          var l = c[_r198];\n          if (l === d) return \"continue\";\n          d = l;\n          var u = _this49.featureIndexArray.get(l);\n          var f = null;\n          _this49.loadMatchingFeature(p, u, a, s.layers, s.availableImages, e, n, i, function (e, r, n) {\n            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n            return f || (f = Ws(e, _this49.tileID.canonical, t.tileTransform)), r.queryIntersectsFeature(o, e, n, f, _this49.z, t.transform, t.pixelPosMatrix, h, i);\n          });\n        };\n        for (var _r198 = 0; _r198 < c.length; _r198++) {\n          var _ret3 = _loop7();\n          if (_ret3 === \"continue\") continue;\n        }\n        return p;\n      }\n    }, {\n      key: \"loadMatchingFeature\",\n      value: function loadMatchingFeature(t, e, r, n, i, s, a, o, l) {\n        var u = e.featureIndex,\n          c = e.bucketIndex,\n          h = e.sourceLayerIndex,\n          d = e.layoutVertexArrayOffset,\n          f = this.bucketLayerIDs[c];\n        if (n && !function (t, e) {\n          for (var _r199 = 0; _r199 < t.length; _r199++) if (e.indexOf(t[_r199]) >= 0) return !0;\n          return !1;\n        }(n, f)) return;\n        var y = this.sourceLayerCoder.decode(h),\n          m = this.vtLayers[y].feature(u);\n        if (r.needGeometry) {\n          var _t261 = Js(m, !0);\n          if (!r.filter(new EvaluationParameters(this.tileID.overscaledZ), _t261, this.tileID.canonical)) return;\n        } else if (!r.filter(new EvaluationParameters(this.tileID.overscaledZ), m)) return;\n        var g = this.getId(m, y);\n        for (var _e234 = 0; _e234 < f.length; _e234++) {\n          var _r200 = f[_e234];\n          if (n && n.indexOf(_r200) < 0) continue;\n          var _c35 = s[_r200];\n          if (!_c35) continue;\n          var _h27 = {};\n          void 0 !== g && o && (_h27 = o.getState(_c35.sourceLayer || \"_geojsonTileLayer\", g));\n          var _y12 = p({}, a[_r200]);\n          _y12.paint = Pc(_y12.paint, _c35.paint, m, _h27, i), _y12.layout = Pc(_y12.layout, _c35.layout, m, _h27, i);\n          var _x12 = !l || l(m, _c35, _h27, d);\n          if (!_x12) continue;\n          var _v11 = new Feature(m, this.z, this.x, this.y, g);\n          _v11.layer = _y12;\n          var _b10 = t[_r200];\n          void 0 === _b10 && (_b10 = t[_r200] = []), _b10.push({\n            featureIndex: u,\n            feature: _v11,\n            intersectionZ: _x12\n          });\n        }\n      }\n    }, {\n      key: \"lookupSymbolFeatures\",\n      value: function lookupSymbolFeatures(t, e, r, n, i, s, a, o) {\n        var l = {};\n        this.loadVTLayers();\n        var u = Kr(i);\n        var _iterator156 = _createForOfIteratorHelper(t),\n          _step156;\n        try {\n          for (_iterator156.s(); !(_step156 = _iterator156.n()).done;) {\n            var _i137 = _step156.value;\n            this.loadMatchingFeature(l, {\n              bucketIndex: r,\n              sourceLayerIndex: n,\n              featureIndex: _i137,\n              layoutVertexArrayOffset: 0\n            }, u, s, a, o, e);\n          }\n        } catch (err) {\n          _iterator156.e(err);\n        } finally {\n          _iterator156.f();\n        }\n        return l;\n      }\n    }, {\n      key: \"loadFeature\",\n      value: function loadFeature(t) {\n        var e = t.featureIndex,\n          r = t.sourceLayerIndex;\n        this.loadVTLayers();\n        var n = this.sourceLayerCoder.decode(r),\n          i = this.vtFeatures[n];\n        if (i[e]) return i[e];\n        var s = this.vtLayers[n].feature(e);\n        return i[e] = s, s;\n      }\n    }, {\n      key: \"hasLayer\",\n      value: function hasLayer(t) {\n        var _iterator157 = _createForOfIteratorHelper(this.bucketLayerIDs),\n          _step157;\n        try {\n          for (_iterator157.s(); !(_step157 = _iterator157.n()).done;) {\n            var _e235 = _step157.value;\n            var _iterator158 = _createForOfIteratorHelper(_e235),\n              _step158;\n            try {\n              for (_iterator158.s(); !(_step158 = _iterator158.n()).done;) {\n                var _r201 = _step158.value;\n                if (t === _r201) return !0;\n              }\n            } catch (err) {\n              _iterator158.e(err);\n            } finally {\n              _iterator158.f();\n            }\n          }\n        } catch (err) {\n          _iterator157.e(err);\n        } finally {\n          _iterator157.f();\n        }\n        return !1;\n      }\n    }, {\n      key: \"getId\",\n      value: function getId(t, e) {\n        var r = t.id;\n        if (this.promoteId) {\n          var _n138 = \"string\" == typeof this.promoteId ? this.promoteId : this.promoteId[e];\n          null != _n138 && (r = t.properties[_n138]), \"boolean\" == typeof r && (r = Number(r));\n        }\n        return r;\n      }\n    }]);\n    return FeatureIndex;\n  }();\n  function Pc(t, e, r, n, i) {\n    return x(t, function (t, s) {\n      var a = e instanceof PossiblyEvaluated ? e.get(s) : null;\n      return a && a.evaluate ? a.evaluate(r, n, i) : a;\n    });\n  }\n  function Tc(t, e) {\n    return e - t;\n  }\n  Er(FeatureIndex, \"FeatureIndex\", {\n    omit: [\"rawTileData\", \"sourceLayerCoder\"]\n  });\n  var LineAtlas = /*#__PURE__*/function () {\n    function LineAtlas(t, e) {\n      _classCallCheck(this, LineAtlas);\n      this.width = t, this.height = e, this.nextRow = 0, this.image = new AlphaImage({\n        width: t,\n        height: e\n      }), this.positions = {}, this.uploaded = !1;\n    }\n    _createClass(LineAtlas, [{\n      key: \"getDash\",\n      value: function getDash(t, e) {\n        var r = this.getKey(t, e);\n        return this.positions[r];\n      }\n    }, {\n      key: \"trim\",\n      value: function trim() {\n        var t = this.width,\n          e = this.height = (r = this.nextRow) <= 1 ? 1 : Math.pow(2, Math.ceil(Math.log(r) / Math.LN2));\n        var r;\n        this.image.resize({\n          width: t,\n          height: e\n        });\n      }\n    }, {\n      key: \"getKey\",\n      value: function getKey(t, e) {\n        return t.join(\",\") + e;\n      }\n    }, {\n      key: \"getDashRanges\",\n      value: function getDashRanges(t, e, r) {\n        var n = [];\n        var i = t.length % 2 == 1 ? -t[t.length - 1] * r : 0,\n          s = t[0] * r,\n          a = !0;\n        n.push({\n          left: i,\n          right: s,\n          isDash: a,\n          zeroLength: 0 === t[0]\n        });\n        var o = t[0];\n        for (var _e236 = 1; _e236 < t.length; _e236++) {\n          a = !a;\n          var _l47 = t[_e236];\n          i = o * r, o += _l47, s = o * r, n.push({\n            left: i,\n            right: s,\n            isDash: a,\n            zeroLength: 0 === _l47\n          });\n        }\n        return n;\n      }\n    }, {\n      key: \"addRoundDash\",\n      value: function addRoundDash(t, e, r) {\n        var n = e / 2;\n        for (var _e237 = -r; _e237 <= r; _e237++) {\n          var _i138 = this.width * (this.nextRow + r + _e237);\n          var _s104 = 0,\n            _a88 = t[_s104];\n          for (var _o54 = 0; _o54 < this.width; _o54++) {\n            _o54 / _a88.right > 1 && (_a88 = t[++_s104]);\n            var _l48 = Math.abs(_o54 - _a88.left),\n              _u40 = Math.abs(_o54 - _a88.right),\n              _c36 = Math.min(_l48, _u40);\n            var _h28 = void 0;\n            var _p26 = _e237 / r * (n + 1);\n            if (_a88.isDash) {\n              var _t262 = n - Math.abs(_p26);\n              _h28 = Math.sqrt(_c36 * _c36 + _t262 * _t262);\n            } else _h28 = n - Math.sqrt(_c36 * _c36 + _p26 * _p26);\n            this.image.data[_i138 + _o54] = Math.max(0, Math.min(255, _h28 + 128));\n          }\n        }\n      }\n    }, {\n      key: \"addRegularDash\",\n      value: function addRegularDash(t, e) {\n        for (var _e238 = t.length - 1; _e238 >= 0; --_e238) {\n          var _r202 = t[_e238],\n            _n139 = t[_e238 + 1];\n          _r202.zeroLength ? t.splice(_e238, 1) : _n139 && _n139.isDash === _r202.isDash && (_n139.left = _r202.left, t.splice(_e238, 1));\n        }\n        var r = t[0],\n          n = t[t.length - 1];\n        r.isDash === n.isDash && (r.left = n.left - this.width, n.right = r.right + this.width);\n        var i = this.width * this.nextRow;\n        var s = 0,\n          a = t[s];\n        for (var _r203 = 0; _r203 < this.width; _r203++) {\n          _r203 / a.right > 1 && (a = t[++s]);\n          var _n140 = Math.abs(_r203 - a.left),\n            _o55 = Math.abs(_r203 - a.right),\n            _l49 = Math.min(_n140, _o55);\n          this.image.data[i + _r203] = Math.max(0, Math.min(255, (a.isDash ? _l49 : -_l49) + e + 128));\n        }\n      }\n    }, {\n      key: \"addDash\",\n      value: function addDash(t, e) {\n        var r = this.getKey(t, e);\n        if (this.positions[r]) return this.positions[r];\n        var n = \"round\" === e,\n          i = n ? 7 : 0,\n          s = 2 * i + 1;\n        if (this.nextRow + s > this.height) return w(\"LineAtlas out of space\"), null;\n        0 === t.length && t.push(1);\n        var a = 0;\n        for (var _e239 = 0; _e239 < t.length; _e239++) t[_e239] < 0 && (w(\"Negative value is found in line dasharray, replacing values with 0\"), t[_e239] = 0), a += t[_e239];\n        if (0 !== a) {\n          var _r204 = this.width / a,\n            _s105 = this.getDashRanges(t, this.width, _r204);\n          n ? this.addRoundDash(_s105, _r204, i) : this.addRegularDash(_s105, \"square\" === e ? .5 * _r204 : 0);\n        }\n        var o = this.nextRow + i;\n        this.nextRow += s;\n        var l = {\n          tl: [o, i],\n          br: [a, 0]\n        };\n        return this.positions[r] = l, l;\n      }\n    }]);\n    return LineAtlas;\n  }();\n  Er(LineAtlas, \"LineAtlas\");\n  var GlyphAtlas = function GlyphAtlas(t) {\n    _classCallCheck(this, GlyphAtlas);\n    var e = {},\n      r = [];\n    for (var _n141 in t) {\n      var _i139 = t[_n141],\n        _s106 = e[_n141] = {};\n      for (var _t263 in _i139.glyphs) {\n        var _e240 = _i139.glyphs[+_t263];\n        if (!_e240 || 0 === _e240.bitmap.width || 0 === _e240.bitmap.height) continue;\n        var _n142 = _e240.metrics.localGlyph ? 2 : 1,\n          _a89 = {\n            x: 0,\n            y: 0,\n            w: _e240.bitmap.width + 2 * _n142,\n            h: _e240.bitmap.height + 2 * _n142\n          };\n        r.push(_a89), _s106[_t263] = _a89;\n      }\n    }\n    var _ql2 = ql(r),\n      n = _ql2.w,\n      i = _ql2.h,\n      s = new AlphaImage({\n        width: n || 1,\n        height: i || 1\n      });\n    for (var _r205 in t) {\n      var _n143 = t[_r205];\n      for (var _t264 in _n143.glyphs) {\n        var _i140 = _n143.glyphs[+_t264];\n        if (!_i140 || 0 === _i140.bitmap.width || 0 === _i140.bitmap.height) continue;\n        var _a90 = e[_r205][_t264],\n          _o56 = _i140.metrics.localGlyph ? 2 : 1;\n        AlphaImage.copy(_i140.bitmap, s, {\n          x: 0,\n          y: 0\n        }, {\n          x: _a90.x + _o56,\n          y: _a90.y + _o56\n        }, _i140.bitmap);\n      }\n    }\n    this.image = s, this.positions = e;\n  };\n  Er(GlyphAtlas, \"GlyphAtlas\");\n  var WorkerTile = /*#__PURE__*/function () {\n    function WorkerTile(t) {\n      _classCallCheck(this, WorkerTile);\n      this.tileID = new OverscaledTileID(t.tileID.overscaledZ, t.tileID.wrap, t.tileID.canonical.z, t.tileID.canonical.x, t.tileID.canonical.y), this.tileZoom = t.tileZoom, this.uid = t.uid, this.zoom = t.zoom, this.canonical = t.tileID.canonical, this.pixelRatio = t.pixelRatio, this.tileSize = t.tileSize, this.source = t.source, this.overscaling = this.tileID.overscaleFactor(), this.showCollisionBoxes = t.showCollisionBoxes, this.collectResourceTiming = !!t.collectResourceTiming, this.returnDependencies = !!t.returnDependencies, this.promoteId = t.promoteId, this.enableTerrain = !!t.enableTerrain, this.isSymbolTile = t.isSymbolTile, this.tileTransform = Du(t.tileID.canonical, t.projection), this.projection = t.projection;\n    }\n    _createClass(WorkerTile, [{\n      key: \"parse\",\n      value: function parse(t, e, r, n, i) {\n        var _this50 = this;\n        this.status = \"parsing\", this.data = t, this.collisionBoxArray = new CollisionBoxArray();\n        var s = new DictionaryCoder(Object.keys(t.layers).sort()),\n          a = new FeatureIndex(this.tileID, this.promoteId);\n        a.bucketLayerIDs = [];\n        var o = {},\n          l = new LineAtlas(256, 256),\n          u = {\n            featureIndex: a,\n            iconDependencies: {},\n            patternDependencies: {},\n            glyphDependencies: {},\n            lineAtlas: l,\n            availableImages: r\n          },\n          c = e.familiesBySource[this.source];\n        for (var _e241 in c) {\n          var _n144 = t.layers[_e241];\n          if (!_n144) continue;\n          var _i141 = !1,\n            _l50 = !1;\n          var _iterator159 = _createForOfIteratorHelper(c[_e241]),\n            _step159;\n          try {\n            for (_iterator159.s(); !(_step159 = _iterator159.n()).done;) {\n              var _t266 = _step159.value;\n              \"symbol\" === _t266[0].type ? _i141 = !0 : _l50 = !0;\n            }\n          } catch (err) {\n            _iterator159.e(err);\n          } finally {\n            _iterator159.f();\n          }\n          if (!0 === this.isSymbolTile && !_i141) continue;\n          if (!1 === this.isSymbolTile && !_l50) continue;\n          1 === _n144.version && w(\"Vector tile source \\\"\".concat(this.source, \"\\\" layer \\\"\").concat(_e241, \"\\\" does not use vector tile spec v2 and therefore may have some rendering errors.\"));\n          var _h29 = s.encode(_e241),\n            _p27 = [];\n          for (var _t265 = 0; _t265 < _n144.length; _t265++) {\n            var _r206 = _n144.feature(_t265),\n              _i142 = a.getId(_r206, _e241);\n            _p27.push({\n              feature: _r206,\n              id: _i142,\n              index: _t265,\n              sourceLayerIndex: _h29\n            });\n          }\n          var _iterator160 = _createForOfIteratorHelper(c[_e241]),\n            _step160;\n          try {\n            for (_iterator160.s(); !(_step160 = _iterator160.n()).done;) {\n              var _t267 = _step160.value;\n              var _e242 = _t267[0];\n              void 0 !== this.isSymbolTile && \"symbol\" === _e242.type !== this.isSymbolTile || _e242.minzoom && this.zoom < Math.floor(_e242.minzoom) || _e242.maxzoom && this.zoom >= _e242.maxzoom || \"none\" !== _e242.visibility && (Cc(_t267, this.zoom, r), (o[_e242.id] = _e242.createBucket({\n                index: a.bucketLayerIDs.length,\n                layers: _t267,\n                zoom: this.zoom,\n                canonical: this.canonical,\n                pixelRatio: this.pixelRatio,\n                overscaling: this.overscaling,\n                collisionBoxArray: this.collisionBoxArray,\n                sourceLayerIndex: _h29,\n                sourceID: this.source,\n                enableTerrain: this.enableTerrain,\n                projection: this.projection.spec,\n                availableImages: r\n              })).populate(_p27, u, this.tileID.canonical, this.tileTransform), a.bucketLayerIDs.push(_t267.map(function (t) {\n                return t.id;\n              })));\n            }\n          } catch (err) {\n            _iterator160.e(err);\n          } finally {\n            _iterator160.f();\n          }\n        }\n        var p, d, f, y;\n        l.trim();\n        var m = {\n            type: \"maybePrepare\",\n            isSymbolTile: this.isSymbolTile,\n            zoom: this.zoom\n          },\n          g = x(u.glyphDependencies, function (t) {\n            return Object.keys(t).map(Number);\n          });\n        Object.keys(g).length ? n.send(\"getGlyphs\", {\n          uid: this.uid,\n          stacks: g\n        }, function (t, e) {\n          p || (p = t, d = e, _.call(_this50));\n        }, void 0, !1, m) : d = {};\n        var v = Object.keys(u.iconDependencies);\n        v.length ? n.send(\"getImages\", {\n          icons: v,\n          source: this.source,\n          tileID: this.tileID,\n          type: \"icons\"\n        }, function (t, e) {\n          p || (p = t, f = e, _.call(_this50));\n        }, void 0, !1, m) : f = {};\n        var b = Object.keys(u.patternDependencies);\n        function _() {\n          if (p) return i(p);\n          if (d && f && y) {\n            var _t268 = new GlyphAtlas(d),\n              _e243 = new ImageAtlas(f, y);\n            for (var _n145 in o) {\n              var _i143 = o[_n145];\n              _i143 instanceof SymbolBucket ? (Cc(_i143.layers, this.zoom, r), _u(_i143, d, _t268.positions, f, _e243.iconPositions, this.showCollisionBoxes, r, this.tileID.canonical, this.tileZoom, this.projection)) : _i143.hasPattern && (_i143 instanceof LineBucket || _i143 instanceof FillBucket || _i143 instanceof FillExtrusionBucket) && (Cc(_i143.layers, this.zoom, r), _i143.addFeatures(u, this.tileID.canonical, _e243.patternPositions, r, this.tileTransform));\n            }\n            this.status = \"done\", i(null, {\n              buckets: h(o).filter(function (t) {\n                return !t.isEmpty();\n              }),\n              featureIndex: a,\n              collisionBoxArray: this.collisionBoxArray,\n              glyphAtlasImage: _t268.image,\n              lineAtlas: l,\n              imageAtlas: _e243,\n              glyphMap: this.returnDependencies ? d : null,\n              iconMap: this.returnDependencies ? f : null,\n              glyphPositions: this.returnDependencies ? _t268.positions : null\n            });\n          }\n        }\n        b.length ? n.send(\"getImages\", {\n          icons: b,\n          source: this.source,\n          tileID: this.tileID,\n          type: \"patterns\"\n        }, function (t, e) {\n          p || (p = t, y = e, _.call(_this50));\n        }, void 0, !1, m) : y = {}, _.call(this);\n      }\n    }]);\n    return WorkerTile;\n  }();\n  function Cc(t, e, r) {\n    var n = new EvaluationParameters(e);\n    var _iterator161 = _createForOfIteratorHelper(t),\n      _step161;\n    try {\n      for (_iterator161.s(); !(_step161 = _iterator161.n()).done;) {\n        var _e244 = _step161.value;\n        _e244.recalculate(n, r);\n      }\n    } catch (err) {\n      _iterator161.e(err);\n    } finally {\n      _iterator161.f();\n    }\n  }\n  var DedupedRequest = /*#__PURE__*/function () {\n    function DedupedRequest(t) {\n      _classCallCheck(this, DedupedRequest);\n      this.entries = {}, this.scheduler = t;\n    }\n    _createClass(DedupedRequest, [{\n      key: \"request\",\n      value: function request(t, e, r, n) {\n        var _this51 = this;\n        var i = this.entries[t] = this.entries[t] || {\n          callbacks: []\n        };\n        if (i.result) {\n          var _i$result = _slicedToArray(i.result, 2),\n            _t269 = _i$result[0],\n            _r207 = _i$result[1];\n          return this.scheduler ? this.scheduler.add(function () {\n            n(_t269, _r207);\n          }, e) : n(_t269, _r207), function () {};\n        }\n        return i.callbacks.push(n), i.cancel || (i.cancel = r(function (r, n) {\n          i.result = [r, n];\n          var _iterator162 = _createForOfIteratorHelper(i.callbacks),\n            _step162;\n          try {\n            var _loop8 = function _loop8() {\n              var t = _step162.value;\n              _this51.scheduler ? _this51.scheduler.add(function () {\n                t(r, n);\n              }, e) : t(r, n);\n            };\n            for (_iterator162.s(); !(_step162 = _iterator162.n()).done;) {\n              _loop8();\n            }\n          } catch (err) {\n            _iterator162.e(err);\n          } finally {\n            _iterator162.f();\n          }\n          setTimeout(function () {\n            return delete _this51.entries[t];\n          }, 3e3);\n        })), function () {\n          i.result || (i.callbacks = i.callbacks.filter(function (t) {\n            return t !== n;\n          }), i.callbacks.length || (i.cancel(), delete _this51.entries[t]));\n        };\n      }\n    }]);\n    return DedupedRequest;\n  }();\n  function Ec(t, e, r) {\n    var n = JSON.stringify(t.request);\n    return t.data && (this.deduped.entries[n] = {\n      result: [null, t.data]\n    }), this.deduped.request(n, {\n      type: \"parseTile\",\n      isSymbolTile: t.isSymbolTile,\n      zoom: t.tileZoom\n    }, function (e) {\n      var n = Mr(t.request, function (t, n, i, s) {\n        t ? e(t) : n && e(null, {\n          vectorTile: r ? void 0 : new To(new wl(n)),\n          rawData: n,\n          cacheControl: i,\n          expires: s\n        });\n      });\n      return function () {\n        n.cancel(), e();\n      };\n    }, e);\n  }\n  var VectorTileWorkerSource = /*#__PURE__*/function (_Evented3) {\n    _inherits(VectorTileWorkerSource, _Evented3);\n    function VectorTileWorkerSource(t, e, r, n, i) {\n      var _this52;\n      _classCallCheck(this, VectorTileWorkerSource);\n      _this52 = _possibleConstructorReturn(this, _getPrototypeOf(VectorTileWorkerSource).call(this)), _this52.actor = t, _this52.layerIndex = e, _this52.availableImages = r, _this52.loadVectorData = i || Ec, _this52.loading = {}, _this52.loaded = {}, _this52.deduped = new DedupedRequest(t.scheduler), _this52.isSpriteLoaded = n, _this52.scheduler = t.scheduler;\n      return _this52;\n    }\n    _createClass(VectorTileWorkerSource, [{\n      key: \"loadTile\",\n      value: function loadTile(t, e) {\n        var _this53 = this;\n        var r = t.uid,\n          n = t && t.request,\n          i = n && n.collectResourceTiming,\n          s = this.loading[r] = new WorkerTile(t);\n        s.abort = this.loadVectorData(t, function (a, o) {\n          var l = !_this53.loading[r];\n          if (delete _this53.loading[r], l || a || !o) return s.status = \"done\", l || (_this53.loaded[r] = s), e(a);\n          var u = o.rawData,\n            c = {};\n          o.expires && (c.expires = o.expires), o.cacheControl && (c.cacheControl = o.cacheControl), s.vectorTile = o.vectorTile || new To(new wl(u));\n          var h = function h() {\n            s.parse(s.vectorTile, _this53.layerIndex, _this53.availableImages, _this53.actor, function (t, r) {\n              if (t || !r) return e(t);\n              var s = {};\n              if (i) {\n                var _t270 = Fr(n);\n                _t270.length > 0 && (s.resourceTiming = JSON.parse(JSON.stringify(_t270)));\n              }\n              e(null, p({\n                rawTileData: u.slice(0)\n              }, r, c, s));\n            });\n          };\n          _this53.isSpriteLoaded ? h() : _this53.once(\"isSpriteLoaded\", function () {\n            _this53.scheduler ? _this53.scheduler.add(h, {\n              type: \"parseTile\",\n              isSymbolTile: t.isSymbolTile,\n              zoom: t.tileZoom\n            }) : h();\n          }), _this53.loaded = _this53.loaded || {}, _this53.loaded[r] = s;\n        });\n      }\n    }, {\n      key: \"reloadTile\",\n      value: function reloadTile(t, e) {\n        var _this54 = this;\n        var r = this.loaded,\n          n = t.uid,\n          i = this;\n        if (r && r[n]) {\n          var _s107 = r[n];\n          _s107.showCollisionBoxes = t.showCollisionBoxes, _s107.enableTerrain = !!t.enableTerrain, _s107.projection = t.projection, _s107.tileTransform = Du(t.tileID.canonical, t.projection);\n          var _a91 = function _a91(t, r) {\n            var n = _s107.reloadCallback;\n            n && (delete _s107.reloadCallback, _s107.parse(_s107.vectorTile, i.layerIndex, _this54.availableImages, i.actor, n)), e(t, r);\n          };\n          \"parsing\" === _s107.status ? _s107.reloadCallback = _a91 : \"done\" === _s107.status && (_s107.vectorTile ? _s107.parse(_s107.vectorTile, this.layerIndex, this.availableImages, this.actor, _a91) : _a91());\n        }\n      }\n    }, {\n      key: \"abortTile\",\n      value: function abortTile(t, e) {\n        var r = t.uid,\n          n = this.loading[r];\n        n && (n.abort && n.abort(), delete this.loading[r]), e();\n      }\n    }, {\n      key: \"removeTile\",\n      value: function removeTile(t, e) {\n        var r = this.loaded,\n          n = t.uid;\n        r && r[n] && delete r[n], e();\n      }\n    }]);\n    return VectorTileWorkerSource;\n  }(Evented);\n  var RasterDEMTileWorkerSource = /*#__PURE__*/function () {\n    function RasterDEMTileWorkerSource() {\n      _classCallCheck(this, RasterDEMTileWorkerSource);\n    }\n    _createClass(RasterDEMTileWorkerSource, [{\n      key: \"loadTile\",\n      value: function loadTile(t, e) {\n        var r = t.uid,\n          n = t.encoding,\n          s = t.rawImageData,\n          a = t.padding,\n          o = t.buildQuadTree,\n          l = i.ImageBitmap && s instanceof i.ImageBitmap ? this.getImageData(s, a) : s;\n        e(null, new DEMData(r, l, n, a < 1, o));\n      }\n    }, {\n      key: \"getImageData\",\n      value: function getImageData(t, e) {\n        this.offscreenCanvas && this.offscreenCanvasContext || (this.offscreenCanvas = new OffscreenCanvas(t.width, t.height), this.offscreenCanvasContext = this.offscreenCanvas.getContext(\"2d\", {\n          willReadFrequently: !0\n        })), this.offscreenCanvas.width = t.width, this.offscreenCanvas.height = t.height, this.offscreenCanvasContext.drawImage(t, 0, 0, t.width, t.height);\n        var r = this.offscreenCanvasContext.getImageData(-e, -e, t.width + 2 * e, t.height + 2 * e);\n        return this.offscreenCanvasContext.clearRect(0, 0, this.offscreenCanvas.width, this.offscreenCanvas.height), r;\n      }\n    }]);\n    return RasterDEMTileWorkerSource;\n  }();\n  var Dc = function t(e, r) {\n    var n,\n      i = e && e.type;\n    if (\"FeatureCollection\" === i) for (n = 0; n < e.features.length; n++) t(e.features[n], r);else if (\"GeometryCollection\" === i) for (n = 0; n < e.geometries.length; n++) t(e.geometries[n], r);else if (\"Feature\" === i) t(e.geometry, r);else if (\"Polygon\" === i) zc(e.coordinates, r);else if (\"MultiPolygon\" === i) for (n = 0; n < e.coordinates.length; n++) zc(e.coordinates[n], r);\n    return e;\n  };\n  function zc(t, e) {\n    if (0 !== t.length) {\n      Bc(t[0], e);\n      for (var r = 1; r < t.length; r++) Bc(t[r], !e);\n    }\n  }\n  function Bc(t, e) {\n    for (var r = 0, n = 0, i = 0, s = t.length, a = s - 1; i < s; a = i++) {\n      var o = (t[i][0] - t[a][0]) * (t[a][1] + t[i][1]),\n        l = r + o;\n      n += Math.abs(r) >= Math.abs(o) ? r - l + o : o - l + r, r = l;\n    }\n    r + n >= 0 != !!e && t.reverse();\n  }\n  var Lc = Co.prototype.toGeoJSON;\n  var FeatureWrapper$1 = /*#__PURE__*/function () {\n    function FeatureWrapper$1(t) {\n      _classCallCheck(this, FeatureWrapper$1);\n      this._feature = t, this.extent = Ni, this.type = t.type, this.properties = t.tags, \"id\" in t && !isNaN(t.id) && (this.id = parseInt(t.id, 10));\n    }\n    _createClass(FeatureWrapper$1, [{\n      key: \"loadGeometry\",\n      value: function loadGeometry() {\n        if (1 === this._feature.type) {\n          var _t271 = [];\n          var _iterator163 = _createForOfIteratorHelper(this._feature.geometry),\n            _step163;\n          try {\n            for (_iterator163.s(); !(_step163 = _iterator163.n()).done;) {\n              var _e245 = _step163.value;\n              _t271.push([new r(_e245[0], _e245[1])]);\n            }\n          } catch (err) {\n            _iterator163.e(err);\n          } finally {\n            _iterator163.f();\n          }\n          return _t271;\n        }\n        {\n          var _t272 = [];\n          var _iterator164 = _createForOfIteratorHelper(this._feature.geometry),\n            _step164;\n          try {\n            for (_iterator164.s(); !(_step164 = _iterator164.n()).done;) {\n              var _e246 = _step164.value;\n              var _n146 = [];\n              var _iterator165 = _createForOfIteratorHelper(_e246),\n                _step165;\n              try {\n                for (_iterator165.s(); !(_step165 = _iterator165.n()).done;) {\n                  var _t273 = _step165.value;\n                  _n146.push(new r(_t273[0], _t273[1]));\n                }\n              } catch (err) {\n                _iterator165.e(err);\n              } finally {\n                _iterator165.f();\n              }\n              _t272.push(_n146);\n            }\n          } catch (err) {\n            _iterator164.e(err);\n          } finally {\n            _iterator164.f();\n          }\n          return _t272;\n        }\n      }\n    }, {\n      key: \"toGeoJSON\",\n      value: function toGeoJSON(t, e, r) {\n        return Lc.call(this, t, e, r);\n      }\n    }]);\n    return FeatureWrapper$1;\n  }();\n  var GeoJSONWrapper$2 = /*#__PURE__*/function () {\n    function GeoJSONWrapper$2(t) {\n      _classCallCheck(this, GeoJSONWrapper$2);\n      this.layers = {\n        _geojsonTileLayer: this\n      }, this.name = \"_geojsonTileLayer\", this.extent = Ni, this.length = t.length, this._features = t;\n    }\n    _createClass(GeoJSONWrapper$2, [{\n      key: \"feature\",\n      value: function feature(t) {\n        return new FeatureWrapper$1(this._features[t]);\n      }\n    }]);\n    return GeoJSONWrapper$2;\n  }();\n  var Vc = {},\n    Fc = {\n      get exports() {\n        return Vc;\n      },\n      set exports(t) {\n        Vc = t;\n      }\n    },\n    Rc = r,\n    jc = go.VectorTileFeature,\n    Oc = $c;\n  function $c(t, e) {\n    this.options = e || {}, this.features = t, this.length = t.length;\n  }\n  function Uc(t, e) {\n    this.id = \"number\" == typeof t.id ? t.id : void 0, this.type = t.type, this.rawGeometry = 1 === t.type ? [t.geometry] : t.geometry, this.properties = t.tags, this.extent = e || 4096;\n  }\n  $c.prototype.feature = function (t) {\n    return new Uc(this.features[t], this.options.extent);\n  }, Uc.prototype.loadGeometry = function () {\n    var t = this.rawGeometry;\n    this.geometry = [];\n    for (var e = 0; e < t.length; e++) {\n      for (var r = t[e], n = [], i = 0; i < r.length; i++) n.push(new Rc(r[i][0], r[i][1]));\n      this.geometry.push(n);\n    }\n    return this.geometry;\n  }, Uc.prototype.bbox = function () {\n    this.geometry || this.loadGeometry();\n    for (var t = this.geometry, e = 1 / 0, r = -1 / 0, n = 1 / 0, i = -1 / 0, s = 0; s < t.length; s++) for (var a = t[s], o = 0; o < a.length; o++) {\n      var l = a[o];\n      e = Math.min(e, l.x), r = Math.max(r, l.x), n = Math.min(n, l.y), i = Math.max(i, l.y);\n    }\n    return [e, n, r, i];\n  }, Uc.prototype.toGeoJSON = jc.prototype.toGeoJSON;\n  var qc = wl,\n    Nc = Oc;\n  function Gc(t) {\n    var e = new qc();\n    return function (t, e) {\n      for (var r in t.layers) e.writeMessage(3, Zc, t.layers[r]);\n    }(t, e), e.finish();\n  }\n  function Zc(t, e) {\n    var r;\n    e.writeVarintField(15, t.version || 1), e.writeStringField(1, t.name || \"\"), e.writeVarintField(5, t.extent || 4096);\n    var n = {\n      keys: [],\n      values: [],\n      keycache: {},\n      valuecache: {}\n    };\n    for (r = 0; r < t.length; r++) n.feature = t.feature(r), e.writeMessage(2, Xc, n);\n    var i = n.keys;\n    for (r = 0; r < i.length; r++) e.writeStringField(3, i[r]);\n    var s = n.values;\n    for (r = 0; r < s.length; r++) e.writeMessage(4, Hc, s[r]);\n  }\n  function Xc(t, e) {\n    var r = t.feature;\n    void 0 !== r.id && e.writeVarintField(1, r.id), e.writeMessage(2, Yc, t), e.writeVarintField(3, r.type), e.writeMessage(4, Kc, r);\n  }\n  function Yc(t, e) {\n    var r = t.feature,\n      n = t.keys,\n      i = t.values,\n      s = t.keycache,\n      a = t.valuecache;\n    for (var o in r.properties) {\n      var l = r.properties[o],\n        u = s[o];\n      if (null !== l) {\n        void 0 === u && (n.push(o), s[o] = u = n.length - 1), e.writeVarint(u);\n        var c = typeof l;\n        \"string\" !== c && \"boolean\" !== c && \"number\" !== c && (l = JSON.stringify(l));\n        var h = c + \":\" + l,\n          p = a[h];\n        void 0 === p && (i.push(l), a[h] = p = i.length - 1), e.writeVarint(p);\n      }\n    }\n  }\n  function Wc(t, e) {\n    return (e << 3) + (7 & t);\n  }\n  function Jc(t) {\n    return t << 1 ^ t >> 31;\n  }\n  function Kc(t, e) {\n    for (var r = t.loadGeometry(), n = t.type, i = 0, s = 0, a = r.length, o = 0; o < a; o++) {\n      var l = r[o],\n        u = 1;\n      1 === n && (u = l.length), e.writeVarint(Wc(1, u));\n      for (var c = 3 === n ? l.length - 1 : l.length, h = 0; h < c; h++) {\n        1 === h && 1 !== n && e.writeVarint(Wc(2, c - 1));\n        var p = l[h].x - i,\n          d = l[h].y - s;\n        e.writeVarint(Jc(p)), e.writeVarint(Jc(d)), i += p, s += d;\n      }\n      3 === n && e.writeVarint(Wc(7, 1));\n    }\n  }\n  function Hc(t, e) {\n    var r = typeof t;\n    \"string\" === r ? e.writeStringField(1, t) : \"boolean\" === r ? e.writeBooleanField(7, t) : \"number\" === r && (t % 1 != 0 ? e.writeDoubleField(3, t) : t < 0 ? e.writeSVarintField(6, t) : e.writeVarintField(5, t));\n  }\n  function Qc(t, e, r, n, i, s) {\n    if (i - n <= r) return;\n    var a = n + i >> 1;\n    th(t, e, a, n, i, s % 2), Qc(t, e, r, n, a - 1, s + 1), Qc(t, e, r, a + 1, i, s + 1);\n  }\n  function th(t, e, r, n, i, s) {\n    for (; i > n;) {\n      if (i - n > 600) {\n        var _a92 = i - n + 1,\n          _o57 = r - n + 1,\n          _l51 = Math.log(_a92),\n          _u41 = .5 * Math.exp(2 * _l51 / 3),\n          _c37 = .5 * Math.sqrt(_l51 * _u41 * (_a92 - _u41) / _a92) * (_o57 - _a92 / 2 < 0 ? -1 : 1);\n        th(t, e, r, Math.max(n, Math.floor(r - _o57 * _u41 / _a92 + _c37)), Math.min(i, Math.floor(r + (_a92 - _o57) * _u41 / _a92 + _c37)), s);\n      }\n      var _a93 = e[2 * r + s];\n      var _o58 = n,\n        _l52 = i;\n      for (eh(t, e, n, r), e[2 * i + s] > _a93 && eh(t, e, n, i); _o58 < _l52;) {\n        for (eh(t, e, _o58, _l52), _o58++, _l52--; e[2 * _o58 + s] < _a93;) _o58++;\n        for (; e[2 * _l52 + s] > _a93;) _l52--;\n      }\n      e[2 * n + s] === _a93 ? eh(t, e, n, _l52) : (_l52++, eh(t, e, _l52, i)), _l52 <= r && (n = _l52 + 1), r <= _l52 && (i = _l52 - 1);\n    }\n  }\n  function eh(t, e, r, n) {\n    rh(t, r, n), rh(e, 2 * r, 2 * n), rh(e, 2 * r + 1, 2 * n + 1);\n  }\n  function rh(t, e, r) {\n    var n = t[e];\n    t[e] = t[r], t[r] = n;\n  }\n  function nh(t, e, r, n) {\n    var i = t - r,\n      s = e - n;\n    return i * i + s * s;\n  }\n  Fc.exports = Gc, Vc.fromVectorTileJs = Gc, Vc.fromGeojsonVt = function (t, e) {\n    e = e || {};\n    var r = {};\n    for (var n in t) r[n] = new Nc(t[n].features, e), r[n].name = n, r[n].version = e.version, r[n].extent = e.extent;\n    return Gc({\n      layers: r\n    });\n  }, Vc.GeoJSONWrapper = Nc;\n  var ih = function ih(t) {\n      return t[0];\n    },\n    sh = function sh(t) {\n      return t[1];\n    };\n  var KDBush = /*#__PURE__*/function () {\n    function KDBush(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ih;\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : sh;\n      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 64;\n      var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : Float64Array;\n      _classCallCheck(this, KDBush);\n      this.nodeSize = n, this.points = t;\n      var s = t.length < 65536 ? Uint16Array : Uint32Array,\n        a = this.ids = new s(t.length),\n        o = this.coords = new i(2 * t.length);\n      for (var _n147 = 0; _n147 < t.length; _n147++) a[_n147] = _n147, o[2 * _n147] = e(t[_n147]), o[2 * _n147 + 1] = r(t[_n147]);\n      Qc(a, o, n, 0, a.length - 1, 0);\n    }\n    _createClass(KDBush, [{\n      key: \"range\",\n      value: function range(t, e, r, n) {\n        return function (t, e, r, n, i, s, a) {\n          var o = [0, t.length - 1, 0],\n            l = [];\n          var u, c;\n          for (; o.length;) {\n            var _h30 = o.pop(),\n              _p28 = o.pop(),\n              _d20 = o.pop();\n            if (_p28 - _d20 <= a) {\n              for (var _a94 = _d20; _a94 <= _p28; _a94++) u = e[2 * _a94], c = e[2 * _a94 + 1], u >= r && u <= i && c >= n && c <= s && l.push(t[_a94]);\n              continue;\n            }\n            var _f14 = Math.floor((_d20 + _p28) / 2);\n            u = e[2 * _f14], c = e[2 * _f14 + 1], u >= r && u <= i && c >= n && c <= s && l.push(t[_f14]);\n            var _y13 = (_h30 + 1) % 2;\n            (0 === _h30 ? r <= u : n <= c) && (o.push(_d20), o.push(_f14 - 1), o.push(_y13)), (0 === _h30 ? i >= u : s >= c) && (o.push(_f14 + 1), o.push(_p28), o.push(_y13));\n          }\n          return l;\n        }(this.ids, this.coords, t, e, r, n, this.nodeSize);\n      }\n    }, {\n      key: \"within\",\n      value: function within(t, e, r) {\n        return function (t, e, r, n, i, s) {\n          var a = [0, t.length - 1, 0],\n            o = [],\n            l = i * i;\n          for (; a.length;) {\n            var _u42 = a.pop(),\n              _c38 = a.pop(),\n              _h31 = a.pop();\n            if (_c38 - _h31 <= s) {\n              for (var _i144 = _h31; _i144 <= _c38; _i144++) nh(e[2 * _i144], e[2 * _i144 + 1], r, n) <= l && o.push(t[_i144]);\n              continue;\n            }\n            var _p29 = Math.floor((_h31 + _c38) / 2),\n              _d21 = e[2 * _p29],\n              _f15 = e[2 * _p29 + 1];\n            nh(_d21, _f15, r, n) <= l && o.push(t[_p29]);\n            var _y14 = (_u42 + 1) % 2;\n            (0 === _u42 ? r - i <= _d21 : n - i <= _f15) && (a.push(_h31), a.push(_p29 - 1), a.push(_y14)), (0 === _u42 ? r + i >= _d21 : n + i >= _f15) && (a.push(_p29 + 1), a.push(_c38), a.push(_y14));\n          }\n          return o;\n        }(this.ids, this.coords, t, e, r, this.nodeSize);\n      }\n    }]);\n    return KDBush;\n  }();\n  var ah = {\n      minZoom: 0,\n      maxZoom: 16,\n      minPoints: 2,\n      radius: 40,\n      extent: 512,\n      nodeSize: 64,\n      log: !1,\n      generateId: !1,\n      reduce: null,\n      map: function map(t) {\n        return t;\n      }\n    },\n    oh = Math.fround || (lh = new Float32Array(1), function (t) {\n      return lh[0] = +t, lh[0];\n    });\n  var lh;\n  var Supercluster = /*#__PURE__*/function () {\n    function Supercluster(t) {\n      _classCallCheck(this, Supercluster);\n      this.options = mh(Object.create(ah), t), this.trees = new Array(this.options.maxZoom + 1);\n    }\n    _createClass(Supercluster, [{\n      key: \"load\",\n      value: function load(t) {\n        var _this$options = this.options,\n          e = _this$options.log,\n          r = _this$options.minZoom,\n          n = _this$options.maxZoom,\n          i = _this$options.nodeSize;\n        e && console.time(\"total time\");\n        var s = \"prepare \".concat(t.length, \" points\");\n        e && console.time(s), this.points = t;\n        var a = [];\n        for (var _e247 = 0; _e247 < t.length; _e247++) t[_e247].geometry && a.push(ch(t[_e247], _e247));\n        this.trees[n + 1] = new KDBush(a, gh, xh, i, Float32Array), e && console.timeEnd(s);\n        for (var _t274 = n; _t274 >= r; _t274--) {\n          var _r208 = +Date.now();\n          a = this._cluster(a, _t274), this.trees[_t274] = new KDBush(a, gh, xh, i, Float32Array), e && console.log(\"z%d: %d clusters in %dms\", _t274, a.length, +Date.now() - _r208);\n        }\n        return e && console.timeEnd(\"total time\"), this;\n      }\n    }, {\n      key: \"getClusters\",\n      value: function getClusters(t, e) {\n        var r = ((t[0] + 180) % 360 + 360) % 360 - 180;\n        var n = Math.max(-90, Math.min(90, t[1]));\n        var i = 180 === t[2] ? 180 : ((t[2] + 180) % 360 + 360) % 360 - 180;\n        var s = Math.max(-90, Math.min(90, t[3]));\n        if (t[2] - t[0] >= 360) r = -180, i = 180;else if (r > i) {\n          var _t275 = this.getClusters([r, n, 180, s], e),\n            _a95 = this.getClusters([-180, n, i, s], e);\n          return _t275.concat(_a95);\n        }\n        var a = this.trees[this._limitZoom(e)],\n          o = a.range(dh(r), fh(s), dh(i), fh(n)),\n          l = [];\n        var _iterator166 = _createForOfIteratorHelper(o),\n          _step166;\n        try {\n          for (_iterator166.s(); !(_step166 = _iterator166.n()).done;) {\n            var _t276 = _step166.value;\n            var _e248 = a.points[_t276];\n            l.push(_e248.numPoints ? hh(_e248) : this.points[_e248.index]);\n          }\n        } catch (err) {\n          _iterator166.e(err);\n        } finally {\n          _iterator166.f();\n        }\n        return l;\n      }\n    }, {\n      key: \"getChildren\",\n      value: function getChildren(t) {\n        var e = this._getOriginId(t),\n          r = this._getOriginZoom(t),\n          n = \"No cluster with the specified id.\",\n          i = this.trees[r];\n        if (!i) throw new Error(n);\n        var s = i.points[e];\n        if (!s) throw new Error(n);\n        var a = this.options.radius / (this.options.extent * Math.pow(2, r - 1)),\n          o = i.within(s.x, s.y, a),\n          l = [];\n        var _iterator167 = _createForOfIteratorHelper(o),\n          _step167;\n        try {\n          for (_iterator167.s(); !(_step167 = _iterator167.n()).done;) {\n            var _e249 = _step167.value;\n            var _r209 = i.points[_e249];\n            _r209.parentId === t && l.push(_r209.numPoints ? hh(_r209) : this.points[_r209.index]);\n          }\n        } catch (err) {\n          _iterator167.e(err);\n        } finally {\n          _iterator167.f();\n        }\n        if (0 === l.length) throw new Error(n);\n        return l;\n      }\n    }, {\n      key: \"getLeaves\",\n      value: function getLeaves(t, e, r) {\n        var n = [];\n        return this._appendLeaves(n, t, e = e || 10, r = r || 0, 0), n;\n      }\n    }, {\n      key: \"getTile\",\n      value: function getTile(t, e, r) {\n        var n = this.trees[this._limitZoom(t)],\n          i = Math.pow(2, t),\n          _this$options2 = this.options,\n          s = _this$options2.extent,\n          a = _this$options2.radius,\n          o = a / s,\n          l = (r - o) / i,\n          u = (r + 1 + o) / i,\n          c = {\n            features: []\n          };\n        return this._addTileFeatures(n.range((e - o) / i, l, (e + 1 + o) / i, u), n.points, e, r, i, c), 0 === e && this._addTileFeatures(n.range(1 - o / i, l, 1, u), n.points, i, r, i, c), e === i - 1 && this._addTileFeatures(n.range(0, l, o / i, u), n.points, -1, r, i, c), c.features.length ? c : null;\n      }\n    }, {\n      key: \"getClusterExpansionZoom\",\n      value: function getClusterExpansionZoom(t) {\n        var e = this._getOriginZoom(t) - 1;\n        for (; e <= this.options.maxZoom;) {\n          var _r210 = this.getChildren(t);\n          if (e++, 1 !== _r210.length) break;\n          t = _r210[0].properties.cluster_id;\n        }\n        return e;\n      }\n    }, {\n      key: \"_appendLeaves\",\n      value: function _appendLeaves(t, e, r, n, i) {\n        var s = this.getChildren(e);\n        var _iterator168 = _createForOfIteratorHelper(s),\n          _step168;\n        try {\n          for (_iterator168.s(); !(_step168 = _iterator168.n()).done;) {\n            var _e250 = _step168.value;\n            var _s108 = _e250.properties;\n            if (_s108 && _s108.cluster ? i + _s108.point_count <= n ? i += _s108.point_count : i = this._appendLeaves(t, _s108.cluster_id, r, n, i) : i < n ? i++ : t.push(_e250), t.length === r) break;\n          }\n        } catch (err) {\n          _iterator168.e(err);\n        } finally {\n          _iterator168.f();\n        }\n        return i;\n      }\n    }, {\n      key: \"_addTileFeatures\",\n      value: function _addTileFeatures(t, e, r, n, i, s) {\n        var _iterator169 = _createForOfIteratorHelper(t),\n          _step169;\n        try {\n          for (_iterator169.s(); !(_step169 = _iterator169.n()).done;) {\n            var _a96 = _step169.value;\n            var _t277 = e[_a96],\n              _o59 = _t277.numPoints;\n            var _l53 = void 0,\n              _u43 = void 0,\n              _c39 = void 0;\n            if (_o59) _l53 = ph(_t277), _u43 = _t277.x, _c39 = _t277.y;else {\n              var _e251 = this.points[_t277.index];\n              _l53 = _e251.properties, _u43 = dh(_e251.geometry.coordinates[0]), _c39 = fh(_e251.geometry.coordinates[1]);\n            }\n            var _h32 = {\n              type: 1,\n              geometry: [[Math.round(this.options.extent * (_u43 * i - r)), Math.round(this.options.extent * (_c39 * i - n))]],\n              tags: _l53\n            };\n            var _p30 = void 0;\n            _o59 ? _p30 = _t277.id : this.options.generateId ? _p30 = _t277.index : this.points[_t277.index].id && (_p30 = this.points[_t277.index].id), void 0 !== _p30 && (_h32.id = _p30), s.features.push(_h32);\n          }\n        } catch (err) {\n          _iterator169.e(err);\n        } finally {\n          _iterator169.f();\n        }\n      }\n    }, {\n      key: \"_limitZoom\",\n      value: function _limitZoom(t) {\n        return Math.max(this.options.minZoom, Math.min(Math.floor(+t), this.options.maxZoom + 1));\n      }\n    }, {\n      key: \"_cluster\",\n      value: function _cluster(t, e) {\n        var r = [],\n          _this$options3 = this.options,\n          n = _this$options3.radius,\n          i = _this$options3.extent,\n          s = _this$options3.reduce,\n          a = _this$options3.minPoints,\n          o = n / (i * Math.pow(2, e));\n        for (var _n148 = 0; _n148 < t.length; _n148++) {\n          var _i145 = t[_n148];\n          if (_i145.zoom <= e) continue;\n          _i145.zoom = e;\n          var _l54 = this.trees[e + 1],\n            _u44 = _l54.within(_i145.x, _i145.y, o),\n            _c40 = _i145.numPoints || 1;\n          var _h33 = _c40;\n          var _iterator170 = _createForOfIteratorHelper(_u44),\n            _step170;\n          try {\n            for (_iterator170.s(); !(_step170 = _iterator170.n()).done;) {\n              var _t280 = _step170.value;\n              var _r212 = _l54.points[_t280];\n              _r212.zoom > e && (_h33 += _r212.numPoints || 1);\n            }\n          } catch (err) {\n            _iterator170.e(err);\n          } finally {\n            _iterator170.f();\n          }\n          if (_h33 > _c40 && _h33 >= a) {\n            var _t278 = _i145.x * _c40,\n              _a97 = _i145.y * _c40,\n              _o60 = s && _c40 > 1 ? this._map(_i145, !0) : null;\n            var _p31 = (_n148 << 5) + (e + 1) + this.points.length;\n            var _iterator171 = _createForOfIteratorHelper(_u44),\n              _step171;\n            try {\n              for (_iterator171.s(); !(_step171 = _iterator171.n()).done;) {\n                var _r211 = _step171.value;\n                var _n149 = _l54.points[_r211];\n                if (_n149.zoom <= e) continue;\n                _n149.zoom = e;\n                var _u45 = _n149.numPoints || 1;\n                _t278 += _n149.x * _u45, _a97 += _n149.y * _u45, _n149.parentId = _p31, s && (_o60 || (_o60 = this._map(_i145, !0)), s(_o60, this._map(_n149)));\n              }\n            } catch (err) {\n              _iterator171.e(err);\n            } finally {\n              _iterator171.f();\n            }\n            _i145.parentId = _p31, r.push(uh(_t278 / _h33, _a97 / _h33, _p31, _h33, _o60));\n          } else if (r.push(_i145), _h33 > 1) {\n            var _iterator172 = _createForOfIteratorHelper(_u44),\n              _step172;\n            try {\n              for (_iterator172.s(); !(_step172 = _iterator172.n()).done;) {\n                var _t279 = _step172.value;\n                var _n150 = _l54.points[_t279];\n                _n150.zoom <= e || (_n150.zoom = e, r.push(_n150));\n              }\n            } catch (err) {\n              _iterator172.e(err);\n            } finally {\n              _iterator172.f();\n            }\n          }\n        }\n        return r;\n      }\n    }, {\n      key: \"_getOriginId\",\n      value: function _getOriginId(t) {\n        return t - this.points.length >> 5;\n      }\n    }, {\n      key: \"_getOriginZoom\",\n      value: function _getOriginZoom(t) {\n        return (t - this.points.length) % 32;\n      }\n    }, {\n      key: \"_map\",\n      value: function _map(t, e) {\n        if (t.numPoints) return e ? mh({}, t.properties) : t.properties;\n        var r = this.points[t.index].properties,\n          n = this.options.map(r);\n        return e && n === r ? mh({}, n) : n;\n      }\n    }]);\n    return Supercluster;\n  }();\n  function uh(t, e, r, n, i) {\n    return {\n      x: oh(t),\n      y: oh(e),\n      zoom: 1 / 0,\n      id: r,\n      parentId: -1,\n      numPoints: n,\n      properties: i\n    };\n  }\n  function ch(t, e) {\n    var _t$geometry$coordinat = _slicedToArray(t.geometry.coordinates, 2),\n      r = _t$geometry$coordinat[0],\n      n = _t$geometry$coordinat[1];\n    return {\n      x: oh(dh(r)),\n      y: oh(fh(n)),\n      zoom: 1 / 0,\n      index: e,\n      parentId: -1\n    };\n  }\n  function hh(t) {\n    return {\n      type: \"Feature\",\n      id: t.id,\n      properties: ph(t),\n      geometry: {\n        type: \"Point\",\n        coordinates: [(e = t.x, 360 * (e - .5)), yh(t.y)]\n      }\n    };\n    var e;\n  }\n  function ph(t) {\n    var e = t.numPoints,\n      r = e >= 1e4 ? \"\".concat(Math.round(e / 1e3), \"k\") : e >= 1e3 ? Math.round(e / 100) / 10 + \"k\" : e;\n    return mh(mh({}, t.properties), {\n      cluster: !0,\n      cluster_id: t.id,\n      point_count: e,\n      point_count_abbreviated: r\n    });\n  }\n  function dh(t) {\n    return t / 360 + .5;\n  }\n  function fh(t) {\n    var e = Math.sin(t * Math.PI / 180),\n      r = .5 - .25 * Math.log((1 + e) / (1 - e)) / Math.PI;\n    return r < 0 ? 0 : r > 1 ? 1 : r;\n  }\n  function yh(t) {\n    var e = (180 - 360 * t) * Math.PI / 180;\n    return 360 * Math.atan(Math.exp(e)) / Math.PI - 90;\n  }\n  function mh(t, e) {\n    for (var _r213 in e) t[_r213] = e[_r213];\n    return t;\n  }\n  function gh(t) {\n    return t.x;\n  }\n  function xh(t) {\n    return t.y;\n  }\n  function vh(t, e, r, n) {\n    for (var i, s = n, a = r - e >> 1, o = r - e, l = t[e], u = t[e + 1], c = t[r], h = t[r + 1], p = e + 3; p < r; p += 3) {\n      var d = bh(t[p], t[p + 1], l, u, c, h);\n      if (d > s) i = p, s = d;else if (d === s) {\n        var f = Math.abs(p - a);\n        f < o && (i = p, o = f);\n      }\n    }\n    s > n && (i - e > 3 && vh(t, e, i, n), t[i + 2] = s, r - i > 3 && vh(t, i, r, n));\n  }\n  function bh(t, e, r, n, i, s) {\n    var a = i - r,\n      o = s - n;\n    if (0 !== a || 0 !== o) {\n      var l = ((t - r) * a + (e - n) * o) / (a * a + o * o);\n      l > 1 ? (r = i, n = s) : l > 0 && (r += a * l, n += o * l);\n    }\n    return (a = t - r) * a + (o = e - n) * o;\n  }\n  function wh(t, e, r, n) {\n    var i = {\n      id: void 0 === t ? null : t,\n      type: e,\n      geometry: r,\n      tags: n,\n      minX: 1 / 0,\n      minY: 1 / 0,\n      maxX: -1 / 0,\n      maxY: -1 / 0\n    };\n    return function (t) {\n      var e = t.geometry,\n        r = t.type;\n      if (\"Point\" === r || \"MultiPoint\" === r || \"LineString\" === r) _h(t, e);else if (\"Polygon\" === r || \"MultiLineString\" === r) for (var n = 0; n < e.length; n++) _h(t, e[n]);else if (\"MultiPolygon\" === r) for (n = 0; n < e.length; n++) for (var i = 0; i < e[n].length; i++) _h(t, e[n][i]);\n    }(i), i;\n  }\n  function _h(t, e) {\n    for (var r = 0; r < e.length; r += 3) t.minX = Math.min(t.minX, e[r]), t.minY = Math.min(t.minY, e[r + 1]), t.maxX = Math.max(t.maxX, e[r]), t.maxY = Math.max(t.maxY, e[r + 1]);\n  }\n  function Sh(t, e, r, n) {\n    if (e.geometry) {\n      var i = e.geometry.coordinates,\n        s = e.geometry.type,\n        a = Math.pow(r.tolerance / ((1 << r.maxZoom) * r.extent), 2),\n        o = [],\n        l = e.id;\n      if (r.promoteId ? l = e.properties[r.promoteId] : r.generateId && (l = n || 0), \"Point\" === s) Ah(i, o);else if (\"MultiPoint\" === s) for (var u = 0; u < i.length; u++) Ah(i[u], o);else if (\"LineString\" === s) kh(i, o, a, !1);else if (\"MultiLineString\" === s) {\n        if (r.lineMetrics) {\n          for (u = 0; u < i.length; u++) kh(i[u], o = [], a, !1), t.push(wh(l, \"LineString\", o, e.properties));\n          return;\n        }\n        Ih(i, o, a, !1);\n      } else if (\"Polygon\" === s) Ih(i, o, a, !0);else {\n        if (\"MultiPolygon\" !== s) {\n          if (\"GeometryCollection\" === s) {\n            for (u = 0; u < e.geometry.geometries.length; u++) Sh(t, {\n              id: l,\n              geometry: e.geometry.geometries[u],\n              properties: e.properties\n            }, r, n);\n            return;\n          }\n          throw new Error(\"Input data is not a valid GeoJSON object.\");\n        }\n        for (u = 0; u < i.length; u++) {\n          var c = [];\n          Ih(i[u], c, a, !0), o.push(c);\n        }\n      }\n      t.push(wh(l, s, o, e.properties));\n    }\n  }\n  function Ah(t, e) {\n    e.push(Mh(t[0])), e.push(Ph(t[1])), e.push(0);\n  }\n  function kh(t, e, r, n) {\n    for (var i, s, a = 0, o = 0; o < t.length; o++) {\n      var l = Mh(t[o][0]),\n        u = Ph(t[o][1]);\n      e.push(l), e.push(u), e.push(0), o > 0 && (a += n ? (i * u - l * s) / 2 : Math.sqrt(Math.pow(l - i, 2) + Math.pow(u - s, 2))), i = l, s = u;\n    }\n    var c = e.length - 3;\n    e[2] = 1, vh(e, 0, c, r), e[c + 2] = 1, e.size = Math.abs(a), e.start = 0, e.end = e.size;\n  }\n  function Ih(t, e, r, n) {\n    for (var i = 0; i < t.length; i++) {\n      var s = [];\n      kh(t[i], s, r, n), e.push(s);\n    }\n  }\n  function Mh(t) {\n    return t / 360 + .5;\n  }\n  function Ph(t) {\n    var e = Math.sin(t * Math.PI / 180),\n      r = .5 - .25 * Math.log((1 + e) / (1 - e)) / Math.PI;\n    return r < 0 ? 0 : r > 1 ? 1 : r;\n  }\n  function Th(t, e, r, n, i, s, a, o) {\n    if (n /= e, s >= (r /= e) && a < n) return t;\n    if (a < r || s >= n) return null;\n    for (var l = [], u = 0; u < t.length; u++) {\n      var c = t[u],\n        h = c.geometry,\n        p = c.type,\n        d = 0 === i ? c.minX : c.minY,\n        f = 0 === i ? c.maxX : c.maxY;\n      if (d >= r && f < n) l.push(c);else if (!(f < r || d >= n)) {\n        var y = [];\n        if (\"Point\" === p || \"MultiPoint\" === p) Ch(h, y, r, n, i);else if (\"LineString\" === p) Eh(h, y, r, n, i, !1, o.lineMetrics);else if (\"MultiLineString\" === p) zh(h, y, r, n, i, !1);else if (\"Polygon\" === p) zh(h, y, r, n, i, !0);else if (\"MultiPolygon\" === p) for (var m = 0; m < h.length; m++) {\n          var g = [];\n          zh(h[m], g, r, n, i, !0), g.length && y.push(g);\n        }\n        if (y.length) {\n          if (o.lineMetrics && \"LineString\" === p) {\n            for (m = 0; m < y.length; m++) l.push(wh(c.id, p, y[m], c.tags));\n            continue;\n          }\n          \"LineString\" !== p && \"MultiLineString\" !== p || (1 === y.length ? (p = \"LineString\", y = y[0]) : p = \"MultiLineString\"), \"Point\" !== p && \"MultiPoint\" !== p || (p = 3 === y.length ? \"Point\" : \"MultiPoint\"), l.push(wh(c.id, p, y, c.tags));\n        }\n      }\n    }\n    return l.length ? l : null;\n  }\n  function Ch(t, e, r, n, i) {\n    for (var s = 0; s < t.length; s += 3) {\n      var a = t[s + i];\n      a >= r && a <= n && (e.push(t[s]), e.push(t[s + 1]), e.push(t[s + 2]));\n    }\n  }\n  function Eh(t, e, r, n, i, s, a) {\n    for (var o, l, u = Dh(t), c = 0 === i ? Lh : Vh, h = t.start, p = 0; p < t.length - 3; p += 3) {\n      var d = t[p],\n        f = t[p + 1],\n        y = t[p + 2],\n        m = t[p + 3],\n        g = t[p + 4],\n        x = 0 === i ? d : f,\n        v = 0 === i ? m : g,\n        b = !1;\n      a && (o = Math.sqrt(Math.pow(d - m, 2) + Math.pow(f - g, 2))), x < r ? v > r && (l = c(u, d, f, m, g, r), a && (u.start = h + o * l)) : x > n ? v < n && (l = c(u, d, f, m, g, n), a && (u.start = h + o * l)) : Bh(u, d, f, y), v < r && x >= r && (l = c(u, d, f, m, g, r), b = !0), v > n && x <= n && (l = c(u, d, f, m, g, n), b = !0), !s && b && (a && (u.end = h + o * l), e.push(u), u = Dh(t)), a && (h += o);\n    }\n    var w = t.length - 3;\n    d = t[w], f = t[w + 1], y = t[w + 2], (x = 0 === i ? d : f) >= r && x <= n && Bh(u, d, f, y), w = u.length - 3, s && w >= 3 && (u[w] !== u[0] || u[w + 1] !== u[1]) && Bh(u, u[0], u[1], u[2]), u.length && e.push(u);\n  }\n  function Dh(t) {\n    var e = [];\n    return e.size = t.size, e.start = t.start, e.end = t.end, e;\n  }\n  function zh(t, e, r, n, i, s) {\n    for (var a = 0; a < t.length; a++) Eh(t[a], e, r, n, i, s, !1);\n  }\n  function Bh(t, e, r, n) {\n    t.push(e), t.push(r), t.push(n);\n  }\n  function Lh(t, e, r, n, i, s) {\n    var a = (s - e) / (n - e);\n    return t.push(s), t.push(r + (i - r) * a), t.push(1), a;\n  }\n  function Vh(t, e, r, n, i, s) {\n    var a = (s - r) / (i - r);\n    return t.push(e + (n - e) * a), t.push(s), t.push(1), a;\n  }\n  function Fh(t, e) {\n    for (var r = [], n = 0; n < t.length; n++) {\n      var i,\n        s = t[n],\n        a = s.type;\n      if (\"Point\" === a || \"MultiPoint\" === a || \"LineString\" === a) i = Rh(s.geometry, e);else if (\"MultiLineString\" === a || \"Polygon\" === a) {\n        i = [];\n        for (var o = 0; o < s.geometry.length; o++) i.push(Rh(s.geometry[o], e));\n      } else if (\"MultiPolygon\" === a) for (i = [], o = 0; o < s.geometry.length; o++) {\n        for (var l = [], u = 0; u < s.geometry[o].length; u++) l.push(Rh(s.geometry[o][u], e));\n        i.push(l);\n      }\n      r.push(wh(s.id, a, i, s.tags));\n    }\n    return r;\n  }\n  function Rh(t, e) {\n    var r = [];\n    r.size = t.size, void 0 !== t.start && (r.start = t.start, r.end = t.end);\n    for (var n = 0; n < t.length; n += 3) r.push(t[n] + e, t[n + 1], t[n + 2]);\n    return r;\n  }\n  function jh(t, e) {\n    if (t.transformed) return t;\n    var r,\n      n,\n      i,\n      s = 1 << t.z,\n      a = t.x,\n      o = t.y;\n    for (r = 0; r < t.features.length; r++) {\n      var l = t.features[r],\n        u = l.geometry,\n        c = l.type;\n      if (l.geometry = [], 1 === c) for (n = 0; n < u.length; n += 2) l.geometry.push(Oh(u[n], u[n + 1], e, s, a, o));else for (n = 0; n < u.length; n++) {\n        var h = [];\n        for (i = 0; i < u[n].length; i += 2) h.push(Oh(u[n][i], u[n][i + 1], e, s, a, o));\n        l.geometry.push(h);\n      }\n    }\n    return t.transformed = !0, t;\n  }\n  function Oh(t, e, r, n, i, s) {\n    return [Math.round(r * (t * n - i)), Math.round(r * (e * n - s))];\n  }\n  function $h(t, e, r, n, i) {\n    for (var s = e === i.maxZoom ? 0 : i.tolerance / ((1 << e) * i.extent), a = {\n        features: [],\n        numPoints: 0,\n        numSimplified: 0,\n        numFeatures: 0,\n        source: null,\n        x: r,\n        y: n,\n        z: e,\n        transformed: !1,\n        minX: 2,\n        minY: 1,\n        maxX: -1,\n        maxY: 0\n      }, o = 0; o < t.length; o++) {\n      a.numFeatures++, Uh(a, t[o], s, i);\n      var l = t[o].minX,\n        u = t[o].minY,\n        c = t[o].maxX,\n        h = t[o].maxY;\n      l < a.minX && (a.minX = l), u < a.minY && (a.minY = u), c > a.maxX && (a.maxX = c), h > a.maxY && (a.maxY = h);\n    }\n    return a;\n  }\n  function Uh(t, e, r, n) {\n    var i = e.geometry,\n      s = e.type,\n      a = [];\n    if (\"Point\" === s || \"MultiPoint\" === s) for (var o = 0; o < i.length; o += 3) a.push(i[o]), a.push(i[o + 1]), t.numPoints++, t.numSimplified++;else if (\"LineString\" === s) qh(a, i, t, r, !1, !1);else if (\"MultiLineString\" === s || \"Polygon\" === s) for (o = 0; o < i.length; o++) qh(a, i[o], t, r, \"Polygon\" === s, 0 === o);else if (\"MultiPolygon\" === s) for (var l = 0; l < i.length; l++) {\n      var u = i[l];\n      for (o = 0; o < u.length; o++) qh(a, u[o], t, r, !0, 0 === o);\n    }\n    if (a.length) {\n      var c = e.tags || null;\n      if (\"LineString\" === s && n.lineMetrics) {\n        for (var h in c = {}, e.tags) c[h] = e.tags[h];\n        c.mapbox_clip_start = i.start / i.size, c.mapbox_clip_end = i.end / i.size;\n      }\n      var p = {\n        geometry: a,\n        type: \"Polygon\" === s || \"MultiPolygon\" === s ? 3 : \"LineString\" === s || \"MultiLineString\" === s ? 2 : 1,\n        tags: c\n      };\n      null !== e.id && (p.id = e.id), t.features.push(p);\n    }\n  }\n  function qh(t, e, r, n, i, s) {\n    var a = n * n;\n    if (n > 0 && e.size < (i ? a : n)) r.numPoints += e.length / 3;else {\n      for (var o = [], l = 0; l < e.length; l += 3) (0 === n || e[l + 2] > a) && (r.numSimplified++, o.push(e[l]), o.push(e[l + 1])), r.numPoints++;\n      i && function (t, e) {\n        for (var r = 0, n = 0, i = t.length, s = i - 2; n < i; s = n, n += 2) r += (t[n] - t[s]) * (t[n + 1] + t[s + 1]);\n        if (r > 0 === e) for (n = 0, i = t.length; n < i / 2; n += 2) {\n          var a = t[n],\n            o = t[n + 1];\n          t[n] = t[i - 2 - n], t[n + 1] = t[i - 1 - n], t[i - 2 - n] = a, t[i - 1 - n] = o;\n        }\n      }(o, s), t.push(o);\n    }\n  }\n  function Nh(t, e) {\n    var r = (e = this.options = function (t, e) {\n      for (var r in e) t[r] = e[r];\n      return t;\n    }(Object.create(this.options), e)).debug;\n    if (r && console.time(\"preprocess data\"), e.maxZoom < 0 || e.maxZoom > 24) throw new Error(\"maxZoom should be in the 0-24 range\");\n    if (e.promoteId && e.generateId) throw new Error(\"promoteId and generateId cannot be used together.\");\n    var n = function (t, e) {\n      var r = [];\n      if (\"FeatureCollection\" === t.type) for (var n = 0; n < t.features.length; n++) Sh(r, t.features[n], e, n);else Sh(r, \"Feature\" === t.type ? t : {\n        geometry: t\n      }, e);\n      return r;\n    }(t, e);\n    this.tiles = {}, this.tileCoords = [], r && (console.timeEnd(\"preprocess data\"), console.log(\"index: maxZoom: %d, maxPoints: %d\", e.indexMaxZoom, e.indexMaxPoints), console.time(\"generate tiles\"), this.stats = {}, this.total = 0), n = function (t, e) {\n      var r = e.buffer / e.extent,\n        n = t,\n        i = Th(t, 1, -1 - r, r, 0, -1, 2, e),\n        s = Th(t, 1, 1 - r, 2 + r, 0, -1, 2, e);\n      return (i || s) && (n = Th(t, 1, -r, 1 + r, 0, -1, 2, e) || [], i && (n = Fh(i, 1).concat(n)), s && (n = n.concat(Fh(s, -1)))), n;\n    }(n, e), n.length && this.splitTile(n, 0, 0, 0), r && (n.length && console.log(\"features: %d, points: %d\", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd(\"generate tiles\"), console.log(\"tiles generated:\", this.total, JSON.stringify(this.stats)));\n  }\n  function Gh(t, e, r) {\n    return 32 * ((1 << t) * r + e) + t;\n  }\n  function Zh(t, e) {\n    var r = t.tileID.canonical;\n    if (!this._geoJSONIndex) return e(null, null);\n    var n = this._geoJSONIndex.getTile(r.z, r.x, r.y);\n    if (!n) return e(null, null);\n    var i = new GeoJSONWrapper$2(n.features);\n    var s = Vc(i);\n    0 === s.byteOffset && s.byteLength === s.buffer.byteLength || (s = new Uint8Array(s)), e(null, {\n      vectorTile: i,\n      rawData: s.buffer\n    });\n  }\n  Nh.prototype.options = {\n    maxZoom: 14,\n    indexMaxZoom: 5,\n    indexMaxPoints: 1e5,\n    tolerance: 3,\n    extent: 4096,\n    buffer: 64,\n    lineMetrics: !1,\n    promoteId: null,\n    generateId: !1,\n    debug: 0\n  }, Nh.prototype.splitTile = function (t, e, r, n, i, s, a) {\n    for (var o = [t, e, r, n], l = this.options, u = l.debug; o.length;) {\n      n = o.pop(), r = o.pop(), e = o.pop(), t = o.pop();\n      var c = 1 << e,\n        h = Gh(e, r, n),\n        p = this.tiles[h];\n      if (!p && (u > 1 && console.time(\"creation\"), p = this.tiles[h] = $h(t, e, r, n, l), this.tileCoords.push({\n        z: e,\n        x: r,\n        y: n\n      }), u)) {\n        u > 1 && (console.log(\"tile z%d-%d-%d (features: %d, points: %d, simplified: %d)\", e, r, n, p.numFeatures, p.numPoints, p.numSimplified), console.timeEnd(\"creation\"));\n        var d = \"z\" + e;\n        this.stats[d] = (this.stats[d] || 0) + 1, this.total++;\n      }\n      if (p.source = t, i) {\n        if (e === l.maxZoom || e === i) continue;\n        var f = 1 << i - e;\n        if (r !== Math.floor(s / f) || n !== Math.floor(a / f)) continue;\n      } else if (e === l.indexMaxZoom || p.numPoints <= l.indexMaxPoints) continue;\n      if (p.source = null, 0 !== t.length) {\n        u > 1 && console.time(\"clipping\");\n        var y,\n          m,\n          g,\n          x,\n          v,\n          b,\n          w = .5 * l.buffer / l.extent,\n          _ = .5 - w,\n          S = .5 + w,\n          A = 1 + w;\n        y = m = g = x = null, v = Th(t, c, r - w, r + S, 0, p.minX, p.maxX, l), b = Th(t, c, r + _, r + A, 0, p.minX, p.maxX, l), t = null, v && (y = Th(v, c, n - w, n + S, 1, p.minY, p.maxY, l), m = Th(v, c, n + _, n + A, 1, p.minY, p.maxY, l), v = null), b && (g = Th(b, c, n - w, n + S, 1, p.minY, p.maxY, l), x = Th(b, c, n + _, n + A, 1, p.minY, p.maxY, l), b = null), u > 1 && console.timeEnd(\"clipping\"), o.push(y || [], e + 1, 2 * r, 2 * n), o.push(m || [], e + 1, 2 * r, 2 * n + 1), o.push(g || [], e + 1, 2 * r + 1, 2 * n), o.push(x || [], e + 1, 2 * r + 1, 2 * n + 1);\n      }\n    }\n  }, Nh.prototype.getTile = function (t, e, r) {\n    var n = this.options,\n      i = n.extent,\n      s = n.debug;\n    if (t < 0 || t > 24) return null;\n    var a = 1 << t,\n      o = Gh(t, e = (e % a + a) % a, r);\n    if (this.tiles[o]) return jh(this.tiles[o], i);\n    s > 1 && console.log(\"drilling down to z%d-%d-%d\", t, e, r);\n    for (var l, u = t, c = e, h = r; !l && u > 0;) u--, c = Math.floor(c / 2), h = Math.floor(h / 2), l = this.tiles[Gh(u, c, h)];\n    return l && l.source ? (s > 1 && console.log(\"found parent tile z%d-%d-%d\", u, c, h), s > 1 && console.time(\"drilling down\"), this.splitTile(l.source, u, c, h, t, e, r), s > 1 && console.timeEnd(\"drilling down\"), this.tiles[o] ? jh(this.tiles[o], i) : null) : null;\n  };\n  var GeoJSONWorkerSource = /*#__PURE__*/function (_VectorTileWorkerSour) {\n    _inherits(GeoJSONWorkerSource, _VectorTileWorkerSour);\n    function GeoJSONWorkerSource(t, e, r, n, i) {\n      var _this55;\n      _classCallCheck(this, GeoJSONWorkerSource);\n      _this55 = _possibleConstructorReturn(this, _getPrototypeOf(GeoJSONWorkerSource).call(this, t, e, r, n, Zh)), i && (_this55.loadGeoJSON = i);\n      return _this55;\n    }\n    _createClass(GeoJSONWorkerSource, [{\n      key: \"loadData\",\n      value: function loadData(t, e) {\n        var _this56 = this;\n        var r = t && t.request,\n          n = r && r.collectResourceTiming;\n        this.loadGeoJSON(t, function (i, s) {\n          if (i || !s) return e(i);\n          if (\"object\" != typeof s) return e(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n          {\n            Dc(s, !0);\n            try {\n              if (t.filter) {\n                var _e252 = Ye(t.filter, {\n                  type: \"boolean\",\n                  \"property-type\": \"data-driven\",\n                  overridable: !1,\n                  transition: !1\n                });\n                if (\"error\" === _e252.result) throw new Error(_e252.value.map(function (t) {\n                  return \"\".concat(t.key, \": \").concat(t.message);\n                }).join(\", \"));\n                var _r214 = s.features.filter(function (t) {\n                  return _e252.value.evaluate({\n                    zoom: 0\n                  }, t);\n                });\n                s = {\n                  type: \"FeatureCollection\",\n                  features: _r214\n                };\n              }\n              _this56._geoJSONIndex = t.cluster ? new Supercluster(function (_ref125) {\n                var t = _ref125.superclusterOptions,\n                  e = _ref125.clusterProperties;\n                if (!e || !t) return t;\n                var r = {},\n                  n = {},\n                  i = {\n                    accumulated: null,\n                    zoom: 0\n                  },\n                  s = {\n                    properties: null\n                  },\n                  a = Object.keys(e);\n                for (var _i146 = 0, _a98 = a; _i146 < _a98.length; _i146++) {\n                  var _t281 = _a98[_i146];\n                  var _e$_t = _slicedToArray(e[_t281], 2),\n                    _i147 = _e$_t[0],\n                    _s109 = _e$_t[1],\n                    _a99 = Ye(_s109),\n                    _o61 = Ye(\"string\" == typeof _i147 ? [_i147, [\"accumulated\"], [\"get\", _t281]] : _i147);\n                  r[_t281] = _a99.value, n[_t281] = _o61.value;\n                }\n                return t.map = function (t) {\n                  s.properties = t;\n                  var e = {};\n                  for (var _i148 = 0, _a100 = a; _i148 < _a100.length; _i148++) {\n                    var _t282 = _a100[_i148];\n                    e[_t282] = r[_t282].evaluate(i, s);\n                  }\n                  return e;\n                }, t.reduce = function (t, e) {\n                  s.properties = e;\n                  for (var _i149 = 0, _a101 = a; _i149 < _a101.length; _i149++) {\n                    var _e253 = _a101[_i149];\n                    i.accumulated = t[_e253], t[_e253] = n[_e253].evaluate(i, s);\n                  }\n                }, t;\n              }(t)).load(s.features) : function (t, e) {\n                return new Nh(t, e);\n              }(s, t.geojsonVtOptions);\n            } catch (i) {\n              return e(i);\n            }\n            _this56.loaded = {};\n            var _a102 = {};\n            if (n) {\n              var _e254 = Fr(r);\n              _e254 && (_a102.resourceTiming = {}, _a102.resourceTiming[t.source] = JSON.parse(JSON.stringify(_e254)));\n            }\n            e(null, _a102);\n          }\n        });\n      }\n    }, {\n      key: \"reloadTile\",\n      value: function reloadTile(t, e) {\n        var r = this.loaded;\n        return r && r[t.uid] ? _get(_getPrototypeOf(GeoJSONWorkerSource.prototype), \"reloadTile\", this).call(this, t, e) : this.loadTile(t, e);\n      }\n    }, {\n      key: \"loadGeoJSON\",\n      value: function loadGeoJSON(t, e) {\n        if (t.request) !function (t, e) {\n          Ir(p(t, {\n            type: \"json\"\n          }), e);\n        }(t.request, e);else {\n          if (\"string\" != typeof t.data) return e(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n          try {\n            return e(null, JSON.parse(t.data));\n          } catch (r) {\n            return e(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n          }\n        }\n      }\n    }, {\n      key: \"getClusterExpansionZoom\",\n      value: function getClusterExpansionZoom(t, e) {\n        try {\n          e(null, this._geoJSONIndex.getClusterExpansionZoom(t.clusterId));\n        } catch (t) {\n          e(t);\n        }\n      }\n    }, {\n      key: \"getClusterChildren\",\n      value: function getClusterChildren(t, e) {\n        try {\n          e(null, this._geoJSONIndex.getChildren(t.clusterId));\n        } catch (t) {\n          e(t);\n        }\n      }\n    }, {\n      key: \"getClusterLeaves\",\n      value: function getClusterLeaves(t, e) {\n        try {\n          e(null, this._geoJSONIndex.getLeaves(t.clusterId, t.limit, t.offset));\n        } catch (t) {\n          e(t);\n        }\n      }\n    }]);\n    return GeoJSONWorkerSource;\n  }(VectorTileWorkerSource);\n  var Worker = /*#__PURE__*/function () {\n    function Worker(t) {\n      var _this57 = this;\n      _classCallCheck(this, Worker);\n      this.self = t, this.actor = new Actor(t, this), this.layerIndexes = {}, this.availableImages = {}, this.isSpriteLoaded = {}, this.projections = {}, this.defaultProjection = qu({\n        name: \"mercator\"\n      }), this.workerSourceTypes = {\n        vector: VectorTileWorkerSource,\n        geojson: GeoJSONWorkerSource\n      }, this.workerSources = {}, this.demWorkerSources = {}, this.self.registerWorkerSource = function (t, e) {\n        if (_this57.workerSourceTypes[t]) throw new Error(\"Worker source with name \\\"\".concat(t, \"\\\" already registered.\"));\n        _this57.workerSourceTypes[t] = e;\n      }, this.self.registerRTLTextPlugin = function (t) {\n        if (vi.isParsed()) throw new Error(\"RTL text plugin already registered.\");\n        vi.applyArabicShaping = t.applyArabicShaping, vi.processBidirectionalText = t.processBidirectionalText, vi.processStyledBidirectionalText = t.processStyledBidirectionalText;\n      };\n    }\n    _createClass(Worker, [{\n      key: \"clearCaches\",\n      value: function clearCaches(t, e, r) {\n        delete this.layerIndexes[t], delete this.availableImages[t], delete this.workerSources[t], delete this.demWorkerSources[t], r();\n      }\n    }, {\n      key: \"checkIfReady\",\n      value: function checkIfReady(t, e, r) {\n        r();\n      }\n    }, {\n      key: \"setReferrer\",\n      value: function setReferrer(t, e) {\n        this.referrer = e;\n      }\n    }, {\n      key: \"spriteLoaded\",\n      value: function spriteLoaded(t, e) {\n        this.isSpriteLoaded[t] = e;\n        for (var _r215 in this.workerSources[t]) {\n          var _n151 = this.workerSources[t][_r215];\n          for (var _t283 in _n151) _n151[_t283] instanceof VectorTileWorkerSource && (_n151[_t283].isSpriteLoaded = e, _n151[_t283].fire(new Event(\"isSpriteLoaded\")));\n        }\n      }\n    }, {\n      key: \"setImages\",\n      value: function setImages(t, e, r) {\n        this.availableImages[t] = e;\n        for (var _r216 in this.workerSources[t]) {\n          var _n152 = this.workerSources[t][_r216];\n          for (var _t284 in _n152) _n152[_t284].availableImages = e;\n        }\n        r();\n      }\n    }, {\n      key: \"enableTerrain\",\n      value: function enableTerrain(t, e, r) {\n        this.terrain = e, r();\n      }\n    }, {\n      key: \"setProjection\",\n      value: function setProjection(t, e) {\n        this.projections[t] = qu(e);\n      }\n    }, {\n      key: \"setLayers\",\n      value: function setLayers(t, e, r) {\n        this.getLayerIndex(t).replace(e), r();\n      }\n    }, {\n      key: \"updateLayers\",\n      value: function updateLayers(t, e, r) {\n        this.getLayerIndex(t).update(e.layers, e.removedIds), r();\n      }\n    }, {\n      key: \"loadTile\",\n      value: function loadTile(t, e, r) {\n        var n = this.enableTerrain ? p({\n          enableTerrain: this.terrain\n        }, e) : e;\n        n.projection = this.projections[t] || this.defaultProjection, this.getWorkerSource(t, e.type, e.source).loadTile(n, r);\n      }\n    }, {\n      key: \"loadDEMTile\",\n      value: function loadDEMTile(t, e, r) {\n        var n = this.enableTerrain ? p({\n          buildQuadTree: this.terrain\n        }, e) : e;\n        this.getDEMWorkerSource(t, e.source).loadTile(n, r);\n      }\n    }, {\n      key: \"reloadTile\",\n      value: function reloadTile(t, e, r) {\n        var n = this.enableTerrain ? p({\n          enableTerrain: this.terrain\n        }, e) : e;\n        n.projection = this.projections[t] || this.defaultProjection, this.getWorkerSource(t, e.type, e.source).reloadTile(n, r);\n      }\n    }, {\n      key: \"abortTile\",\n      value: function abortTile(t, e, r) {\n        this.getWorkerSource(t, e.type, e.source).abortTile(e, r);\n      }\n    }, {\n      key: \"removeTile\",\n      value: function removeTile(t, e, r) {\n        this.getWorkerSource(t, e.type, e.source).removeTile(e, r);\n      }\n    }, {\n      key: \"removeSource\",\n      value: function removeSource(t, e, r) {\n        if (!this.workerSources[t] || !this.workerSources[t][e.type] || !this.workerSources[t][e.type][e.source]) return;\n        var n = this.workerSources[t][e.type][e.source];\n        delete this.workerSources[t][e.type][e.source], void 0 !== n.removeSource ? n.removeSource(e, r) : r();\n      }\n    }, {\n      key: \"loadWorkerSource\",\n      value: function loadWorkerSource(t, e, r) {\n        try {\n          this.self.importScripts(e.url), r();\n        } catch (t) {\n          r(t.toString());\n        }\n      }\n    }, {\n      key: \"syncRTLPluginState\",\n      value: function syncRTLPluginState(t, e, r) {\n        try {\n          vi.setState(e);\n          var _t285 = vi.getPluginURL();\n          if (vi.isLoaded() && !vi.isParsed() && null != _t285) {\n            this.self.importScripts(_t285);\n            var _e255 = vi.isParsed();\n            r(_e255 ? void 0 : new Error(\"RTL Text Plugin failed to import scripts from \".concat(_t285)), _e255);\n          }\n        } catch (t) {\n          r(t.toString());\n        }\n      }\n    }, {\n      key: \"getAvailableImages\",\n      value: function getAvailableImages(t) {\n        var e = this.availableImages[t];\n        return e || (e = []), e;\n      }\n    }, {\n      key: \"getLayerIndex\",\n      value: function getLayerIndex(t) {\n        var e = this.layerIndexes[t];\n        return e || (e = this.layerIndexes[t] = new StyleLayerIndex()), e;\n      }\n    }, {\n      key: \"getWorkerSource\",\n      value: function getWorkerSource(t, e, r) {\n        var _this58 = this;\n        if (this.workerSources[t] || (this.workerSources[t] = {}), this.workerSources[t][e] || (this.workerSources[t][e] = {}), !this.workerSources[t][e][r]) {\n          var _n153 = {\n            send: function send(e, r, n, i, s, a) {\n              _this58.actor.send(e, r, n, t, s, a);\n            },\n            scheduler: this.actor.scheduler\n          };\n          this.workerSources[t][e][r] = new this.workerSourceTypes[e](_n153, this.getLayerIndex(t), this.getAvailableImages(t), this.isSpriteLoaded[t]);\n        }\n        return this.workerSources[t][e][r];\n      }\n    }, {\n      key: \"getDEMWorkerSource\",\n      value: function getDEMWorkerSource(t, e) {\n        return this.demWorkerSources[t] || (this.demWorkerSources[t] = {}), this.demWorkerSources[t][e] || (this.demWorkerSources[t][e] = new RasterDEMTileWorkerSource()), this.demWorkerSources[t][e];\n      }\n    }, {\n      key: \"enforceCacheSizeLimit\",\n      value: function enforceCacheSizeLimit(t, e) {\n        !function (t) {\n          Sr(), wr && wr.then(function (e) {\n            e.keys().then(function (r) {\n              for (var _n154 = 0; _n154 < r.length - t; _n154++) e.delete(r[_n154]);\n            });\n          });\n        }(e);\n      }\n    }, {\n      key: \"getWorkerPerformanceMetrics\",\n      value: function getWorkerPerformanceMetrics(t, e, r) {\n        r(void 0, void 0);\n      }\n    }]);\n    return Worker;\n  }();\n  return \"undefined\" != typeof WorkerGlobalScope && \"undefined\" != typeof self && self instanceof WorkerGlobalScope && (self.worker = new Worker(self)), Worker;\n}();","map":null,"metadata":{},"sourceType":"script"}