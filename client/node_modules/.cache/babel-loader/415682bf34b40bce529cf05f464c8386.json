{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\ASUS VivoBook\\\\Desktop\\\\PI - Copie\\\\client\\\\src\\\\contexts\\\\AuthContext.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from '../lib/axios';\nexport var AuthContext = React.createContext(null);\nexport function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  useEffect(function () {\n    axios.get('/users/getCurrent').then(function (res) {\n      if (res.data) setUser(res.data);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }, []);\n  useEffect(function () {\n    console.log(\"user = \");\n    console.log(user);\n  }, [user]);\n  var login = function login(usr) {\n    setUser(usr);\n  };\n  var logout = function logout() {\n    console.log('logged out');\n    axios.get('/auth/logout').then(setUser(null)).catch(function (err) {\n      return console.log(err);\n    });\n    localStorage.removeItem('token');\n  };\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      user: user,\n      login: login,\n      logout: logout\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, children);\n}\nexport default AuthContext;","map":{"version":3,"names":["React","useEffect","useState","axios","AuthContext","createContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","get","then","res","data","catch","err","console","log","login","usr","logout","localStorage","removeItem","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["C:/Users/ASUS VivoBook/Desktop/PI - Copie/client/src/contexts/AuthContext.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from '../lib/axios';\n\nexport const AuthContext = React.createContext(null);\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    axios\n      .get('/users/getCurrent')\n      .then((res) => {\n        if (res.data) setUser(res.data);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    console.log(`user = `);\n    console.log(user);\n  }, [user]);\n\n  const login = (usr) => {\n    setUser(usr);\n  };\n\n  const logout = () => {\n    console.log('logged out');\n    axios\n      .get('/auth/logout')\n      .then(setUser(null))\n      .catch((err) => console.log(err));\n    localStorage.removeItem('token');\n  };\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContext;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,cAAc;AAEhC,OAAO,IAAMC,WAAW,GAAGJ,KAAK,CAACK,aAAa,CAAC,IAAI,CAAC;AAEpD,OAAO,SAASC,YAAYA,CAAAC,IAAA,EAAe;EAAA,IAAZC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAAA,IAAAC,SAAA,GACbP,QAAQ,CAAC,IAAI,CAAC;IAAAQ,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA;EAEpBT,SAAS,CAAC,YAAM;IACdE,KAAK,CACFW,GAAG,CAAC,mBAAmB,CAAC,CACxBC,IAAI,CAAC,UAACC,GAAG,EAAK;MACb,IAAIA,GAAG,CAACC,IAAI,EAAEJ,OAAO,CAACG,GAAG,CAACC,IAAI,CAAC;IACjC,CAAC,CAAC,CACDC,KAAK,CAAC,UAACC,GAAG;MAAA,OAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAAA,EAAC;EACrC,CAAC,EAAE,EAAE,CAAC;EAENlB,SAAS,CAAC,YAAM;IACdmB,OAAO,CAACC,GAAG,UAAU,CAAC;IACtBD,OAAO,CAACC,GAAG,CAACT,IAAI,CAAC;EACnB,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,IAAMU,KAAK,GAAG,SAARA,KAAKA,CAAIC,GAAG,EAAK;IACrBV,OAAO,CAACU,GAAG,CAAC;EACd,CAAC;EAED,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAA,EAAS;IACnBJ,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;IACzBlB,KAAK,CACFW,GAAG,CAAC,cAAc,CAAC,CACnBC,IAAI,CAACF,OAAO,CAAC,IAAI,CAAC,CAAC,CACnBK,KAAK,CAAC,UAACC,GAAG;MAAA,OAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAAA,EAAC;IACnCM,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;EAClC,CAAC;EACD,oBACE1B,KAAA,CAAA2B,aAAA,CAACvB,WAAW,CAACwB,QAAQ;IAACC,KAAK,EAAE;MAAEjB,IAAI,EAAJA,IAAI;MAAEU,KAAK,EAALA,KAAK;MAAEE,MAAM,EAANA;IAAO,CAAE;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAClD3B,QACmB,CAAC;AAE3B;AAEA,eAAeJ,WAAW"},"metadata":{},"sourceType":"module"}